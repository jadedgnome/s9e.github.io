<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		pre, code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		pre code
		{
			border: 0;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
		p
		{
			margin: 0;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash like \*this\*
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments <!-- like this one -->
 - **HTMLElements** --- several HTML elements such as <sub>sub</sub> and <sup>sup</sup> are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:  
   http://youtu.be/QH2-TGUlwu4

***

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 29.3 KB (12.3 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var l=[0,0],m=["","id"],ba={d:0},n=[ea],ga=[fa],ja=[ia],ka={d:514},ma=[la],na=[65376,7936],oa=[65399,7936],pa={d:3073},p=[65393,7936],qa=[65344,7952],sa=[65352,7936],za=[65344,7936],Aa={d:3201},Ba=[64371,7936],r={d:3137},Ca=[61287,7936],Da={p:!0},u={p:!1},Fa=[Ea,ea],Ga={"class":u},Ha=["url",/^(\d+)$/,m],La={b:[Ia],p:!1},Ma={b:ma,p:!0},w={b:ma,p:!1},z={b:ga,p:!1},Na={id:{b:ga,p:!0},url:w},Oa={c:l,f:0,b:n,g:10,e:{d:66},i:1E3},Pa={c:p,f:0,b:n,g:10,e:ba,i:1E3},Qa={c:p,f:0,b:n,g:10,e:{d:2},i:1E3},Ra={c:oa,
f:0,b:n,g:10,e:{d:512},i:1E3},A={C:1,EM:1,EMAIL:1,STRONG:1,URL:1,"html:b":1,"html:code":1,"html:i":1,"html:strong":1,"html:u":1},Sa={d:268,o:A},Ta={d:3460,o:A},Wa={c:na,j:{"char":Da},f:5,b:n,g:10,e:pa,i:1E3},Xa={w:{"html:td":1,"html:th":1},d:264,o:A},Ya={w:{"html:dd":1,"html:dt":1},d:256,o:A},Za={w:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},d:256,o:A},$a={c:p,f:2,b:n,g:10,e:{d:260,o:A},i:1E3},ab={c:sa,f:1,b:n,g:10,e:Ta,i:1E3},bb={c:oa,f:3,b:n,g:10,e:{w:{LI:1,"html:li":1},d:264,o:A},i:1E3},
cb='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aBANDCAMP"><$l$n400"$m400"$b><$i$osrc">//bandcamp.com/EmbeddedPlayer/size=large/minimal=true/<$j><$h$k@album_id">album=$c@album_id"/><$p$k@track_num">/t=$c@track_num"/></$p></$h><$f>track=$c@track_id"/></$f></$j></$i></$l>$d$aC"><code>$e</code>$d$aCODE"><pre><code class="{@lang}">$e</code></pre>$d$aDAILYMOTION"><$l$n560"$m315"$r//www.dailymotion.com/embed/video/{@id}"$b/>$d$aDEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:dd|html:del|html:dl|html:dt|html:i|html:ins|html:li|html:ol|html:pre|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|html:ul|p"><xsl:element$o{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}">$e</xsl:element>$d$aEMAIL"><a href="mailto:{@email}">$e</a>$d$aFACEBOOK"><$l$n560"$m315"$r//s9e.github.io/$l/facebook.min.html#{@id}" onload="var a=Math.random();window.addEventListener(\'message\',function(b){{if(b.data.id==a)style.height=b.data.height+\'px\'}});contentWindow.postMessage(\'s9e:\'+a,src.substr(0,src.indexOf(\'/\',8)))"$b/>$d$aFP|HE">$c@char"/>$d$aHC"><xsl:comment>$c@content"/></xsl:comment>$d$aHR"><hr/>$d$aIMG"><img$r{@src}">$galt|@title"/></img>$d$aLIST"><$j><$h$knot(@type)"><ul>$e</ul></$h><$f><ol>$e</ol></$f></$j>$d$aLIVELEAK"><$l$n640"$m360"$rhttp://www.liveleak.com/ll_embed?i={@id}"$b/>$d$aQUOTE"><blockquote>$e</blockquote>$d$aSOUNDCLOUD"><$l$n100%" style="max-width:900px"$b><$i$oheight"><$j><$h$k$q>450</$h><$f>166</$f></$j></$i><$i$osrc">https://w.soundcloud.com/player/?url=<$j><$h$k$q>https%3A//api.soundcloud.com/playlists/$c$q/></$h><$h$k@track_id">https%3A//api.soundcloud.com/tracks/$c@track_id"/></$h><$f><$p$knot(contains(@id,\'://\'))">https%3A//soundcloud.com/</$p>$c@id"/></$f></$j></$i></$l>$d$aSPOTIFY"><$l$n400"$m480"$b><$i$osrc">https://embed.spotify.com/?view=coverart&amp;uri=<$j><$h$k@uri">$c@uri"/></$h><$f>spotify:$ctranslate(@path,\'/\',\':\')"/></$f></$j></$i></$l>$d$aTWITCH"><$l$n620"$m378"$b><$i$osrc">//s9e.github.io/$l/twitch.min.html#channel=$c@channel"/><$j><$h$k@archive_id">&amp;videoId=a$c@archive_id"/></$h><$h$k@chapter_id">&amp;videoId=c$c@chapter_id"/></$h><$h$k@video_id">&amp;videoId=v$c@video_id"/></$h></$j></$i></$l>$d$aURL"><a href="{@url}">$gtitle"/>$e</a>$d$aVIMEO"><$l$n560"$m315"$r//player.vimeo.com/video/{@id}"$b/>$d$aVINE"><$l$n480"$m480"$rhttps://vine.co/v/{@id}/embed/simple?audio=1"$b/>$d$aYOUTUBE"><$l$n560"$m315"$b><$i$osrc">//www.youtube.com/embed/$c@id"/><$p$k@list">?list=$c@list"/></$p><$p$k@t or@m"><$j><$h$k@list">&amp;</$h><$f>?</$f></$j>start=<$j><$h$k@t">$c@t"/></$h><$h$k@h">$c@h*3600+@m*60+@s"/></$h><$f>$c@m*60+@s"/></$f></$j></$p></$i></$l>$d$abr"><br/>$d$ae|i|s"/>$ahtml:abbr"><abbr>$gtitle"/>$e</abbr>$d$ahtml:div"><div>$gclass"/>$e</div>$d$ahtml:img"><img>$galt|@height|@src|@title|@width"/>$e</img>$d$ahtml:span"><span>$gclass"/>$e</span>$d$ahtml:td"><td>$gcolspan|@rowspan"/>$e</td>$d$ahtml:th"><th>$gcolspan|@rowspan|@scope"/>$e</th>$d</xsl:stylesheet>'.replace(/\$[a-r]/g,
function(a){return{$a:'<xsl:template match="',$b:' allowfullscreen="" frameborder="0" scrolling="no"',$c:'<xsl:value-of select="',$d:"</xsl:template>",$e:"<xsl:apply-templates/>",$f:"xsl:otherwise",$g:'<xsl:copy-of select="@',$h:"xsl:when",$i:"xsl:attribute",$j:"xsl:choose",$k:' test="',$l:"iframe",$m:' height="',$n:' width="',$o:' name="',$p:"xsl:if",$q:'@playlist_id"',$r:' src="'}[a]});function db(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}
function eb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function fb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function gb(){return!0}function hb(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function C(a,b){return b.test(a)?a:!1}
function ib(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function jb(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=hb(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+hb(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function kb(a,b){if(""!==b.scheme&&!a.N.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.P&&a.P.test(b.host)||a.V&&!a.V.test(b.host))return"URL host is not allowed"}}function lb(){}lb.prototype={n:function(){}};function mb(a,b,c,d){this.r=a;this.l=b;this.k=c;this.u=d;this.j={};this.G=[];isNaN(a+c+d)&&D(this)}mb.prototype.E=!1;mb.prototype.q=0;function nb(a,b){a.G.push(b);a.E&&D(b)}function D(a){a.E||(a.E=!0,a.G.forEach(function(a){D(a)}))}
function E(a,b){a.l===b.l&&(1===a.r&&2===b.r&&b.k>=a.k?(a.y=b,b.F=a,nb(a,b)):2===a.r&&1===b.r&&b.k<=a.k&&(a.F=b,b.y=a))}function ob(a){a.q=1E3}function pb(a){var b={},c;for(c in a.j)b[c]=a.j[c];return b}function qb(a,b){return a.E||a.l!==b.l||1!==b.r||2!==a.r||a.k<b.k||a.F&&a.F!==b||b.y&&b.y!==a?!1:!0}mb.prototype.n=function(a,b){this.j[a]=b};function rb(a,b){a.j={};for(var c in b)a.j[c]=b[c]}
var sb,tb,ub,F,vb,L,wb,xb=new lb,yb,M,O,zb={Autoemail:{x:function(a,b){b.forEach(function(a){var b=P(1,"EMAIL",a[0][1],0);b.n("email",a[0][0]);a=P(2,"EMAIL",a[0][1]+a[0][0].length,0);E(b,a)})},z:"@",A:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,B:1E4},Autolink:{x:function(a,b){b.forEach(function(c){var b=c[0][1];if(!(0<b&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(b-1)))){for(c=c[0][0];;)if(c=c.replace(/[\s!"',.<>?]+$/,""),")"===c.substr(-1)&&c.replace(/[^(]+/g,
"").length<c.replace(/[^)]+/g,"").length)c=c.substr(0,c.length-1);else break;if(/^www\.|^[^:]+:/i.test(c)){var e=P(2,"URL",b+c.length,0);"."===c.charAt(3)&&(c="http://"+c);b=P(1,"URL",b,0);b.n("url",c);b.q=1;E(b,e)}}})},z:"://",A:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,B:1E4},Escaper:{x:function(a,b){b.forEach(function(a){var b=P(3,"v",a[0][1]+1,a[0][0].length-1);b.d=0;b.q=-1E3;nb(P(3,"i",a[0][1],1),b)})},z:"\\",A:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,B:1E4},FancyPants:{x:function(a){function b(a,
b,c){a=P(3,g.K,a,b);a.n(g.O,c);return a}function c(){for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])}function d(c,d,e,h){for(var k;k=d.exec(a);){var H=b(+k.index+k[0].indexOf(c),1,e);k=b(+k.index+k[0].length-1,1,h);nb(H,k)}}function e(a){for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019").q=10}function f(a){for(var c,d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);)if("x"===
d[0].charAt(d[0].length-1)&&b(+d.index+d[0].length-1,1,"\u00d7"),c=d[0].charAt(1),"'"===c||'"'===c)c="'s"===d[0].substr(1,2)?"\u2019":"'"===c?"\u2032":"\u2033",b(+d.index+1,1,c)}function h(){for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var g={O:"char",K:"FP"},k=0<=a.indexOf("'"),q=0<=a.indexOf('"');k&&e(a);(k||q||0<=a.indexOf("x"))&&f(a);k&&d("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");q&&d('"',/(?:^|\W)".+?"(?!\w)/g,
"\u201c","\u201d");(0<=a.indexOf("...")||0<=a.indexOf("--"))&&c();0<=a.indexOf("(")&&h()}},HTMLComments:{x:function(a,b){b.forEach(function(a){var b=db(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");P(3,"HC",a[0][1],a[0][0].length).n("content",b)})},z:"\x3c!--",A:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,B:1E4},HTMLElements:{x:function(a,b){var c={a:{"":"URL",href:"url"},em:{"":"EM"},hr:{"":"HR"},s:{"":"S"},strong:{"":"STRONG"},sup:{"":"SUP"}};b.forEach(function(b){var e=
"/"===a.charAt(b[0][1]+1),f=b[0][1],h=b[0][0].length,g=b[2-e][0].toLowerCase(),k=c&&c[g]&&c[g][""]?c[g][""]:"html:"+g;if(e)P(2,k,f,h);else{e="/>"===b[0][0].substr(h-2)?Q(k,f,h,f+h,0):P(1,k,f,h);b=b[3][0];for(var f=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,q;k=f.exec(b);)q=k[0].indexOf("="),0>q&&(q=k[0].length,k[0]+="="+k[0].toLowerCase()),h=k[0].substr(0,q).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),k=k[0].substr(1+q).replace(/^\s+/,"").replace("/s+$/",""),c&&c[g]&&
c[g][h]&&(h=c[g][h]),/^["']/.test(k)&&(k=k.substr(1,k.length-2)),e.n(h,db(k))}})},z:"<",A:/<(?:\/((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))|((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,B:1E4},HTMLEntities:{x:function(a,
b){b.forEach(function(a){var b=a[0][0],e=db(b);e!==b&&P(3,"HE",a[0][1],b.length).n("char",e)})},z:"&",A:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,B:1E4},Litedown:{x:function(a){function b(a,b){E(P(2,"LIST",b,0),a.S);E(P(2,"LI",b,0),a.I);a.M&&a.J.forEach(function(a){a.d&=-9})}function c(a){a=a.replace(/[\\\x1A]/g,"");v&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`",
"\u001bA":"~"}[a]}));return a}function d(a){return a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]})}function e(b,c){return/[ \t]*#*[ \t]*$/.exec(a.substr(b,c-b))[0].length}function f(){var b={};if(-1===a.indexOf("-")&&-1===a.indexOf("="))return b;for(var c,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;c=d.exec(a);){var e=
c[0];c=c.index;for(var k=c-1;0<k&&" "===a[k-1];)--k;b[c-1]={Q:c+e.length-k,R:k,U:e.length-e.replace(/>/g,"").length,K:"="===e.charAt(0)?"H1":"H2"}}return b}function h(a){return 0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a)}function g(b,c){var d=a.indexOf(b);if(-1!==d){var e=[],k=[],f=f=a.indexOf("\u0017",d),g;for(c.lastIndex=d;g=c.exec(a);)d=g.index,g=g[0].length,d>f&&(k.push(e),e=[],f=a.indexOf("\u0017",d)),"_"===a[d]&&1===g&&0<d&&h(a[d-1])&&h(a[d+g])||e.push([d,
g]);k.push(e);k.forEach(q)}}function k(b,c){a=a.substr(0,b)+Array(1+c).join("\u001a")+a.substr(b+c)}function q(a){var b=0,c=-1,d=-1,e;a.forEach(function(a){var k=a[0];a=a[1];var h=Math.min(3,a),f=h&b&1,h=h&b&2,H=k,g=k;2<b&&c===d&&(f?c+=2:++d);f&&h&&(c<d?H+=2:++g);e=a;f&&(--b,--e,Q("EM",c,1,H,1));h&&(b-=2,e-=2,Q("STRONG",d,2,g,2));e=Math.min(3,e);e&1&&(c=k+a-e);e&2&&(d=k+a-e);b+=e})}var v,x,t,B,G;0>a.indexOf("\\")?v=!1:(v=!0,a=d(a));a+="\n\n\u0017";(function(){for(var c=[],d,h=4,g,q=!0,v=[],I=0,ta=
!1,Db=[],ua=0,va=f(),R=0,wa,Y,ra,S,Ua,Eb,J,y,xa,Ja,ha,T,da,Fb=[],Va,Ka=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+.*|~~~+.*)?)?/gm;Va=Ka.exec(a);)Fb.push(Va),Va.index===Ka.lastIndex&&++Ka.lastIndex;Fb.forEach(function(f){var K=f.index,ya=f[0].length;S=0;Y=!q;J=a.indexOf("\n",K);q=J===K+ya&&!f[3]&&!f[4]&&!f[5];ya||++Ka.lastIndex;wa=q&&Y;f[1]?(ha=f[1].length-f[1].replace(/>/g,"").length,S=f[1].length):
ha=0;if(ha<ua&&!Y&&!q){ta=!0;do E(P(2,"QUOTE",R,0),Db.pop());while(ha<--ua)}if(ha>ua&&!q){ta=!0;do{var Z=P(1,"QUOTE",K,0);Z.q=ua;Db.push(Z)}while(ha>++ua)}var N=0,aa=0;if(f[2]){Ua=f[2];Eb=Ua.length;xa=d?0:h;do" "===Ua.charAt(aa)?++N:N=N+4&-4;while(++aa<Eb&&N<xa)}g&&!d&&N<h&&!q&&(ta=!0);ta&&(ta=!1,g&&(k(g.k,R-g.k),ra=P(2,"CODE",R,0),E(ra,g),ra.q=-1,d=g=null),v.forEach(function(a){b(a,R)}),v=[],I=0,K&&c.push(K-1));if(N>=h){if(g||!Y)S=(f[1]||"").length+aa,g||(g=P(1,"CODE",K+S,0)),f={}}else{Z=!!f[4];
if(N||Y||Z||q)if(Y&&!Z)y=I-1;else if(I)for(y=0;y<I&&N>v[y].L;)++y;else y=!Y&&Z?0:-1;else y=-1;for(;y<I-1;)b(v.pop(),R),--I;y!==I||Z||--y;Z&&0<=y&&(wa=!0,T=K+S+aa,da=f[4].length,aa=P(1,"LI",T,da),k(T,da),y<I?(E(P(2,"LI",R,0),v[y].I),v[y].I=aa,v[y].J.push(aa)):(++I,y?(Ja=v[y-1].L+1,xa=Math.max(Ja,4*y)):(Ja=0,xa=N),N=P(1,"LIST",T,0),-1<f[4].indexOf(".")&&N.n("type","decimal"),v.push({S:N,I:aa,J:[aa],W:Ja,L:xa,M:!0})));!I||Y||q||(1<v[0].J.length||!Z)&&v.forEach(function(a){a.M=!1});h=4*(I+1)}if(f[5])if("#"===
f[5].charAt(0))x=f[5].length,t=K+ya-x,G=e(K+ya,J),B=J-G,Q("H"+/#{1,6}/.exec(f[5])[0].length,t,x,B,G),c.push(t),c.push(B),Y&&(wa=!0);else{if("`"===f[5].charAt(0)||"~"===f[5].charAt(0))T=K+S,da=J-T,g&&f[5].charAt(0)===d?(ra=P(2,"CODE",T,da),E(ra,g),ra.q=-1,P(3,"i",R,T-R),k(g.k,T+da-g.k),d=g=null):g||(g=P(1,"CODE",T,da),d=f[5].charAt(0),P(3,"i",T+da,1),f=f[5].replace(/^[`~]*/,""),""!==f&&g.n("lang",f))}else f[3]&&!I?(P(3,"HR",K+S,ya-S),wa=!0,k(J,1)):!va[J]||va[J].U!==ha||q||I||g||(Q(va[J].K,K+S,0,va[J].R,
va[J].Q),k(J,1));wa&&(P(3,"pb",R,0),c.push(R));q||(R=J);S&&ob(P(3,"i",K,S))});c.forEach(function(b){a=a.substr(0,b)+"\u0017"+a.substr(1+b)})})();(function(){if(-1!==a.indexOf("`"))for(var b,c=/(``?)[^\x17]*?[^`]\1(?!`)/g;b=c.exec(a);){var d=b.index,e=b[0].length;b=b[1].length;Q("C",d,b,d+e-b,b);k(d,e)}})();(function(){if(-1!==a.indexOf("!["))for(var b,d=/!\[([^\x17\]]*)] ?\(([^\x17 ")]+)(?: "([^\x17"]*)")?\)/g;b=d.exec(a);){var e=b.index,f=b[0].length,h=b[1].length,g=e,h=Q("IMG",g,2,g+2+h,f-2-h);
h.n("alt",c(b[1]));h.n("src",c(b[2]));""<b[3]&&h.n("title",c(b[3]));k(e,f)}})();(function(){if(-1!==a.indexOf("["))for(var b,d=/\[([^\x17\]]+)] ?\(([^\x17 ()]+(?:\([^\x17 ()]+\)[^\x17 ()]*)*[^\x17 )]*)(?: "(.*?)")?\)/g;b=d.exec(a);){var e=b[1].length,f=b.index,h=f+1+e,e=b[0].length-1-e,g=Q("URL",f,1,h,e);g.n("url",c(b[2]));""<b[3]&&g.n("title",c(b[3]));g.q=-1;k(f,1);k(h,e)}})();(function(){if(-1!==a.indexOf("~~"))for(var b,c=/~~[^\x17]+?~~/g;b=c.exec(a);){var d=b.index;Q("DEL",d,2,d+b[0].length-2,
2)}})();(function(){if(-1!==a.indexOf("^"))for(var b,c=/\^[^\x17\s]+/g;b=c.exec(a);){var d=b[0],e=b=b.index,f=b+d.length,d=d.split("^");d.shift();d.forEach(function(a){Q("SUP",e,1,f,0);e+=1+a.length})}})();g("*",/\*+/g);g("_",/_+/g);(function(){for(var b=a.indexOf("  \n");-1!==b;)P(3,"br",b+2,0),b=a.indexOf("  \n",b+3)})()}},MediaEmbed:{x:function(a,b){b.forEach(function(a){var b=a[0][0];a=P(3,"MEDIA",a[0][1],b.length);a.n("url",b);a.q=-10})},z:":",A:/\b(?:spotify:|https?:\/\/)[^["'\s]+/g,B:1E4}},
U,Ab={mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","liveleak.com":"liveleak","open.spotify.com":"spotify","play.spotify.com":"spotify","soundcloud.com":"soundcloud","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","www.facebook.com":"facebook","youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{N:/^(?:ftp|https?)$/i}},Bb={c:oa,d:8},V={BANDCAMP:{c:l,j:{album_id:z,track_id:z,track_num:z,url:w},f:4,b:[gb,ea,Cb],g:10,e:r,i:1E3},C:Oa,CODE:{c:l,
j:{lang:La},f:1,b:n,g:10,e:{d:4436,o:A},i:1E3},DAILYMOTION:{c:l,v:[["url",/dailymotion\.com\/(?:live\/|user\/[^#]+#video=|video\/)([A-Za-z0-9]+)/,m],["url",/^([A-Za-z0-9]+)$/,m]],j:{id:{b:[Gb],p:!0},url:w},f:4,b:Fa,g:10,e:r,i:1E3},DEL:Ra,EM:Qa,EMAIL:{c:Ca,j:{email:{b:[Hb],p:!0}},f:4,b:n,g:10,e:ka,i:1E3},FACEBOOK:{c:l,v:[["url",/(?:m|www)\.facebook\.com\/(?:[\/\w]+\/permalink|(?!pages\/|groups\/).*?)(?:\/|fbid=|\?v=)(\d+)(?=$|[\/?&#])/,m],Ha],j:Na,f:4,b:Fa,g:10,e:r,i:1E3},FP:Wa,H1:$a,H2:$a,H3:$a,H4:$a,
H5:$a,H6:$a,HC:{c:l,j:{content:Da},f:6,b:n,g:10,e:r,i:1E3},HE:Wa,HR:{c:na,f:1,b:n,g:10,e:{d:3333,o:A},i:1E3},IMG:{c:na,j:{alt:u,src:Ma,title:u},f:0,b:n,g:10,e:pa,i:1E3},LI:bb,LIST:{c:sa,j:{type:La},f:1,b:n,g:10,e:Ta,i:1E3},LIVELEAK:{c:l,v:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,m],["url",/^([a-f_0-9]+)$/,m]],j:{id:{b:[Ib],p:!0},url:w},f:4,b:Fa,g:10,e:r,i:1E3},MEDIA:{c:l,f:6,b:[Jb],g:10,e:{d:577},i:1E3},QUOTE:{c:oa,f:1,b:n,g:10,e:Sa,i:1E3},SOUNDCLOUD:{c:l,v:[["url",/(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)/,
m],["url",/api.soundcloud.com\/playlists\/(\d+)/,["","playlist_id"]],["url",/api.soundcloud.com\/tracks\/(\d+)/,["","track_id"]],["url",/^((?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$))$/,m]],j:{id:{b:[Kb],p:!0},playlist_id:z,track_id:z,url:w},f:4,b:[Ea,gb,ea],g:10,e:r,i:1E3},SPOTIFY:{c:l,v:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],
j:{path:{b:[Lb],p:!1},uri:{b:[Mb],p:!1},url:w},f:4,b:[Ea,ea,Cb],g:10,e:r,i:1E3},STRONG:Qa,SUP:Pa,TWITCH:{c:l,v:[["url",/twitch\.tv\/((?!m\/)\w+)(?:\/b\/(\d+)|\/c\/(\d+)|\/v\/(\d+))?/,["","channel","archive_id","chapter_id","video_id"]]],j:{archive_id:z,channel:{b:[Nb],p:!1},chapter_id:z,url:w,video_id:z},f:4,b:[Ea,gb,ea,Cb],g:10,e:r,i:1E3},URL:{c:Ca,j:{title:u,url:Ma},f:4,b:n,g:10,e:ka,i:1E3},VIMEO:{c:l,v:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/|video\/)?(\d+)/,m],Ha],j:Na,f:4,b:Fa,g:10,e:r,i:1E3},
VINE:{c:l,v:[["url",/vine\.co\/v\/([^\/]+)/,m],["url",/^([^\/]+)$/,m]],j:{id:{b:[Ob],p:!0},url:w},f:4,b:Fa,g:10,e:r,i:1E3},YOUTUBE:{c:l,v:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,m],["url",/youtu\.be\/([-\w]+)/,m],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,m]],j:{h:z,id:{b:ja,p:!0},list:{b:ja,p:!1},m:z,s:z,t:z,url:w},f:4,b:Fa,g:10,e:r,i:1E3},"html:abbr":{c:p,j:{title:u},f:0,b:n,g:10,e:ba,i:1E3},"html:b":Qa,
"html:br":{c:za,f:0,b:n,g:10,e:Aa,i:1E3},"html:code":Oa,"html:dd":{c:oa,f:7,b:n,g:10,e:Ya,i:1E3},"html:del":Ra,"html:div":{c:oa,j:Ga,f:1,b:n,g:10,e:Sa,i:1E3},"html:dl":{c:[65472,7936],f:1,b:n,g:10,e:Ta,i:1E3},"html:dt":{c:Ba,f:7,b:n,g:10,e:Ya,i:1E3},"html:i":Qa,"html:img":{c:za,j:{alt:u,height:u,src:w,title:u,width:u},f:0,b:n,g:10,e:Aa,i:1E3},"html:ins":Ra,"html:li":bb,"html:ol":ab,"html:pre":{c:p,f:1,b:n,g:10,e:{d:276,o:A},i:1E3},"html:rb":{c:p,f:8,b:n,g:10,e:Za,i:1E3},"html:rp":{c:p,f:8,b:n,g:10,
e:{w:{"html:rb":1,"html:rp":1,"html:rtc":1},d:256,o:A},i:1E3},"html:rt":{c:p,f:9,b:n,g:10,e:{w:{"html:rb":1,"html:rp":1,"html:rt":1},d:256,o:A},i:1E3},"html:rtc":{c:[65393,7938],f:8,b:n,g:10,e:Za,i:1E3},"html:ruby":{c:[65393,7939],f:0,b:n,g:10,e:ba,i:1E3},"html:span":{c:p,j:Ga,f:0,b:n,g:10,e:ba,i:1E3},"html:strong":Qa,"html:sub":Pa,"html:sup":Pa,"html:table":{c:[65344,7956],f:1,b:n,g:10,e:Ta,i:1E3},"html:tbody":{c:qa,f:10,b:n,g:10,e:{w:{"html:tbody":1,"html:tfoot":1,"html:thead":1},d:3456,o:A},i:1E3},
"html:td":{c:oa,j:{colspan:u,rowspan:u},f:11,b:n,g:10,e:Xa,i:1E3},"html:tfoot":{c:qa,f:10,b:n,g:10,e:{w:{"html:tbody":1,"html:thead":1},d:3456,o:A},i:1E3},"html:th":{c:Ba,j:{colspan:u,rowspan:u,scope:u},f:11,b:n,g:10,e:Xa,i:1E3},"html:thead":{c:qa,f:10,b:n,g:10,e:{d:3456,o:A},i:1E3},"html:tr":{c:[65344,7944],f:12,b:n,g:10,e:{w:{"html:tr":1},d:3456,o:A},i:1E3},"html:u":Qa,"html:ul":ab},W,Pb,X,Qb,Rb=0,Sb;
function Tb(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");tb={};ub={};sb=[];vb=0;L=null;wb=!1;yb={};M=[];O="";U=0;W=[];Pb=!0;X=a;Qb=X.length;Sb=0;F=Bb;F.D=!1;++Rb;a=Rb;for(var b in zb)if(!zb[b].H)a:{var c=b,d=zb[c];if(!(d.z&&0>X.indexOf(d.z))){var e=[];if(d.A){e=d.A;d=d.B;e.lastIndex=0;for(var f=[],h=0,g=void 0;++h<=d&&(g=e.exec(X));){for(var k=+g.index,q=[[g[0],k]],v=0;++v<g.length;){var x=g[v];void 0===x?q.push(["",-1]):(q.push([x,X.indexOf(x,k)]),k+=x.length)}f.push(q)}e=
f;if(!e.length)break a}(0,zb[c].x)(X,e)}}Ub();Vb();Wb(Qb,0,!0);do b=O,O=O.replace(/<([^ />]+)><\/\1>/g,"");while(O!==b);O=O.replace(/<\/i><i>/g,"",O);O=O.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xb);c=wb?"r":"t";b="<"+c;for(var t in yb)b+=" xmlns:"+t+'="urn:s9e:TextFormatter:'+t+'"';O=b+">"+O+"</"+c+">";if(Rb!==a)throw"The parser has been reset during execution";return O}function Vb(){sb.forEach(function(a){a.G=[];delete a.y;delete a.F});sb=[]}
function Yb(a,b){b.v&&b.v.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.j){var e=Zb(a.j[d],e,b),f;for(f in e)f!==d&&f in a.j||a.n(f,e[f])}});return!0}function Zb(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Xb(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function $b(a){wb=!0;var b=a.l,c=a.k,d=a.u,e=a.d,f=0,h=0;e&256&&(f=1,h=a.r&2?2:1);var g=!1;a.r&1?e&4&&(g=!0):g=!0;Wb(c,f,g);f=d?fb(X.substr(c,d)):"";if(a.r&1){e&4||ac(c);e=b.indexOf(":");0<e&&(yb[b.substr(0,e)]=0);O+="<"+b;var k=pb(a),e=[],q;for(q in k)e.push(q);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){O+=" "+a+'="'+eb(k[a].toString())+'"'});O=3===a.r?d?O+(">"+f+"</"+b+">"):O+"/>":d?O+("><s>"+f+"</s>"):O+">"}else d&&(O+="<e>"+f+"</e>"),O+="</"+b+">";for(Sb=U=c+d;h&&Sb<Qb&&"\n"===
X.charAt(Sb);)--h,++Sb}
function Wb(a,b,c){c&&(F.d&8?b=-1:c=!1);U>=a&&c&&bc();if(Sb>U){var d=Math.min(a,Sb);O+=X.substr(U,d-U);U=d;U>=a&&c&&bc()}if(F.d&128)d=a-U,b=X.substr(U,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),O+=b,U=a,c&&bc();else{for(var e=a,d=0;b&&--e>=U;){var f=X.charAt(e);if(" "!==f&&"\n"!==f&&"\t"!==f)break;"\n"===f&&--b;++d}a-=d;if(F.d&8)for(F.D||(cc(a),a>U&&ac(a)),b=X.indexOf("\n\n",U);-1<b&&b<a;)Wb(b,0,!0),ac(a),b=X.indexOf("\n\n",U);a>U&&(b=fb(X.substr(U,a-U)),O+=b);c&&bc();d&&(O+=X.substr(a,d));U=a+d}}
function dc(a){var b=a.k;a=a.u;var c=X.substr(b,a);Wb(b,0,!1);O+="<i>"+fb(c)+"</i>";wb=!0;U=b+a}function ac(a){!F.D&&F.d&8&&(cc(a),U<Qb&&(O+="<p>",F.D=!0))}function bc(){F.D&&(O+="</p>",F.D=!1)}function cc(a){for(;U<a&&-1<" \n\t".indexOf(X.charAt(U));)O+=X.charAt(U),++U}function ec(a,b){var c=a.l;a.d&256&&(b=fc(b));E(P(2,c,b,0),a)}function fc(a){for(;a>U&&-1<" \n\t".indexOf(X.charAt(a-1));)--a;return a}
function Ub(){if(W.length){for(var a in V)tb[a]=0,ub[a]=0;do{for(;W.length;)Pb||(W.sort(gc),Pb=!0),L=W.pop(),F.d&64&&!(qb(L,M[M.length-1])||-1<"br i pb v".indexOf(L.l))||hc();M.forEach(function(a){ec(a,Qb)})}while(W.length)}}
function hc(){if(!L.E){var a=L.k,b=L.u;if(U>a){var c;if((c=L.F)&&0<=M.indexOf(c))a=Math.max(0,a+b-U),a=P(2,c.l,U,a),E(a,c);else{if("i"===L.l&&(c=a+b-U,0<c)){P(3,"i",U,c);return}D(L)}}else if("i"===L.l)dc(L);else if("br"===L.l)F.d&1024||(Wb(L.k,0,!1),O+="<br/>");else if("pb"===L.l)Wb(L.k,0,!0);else if("v"===L.l)c=F.d,F.d=L.d,Wb(L.k+L.u,0,!1),F.d=c;else if(L.r&1)if(c=L,a=c.l,b=V[a],ub[a]>=b.i)D(c);else{var d=c,e=V[d.l],f=!0;if(e.b)for(var h=0;h<e.b.length;++h)if(!e.b[h](d,e)){f=!1;break}if(f){a:{d=
c;if(M.length&&(f=d.l,h=V[f],h.e.o)){var e=M[M.length-1],g=e.l;if(h.e.o[g]){g!==f&&1E3>vb&&(f=ic(e,d.k+d.u),nb(d,f));++vb;W.push(d);ec(e,d.k);d=!0;break a}}d=!1}if(!d)a:{d=c;if(M.length&&(e=V[d.l],e.e.w&&(f=M[M.length-1],e.e.w[f.l]))){W.push(d);ec(f,d.k);d=!0;break a}d=!1}d||(tb[a]>=b.g?D(c):(b=V[a].f,F.c[b>>3]&1<<(b&7)?(!(c.d&1)||c.y||W.length&&qb(W[W.length-1],c)||(a=new mb(3,a,c.k,c.u),rb(a,pb(c)),a.d=c.d,c=a),c.d&4096&&!c.y&&"\n"===X.charAt(c.k+c.u)&&P(3,"i",c.k+c.u,1),$b(c),jc(c)):D(c)))}else D(c)}else kc()}}
function kc(){var a=L;if(tb[a.l]){for(var b=[],c=M.length;0<=--c;){var d=M[c];if(qb(a,d))break;b.push(d);++vb}if(!(0>c)){var e=1E3>vb,f=[];b.forEach(function(b){var c=b.l;e&&(b.d&2?f.push(b):e=!1);var d=a.k;b.d&256&&(d=fc(d));c=new mb(2,c,d,0);c.d=b.d;$b(c);lc()});$b(a);lc();if(b.length&&1E3>vb){d=U;for(c=W.length;0<=--c&&1E3>++vb;){var h=W[c];if(h.k>d||h.r&1)break;for(var g=b.length;0<=--g&&1E3>++vb;)if(qb(h,b[g])){b.splice(g,1);f[g]&&f.splice(g,1);d=Math.max(d,h.k+h.u);break}}d>U&&dc(new mb(3,"i",
U,d-U))}f.forEach(function(a){var b=ic(a,U);(a=a.y)&&E(b,a)})}}}function lc(){var a=M.pop();--tb[a.l];F=F.T}function jc(a){var b=a.l,c=a.d,d=V[b];++ub[b];if(3!==a.r){var e=[];c&512?F.c.forEach(function(a,b){e.push(d.c[b]&a)}):F.c.forEach(function(a,b){e.push(d.c[b]&(a&65280|a>>8))});c|=F.d&32;c&16&&(c&=-33);++tb[b];M.push(a);F={c:e,d:c,T:F}}}function ic(a,b){var c=P(a.r,a.l,b,0);rb(c,pb(a));c.q=a.q;return c}
function P(a,b,c,d){a=new mb(a,b,c,d);sb.push(a);V[b]&&(a.d=V[b].e.d);V[b]||-1<"br i pb v".indexOf(a.l)?V[b]&&V[b].H?D(a):0>d||0>c||c+d>Qb?D(a):(Pb&&W.length&&a.k>=W[W.length-1].k&&(Pb=!1),W.push(a)):D(a);return a}function Q(a,b,c,d,e){b=P(1,a,b,c);E(b,P(2,a,d,e));return b}function gc(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.q!==b.q)return b.q-a.q;c=a.u;d=b.u;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.r]-c[a.r])}var mc="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function nc(a,b){if(mc){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function oc(a,b){if(mc){var c=b.createElement("div"),d=b.createDocumentFragment();pc.input=nc(a,"MSXML2.DOMDocument.6.0");pc.transform();for(c.innerHTML=pc.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(pc.transformToFragment(nc(a),b),!0)}var pc,qc=nc(cb,"MSXML2.FreeThreadedDOMDocument.6.0");
if(mc){var rc=new ActiveXObject("MSXML2.XSLTemplate.6.0");rc.stylesheet=qc;pc=rc.createProcessor()}else pc=new XSLTProcessor,pc.importStylesheet(qc);function ia(a){return C(a,/^[-\w]+$/)}function Ea(a,b){return Yb(a,b)}
function ea(a,b){var c;a:{c=xb;if(b.j){var d,e,f=pb(a);for(d in f){var h=f[d];if(b.j[d]){if(e=b.j[d],e.b){c.n(d);for(var g=0;g<e.b.length;++g)if(h=e.b[g](h,d),!1===h){delete a.j[d];break}!1!==h&&a.n(d,h)}}else delete a.j[d]}for(d in b.j)if(e=b.j[d],!(d in a.j)&&e.p){c=!1;break a}}else rb(a,{});c=!0}return c}function la(a){var b=Ab.urlConfig,c=xb,d=ib(a.replace(/^\s+/,"").replace(/\s+$/,""));kb(b,d)?(c&&(d.attrValue=a),a=!1):a=jb(d);return a}
function Lb(a){return C(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}
function Jb(a){var b=Ab.mediasites,c;if("media"in a.j)c=a.j.media,!("id"in a.j)&&"url"in a.j&&-1===a.j.url.indexOf("://")&&a.n("id",a.j.url);else if("url"in a.j){var d=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.j.url);if(d[1]&&b[d[1]+":"])c=b[d[1]+":"];else if(d[2]){d=d[2];do{if(b[d]){c=b[d];break}var e=d.indexOf(".");if(-1==e)break;d=d.substr(1+e)}while(""<d)}}c&&(b=a.y||a,d=a.k,c=P(3,c.toUpperCase(),d,b.k+b.u-d),rb(c,pb(a)),c.q=a.q);return!1}function Nb(a){return C(a,/^(?!m\/)\w+$/)}
function Kb(a){return C(a,/^(?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)$/)}function Cb(a){a:{for(var b in pb(a))if("url"!==b){a=!0;break a}a=!1}return a}function fa(a){return C(a,/^\d+$/)}function Gb(a){return C(a,/^[A-Za-z0-9]+$/)}function Ia(a){return/^[-\w+., ]+$/.test(a)?a:!1}function Ob(a){return C(a,/^[^\/]+$/)}function Ib(a){return C(a,/^[a-f_0-9]+$/)}function Mb(a){return C(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}
function Hb(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}
window.s9e={TextFormatter:{disablePlugin:function(a){zb[a]&&(zb[a].H=!0)},enablePlugin:function(a){zb[a]&&(zb[a].H=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,f=b.childNodes,v=c.length,x=f.length,t,B,G=0,H=0;G<v&&G<x;){t=c[G];B=f[G];if(!d(t,B))break;++G}for(var ca=Math.min(v-G,x-G);H<ca;){t=c[v-(H+1)];B=f[x-(H+1)];if(!d(t,B))break;++H}t=e.createDocumentFragment();for(ca=G;ca<x-H;)B=f[ca].cloneNode(!0),t.appendChild(B),++ca;for(ca=v-H;--ca>=G;)a.removeChild(c[ca]);H?a.insertBefore(t,
a.childNodes[G]):a.appendChild(t)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,x=d.length;0<=--x;){var t=d[x],B=t.namespaceURI,t=t.name;b.hasAttributeNS(B,t)||a.removeAttributeNS(B,t)}for(x=f;0<=--x;)d=e[x],B=d.namespaceURI,t=d.name,d=d.value,d!==a.getAttributeNS(B,t)&&a.setAttributeNS(B,
t,d);c(a,b);return!0}var e=b.ownerDocument,f=oc(Tb(a),e);c(b,f)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.3.2/punycode.min.js"></script>
</body>
</html>