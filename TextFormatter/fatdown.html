<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments
 - **HTMLElements** --- several HTML elements are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:<br/>
   http://youtu.be/QH2-TGUlwu4

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 32.6 KB (11.6 KB compressed)

***

[![Build Status](https://travis-ci.org/s9e/TextFormatter.png?branch=master)](https://travis-ci.org/s9e/TextFormatter)
[![Coverage Status](https://coveralls.io/repos/s9e/TextFormatter/badge.png)](https://coveralls.io/r/s9e/TextFormatter)
[![Scrutinizer Quality Score](https://scrutinizer-ci.com/g/s9e/TextFormatter/badges/quality-score.png?s=3942dab3c410fb9ce02001e7446d1083fa91172c)](https://scrutinizer-ci.com/g/s9e/TextFormatter/)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">function aa(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function ba(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function ca(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function da(a){if(!/^\d+\.\d+\.\d+\.\d+$/.test(a))return!1;var b=4;for(a=a.split(".");0<=--b;)if("0"===a[b].charAt(0)||255<a[b])return!1;return!0}
function ea(a){return/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(a)?a:!1}function k(a,b){return b.test(a)?a:!1}
function fa(a){var b=ga.urlConfig,c=p,d=ha(a.replace(/^\s+/,"").replace(/\s+$/,"")),e="";if(""!==d.x){if(!b.W.test(d.x))return c&&la(c,"URL scheme is not allowed",{attrValue:a,scheme:d.x}),!1;e+=d.x+":"}if(""===d.p)if("file"===d.x)e+="//";else{if(""!==d.x)return!1}else{e+="//";if(!/^(?=[a-z])[-a-z0-9]{0,62}[a-z0-9](?:\.(?=[a-z])[-a-z0-9]{0,62}[a-z0-9])*$/i.test(d.p)&&!da(d.p)&&!ea(d.p.replace(/^\[(.*)\]$/,"$1",d.p)))return c&&la(c,"URL host is invalid",{attrValue:a,host:d.p}),!1;if(b.X&&b.X.test(d.p)||
b.da&&!b.da.test(d.p))return c&&la(c,"URL host is not allowed",{attrValue:a,host:d.p}),!1;""!==d.V&&(e+=rawurlencode(decodeURIComponent(d.V)),""!==d.R&&(e+=":"+rawurlencode(decodeURIComponent(d.R))),e+="@");e+=d.p;""!==d.S&&(e+=":"+d.S)}a=d.ba;""!==d.T&&(a+="?"+d.T);""!==d.P&&(a+="#"+d.P);a=a.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},a);e+=a.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,escape);d.x||(e=e.replace(/^([^\/]*):/,"$1%3A",
e));return e}
function ha(a){a=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a);a={x:""<a[1]?a[1]:"",V:""<a[2]?a[2]:"",R:""<a[3]?a[3]:"",p:""<a[4]?a[4]:"",S:""<a[5]?a[5]:"",ba:""<a[6]?a[6]:"",T:""<a[7]?a[7]:"",P:""<a[8]?a[8]:""};a.x=a.x.toLowerCase();a.p=a.p.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(a.p)&&punycode&&(a.p=punycode.toASCII(a.p));return a}
function r(){}r.prototype.J={};r.prototype.N=[];function ma(a,b,c,d){d=d||{};"attrName"in d||!a.G||(d.attrName=a.G);"tag"in d||!a.I||(d.tag=a.I);a.J[b]&&a.J[b].forEach(function(a){a(c,d)});a.N.push([b,c,d])}r.prototype.get=function(){return this.N};r.prototype.on=function(a,b){this.J[a].push(b)};r.prototype.l=function(a){this.G=a};function na(a){ma(p,"debug","Skipping end tag with no start tag",a)}function la(a,b,c){ma(a,"err",b,c)}
function s(a,b,c,d){this.o=a;this.m=b;this.n=c;this.y=d;this.k={};this.O=[];isNaN(a+c+d)&&x(this)}s.prototype.F=!1;s.prototype.q=0;function x(a){a.F||(a.F=!0,a.O.forEach(function(a){x(a)}))}function A(a,b){a.m===b.m&&(1===a.o&&2===b.o&&b.n>=a.n?(a.D=b,b.H=a):2===a.o&&1===b.o&&b.n<=a.n&&(a.H=b,b.D=a))}function oa(a){a.q=1E3}function B(a){var b={},c;for(c in a.k)b[c]=a.k[c];return b}function pa(a,b){return a.F||a.m!==b.m||1!==b.o||2!==a.o||a.n<b.n||a.H&&a.H!==b||b.D&&b.D!==a?!1:!0}
function qa(a){return"br"===a.m||"i"===a.m||"pb"===a.m}s.prototype.l=function(a,b){this.k[a]=b};function ra(a,b){a.k={};for(var c in b)a.k[c]=b[c]}
var D,sa,E,F,G,ta,p=new r,ua=1E3,wa,H,I,xa={Litedown:{v:function(a){function b(a,b){A(J(2,"LIST",b,0),a.$);A(J(2,"LI",b,0),a.L);a.U&&a.M.forEach(function(a){a.c&=-9})}function c(a){return a.replace(/[\\\x1A]/g,"").replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]})}function d(b,d){a=a.substr(0,b)+Array(1+d).join("\u001a")+a.substr(b+d)}var e,g,h,f,q,l,m,
u,n,v,t,y,z;0>a.indexOf("\\")||(a=a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]}));a+="\n\n\u0017";e=[];var K=4,O=!0,L=[],C=0,ia=!1,Ca=[],ja=0,$={},T=0,ka,R,P,S,w;if(a.indexOf("-\n")||a.indexOf("=\n"))for(u=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+)$/gm;f=u.exec(a);){q=f[0];m=f.index;for(h=m-1;0<h&&" "===a[h-1];)--h;$[m-
1]={Y:m+q.length-h,Z:h,ca:q.length-q.replace(/>/g,"").length,ea:"="===q.charAt(0)?"H1":"H2"}}for(u=/^(?:(?=[-*+\d \t>`#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=.))?[ \t]*(#+[ \t]*(?=.)|```+)?)?/gm;f=u.exec(a);){m=f.index;l=f[0].length;P=0;R=!O;S=a.indexOf("\n",m);O=S===m+l&&!f[3]&&!f[4]&&!f[5];l||++u.lastIndex;ka=O&&R;f[1]?(n=f[1].length-f[1].replace(/>/g,"").length,P=f[1].length):n=0;if(n<ja&&!R&&!O){ia=!0;do A(J(2,"QUOTE",T,0),Ca.pop());
while(n<--ja)}if(n>ja&&!O){ia=!0;do t=J(1,"QUOTE",m,0),t.q=ja,Ca.push(t);while(n>++ja)}g=t=0;if(f[2]){w=f[2];y=w.length;do" "===w.charAt(g)?++t:t=t+4&-4;while(++g<y&&t<K)}t<K&&z&&!O&&(ia=!0);ia&&(ia=!1,z&&(C=J(2,"CODE",T,0),A(C,z),C.q=-1,z=null),L.forEach(function(a){b(a,T)}),L=[],C=0,m&&e.push(m-1));if(t>=K){if(z||!R)P=(f[1]||"").length+g,z||(z=J(1,"CODE",m+P,0)),f={}}else{K=!!f[4];if(t||R||K||O)if(R&&!K)w=C-1;else if(C)for(w=0;w<C&&t>L[w].Q;)++w;else w=!R&&K?0:-1;else w=-1;for(;w<C-1;)b(L.pop(),
T),--C;w!==C||K||--w;if(K&&0<=w){ka=!0;var va=m+P+g;y=f[4].length;g=J(1,"LI",va,y);d(va,y);w<C?(A(J(2,"LI",T,0),L[w].L),L[w].L=g,L[w].M.push(g)):(++C,w?(y=L[w-1].Q+1,t=Math.max(y,4*w)):y=0,w=J(1,"LIST",va,0),-1<f[4].indexOf(".")&&w.l("type","decimal"),L.push({$:w,L:g,M:[g],fa:y,Q:t,U:!0}))}!C||R||O||(1<L[0].M.length||!K)&&L.forEach(function(a){a.U=!1});K=4*(C+1)}if(f[5]){if("#"===f[5].charAt(0)){n=f[5].length;v=m+l-n;h=S;for(g=0;-1<" #\t".indexOf(a.charAt(h-1));)--h,++g;M("H"+/#{1,6}/.exec(f[5])[0].length,
v,n,h,g);e.push(v);e.push(h);R&&(ka=!0)}}else f[3]&&!C?(J(3,"HR",m+P,l-P),ka=!0):!$[S]||$[S].ca!==n||O||C||z||M($[S].ea,m+P,0,$[S].Z,$[S].Y);ka&&(J(3,"pb",T,0),e.push(T));O||(T=S);P&&oa(J(3,"i",m,P))}e.forEach(function(b){a=a.substr(0,b)+"\u0017"+a.substr(1+b)});if(-1<a.indexOf("`"))for(u=/(``?)[^\x17]*?[^`]\1(?!`)/g;f=u.exec(a);)m=f.index,l=f[0].length,y=f[1].length,M("C",m,y,m+l-y,y),d(m,l);if(-1<a.indexOf("!["))for(u=/!\[([^\x17\]]+)] ?\(([^\x17 ")]+)(?: "([^\x17"]*)")?\)/g;f=u.exec(a);)m=f.index,
l=f[0].length,e=f[1].length,v=m,n=2,h=v+n+e,g=l-n-e,e=M("IMG",v,n,h,g),e.l("alt",c(f[1])),e.l("src",c(f[2])),""<f[3]&&e.l("title",c(f[3])),d(m,l);if(-1<a.indexOf("["))for(u=/\[([^\x17\]]+)] ?\(([^\x17)]+)\)/g;f=u.exec(a);){m=f.index;l=f[0].length;e=f[1].length;v=m;n=1;h=v+n+e;g=l-n-e;z=f[2];e="";if(f=/^(.+?) "(.*?)"$/.exec(z))z=f[1],e=f[2];t=M("URL",v,n,h,g);t.l("url",c(z));""!==e&&t.l("title",c(e));d(v,n);d(h,g)}if(-1<a.indexOf("~~"))for(u=/~~[^\x17]+?~~/g;f=u.exec(a);)q=f[0],m=f.index,l=q.length,
M("DEL",m,2,m+l-2,2);if(-1<a.indexOf("^"))for(u=/\^[^\x17\s]+/g;f=u.exec(a);)q=f[0],m=f.index,l=q.length,v=m,h=m+l,e=q.split("^"),e.shift(),e.forEach(function(a){M("SUP",v,1,h,0);v+=1+a.length});[["*",/\*+/g],["_",/_+/g]].forEach(function(b){var d=b[0];b=b[1];if(!(0>a.indexOf(d)))for(var c=0,e=a.indexOf("\u0017"),h,g,n,t;f=b.exec(a);)if(q=f[0],m=f.index,l=q.length,m>e&&(c=0,e=a.indexOf("\u0017",m)),3<=l){var u=l;3>c?t=g=m:h<n?(t=m,g=m+2):(t=m+1,g=m,n===h&&(h+=2));c&2&&(M("STRONG",n,2,t,2),u-=2);c&
1&&(M("EM",h,1,g,1),--u);u?(c=Math.min(u,3),c&1&&(h=m+l-c),c&2&&(n=m+l-c)):c=0}else 2===l?3===c&&n===h?(M("STRONG",h+1,2,m,2),c=1):c&2?(M("STRONG",n,2,m,2),c-=2):(c+=2,n=m):"_"===d&&0<m&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(m-1))&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(m+1))||(3===c&&n===h?(M("EM",n+2,1,m,1),c=2):c&1?(M("EM",h,1,m,1),--c):(++c,h=m))})}},Autoemail:{z:"@",A:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,
w:1E4,B:"warn",v:function(a,b){b.forEach(function(a){var b=J(1,"EMAIL",a[0][1],0);b.l("email",a[0][0]);a=J(2,"EMAIL",a[0][1]+a[0][0].length,0);A(b,a)})}},Autolink:{z:"://",A:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,w:1E4,B:"warn",v:function(a,b){b.forEach(function(a){for(var b=a[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;var e=J(1,"URL",a[0][1],0);e.l("url",b);a=J(2,"URL",
a[0][1]+b.length,0);A(e,a)})}},Escaper:{z:"\\",A:/\\[-!#()*+.:@[\\\]^_`{}]/g,w:1E4,B:"warn",v:function(a,b){b.forEach(function(a){J(3,"ESC",a[0][1],a[0][0].length)})}},FancyPants:{v:function(a){function b(b,e,h,g){for(;f=e.exec(a);){var q=J(3,d,f.index+f[0].indexOf(b),1),l=J(3,d,f.index+f[0].length-1,1);q.l(c,h);l.l(c,g);q.O.push(l);q.F&&x(l)}}var c="char",d="FP",e=0<=a.indexOf("'"),g=0<=a.indexOf('"'),h,f,q,l;if(e)for(h=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;f=h.exec(a);)tag=J(3,d,f.index+f[0].indexOf("'"),
1),tag.l(c,"\u2019"),tag.q=10;if(e||g||0<=a.indexOf("x"))for(h=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;f=h.exec(a);)if(q=f.index+f[0].length-1,"x"===f[0].charAt(q)&&J(3,d,q,1).l(c,"\u00d7"),l=f[0].charAt(1),"'"===l||'"'===l)q=1+f.index,l="'s"===f[0].substr(1,2)?"\u2019":"'"===l?"\u2032":"\u2033",J(3,d,q,1).l(c,l);e&&b("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");g&&b('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");if(0<=a.indexOf("...")||0<=a.indexOf("--"))for(h=/---?|\.\.\./g;f=h.exec(a);)q=f.index,
e=f[0].length,l={"--":"\u2013","---":"\u2014","...":"\u2026"}[f[0]],J(3,d,q,e).l(c,l);if(0<=a.indexOf("("))for(h=/\((?:c|r|tm)\)/gi;f=h.exec(a);)q=f.index,e=f[0].length,l={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"}[f[0].toLowerCase()],J(3,d,q,e).l(c,l)}},HTMLComments:{z:"\x3c!--",A:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,w:1E4,B:"warn",v:function(a,b){b.forEach(function(a){var b=aa(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");J(3,"HC",a[0][1],a[0][0].length).l("content",
b)})}},HTMLEntities:{z:"&",A:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,w:1E4,B:"warn",v:function(a,b){b.forEach(function(a){var b=a[0][0],e=aa(b);e!==b&&J(3,"HE",a[0][1],b.length).l("char",e)})}},HTMLElements:{z:"<",A:/<(?:\/((?:u|a(?:bbr)?|br?|code|d(?:el|iv)|em|hr|i(?:mg|ns)?|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)))|((?:u|a(?:bbr)?|br?|code|d(?:el|iv)|em|hr|i(?:mg|ns)?|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)))((?:\s+[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,
w:1E4,B:"warn",v:function(a,b){var c={a:{"":"URL",href:"url"},hr:{"":"HR"},img:{"":"IMG"},em:{"":"EM"},s:{"":"S"},strong:{"":"STRONG"},sub:{"":"SUB"},sup:{"":"SUP"}};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),g=b[0][1],h=b[0][0].length,f=b[2-e][0].toLowerCase(),q=c&&c[f]&&c[f][""]?c[f][""]:"html:"+f;if(e)J(2,q,g,h);else for(var e="/>"===b[0][0].substr(h-2)?M(q,g,h,g+h,0):J(1,q,g,h),h=/[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,l;l=h.exec(b[3][0]);)g=l[0].indexOf("="),0>
g&&(g=l[0].length,l[0]+="="+l[0].toLowerCase()),q=l[0].substr(0,g).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),g=l[0].substr(1+g).replace(/^\s+/,"").replace("/s+$/",""),c&&c[f]&&c[f][q]&&(q=c[f][q]),/^["']/.test(g)&&(g=g.substr(1,g.length-2)),e.l(q,aa(g))})}},MediaEmbed:{z:":",A:/\b(?:spotify:|https?:\/\/(?:[-.\w]+\.)?(?:twitch\.tv|vi(?:meo\.com|ne\.co)|youtu(?:\.be|be\.com)|(?:bandcamp|dailymotion|facebook|grooveshark|liveleak|soundcloud|(?:open|play)\.spotify)\.com)\/)[^["'\s]+(?!\S)/g,
w:1E4,B:"warn",v:function(a,b){b.forEach(function(a){var b=a[0][0];a=J(3,"MEDIA",a[0][1],b.length);a.l("url",b);a.q=-10})}}},N,ga={urlConfig:{W:/^(?:ftp|https?)$/i},mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","grooveshark.com":"grooveshark","liveleak.com":"liveleak","soundcloud.com":"soundcloud","open.spotify.com":"spotify","play.spotify.com":"spotify","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","youtube.com":"youtube",
"youtu.be":"youtube"}},ya={d:[119],e:[2047],c:392},W={C:{b:[Q],g:10,f:{c:18},h:1E3,i:0,d:[0],e:[0]},CODE:{k:{lang:{b:[za],j:0}},b:[Q],g:10,f:{c:916},h:1E3,i:1,d:[0],e:[0]},DEL:{b:[Q],g:10,f:{c:64},h:1E3,i:0,d:[119],e:[2047]},EM:{b:[Q],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[2047]},H1:{b:[Q],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[2047]},H2:{b:[Q],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[2047]},H3:{b:[Q],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[2047]},H4:{b:[Q],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[2047]},H5:{b:[Q],g:10,
f:{c:516},h:1E3,i:2,d:[113],e:[2047]},H6:{b:[Q],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[2047]},HR:{b:[Q],g:10,f:{c:645},h:1E3,i:1,d:[96],e:[2047]},IMG:{k:{alt:{j:0},src:{b:[U],j:1},title:{j:0}},b:[Q],g:10,f:{c:129},h:1E3,i:0,d:[96],e:[2047]},LI:{b:[Q],g:10,f:{u:{LI:1},c:520},h:1E3,i:3,d:[119],e:[2047]},LIST:{k:{type:{b:[za],j:0}},b:[Q],g:10,f:{c:676},h:1E3,i:1,d:[72],e:[2047]},QUOTE:{b:[Q],g:10,f:{c:524},h:1E3,i:1,d:[119],e:[2047]},STRONG:{b:[Q],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[2047]},SUP:{b:[Q],g:10,
f:{c:0},h:1E3,i:0,d:[113],e:[2047]},URL:{k:{title:{j:0},url:{b:[U],j:1}},b:[Q],g:10,f:{c:66},h:1E3,i:4,d:[103],e:[2031]},EMAIL:{k:{email:{b:[Aa],j:1}},b:[Q],g:10,f:{c:66},h:1E3,i:4,d:[103],e:[2031]},ESC:{b:[Q],g:10,f:{c:145},h:1E3,i:5,d:[0],e:[0]},FP:{k:{"char":{j:1}},b:[Q],g:10,f:{c:129},h:1E3,i:5,d:[96],e:[2047]},HC:{k:{content:{j:1}},b:[Q],g:10,f:{c:401},h:1E3,i:6,d:[0],e:[0]},HE:{k:{"char":{j:1}},b:[Q],g:10,f:{c:129},h:1E3,i:5,d:[96],e:[2047]},"html:abbr":{k:{title:{j:0}},b:[Q],g:10,f:{c:0},h:1E3,
i:0,d:[113],e:[2047]},"html:b":{b:[Q],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[2047]},"html:br":{b:[Q],g:10,f:{c:161},h:1E3,i:0,d:[64],e:[2047]},"html:code":{b:[Q],g:10,f:{c:18},h:1E3,i:0,d:[0],e:[0]},"html:del":{b:[Q],g:10,f:{c:64},h:1E3,i:0,d:[119],e:[2047]},"html:div":{k:{"class":{j:0}},b:[Q],g:10,f:{c:524},h:1E3,i:1,d:[119],e:[2047]},"html:i":{b:[Q],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[2047]},"html:ins":{b:[Q],g:10,f:{c:64},h:1E3,i:0,d:[119],e:[2047]},"html:rb":{b:[Q],g:10,f:{u:{"html:rb":1,"html:rp":1,
"html:rt":1,"html:rtc":1},c:512},h:1E3,i:7,d:[113],e:[2047]},"html:rp":{b:[Q],g:10,f:{u:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},c:512},h:1E3,i:7,d:[113],e:[2047]},"html:rt":{b:[Q],g:10,f:{u:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},c:512},h:1E3,i:7,d:[113],e:[2047]},"html:rtc":{b:[Q],g:10,f:{u:{"html:rb":1,"html:rp":1,"html:rtc":1},c:512},h:1E3,i:7,d:[113],e:[2047]},"html:ruby":{b:[Q],g:10,f:{c:0},h:1E3,i:0,d:[241],e:[2047]},"html:span":{k:{"class":{j:0}},b:[Q],g:10,f:{c:0},h:1E3,
i:0,d:[113],e:[2047]},"html:strong":{b:[Q],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[2047]},"html:sub":{b:[Q],g:10,f:{c:0},h:1E3,i:0,d:[113],e:[2047]},"html:sup":{b:[Q],g:10,f:{c:0},h:1E3,i:0,d:[113],e:[2047]},"html:table":{b:[Q],g:10,f:{c:676},h:1E3,i:1,d:[1344],e:[2047]},"html:tbody":{b:[Q],g:10,f:{u:{"html:tbody":1,"html:tfoot":1,"html:thead":1},c:672},h:1E3,i:8,d:[1088],e:[2047]},"html:td":{k:{colspan:{j:0},rowspan:{j:0}},b:[Q],g:10,f:{u:{"html:td":1,"html:th":1},c:520},h:1E3,i:9,d:[119],e:[2047]},"html:tfoot":{b:[Q],
g:10,f:{u:{"html:tbody":1,"html:thead":1},c:672},h:1E3,i:8,d:[1088],e:[2047]},"html:th":{k:{colspan:{j:0},rowspan:{j:0},scope:{j:0}},b:[Q],g:10,f:{u:{"html:td":1,"html:th":1},c:520},h:1E3,i:9,d:[115],e:[2043]},"html:thead":{b:[Q],g:10,f:{c:672},h:1E3,i:8,d:[1088],e:[2047]},"html:tr":{b:[Q],g:10,f:{u:{"html:tr":1},c:672},h:1E3,i:10,d:[576],e:[2047]},"html:u":{b:[Q],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[2047]},MEDIA:{b:[Ba],g:10,f:{c:81},h:1E3,i:6,d:[0],e:[0]},BANDCAMP:{k:{url:{b:[U],j:0},album_id:{b:[Da],
j:0},track_num:{b:[Da],j:0},track_id:{b:[Da],j:0}},b:[Ea,Q,Fa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},DAILYMOTION:{k:{url:{b:[U],j:0},id:{b:[Ga],j:1}},r:[["url",/dailymotion\.com\/(?:video\/|user\/[^#]+#video=)([A-Za-z0-9]+)/,["","id"]],["url",/^([A-Za-z0-9]+)$/,["","id"]]],b:[V,Q],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},FACEBOOK:{k:{url:{b:[U],j:0},id:{b:[Ha],j:1}},r:[["url",/facebook\.com\/(?:photo|video\/video)\.php\?v=([0-9]+)/,["","id"]],["url",/^([0-9]+)$/,["","id"]]],b:[V,Q],g:10,f:{c:145},h:1E3,
i:4,d:[0],e:[0]},GROOVESHARK:{k:{url:{b:[U],j:0},songid:{b:[Ha],j:0},playlistid:{b:[Ha],j:0}},r:[["url",/grooveshark\.com(?:\/#!?)?\/playlist\/[^\/]+\/([0-9]+)/,["","playlistid"]]],b:[V,Ia,Q,Fa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},LIVELEAK:{k:{url:{b:[U],j:0},id:{b:[Ja],j:1}},r:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,["","id"]],["url",/^([a-f_0-9]+)$/,["","id"]]],b:[V,Q],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},SOUNDCLOUD:{k:{url:{b:[U],j:0},playlist_id:{b:[Da],j:0},track_id:{b:[Da],j:0},id:{b:[Ka],
j:1},secret_token:{b:[La],j:0}},r:[["url",/(https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)/,["","id","secret_token"]],["url",/^(https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)$/,["","id","secret_token"]]],b:[V,Ma,Q],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},SPOTIFY:{k:{url:{b:[U],j:0},uri:{b:[Na],
j:0},path:{b:[Oa],j:0}},r:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],b:[V,Q,Fa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},TWITCH:{k:{url:{b:[U],j:0},channel:{b:[Pa],j:0},archive_id:{b:[Ha],j:0},chapter_id:{b:[Ha],j:0}},r:[["url",/twitch\.tv\/((?!m\/)\w+)(?:\/b\/([0-9]+)|\/c\/([0-9]+))?/,["","channel","archive_id","chapter_id"]]],b:[V,Qa,Q,Fa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},
VIMEO:{k:{url:{b:[U],j:0},id:{b:[Ha],j:1}},r:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/)?([0-9]+)/,["","id"]],["url",/^([0-9]+)$/,["","id"]]],b:[V,Q],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},VINE:{k:{url:{b:[U],j:0},id:{b:[Ra],j:1}},r:[["url",/vine\.co\/v\/([^\/]+)/,["","id"]],["url",/^([^\/]+)$/,["","id"]]],b:[V,Q],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},YOUTUBE:{k:{url:{b:[U],j:0},id:{b:[La],j:1},t:{b:[Da],j:0},list:{b:[La],j:0}},r:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,["","id"]],["url",
/youtu\.be\/([-\w]+)/,["","id"]],["url",/[#&?]t=(\d+)/,["","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,["","id"]]],b:[V,Q],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]}},X,Sa,Y,Ta,Ua=0,Z;
function Va(a){a=a.replace(/\r\n?/g,"\n",a);a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"",a);var b=p;b.N=[];delete b.G;delete b.I;F=0;ta=!1;wa={};I="";Y=a;Ta=Y.length;X=[];Sa=!0;Z=0;++Ua;a=Ua;for(var c in xa)if(b=xa[c],!(b.K||b.z&&0>Y.indexOf(b.z))){var d=[];if(b.A){var d=b.A,e=[],g=void 0;for(d.lastIndex=0;g=d.exec(Y);){for(var h=+g.index,f=[[g[0],h]],q=0;++q<g.length;){var l=g[q];void 0===l?f.push(["",-1]):(f.push([l,Y.indexOf(l,h)]),h+=l.length)}e.push(f)}d=e;e=d.length;if(!e)continue;e>b.w&&
(d=d.slice(0,b.w),e={pluginName:c,limit:b.w},"warn"===b.B&&ma(p,"warn","Regexp limit exceeded. Only the allowed number of matches will be processed",e))}b.v(Y,d)}Wa();if(Ua!==a)throw"The parser has been reset during execution";return I}function Xa(a,b){b.r&&b.r.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.k){var g;(g=e.exec(a.k[d]))&&b.forEach(function(b,c){if(""!==b&&"string"===typeof g[c]){var e=g[c];b!==d&&b in a.k||a.l(b,e)}})}});return!0}
function Ya(){var a;Za(Ta,0,!0);do a=I,I=I.replace(/<((?:\w+:)?\w+)[^>]*><\/\1>/g,"");while(I!==a);I=I.replace(/<\/i><i>/g,"",I);var b=ta?"r":"t";a="<"+b;for(var c in wa)a+=" xmlns:"+c+'="urn:s9e:TextFormatter:'+c+'"';I=a+">"+I+"</"+b+">"}
function $a(a){ta=!0;var b=a.m,c=a.n,d=a.y,e=a.c,g=0,h=0;e&512&&(g=a.o&1?2:1,h=a.o&2?2:1);var f=!1;a.o&1?e&4&&(f=!0):f=!0;Za(c,g,f);g=d?ca(Y.substr(c,d)):"";if(a.o&1){e&4||ab(c);e=b.indexOf(":");0<e&&(wa[b.substr(0,e)]=0);I+="<"+b;var q=B(a),e=[],l;for(l in q)e.push([l]);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){I+=" "+a+'="'+ba(q[a].toString())+'"'});I=3===a.o?d?I+(">"+g+"</"+b+">"):I+"/>":d?I+("><s>"+g+"</s>"):I+">"}else d&&(I+="<e>"+g+"</e>"),I+="</"+b+">";for(Z=N=c+d;h&&Z<Ta&&
"\n"===Y.charAt(Z);)--h,++Z}
function Za(a,b,c){c&&(E.c&8?b=-1:c=!1);N>=a&&c&&bb();if(Z>N){var d=Math.min(a,Z);I+=Y.substr(N,d-N);N=d;N>=a&&c&&bb()}if(E.c&32)d=a-N,b=Y.substr(N,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),I+=b,N=a,c&&bb();else{for(var e=a,d=0;b&&--e>=N;){var g=Y.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;if(E.c&8)for(E.E||(cb(a),a>N&&ab(a)),b=Y.indexOf("\n\n",N);-1<b&&b<a;)Za(b,0,!0),ab(a),b=Y.indexOf("\n\n",N);a>N&&(b=ca(Y.substr(N,a-N)),E.c&128||(b=b.replace(/\n/g,"<br/>\n")),I+=b);
c&&bb();d&&(I+=Y.substr(a,d));N=a+d}}function db(a){var b=a.n;a=a.y;var c=Y.substr(b,a);Za(b,0,!1);I+="<i>"+ca(c)+"</i>";ta=!0;N=b+a}function ab(a){!E.E&&E.c&8&&(cb(a),N<Ta&&(I+="<p>",E.E=!0))}function bb(){E.E&&(I+="</p>",E.E=!1)}function cb(a){for(;N<a&&-1<" \n\t".indexOf(Y.charAt(N));)I+=Y.charAt(N),++N}function eb(a,b){var c=a.m;a.c&512&&(b=fb(b));A(J(2,c,b,0),a)}function fb(a){for(;a>N&&-1<" \n\t".indexOf(Y.charAt(a-1));)--a;return a}
function Wa(){N=0;D={};sa={};H=[];G=null;E=ya;E.E=!1;for(var a in W)D[a]=0,sa[a]=0;do{for(;X.length;)Sa||(X.sort(gb),Sa=!0),G=X.pop(),E.c&16&&!pa(G,H[H.length-1])&&!qa(G)||hb();H.forEach(function(a){eb(a,Ta)})}while(X.length);Ya()}
function hb(){if(!G.F){var a=G.n,b=G.y;if(a+b>Ta)x(G);else if(N>a){var c;if((c=G.H)&&0<=H.indexOf(c))a=Math.max(0,a+b-N),a=J(2,c.m,N,a),A(a,c);else{if("i"===G.m&&(c=a+b-N,0<c)){J(3,"i",N,c);return}x(G)}}else if("i"===G.m)db(G);else if("br"===G.m)E.c&128||(Za(G.n,0,!1),I+="<br/>");else if("pb"===G.m)Za(G.n,0,!0);else if(G.o&1)if(c=G,a=c.m,b=W[a],sa[a]>=b.h)la(p,"Tag limit exceeded",{tag:c,tagName:a,tagLimit:b.h}),x(c);else{var d=c,e=W[d.m],g=!0;if(e.b){p.I=d;for(var h=0;h<e.b.length;++h)if(!e.b[h](d,
e)){g=!1;break}delete p.I}if(g){a:{d=c;if(H.length&&(e=W[d.m],e.f.u&&(g=H[H.length-1],e.f.u[g.m]))){X.push(d);eb(g,d.n);d=!0;break a}d=!1}d||(D[a]>=b.g?(la(p,"Nesting limit exceeded",{tag:c,tagName:a,nestingLimit:b.g}),x(c)):(b=W[a].i,E.d[b>>5]&1<<(b&31)?(c.c&1&&!c.D&&(a=new s(3,a,c.n,c.y),ra(a,B(c)),a.c=c.c,c=a),$a(c),ib(c)):(ma(p,"warn","Tag is not allowed in this context",{tag:c,tagName:a}),x(c))))}else x(c)}else jb()}}
function jb(){var a=G;if(D[a.m]){for(var b=[],c=H.length;0<=--c;){var d=H[c];if(pa(a,d))break;if(++F>ua)throw"Fixing cost exceeded";b.push(d)}if(0>c)na({tag:a});else{var e=F<ua,g=[];b.forEach(function(b){var c=b.m;e&&(b.c&2?g.push(b):e=!1);var d=a.n;b.c&512&&(d=fb(d));c=new s(2,c,d,0);c.c=b.c;$a(c);kb()});$a(a);kb();if(b.length&&F<ua){d=N;for(c=X.length;0<=--c&&++F<ua;){var h=X[c];if(h.n>d||h.o&1)break;for(var f=b.length;0<=--f&&++F<ua;)if(pa(h,b[f])){b.splice(f,1);g[f]&&g.splice(f,1);d=Math.max(d,
h.n+h.y);break}}d>N&&db(new s(3,"i",N,d-N))}g.forEach(function(a){var b=J(a.o,a.m,N,0);ra(b,B(a));b.q=a.q;(a=a.D)&&A(b,a)})}}}function kb(){var a=H.pop();--D[a.m];E=E.aa}function ib(a){function b(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=a[c]&b[c];return e}var c=a.m,d=a.c,e=W[c];++sa[c];3!==a.o&&(++D[c],H.push(a),a=b(e.d,e.d),d&64&&(a=b(a,E.d)),e=b(E.e,e.e),a=b(a,e),E.c&256&&(d|=256),d&256&&(d|=128),E={d:a,e:e,c:d,aa:E})}
function J(a,b,c,d){a=new s(a,b,c,d);W[b]&&(a.c=W[b].f.c);W[b]||qa(a)?W[b]&&W[b].K?(ma(p,"warn","Tag is disabled",{tag:a,tagName:b}),x(a)):0>d||0>c?x(a):(Sa&&X.length&&a.n>=X[X.length-1].n&&(Sa=!1),X.push(a)):x(a);return a}function M(a,b,c,d,e){b=J(1,a,b,c);A(b,J(2,a,d,e));return b}function gb(a,b){var c=a.n,d=b.n;if(c!==d)return d-c;if(a.q!==b.q)return b.q-a.q;c=a.y;d=b.y;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.o]-c[a.o])}
function lb(a){return(new DOMParser).parseFromString(a,"text/xml")}var mb=new XSLTProcessor;mb.importStylesheet(lb('<?xml version="1.0" encoding="utf-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:template match="BANDCAMP"><iframe width="400" height="{120-78*boolean(@track_id|@track_num)}" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//bandcamp.com/EmbeddedPlayer/<xsl:choose><xsl:when test="@album_id">album=<xsl:value-of select="@album_id"/>/size=<xsl:choose><xsl:when test="@track_num">small/t=<xsl:value-of select="@track_num"/></xsl:when><xsl:otherwise>medium</xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise>track=<xsl:value-of select="@track_id"/>/size=small</xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="C"><code><xsl:apply-templates/></code></xsl:template><xsl:template match="CODE"><pre><code class="{@lang}"><xsl:apply-templates/></code></pre></xsl:template><xsl:template match="DAILYMOTION"><iframe width="560" height="315" src="//www.dailymotion.com/embed/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="DEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:del|html:i|html:ins|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|p"><xsl:element name="{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}"><xsl:apply-templates/></xsl:element></xsl:template><xsl:template match="EMAIL"><a href="mailto:{@email}"><xsl:apply-templates/></a></xsl:template><xsl:template match="ESC"><xsl:value-of select="substring(.,2)"/></xsl:template><xsl:template match="FACEBOOK"><iframe width="560" height="315" src="https://www.facebook.com/video/embed?video_id={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="FP|HE"><xsl:value-of select="@char"/></xsl:template><xsl:template match="GROOVESHARK"><object type="application/x-shockwave-flash" typemustmatch="" width="250" height="{250-210*boolean(@songid)}" data="//grooveshark.com/{substring(\'songWw\',6-5*boolean(@songid),5)}idget.swf"><param name="allowfullscreen" value="true"/><param name="flashvars" value="playlistID={@playlistid}&amp;songID={@songid}"/><embed type="application/x-shockwave-flash" src="//grooveshark.com/{substring(\'songWw\',6-5*boolean(@songid),5)}idget.swf" width="250" height="{250-210*boolean(@songid)}" allowfullscreen="" flashvars="playlistID={@playlistid}&amp;songID={@songid}"/></object></xsl:template><xsl:template match="HC"><xsl:comment><xsl:value-of select="@content"/></xsl:comment></xsl:template><xsl:template match="HR"><hr/></xsl:template><xsl:template match="IMG"><img src="{@src}"><xsl:copy-of select="@alt"/><xsl:copy-of select="@title"/></img></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:otherwise><ol><xsl:apply-templates/></ol></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="LIVELEAK"><iframe width="640" height="360" src="http://www.liveleak.com/ll_embed?i={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:apply-templates/></blockquote></xsl:template><xsl:template match="SOUNDCLOUD"><iframe width="560" height="166" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://w.soundcloud.com/player/?url=<xsl:choose><xsl:when test="@secret_token and@playlist_id">https://api.soundcloud.com/playlists/<xsl:value-of select="@playlist_id"/>&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:when><xsl:when test="@secret_token and@track_id">https://api.soundcloud.com/tracks/<xsl:value-of select="@track_id"/>&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:when><xsl:otherwise><xsl:value-of select="@id"/><xsl:if test="@secret_token">&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:if></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="SPOTIFY"><iframe width="300" height="{380-300*(contains(@uri,\':track:\')orstarts-with(@path,\'track/\'))}" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://embed.spotify.com/?uri=<xsl:choose><xsl:when test="@uri"><xsl:value-of select="@uri"/></xsl:when><xsl:otherwise>spotify:<xsl:value-of select="translate(@path,\'/\',\':\')"/></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="TWITCH"><object type="application/x-shockwave-flash" typemustmatch="" width="620" height="378" data="http://www.twitch.tv/widgets/{substring(\'archl\',5-4*boolean(@archive_id|@chapter_id),4)}ive_embed_player.swf"><param name="allowfullscreen" value="true"/><param name="flashvars"><xsl:attribute name="value">channel=<xsl:value-of select="@channel"/><xsl:if test="@archive_id">&amp;archive_id=<xsl:value-of select="@archive_id"/></xsl:if><xsl:if test="@chapter_id">&amp;chapter_id=<xsl:value-of select="@chapter_id"/></xsl:if>&amp;auto_play=false</xsl:attribute></param><embed type="application/x-shockwave-flash" width="620" height="378" src="http://www.twitch.tv/widgets/{substring(\'archl\',5-4*boolean(@archive_id|@chapter_id),4)}ive_embed_player.swf" allowfullscreen=""/></object></xsl:template><xsl:template match="URL"><a href="{@url}"><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="VIMEO"><iframe width="560" height="315" src="//player.vimeo.com/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="VINE"><iframe width="480" height="480" src="https://vine.co/v/{@id}/embed/simple" allowfullscreen="" frameborder="0" scrolling="no"/><script async="" src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"/></xsl:template><xsl:template match="YOUTUBE"><iframe width="560" height="315" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//www.youtube.com/embed/<xsl:value-of select="@id"/><xsl:if test="@list or@t">?<xsl:if test="@list">list=<xsl:value-of select="@list"/><xsl:if test="@t">&amp;</xsl:if></xsl:if><xsl:if test="@t">start=<xsl:value-of select="@t"/></xsl:if></xsl:if></xsl:attribute></iframe></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/><xsl:template match="html:abbr"><abbr><xsl:copy-of select="@title"/><xsl:apply-templates/></abbr></xsl:template><xsl:template match="html:div"><div><xsl:copy-of select="@class"/><xsl:apply-templates/></div></xsl:template><xsl:template match="html:span"><span><xsl:copy-of select="@class"/><xsl:apply-templates/></span></xsl:template><xsl:template match="html:td"><td><xsl:copy-of select="@colspan"/><xsl:copy-of select="@rowspan"/><xsl:apply-templates/></td></xsl:template><xsl:template match="html:th"><th><xsl:copy-of select="@colspan"/><xsl:copy-of select="@rowspan"/><xsl:copy-of select="@scope"/><xsl:apply-templates/></th></xsl:template></xsl:stylesheet>'));
function Q(a,b){var c;a:{c=p;if(b.k){var d,e,g=B(a);for(d in g){var h=g[d];if(b.k[d]){if(e=b.k[d],e.b){c.l(d);for(var f=0;f<e.b.length;++f)if(h=e.b[f](h,d),!1===h){delete a.k[d];break}!1!==h&&a.l(d,h);delete c.G}}else delete a.k[d]}for(d in b.k)if(e=b.k[d],!(d in a.k)&&e.j){c=!1;break a}}else ra(a,{});c=!0}return c}function za(a){return/^[-\w+., ]+$/.test(a)?a:!1}function U(a){return fa(a)}function Aa(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}
function Ba(a){var b=ga.mediasites,c;if("media"in a.k)c=a.k.media,!("id"in a.k)&&"url"in a.k&&-1===a.k.url.indexOf("://")&&a.l("id",a.k.url);else if("url"in a.k){var d=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.k.url);if(d[1]&&b[d[1]+":"])c=b[d[1]+":"];else if(d[2]){d=d[2];do{if(b[d]){c=b[d];break}var e=d.indexOf(".");if(-1==e)break;d=d.substr(1+e)}while(""<d)}}c&&(b=a.D||a,d=a.n,c=J(3,c.toUpperCase(),d,b.n+b.y-d),ra(c,B(a)),c.q=a.q);return!1}function Ea(){return!0}
function Fa(a){a:{for(var b in B(a))if("url"!==b){a=!0;break a}a=!1}return a}function Da(a){return k(a,/^(?:\d+)$/)}function V(a,b){return Xa(a,b)}function Ga(a){return k(a,/^(?:[A-Za-z0-9]+)$/)}function Ha(a){return k(a,/^(?:[0-9]+)$/)}function Ia(){return!0}function Ja(a){return k(a,/^(?:[a-f_0-9]+)$/)}function Ma(){return!0}
function Ka(a){return k(a,/^(?:https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)$/)}function La(a){return k(a,/^(?:[-\w]+)$/)}function Na(a){return k(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}function Oa(a){return k(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}function Qa(){return!0}function Pa(a){return k(a,/^(?:(?!m\/)\w+)$/)}function Ra(a){return k(a,/^(?:[^\/]+)$/)}
window.s9e={TextFormatter:{disablePlugin:function(a){xa[a]&&(xa[a].K=!0)},enablePlugin:function(a){xa[a]&&(xa[a].K=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,e=b.childNodes,m=c.length,u=e.length,n,v,t=0,y=0;t<m&&t<u;){n=c[t];v=e[t];if(!d(n,v))break;++t}for(var z=Math.min(m-t,u-t);y<z;){n=c[m-(y+1)];v=e[u-(y+1)];if(!d(n,v))break;++y}n=g.createDocumentFragment();for(z=t;z<u-y;)v=e[z].cloneNode(!0),n.appendChild(v),++z;for(z=m-y;--z>=t;)a.removeChild(c[z]);y?a.insertBefore(n,a.childNodes[t]):
a.appendChild(n)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,g=e.length,u=d.length;0<=--u;){var n=d[u],v=n.namespaceURI,n=n.name;b.hasAttributeNS(v,n)||a.removeAttributeNS(v,n)}for(u=g;0<=--u;)d=e[u],v=d.namespaceURI,n=d.name,d=d.value,d!==a.getAttributeNS(v,n)&&a.setAttributeNS(v,n,d);c(a,
b);return!0}var e=Va(a),e=lb(e),g=b.ownerDocument,e=g.importNode(mb.transformToFragment(e,g),!0);c(b,e)}}};
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		window.setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.0.0/punycode.min.js"></script>
</body>
</html>