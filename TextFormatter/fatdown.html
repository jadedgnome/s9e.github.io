<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		pre, code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		pre code
		{
			border: 0;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
		p
		{
			margin: 0;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash like \*this\*
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments <!-- like this one -->
 - **HTMLElements** --- several HTML elements such as <sub>sub</sub> and <sup>sup</sup> are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:  
   http://youtu.be/QH2-TGUlwu4

***

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 32.7 KB (13.6 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var l=[0,0],aa={d:0},m=["","id"],ba={d:514},ea={d:3201},ha={d:3141},ia={d:3073},ka={d:3137},la=[61287,7936],ma=[65320,16128],na=[65376,16128],oa=[65399,16160],pa=[65312,16144],qa=[65393,16128],ra=[65312,16128],sa={n:!0},ta=[64371,16160],p={n:!1},ua={"class":p},xa=["url",/^(\d+)$/,m],r={C:1,EM:1,EMAIL:1,STRONG:1,URL:1,"html:b":1,"html:code":1,"html:i":1,"html:strong":1,"html:u":1},ya={d:268,q:r},za={d:3460,q:r};function Aa(a,b){return Ba(a,b)}
function Ca(a,b){var c;a:{c=Da;if(b.j){var d,e,g=Ea(a);for(d in g){var f=g[d];if(b.j[d]){if(e=b.j[d],e.b){c.p(d);for(var k=0;k<e.b.length;++k)if(f=e.b[k](f,d),!1===f){delete a.j[d];break}!1!==f&&a.p(d,f)}}else delete a.j[d]}for(d in b.j)if(e=b.j[d],!(d in a.j)&&e.n){c=!1;break a}}else Fa(a,{});c=!0}return c}
var Ia=[function(a){return t(a,/^\d+$/)}],v=[Ca],Ja=[function(a){return t(a,/^[-\w]+$/)}],Ka={b:[function(a){return/^[-\w+., ]+$/.test(a)?a:!1}],n:!1},Pa=[function(a){var b=La.urlConfig,c=Da,d=Ma(a.replace(/^\s+/,"").replace(/\s+$/,""));Na(b,d)?(c&&(d.attrValue=a),a=!1):a=Oa(d);return a}],Qa={v:{"html:dd":1,"html:dt":1},d:256,q:r},Ra={v:{"html:td":1,"html:th":1},d:264,q:r},Wa={b:Ia,n:!0},x={b:Ia,n:!1},Xa={b:Ja,n:!1},B={b:Pa,n:!1},Ya={b:Pa,n:!0},Za={v:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},
d:256,q:r},$a={c:l,f:0,b:v,g:10,e:{d:66},i:1E3},ab={c:qa,f:0,b:v,g:10,e:{d:2},i:1E3},bb={c:qa,f:0,b:v,g:10,e:aa,i:1E3},cb={c:oa,f:0,b:v,g:10,e:{d:512},i:1E3},db={c:na,j:{"char":sa},f:6,b:v,g:10,e:ia,i:1E3},eb=[Aa,Ca],fb={c:qa,f:2,b:v,g:10,e:{d:260,q:r},i:1E3},gb={c:ma,f:1,b:v,g:10,e:za,i:1E3},hb={c:oa,f:3,b:v,g:10,e:{v:{LI:1,"html:li":1},d:264,q:r},i:1E3};function ib(a){a:{for(var b in Ea(a))if("url"!==b){a=!0;break a}a=!1}return a}
var jb=[Aa,Ca,ib],kb='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aBANDCAMP"><$t$hbandcamp"$j$f400px"><$t$j$d100%"><$r$l"$pno"$j$b><$n$usrc">//bandcamp.com/EmbeddedPlayer/size=large/minimal=true/<$o><$m$q@album_id">album=$c@album_id"/><$s$q@track_num">/t=$c@track_num"/></$s></$m><$i>track=$c@track_id"/></$i></$o></$n></$r></$t></$t>$e$aC"><code>$g</code>$e$aCODE"><pre><code><$s$q@lang"><$n$uclass">language-$c@lang"/></$n></$s>$g</code></pre>$e$aDAILYMOTION"><$t$hdailymotion"$j$f640px"><$t$j$d56.25%"><$r$l"$pno"$v//www.dailymotion.com/embed/video/{@id}"$j$b/></$t></$t>$e$aDEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:dd|html:del|html:dl|html:dt|html:i|html:ins|html:li|html:ol|html:pre|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|html:ul|p"><xsl:element$u{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}">$g</xsl:element>$e$aEMAIL"><a href="mailto:{@email}">$g</a>$e$aESC">$g$e$aFACEBOOK"><$o><$m$q@type=\'video\'"><$t$hfacebook"$j$f640px"><$t$j$d56.25%"><$r$l"$pno"$vhttps://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fuser%2Fvideos%2F{@id}%2F%3Ftype%3D3"$j$b/></$t></$t></$m><$i><$r$hfacebook"$l" onload="var a=Math.random();window.addEventListener(\'message\',function(b){{if(b.data.id==a)style.height=b.data.height+\'px\'}});contentWindow.postMessage(\'s9e:\'+a,\'https://s9e.github.io\')"$pno"$vhttps://s9e.github.io/$r/facebook.min.html#{@id}"$jborder:0;height:360px;max-width:640px;width:100%"/></$i></$o>$e$aFP|HE">$c@char"/>$e$aHC"><xsl:comment>$c@content"/></xsl:comment>$e$aHR"><hr/>$e$aIMG"><img$v{@src}">$kalt|@title"/></img>$e$aLIST"><$o><$m$qnot(@type)"><ul>$g</ul></$m><$i><ol>$kstart"/>$g</ol></$i></$o>$e$aLIVELEAK"><$t$hliveleak"$j$f640px"><$t$j$d56.25%"><$r$l"$pno"$v//www.liveleak.com/ll_embed?i={@id}"$j$b/></$t></$t>$e$aQUOTE"><blockquote>$g</blockquote>$e$aSOUNDCLOUD"><$r$hsoundcloud"$l"$pno"><$n$usrc">https://w.soundcloud.com/player/?url=<$o><$m$q@playlist_id">https%3A//api.soundcloud.com/playlists/$c@playlist_id"/></$m><$m$q@track_id">https%3A//api.soundcloud.com/tracks/$c@track_id"/>&amp;secret_token=$c@secret_token"/></$m><$i><$s$qnot(contains(@id,\'://\'))">https%3A//soundcloud.com/</$s>$c@id"/></$i></$o></$n><$n$ustyle">border:0;height:<$o><$m$q@playlist_id or contains(@id,\'/sets/\')">450</$m><$i>166</$i></$o>px;max-width:900px;width:100%</$n></$r>$e$aSPOTIFY"><$t$hspotify"$j$f400px"><$t$j$d120%"><$r$l"$pno"$j$b><$n$usrc">https://embed.spotify.com/?view=coverart&amp;uri=<$o><$m$q@uri">$c@uri"/></$m><$i>spotify:$ctranslate(@path,\'/\',\':\')"/></$i></$o></$n></$r></$t></$t>$e$aTWITCH"><$t$htwitch"$j$f640px"><$t$j$d56.25%"><$r$l"$pno"$j$b><$n$usrc">//player.twitch.tv/?autoplay=false&amp;<$o><$m$q@archive_id">video=a$c@archive_id"/></$m><$m$q@chapter_id">video=c$c@chapter_id"/></$m><$m$q@video_id">video=v$c@video_id"/></$m><$i>channel=$c@channel"/></$i></$o><$s$q@t">&amp;time=$c@t"/></$s></$n></$r></$t></$t>$e$aURL"><a href="{@url}">$ktitle"/>$g</a>$e$aVIMEO"><$t$hvimeo"$j$f640px"><$t$j$d56.25%"><$r$l"$pno"$v//player.vimeo.com/video/{@id}"$j$b/></$t></$t>$e$aVINE"><$t$hvine"$j$f480px"><$t$j$d100%"><$r$l"$pno"$vhttps://vine.co/v/{@id}/embed/simple?audio=1"$j$b/></$t></$t>$e$aYOUTUBE"><$t$hyoutube"$j$f640px"><$t$j$d56.25%"><$r$l"$pno"$jbackground:url(https://i.ytimg.com/vi/{@id}/hqdefault.jpg) 50% 50% / cover;$b><$n$usrc">https://www.youtube.com/embed/$c@id"/><$s$q@list">?list=$c@list"/></$s><$s$q@t or@m"><$o><$m$q@list">&amp;</$m><$i>?</$i></$o>start=<$o><$m$q@t">$c@t"/></$m><$m$q@h">$c@h*3600+@m*60+@s"/></$m><$i>$c@m*60+@s"/></$i></$o></$s></$n></$r></$t></$t>$e$abr"><br/>$e$ae|i|s"/>$ahtml:abbr"><abbr>$ktitle"/>$g</abbr>$e$ahtml:$t"><$t>$kclass"/>$g</$t>$e$ahtml:img"><img>$kalt|@height|@src|@title|@width"/>$g</img>$e$ahtml:span"><span>$kclass"/>$g</span>$e$ahtml:td"><td>$kcolspan|@rowspan"/>$g</td>$e$ahtml:th"><th>$kcolspan|@rowspan|@scope"/>$g</th>$e</xsl:stylesheet>'.replace(/\$[a-v]/g,function(a){return{$a:'<xsl:template match="',
$b:'border:0;height:100%;left:0;position:absolute;width:100%"',$c:'<xsl:value-of select="',$d:"overflow:hidden;position:relative;padding-bottom:",$e:"</xsl:template>",$f:"display:inline-block;width:100%;max-width:",$g:"<xsl:apply-templates/>",$h:' data-s9e-mediaembed="',$i:"xsl:otherwise",$j:' style="',$k:'<xsl:copy-of select="@',$l:' allowfullscreen="',$m:"xsl:when",$n:"xsl:attribute",$o:"xsl:choose",$p:' scrolling="',$q:' test="',$r:"iframe",$s:"xsl:if",$t:"div",$u:' name="',$v:' src="'}[a]});
function lb(a){var b=document.createElement("b");lb=function(a){b.innerHTML=a.replace(/</g,"&lt;");return b.textContent};return lb(a)}function mb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function nb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function ob(){return!0}
function pb(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function t(a,b){return b.test(a)?a:!1}
function Ma(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function Oa(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=pb(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+pb(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path+a.query+a.fragment,c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c),b=b+c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,escape);a.scheme||(b=b.replace(/^([^\/]*):/,
"$1%3A",b));return b}
function Na(a,b){if(""!==b.scheme&&!a.R.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&c)}if(c)return"URL host is invalid";
if(a.U&&a.U.test(b.host)||a.Y&&!a.Y.test(b.host))return"URL host is not allowed"}}function qb(){}qb.prototype={p:function(){}};function rb(a,b,c,d,e){this.r=+a;this.l=b;this.k=+c;this.o=+d;"undefined"!==typeof e&&(this.B=+e);this.j={};this.G=[];isNaN(a+c+d)&&E(this)}rb.prototype.E=!1;function sb(a,b){a.G.push(b);a.E&&E(b)}function E(a){a.E||(a.E=!0,a.G.forEach(function(a){E(a)}))}
function F(a,b){a.l===b.l&&(1===a.r&&2===b.r&&b.k>=a.k?(a.x=b,b.F=a,sb(a,b)):2===a.r&&1===b.r&&b.k<=a.k&&(a.F=b,b.x=a))}function Ea(a){var b={},c;for(c in a.j)b[c]=a.j[c];return b}function tb(a,b){return a.E||a.l!==b.l||1!==b.r||2!==a.r||a.k<b.k||a.F&&a.F!==b||b.x&&b.x!==a?!1:!0}rb.prototype.p=function(a,b){this.j[a]=b};function Fa(a,b){a.j={};for(var c in b)a.j[c]=b[c]}
var ub,vb,wb,G,xb,J,yb,Da=new qb,zb,K,O,Bb={Autoemail:{w:function(a,b){b.forEach(function(a){var b=P(1,"EMAIL",a[0][1],0,0);b.p("email",a[0][0]);a=Q("EMAIL",a[0][1]+a[0][0].length,0);F(b,a)})},y:"@",z:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,A:1E4},Autolink:{w:function(a,b){b.forEach(function(a){var b=a[0][1];for(a=a[0][0];;)if(a=a.replace(/(?![-=\/)])[\s!-.:-@[-`{-~]+$/,""),")"===a.substr(-1)&&a.replace(/[^(]+/g,"").length<a.replace(/[^)]+/g,"").length)a=a.substr(0,a.length-1);else break;if(/^www\.|^[^:]+:/i.test(a)){var e=
Q("URL",b+a.length,0);"."===a.charAt(3)&&(a="http://"+a);b=P(1,"URL",b,0,1);b.p("url",a);F(b,e)}})},y:"://",z:/\b(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,A:1E4},Escaper:{w:function(a,b){b.forEach(function(a){R("ESC",a[0][1],1,a[0][1]+a[0][0].length,0)})},y:"\\",z:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,A:1E4},FancyPants:{w:function(a){function b(a,b,c,d){a=P(3,k.K,a,b,d||0||0);a.p(k.S,c);return a}function c(){for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,
e[0].length,c[e[0]])}function d(c,d,e,f){for(var g;g=d.exec(a);){var k=b(+g.index+g[0].indexOf(c),1,e);g=b(+g.index+g[0].length-1,1,f);sb(k,g)}}function e(a){for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019",10)}function g(a){for(var c,d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);)if("x"===d[0].charAt(d[0].length-1)&&b(+d.index+d[0].length-1,1,"\u00d7"),c=d[0].charAt(1),"'"===c||'"'===c)c="'s"===d[0].substr(1,2)?"\u2019":"'"===c?"\u2032":
"\u2033",b(+d.index+1,1,c)}function f(){for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var k={S:"char",K:"FP"},h=0<=a.indexOf("'"),n=0<=a.indexOf('"');h&&e(a);(h||n||0<=a.indexOf("x"))&&g(a);h&&d("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");n&&d('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(0<=a.indexOf("...")||0<=a.indexOf("--"))&&c();0<=a.indexOf("(")&&f()}},HTMLComments:{w:function(a,b){b.forEach(function(a){var b=
lb(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");P(3,"HC",a[0][1],a[0][0].length,0).p("content",b)})},y:"\x3c!--",z:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,A:1E4},HTMLElements:{w:function(a,b){var c={a:{"":"URL",href:"url"},em:{"":"EM"},hr:{"":"HR"},s:{"":"S"},strong:{"":"STRONG"},sup:{"":"SUP"}};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),g=b[0][1],f=b[0][0].length,k=b[2-e][0].toLowerCase(),h=c&&c[k]&&c[k][""]?c[k][""]:"html:"+k;if(e)Q(h,g,f);else{e=/(<\S+|['"\s])\/>$/.test(b[0][0])?
R(h,g,f,g+f,0):P(1,h,g,f,0);b=b[3][0];for(var g=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,n;h=g.exec(b);)n=h[0].indexOf("="),0>n&&(n=h[0].length,h[0]+="="+h[0].toLowerCase()),f=h[0].substr(0,n).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),h=h[0].substr(1+n).replace(/^\s+/,"").replace("/s+$/",""),c&&c[k]&&c[k][f]&&(f=c[k][f]),/^["']/.test(h)&&(h=h.substr(1,h.length-2)),e.p(f,lb(h))}})},y:"<",z:/<(?:\/((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))|((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,
A:1E4},HTMLEntities:{w:function(a,b){b.forEach(function(a){var b=a[0][0],e=lb(b);e===b||32>e.charCodeAt(0)||P(3,"HE",a[0][1],b.length,0).p("char",e)})},y:"&",z:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,A:1E4},Litedown:{w:function(a){function b(a,b,c,d,e){var f=R("IMG",a,2,b,c);z(f,d,"src");f.p("alt",g(e));y(a,b+c-a)}function c(a,b,c,d){var e=R("URL",a,1,b,c,1===c?1:-1);z(e,d,"url");y(a,1);y(b,c)}function d(a,b){F(Q("LIST",b,0),a.V);F(Q("LI",b,0),a.I);a.P&&a.J.forEach(function(a){a.d&=-9})}function e(a,
b){for(var c=a;0<=--b;)c=c.replace(/^ *> ?/,"");return a.length-c.length}function g(a){$b.T&&-1<a.indexOf("&")&&(a=lb(a));a=a.replace(/\x1A/g,"");ja&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":"'","\u001b3":"(","\u001b4":")","\u001b5":"*","\u001b6":"[","\u001b7":"\\","\u001b8":"]","\u001b9":"^","\u001bA":"_","\u001bB":"`","\u001bC":"~"}[a]}));return a}function f(a){return a.replace(/\\[!"'()*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\'":"\u001b2",
"\\(":"\u001b3","\\)":"\u001b4","\\*":"\u001b5","\\[":"\u001b6","\\\\":"\u001b7","\\]":"\u001b8","\\^":"\u001b9","\\_":"\u001bA","\\`":"\u001bB","\\~":"\u001bC"}[a]})}function k(b,c){return/[ \t]*#*[ \t]*$/.exec(a.substr(b,c-b))[0].length}function h(){var b={};if(-1===a.indexOf("-")&&-1===a.indexOf("="))return b;for(var c,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;c=d.exec(a);){var e=c[0];c=c.index;for(var f=c-1;0<f&&" "===a[f-1];)--f;b[c-1]={L:c+e.length-f,M:f,X:e.length-e.replace(/>/g,"").length,
K:"="===e.charAt(0)?"H1":"H2"}}return b}function n(a){return 0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a)}function L(b){a=a.substr(0,b)+"\u0017"+a.substr(b+1)}function u(b,c){var d=a.indexOf(b);if(-1!==d){var e=[],f=[],g=g=a.indexOf("\u0017",d),k;for(c.lastIndex=d;k=c.exec(a);)d=k.index,k=k[0].length,d>g&&(f.push(e),e=[],g=a.indexOf("\u0017",d)),"_"===a[d]&&1===k&&0<d&&n(a[d-1])&&n(a[d+k])||e.push([d,k]);f.push(e);f.forEach(H)}}function q(){for(var b,d=/\[(?:[^\x17[\]]|\[[^\x17[\]]*\])*\]\(((?:[^\x17\s()]|\([^\x17\s()]*\))*(?: +(?:"[^\x17]*?"|'[^\x17]*?'|\([^\x17\)]*?\)))?)\)/g;b=
d.exec(a);){var e=b[1],f=b.index,g=3+e.length;c(f,f+b[0].length-g,g,e)}}function w(){for(var b={},d,e=/\[((?:[^\x17[\]]|\[[^\x17[\]]*\])*)\]/g;d=e.exec(a);)b[d.index]=d[1].toLowerCase();for(var f in b){d=b[f];var e=+f+2+d.length,g=e-1,k=1;" "===a.charAt(e)&&++e;""<b[e]&&A[b[e]]&&(d=b[e],k=e+2+d.length-g);A[d]&&c(+f,g,k,A[d])}}function y(b,c){a=a.substr(0,b)+Array(1+c).join("\u001a")+a.substr(b+c)}function H(a){var b=0,c=-1,d=-1,e;a.forEach(function(a){var f=a[0];a=a[1];var g=Math.min(3,a),k=g&b&1,
g=g&b&2,Jb=f,h=f;2<b&&c===d&&(k?c+=2:++d);k&&g&&(c<d?Jb+=2:++h);e=a;k&&(--b,--e,R("EM",c,1,Jb,1));g&&(b-=2,e-=2,R("STRONG",d,2,h,2));e=Math.min(3,e);e&1&&(c=f+a-e);e&2&&(d=f+a-e);b+=e})}function z(a,b,c){var d=b,e="",f=b.indexOf(" ");-1!==f&&(d=b.substr(0,f),e=b.substr(f).replace(/^\s*\S/,"").replace(/\S\s*$/,""));a.p(c,g(d));""<e&&a.p("title",g(e))}var $b={T:!0},ja,ca,A,Sa,Ta,Kb,Ua;0>a.indexOf("\\")?ja=!1:(ja=!0,a=f(a));a+="\n\n\u0017";(function(){for(var b,c=4,f,g=!0,W=[],n=0,q=!1,u=[],w=0,z=h(),
X=0,H,A,ca,M,ja,Lb,I,C,Va,Ga,Y,Z,fa,Mb=[],va,Ha=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+[^`\n]*$|~~~+[^~\n]*$)?)?/gm;va=Ha.exec(a);)Mb.push(va),va.index===Ha.lastIndex&&++Ha.lastIndex;Mb.forEach(function(h){var D=h.index,wa=h[0].length;Y=M=0;A=!g;I=a.indexOf("\n",D);g=I===D+wa&&!h[3]&&!h[4]&&!h[5];wa||++Ha.lastIndex;H=g&&A;h[1]&&(Y=h[1].length-h[1].replace(/>/g,"").length,M=h[1].length,f&&
"quoteDepth"in f.j&&(Y=Math.min(Y,f.j.quoteDepth),M=e(h[1],Y)),y(D,M));if(Y<w&&!A){q=!0;do F(Q("QUOTE",X,0),u.pop());while(Y<--w)}if(Y>w&&!g){q=!0;do{var ga=P(1,"QUOTE",D,0,w||0);u.push(ga)}while(Y>++w)}var N=0,da=0;if(h[2]&&!b){ja=h[2];Lb=ja.length;do" "===ja.charAt(da)?++N:N=N+4&-4;while(++da<Lb&&N<c)}f&&!b&&N<c&&!g&&(q=!0);q&&(q=!1,f&&(y(f.k,X-f.k),ca=Q("CODE",X,0,-1),F(ca,f),b=f=null),W.forEach(function(a){d(a,X)}),W=[],n=0,D&&L(D-1));if(N>=c){if(f||!A)M=(h[1]||"").length+da,f||(f=P(1,"CODE",
D+M,0,0)),h={}}else{ga=!!h[4];if(N||A||ga)if(A&&!ga)C=n-1;else if(n)for(C=0;C<n&&N>W[C].N;)++C;else C=!ga||A&&"\u0017"!==a.charAt(D-1)?-1:0;else C=-1;for(;C<n-1;)d(W.pop(),X),--n;C!==n||ga||--C;if(ga&&0<=C)if(H=!0,Z=D+M+da,fa=h[4].length,da=P(1,"LI",Z,fa,0),y(Z,fa),C<n)F(Q("LI",X,0),W[C].I),W[C].I=da,W[C].J.push(da);else{++n;C?(Ga=W[C-1].N+1,Va=Math.max(Ga,4*C)):(Ga=0,Va=N);N=P(1,"LIST",Z,0,0);if(-1<h[4].indexOf(".")){N.p("type","decimal");var va=+h[4];1!==va&&N.p("start",va)}W.push({V:N,I:da,J:[da],
$:Ga,N:Va,P:!0})}!n||A||g||(1<W[0].J.length||!ga)&&W.forEach(function(a){a.P=!1});c=4*(n+1)}if(h[5])if("#"===h[5].charAt(0))Sa=h[5].length,Ta=D+wa-Sa,Ua=k(D+wa,I),Kb=I-Ua,R("H"+/#{1,6}/.exec(h[5])[0].length,Ta,Sa,Kb,Ua),L(Ta),L(I),A&&(H=!0);else{if("`"===h[5].charAt(0)||"~"===h[5].charAt(0))Z=D+M,fa=I-Z,f&&h[5]===b?(ca=Q("CODE",Z,fa,-1),F(ca,f),Ab(X,Z-X),y(f.k,Z+fa-f.k),b=f=null):f||(f=P(1,"CODE",Z,fa,0),b=h[5].replace(/[^`~]+/,""),f.p("quoteDepth",Y),Ab(Z+fa,1),h=h[5].replace(/^[`~\s]*/,"").replace(/\s+$/,
""),""!==h&&f.p("lang",h))}else h[3]&&!n&&"\u0017"!==a.charAt(D+wa)?(P(3,"HR",D+M,wa-M,0),H=!0,L(I)):!z[I]||z[I].X!==Y||g||n||f||(R(z[I].K,D+M,0,z[I].M,z[I].L),L(z[I].M+z[I].L));H&&(P(3,"pb",X,0,0),L(X));g||(X=I);M&&Ab(D,M,1E3)})})();(function(){ca=!1;A={};if(-1!==a.indexOf("]:"))for(var b,c=/^\x1A* {0,3}\[([^\x17\]]+)\]: *([^\s\x17]+ *(?:"[^\x17]*?"|'[^\x17]*?'|\([^\x17\)]*?\))?)[^\x17\n]*\n?/gm;b=c.exec(a);){Ab(b.index,b[0].length,-2);var d=b[1].toLowerCase();A[d]||(ca=!0,A[d]=b[2])}})();(function(){var b;
var c=a.indexOf("`");if(0>c)b=[];else{b=/(`+)(\s*)[^\x17`]*/g;var d=0,e=[],f=a.replace(/\x1BB/g,"\\`");for(b.lastIndex=c;c=b.exec(f);)e.push({k:c.index,o:c[1].length,Q:d,Z:c[2].length,O:c.index+c[0].length}),d=c[0].length-c[0].replace(/\s+$/,"").length;b=e}f=-1;for(d=b.length;++f<d-1;)for(c=b[f].O,e=f,"`"!==a.charAt(b[f].k)&&(++b[f].k,--b[f].o);++e<d&&b[e].k===c;){if(b[e].o===b[f].o){var f=b[f],g=b[e],c=f.k,h=g.k-g.Q,g=g.o+g.Q;R("C",c,f.o+f.Z,h,g);y(c,h+g-c);f=e;break}c=b[e].O}})();(function(){var c=
a.indexOf("![");if(-1!==c){if(0<a.indexOf("](",c))for(var d=/!\[(?:[^\x17[\]]|\[[^\x17[\]]*\])*\]\(((?:[^\x17\s()]|\([^\x17\s()]*\))*(?: +(?:"[^\x17]*?"|'[^\x17]*?'|\([^\x17\)]*?\)))?)\)/g;c=d.exec(a);){var e=c[1],f=c.index,g=3+e.length;b(f,f+c[0].length-g,g,e,c[0].substr(2,c[0].length-g-2))}if(ca)for(d=/!\[((?:[^\x17[\]]|\[[^\x17[\]]*\])*)\](?: ?\[([^\x17[\]]+)\])?/g;c=d.exec(a);){var e=+c.index,f=e+2+c[1].length,g=1,h=c[1],k=h;if(""<c[2]&&A[c[2]])g=c[0].length-h.length-2,k=c[2];else if(!A[k])continue;
b(e,f,g,A[k],h)}}})();-1!==a.indexOf("](")&&q();ca&&w();(function(){if(-1!==a.indexOf("~~"))for(var b,c=/~~[^\x17]+?~~/g;b=c.exec(a);){var d=b.index;R("DEL",d,2,d+b[0].length-2,2)}})();(function(){if(-1!==a.indexOf("^"))for(var b,c=/\^[^\x17\s]+/g;b=c.exec(a);){var d=b[0],e=b=b.index,f=b+d.length,d=d.split("^");d.shift();d.forEach(function(a){R("SUP",e,1,f,0);e+=1+a.length})}})();u("*",/\*+/g);u("_",/_+/g);(function(){for(var b=a.indexOf("  \n");-1!==b;)P(3,"br",b+2,0,0),b=a.indexOf("  \n",b+3)})()}},
MediaEmbed:{w:function(a,b){b.forEach(function(a){var b=a[0][0];P(3,"MEDIA",a[0][1],b.length,-10).p("url",b)})},y:":",z:/\b(?:spotify:|https?:\/\/)[^["'\s]+/g,A:1E4}},S,La={mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","liveleak.com":"liveleak","open.spotify.com":"spotify","play.spotify.com":"spotify","soundcloud.com":"soundcloud","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","youtu.be":"youtube","youtube.com":"youtube"},
urlConfig:{R:/^(?:ftp|https?)$/i}},Cb={c:oa,d:8},T={BANDCAMP:{c:l,j:{album_id:x,track_id:x,track_num:x,url:B},f:13,b:[ob,Ca,ib],g:10,e:ha,i:1E3},C:$a,CODE:{c:l,j:{lang:Ka},f:1,b:v,g:10,e:{d:4436,q:r},i:1E3},DAILYMOTION:{c:l,u:[["url",/dailymotion\.com\/(?:live\/|swf\/|user\/[^#]+#video=|(?:related\/\d+\/)?video\/)([A-Za-z0-9]+)/,m],["url",/^([A-Za-z0-9]+)$/,m]],j:{id:{b:[function(a){return t(a,/^[A-Za-z0-9]+$/)}],n:!0},url:B},f:13,b:eb,g:10,e:ha,i:1E3},DEL:cb,EM:ab,EMAIL:{c:la,j:{email:{b:[function(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?
a:!1}],n:!0}},f:4,b:v,g:10,e:ba,i:1E3},ESC:{c:l,f:5,b:v,g:10,e:{d:1616},i:1E3},FACEBOOK:{c:l,u:[["url",/\/(?!(?:apps|developers|graph)\.)[-\w.]*facebook\.com\/(?:[\/\w]+\/permalink|(?!pages\/|groups\/).*?)(?:\/|fbid=|\?v=)(\d+)(?=$|[\/?&#])/,m],["url",/\/(video)s?\//,["","type"]],xa],j:{id:Wa,type:{b:[function(a){return t(a,/^video$/)}],n:!1},url:B},f:13,b:eb,g:10,e:ha,i:1E3},FP:db,H1:fb,H2:fb,H3:fb,H4:fb,H5:fb,H6:fb,HC:{c:l,j:{content:sa},f:5,b:v,g:10,e:ka,i:1E3},HE:db,HR:{c:na,f:1,b:v,g:10,e:{d:3333},
i:1E3},IMG:{c:na,j:{alt:p,src:Ya,title:p},f:0,b:v,g:10,e:ia,i:1E3},LI:hb,LIST:{c:ma,j:{start:{b:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],n:!1},type:Ka},f:1,b:v,g:10,e:za,i:1E3},LIVELEAK:{c:l,u:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,m],["url",/^([a-f_0-9]+)$/,m]],j:{id:{b:[function(a){return t(a,/^[a-f_0-9]+$/)}],n:!0},url:B},f:13,b:eb,g:10,e:ha,i:1E3},MEDIA:{c:l,f:5,b:[function(a){return function(a,c){function d(a,b){var c=a.x||a,d=a.k;Fa(P(3,b.toUpperCase(),d,c.k+c.o-d,a.B||0),
Ea(a))}return function(a,b){if("media"in a.j){var c=a.j.media.toLowerCase(),k;a:{for(k in b)if(b[k]===c){k=!0;break a}k=!1}k&&d(a,c)}else if("url"in a.j){k=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.j.url);if(k[1]&&b[k[1]+":"])c=b[k[1]+":"];else if(k[2])a:{c=k[2];do{if(b[c]){c=b[c];break a}k=c.indexOf(".");if(0>k)break;c=c.substr(1+k)}while(""<c);c=!1}c&&d(a,c)}return!1}(a,c)}(a,La.mediasites)}],g:10,e:{d:577},i:1E3},QUOTE:{c:oa,f:1,b:v,g:10,e:ya,i:1E3},SOUNDCLOUD:{c:l,u:[["url",/(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)/,
m],["url",/api.soundcloud.com\/playlists\/(\d+)/,["","playlist_id"]],["url",/api.soundcloud.com\/tracks\/(\d+)(?:\?secret_token=([-\w]+))?/,["","track_id","secret_token"]],["url",/soundcloud\.com\/(?!playlists|tracks)[-\w]+\/[-\w]+\/(?=s-)([-\w]+)/,["","secret_token"]],["url",/^((?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$))$/,m]],j:{id:{b:[function(a){return t(a,/^(?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)$/)}],
n:!0},playlist_id:x,secret_token:Xa,track_id:x,url:B},f:4,b:[Aa,ob,Ca],g:10,e:ka,i:1E3},SPOTIFY:{c:l,u:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],j:{path:{b:[function(a){return t(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}],n:!1},uri:{b:[function(a){return t(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}],n:!1},url:B},f:13,b:jb,g:10,e:ha,i:1E3},STRONG:ab,
SUP:bb,TWITCH:{c:l,u:[["url",/twitch\.tv\/(\w+)(?:\/b\/(\d+)|\/c\/(\d+)|\/v\/(\d+))?/,["","channel","archive_id","chapter_id","video_id"]],["url",/t=((?:(?:\d+h)?\d+m)?\d+s)/,["","t"]]],j:{archive_id:x,channel:{b:[function(a){return t(a,/^\w+$/)}],n:!1},chapter_id:x,t:{b:[function(a){return t(a,/^(?:(?:\d+h)?\d+m)?\d+s$/)}],n:!1},url:B,video_id:x},f:13,b:jb,g:10,e:ha,i:1E3},URL:{c:la,j:{title:p,url:Ya},f:4,b:v,g:10,e:ba,i:1E3},VIMEO:{c:l,u:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/|video\/)?(\d+)/,
m],xa],j:{id:Wa,url:B},f:13,b:eb,g:10,e:ha,i:1E3},VINE:{c:l,u:[["url",/vine\.co\/v\/([^\/]+)/,m],["url",/^([^\/]+)$/,m]],j:{id:{b:[function(a){return t(a,/^[^\/]+$/)}],n:!0},url:B},f:13,b:eb,g:10,e:ha,i:1E3},YOUTUBE:{c:l,u:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,m],["url",/youtu\.be\/([-\w]+)/,m],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,m]],j:{h:x,id:{b:Ja,n:!0},list:Xa,m:x,s:x,t:x,url:B},f:13,b:eb,g:10,
e:ha,i:1E3},"html:abbr":{c:qa,j:{title:p},f:0,b:v,g:10,e:aa,i:1E3},"html:b":ab,"html:br":{c:ra,f:0,b:v,g:10,e:ea,i:1E3},"html:code":$a,"html:dd":{c:oa,f:7,b:v,g:10,e:Qa,i:1E3},"html:del":cb,"html:div":{c:oa,j:ua,f:1,b:v,g:10,e:ya,i:1E3},"html:dl":{c:[65440,16128],f:1,b:v,g:10,e:za,i:1E3},"html:dt":{c:ta,f:7,b:v,g:10,e:Qa,i:1E3},"html:i":ab,"html:img":{c:ra,j:{alt:p,height:p,src:B,title:p,width:p},f:0,b:v,g:10,e:ea,i:1E3},"html:ins":cb,"html:li":hb,"html:ol":gb,"html:pre":{c:qa,f:1,b:v,g:10,e:{d:276,
q:r},i:1E3},"html:rb":{c:qa,f:8,b:v,g:10,e:Za,i:1E3},"html:rp":{c:qa,f:8,b:v,g:10,e:{v:{"html:rb":1,"html:rp":1,"html:rtc":1},d:256,q:r},i:1E3},"html:rt":{c:qa,f:9,b:v,g:10,e:{v:{"html:rb":1,"html:rp":1,"html:rt":1},d:256,q:r},i:1E3},"html:rtc":{c:[65393,16130],f:8,b:v,g:10,e:Za,i:1E3},"html:ruby":{c:[65393,16131],f:0,b:v,g:10,e:aa,i:1E3},"html:span":{c:qa,j:ua,f:0,b:v,g:10,e:aa,i:1E3},"html:strong":ab,"html:sub":bb,"html:sup":bb,"html:table":{c:[65312,16148],f:1,b:v,g:10,e:za,i:1E3},"html:tbody":{c:pa,
f:10,b:v,g:10,e:{v:{"html:tbody":1,"html:tfoot":1,"html:thead":1},d:3456,q:r},i:1E3},"html:td":{c:oa,j:{colspan:p,rowspan:p},f:11,b:v,g:10,e:Ra,i:1E3},"html:tfoot":{c:pa,f:10,b:v,g:10,e:{v:{"html:tbody":1,"html:thead":1},d:3456,q:r},i:1E3},"html:th":{c:ta,j:{colspan:p,rowspan:p,scope:p},f:11,b:v,g:10,e:Ra,i:1E3},"html:thead":{c:pa,f:10,b:v,g:10,e:{d:3456,q:r},i:1E3},"html:tr":{c:[65312,16136],f:12,b:v,g:10,e:{v:{"html:tr":1},d:3456,q:r},i:1E3},"html:u":ab,"html:ul":gb},U,Db,V,Eb,Fb=0,Gb;
function Hb(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");vb={};wb={};ub=[];xb=0;J=null;yb=!1;zb={};K=[];O="";S=0;U=[];Db=!1;V=a;Eb=V.length;Gb=0;G=Cb;G.D=!1;++Fb;a=Fb;for(var b in Bb)if(!Bb[b].H)a:{var c=b,d=Bb[c];if(!(d.y&&0>V.indexOf(d.y))){var e=[];if(d.z){e=d.z;d=d.A;e.lastIndex=0;for(var g=[],f=0,k=void 0;++f<=d&&(k=e.exec(V));){for(var h=+k.index,n=[[k[0],h]],L=0;++L<k.length;){var u=k[L];void 0===u?n.push(["",-1]):(n.push([u,V.indexOf(u,h)]),h+=u.length)}g.push(n)}e=
g;if(!e.length)break a}(0,Bb[c].w)(V,e)}}Ib();Nb();Ob(Eb,0,!0);do b=O,O=O.replace(/<([^ />]+)><\/\1>/g,"");while(O!==b);O=O.replace(/<\/i><i>/g,"",O);O=O.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pb);c=yb?"r":"t";b="<"+c;for(var q in zb)b+=" xmlns:"+q+'="urn:s9e:TextFormatter:'+q+'"';O=b+">"+O+"</"+c+">";if(Fb!==a)throw"The parser has been reset during execution";return O}function Nb(){ub.forEach(function(a){a.G=[];delete a.x;delete a.F});ub=[]}
function Ba(a,b){b.u&&b.u.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.j){var e=Qb(a.j[d],e,b),g;for(g in e)g!==d&&g in a.j||a.p(g,e[g])}});return!0}function Qb(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Pb(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Rb(a){yb=!0;var b=a.l,c=a.k,d=a.o,e=a.d,g=0,f=0;e&256&&(g=1,f=a.r&2?2:1);var k=!1;a.r&1?e&4&&(k=!0):k=!0;Ob(c,g,k);g=d?nb(V.substr(c,d)):"";if(a.r&1){e&4||Sb(c);e=b.indexOf(":");0<e&&(zb[b.substr(0,e)]=0);O+="<"+b;var h=Ea(a),e=[],n;for(n in h)e.push(n);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){O+=" "+a+'="'+mb(h[a].toString()).replace(/\n/g,"&#10;")+'"'});O=3===a.r?d?O+(">"+g+"</"+b+">"):O+"/>":d?O+("><s>"+g+"</s>"):O+">"}else d&&(O+="<e>"+g+"</e>"),O+="</"+b+">";for(Gb=
S=c+d;f&&Gb<Eb&&"\n"===V.charAt(Gb);)--f,++Gb}
function Ob(a,b,c){c&&(G.d&8?b=-1:c=!1);S>=a&&c&&Tb();if(Gb>S){var d=Math.min(a,Gb);O+=V.substr(S,d-S);S=d;S>=a&&c&&Tb()}if(G.d&128)d=a-S,b=V.substr(S,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),O+=b,S=a,c&&Tb();else{for(var e=a,d=0;b&&--e>=S;){var g=V.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;if(G.d&8)for(G.D||(Ub(a),a>S&&Sb(a)),b=V.indexOf("\n\n",S);-1<b&&b<a;)Ob(b,0,!0),Sb(a),b=V.indexOf("\n\n",S);a>S&&(b=nb(V.substr(S,a-S)),O+=b);c&&Tb();d&&(O+=V.substr(a,d));S=a+d}}
function Vb(a){var b=a.k;a=a.o;var c=V.substr(b,a);Ob(b,0,!1);O+="<i>"+nb(c)+"</i>";yb=!0;S=b+a}function Sb(a){!G.D&&G.d&8&&(Ub(a),S<Eb&&(O+="<p>",G.D=!0))}function Tb(){G.D&&(O+="</p>",G.D=!1)}function Ub(a){for(;S<a&&-1<" \n\t".indexOf(V.charAt(S));)O+=V.charAt(S),++S}function Wb(a,b){var c=a.l;a.d&256&&(b=Xb(b));c=Q(c,b,0);F(c,a)}function Xb(a){for(;a>S&&-1<" \n\t".indexOf(V.charAt(a-1));)--a;return a}
function Ib(){if(U.length){for(var a in T)vb[a]=0,wb[a]=0;do{for(;U.length;)Db||(U.sort(Yb),Db=!0),J=U.pop(),G.d&64&&!(tb(J,K[K.length-1])||-1<"br i pb v".indexOf(J.l))||Zb();K.forEach(function(a){Wb(a,Eb)})}while(U.length)}}
function Zb(){if(!J.E){var a=J.k,b=J.o;if(S>a){var c;if((c=J.F)&&0<=K.indexOf(c))F(Q(c.l,S,Math.max(0,a+b-S)),c);else{if("i"===J.l&&(a=a+b-S,0<a)){Ab(S,a);return}E(J)}}else if("i"===J.l)Vb(J);else if("br"===J.l)G.d&1024||(Ob(J.k,0,!1),O+="<br/>");else if("pb"===J.l)Ob(J.k,0,!0);else if("v"===J.l)a=G.d,G.d=J.d,Ob(J.k+J.o,0,!1),G.d=a;else if(J.r&1)if(a=J,b=a.l,c=T[b],wb[b]>=c.i)E(a);else{var d=a,e=T[d.l],g=!0;if(e.b)for(var f=0;f<e.b.length;++f)if(!e.b[f](d,e)){g=!1;break}if(g){a:{d=a;if(K.length&&
(g=d.l,f=T[g],f.e.q)){var e=K[K.length-1],k=e.l;if(f.e.q[k]){k!==g&&1E3>xb&&(g=ac(e,d.k+d.o),sb(d,g));U.push(d);Wb(e,d.k);xb+=4;d=!0;break a}}d=!1}if(!d)a:{d=a;if(K.length&&(e=T[d.l],e.e.v&&(g=K[K.length-1],e.e.v[g.l]))){U.push(d);Wb(g,d.k);d=!0;break a}d=!1}d||(vb[b]>=c.g?E(a):(c=T[b].f,G.c[c>>3]&1<<(c&7)?(!(a.d&1)||a.x||U.length&&tb(U[U.length-1],a)||(b=new rb(3,b,a.k,a.o),Fa(b,Ea(a)),b.d=a.d,a=b),a.d&4096&&!a.x&&"\n"===V.charAt(a.k+a.o)&&Ab(a.k+a.o,1),Rb(a),bc(a)):E(a)))}else E(a)}else cc()}}
function cc(){var a=J;if(vb[a.l]){for(var b=[],c=K.length;0<=--c;){var d=K[c];if(tb(a,d))break;b.push(d);++xb}if(!(0>c)){var e=1E3>xb,g=[];b.forEach(function(b){var c=b.l;e&&(b.d&2?g.push(b):e=!1);var d=a.k;b.d&256&&(d=Xb(d));c=new rb(2,c,d,0);c.d=b.d;Rb(c);dc()});Rb(a);dc();if(b.length&&1E3>xb){d=S;for(c=U.length;0<=--c&&1E3>++xb;){var f=U[c];if(f.k>d||f.r&1)break;for(var k=b.length;0<=--k&&1E3>++xb;)if(tb(f,b[k])){b.splice(k,1);g[k]&&g.splice(k,1);d=Math.max(d,f.k+f.o);break}}d>S&&Vb(new rb(3,"i",
S,d-S))}g.forEach(function(a){var b=ac(a,S);(a=a.x)&&F(b,a)})}}}function dc(){var a=K.pop();--vb[a.l];G=G.W}function bc(a){var b=a.l,c=a.d,d=T[b];++wb[b];if(3!==a.r){var e=[];c&512?G.c.forEach(function(a,b){e.push(d.c[b]&a)}):G.c.forEach(function(a,b){e.push(d.c[b]&(a&65280|a>>8))});c|=G.d&32;c&16&&(c&=-33);++vb[b];K.push(a);G={c:e,d:c,W:G}}}function Q(a,b,c,d){return P(2,a,b,c,d||0)}function Ab(a,b,c){P(3,"i",a,Math.min(b,Eb-a),c||0)}
function ac(a,b){var c=P(a.r,a.l,b,0,a.B);Fa(c,Ea(a));return c}function P(a,b,c,d,e){a=new rb(a,b,c,d,e||0);ub.push(a);T[b]&&(a.d=T[b].e.d);if(T[b]||-1<"br i pb v".indexOf(a.l))if(T[b]&&T[b].H)E(a);else if(0>d||0>c||c+d>Eb)E(a);else if(b=U.length-1,!Db||0>b||0>=Yb(U[b],a))U.push(a);else{for(;0<=--b;)if(0>=Yb(U[b],a)){U.splice(b+1,0,a);break}0>b&&U.unshift(a)}else E(a);return a}function R(a,b,c,d,e,g){d=Q(a,d,e);a=P(1,a,b,c,g||0||0);F(a,d);return a}
function Yb(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.B!==b.B)return b.B-a.B;c=a.o;d=b.o;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.r]-c[a.r])}var ec="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;function fc(a,b){if(ec){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}
function gc(a,b){if(ec){var c=b.createElement("div"),d=b.createDocumentFragment();hc.input=fc(a,"MSXML2.DOMDocument.6.0");hc.transform();for(c.innerHTML=hc.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(hc.transformToFragment(fc(a),b),!0)}var hc,ic=fc(kb,"MSXML2.FreeThreadedDOMDocument.6.0");if(ec){var jc=new ActiveXObject("MSXML2.XSLTemplate.6.0");jc.stylesheet=ic;hc=jc.createProcessor()}else hc=new XSLTProcessor,hc.importStylesheet(ic);
window.s9e={TextFormatter:{disablePlugin:function(a){Bb[a]&&(Bb[a].H=!0)},enablePlugin:function(a){Bb[a]&&(Bb[a].H=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,g=b.childNodes,L=c.length,u=g.length,q,w,y=0,H=0;y<L&&y<u;){q=c[y];w=g[y];if(!d(q,w))break;++y}for(var z=Math.min(L-y,u-y);H<z;){q=c[L-(H+1)];w=g[u-(H+1)];if(!d(q,w))break;++H}q=e.createDocumentFragment();for(z=y;z<u-H;)w=g[z].cloneNode(!0),q.appendChild(w),++z;for(z=L-H;--z>=y;)a.removeChild(c[z]);H?a.insertBefore(q,a.childNodes[y]):
a.appendChild(q)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,g=e.length,u=d.length;0<=--u;){var q=d[u],w=q.namespaceURI,q=q.name;b.hasAttributeNS(w,q)||a.removeAttributeNS(w,q)}for(u=g;0<=--u;)d=e[u],w=d.namespaceURI,q=d.name,d=d.value,d!==a.getAttributeNS(w,q)&&a.setAttributeNS(w,q,d);c(a,
b);return!0}var e=b.ownerDocument,g=gc(Hb(a),e);c(b,g)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.3.2/punycode.min.js"></script>
</body>
</html>