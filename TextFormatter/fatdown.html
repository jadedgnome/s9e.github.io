<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		pre, code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		pre code
		{
			border: 0;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
		p
		{
			margin: 0;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash like \*this\*
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments <!-- like this one -->
 - **HTMLElements** --- several HTML elements such as <sub>sub</sub> and <sup>sup</sup> are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:  
   http://youtu.be/QH2-TGUlwu4

***

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 31.3 KB (12.9 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var l=[0,0],ba={e:0},m=["","id"],ca={e:514},ea=[65086,7936],fa={e:3201},ha={e:3137},ia={e:3073},n={l:!1},q=[65295,16128],ja=[65282,16128],ka=[65282,16144],la=[65343,16160],ma=[57119,16160],na=[65346,16128],oa=[65286,16128],pa={l:!0},qa={"class":n},ra=["url",/^(\d+)$/,m],t={C:1,EM:1,EMAIL:1,STRONG:1,URL:1,"html:b":1,"html:code":1,"html:i":1,"html:strong":1,"html:u":1},sa={e:268,n:t},ua={e:3460,n:t},wa={e:3397,n:t};function xa(a,b){return ya(a,b)}
function za(a,b){var c;a:{if(b.c){var d,e=Aa(a);for(c in e){var f=e[c];if(b.c[c]){if(d=b.c[c],d.b){for(var g=0;g<d.b.length;++g)if(f=d.b[g](f,c),!1===f){delete a.c[c];break}!1!==f&&(a.c[c]=f)}}else delete a.c[c]}for(c in b.c)if(d=b.c[c],!(c in a.c)&&d.l){c=!1;break a}}else Ba(a,{});c=!0}return c}
var v=[za],Ca=[function(a){return x(a,/^\d+$/)}],Da=[function(a){return x(a,/^[-\w]+$/)}],Ga={b:[function(a){return/^[-\w+., ]+$/.test(a)?a:!1}],l:!1},Ma=[function(a){var b=Ha.urlConfig,c=Ia,d=Ja(a.replace(/^\s+/,"").replace(/\s+$/,""));Ka(b,d)?(c&&(d.attrValue=a),a=!1):a=La(d);return a}],Na={u:{"html:td":1,"html:th":1},e:264,n:t},Oa={u:{"html:dd":1,"html:dt":1},e:256,n:t},A={b:Ca,l:!1},Pa={b:Da,l:!1},Va={b:Ma,l:!0},Wa={u:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},e:256,n:t},C={b:Ma,l:!1},
Xa={d:l,g:3,b:v,i:10,f:{e:66},j:1E3},Ya={d:q,g:3,b:v,i:10,f:{e:2},j:1E3},Za={d:q,g:3,b:v,i:10,f:ba,j:1E3},$a={d:la,g:3,b:v,i:10,f:{e:512},j:1E3},ab={d:oa,c:{"char":pa},g:2,b:v,i:10,f:ia,j:1E3},bb=[xa,za],cb={d:q,g:5,b:v,i:10,f:{e:260,n:t},j:1E3},db={d:na,g:4,b:v,i:10,f:ua,j:1E3},eb={id:{b:Ca,l:!0},url:C},fb={d:la,g:6,b:v,i:10,f:{u:{LI:1,"html:li":1},e:264,n:t},j:1E3};function gb(a){a:{for(var b in Aa(a))if("url"!==b){a=!0;break a}a=!1}return a}
var hb=[xa,za,gb],ib='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aBANDCAMP"><$u$hbandcamp"$j$f400px"><$u$j$d100%"><$s$i"$nno"$j$b><$q$xsrc">//bandcamp.com/EmbeddedPlayer/size=large/minimal=true/<$o><$m$r@album_id">album=$e@album_id"/><$v$r@track_num">/t=$e@track_num"/></$v></$m><$k>track=$e@track_id"/></$k></$o></$q></$s></$u></$u>$c$aC"><code>$g</code>$c$aCODE"><pre><code class="{@lang}">$g</code></pre>$c$aDAILYMOTION"><$u$hdailymotion"$j$f640px"><$u$j$d56.25%"><$s$i"$nno"$t//www.dailymotion.com/embed/video/{@id}"$j$b/></$u></$u>$c$aDEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:dd|html:del|html:dl|html:dt|html:i|html:ins|html:li|html:ol|html:pre|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|html:ul|p"><xsl:element$x{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}">$g</xsl:element>$c$aEMAIL"><a href="mailto:{@email}">$g</a>$c$aESC">$g$c$aFACEBOOK"><$s$hfacebook"$i" onload="var a=Math.random();window.addEventListener(\'message\',function(b){{if(b.data.id==a)style.height=b.data.height+\'px\'}});contentWindow.postMessage(\'s9e:\'+a,\'https://s9e.github.io\')"$nno"$thttps://s9e.github.io/$s/facebook.min.html#{@id}"$jborder:0;height:360px;max-width:640px;width:100%"/>$c$aFP|HE">$e@char"/>$c$aHC"><xsl:comment>$e@content"/></xsl:comment>$c$aHR"><hr/>$c$aIMG"><img$t{@src}">$lalt|@title"/></img>$c$aLIST"><$o><$m$rnot(@type)"><ul>$g</ul></$m><$k><ol>$lstart"/>$g</ol></$k></$o>$c$aLIVELEAK"><$u$hliveleak"$j$f640px"><$u$j$d56.25%"><$s$i"$nno"$thttp://www.liveleak.com/ll_embed?i={@id}"$j$b/></$u></$u>$c$aQUOTE"><blockquote>$g</blockquote>$c$aSOUNDCLOUD"><$o><$m$r@playlist_id"><$s$h$w$i"$nno"$thttps://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/{@playlist_id}"$jborder:0;height:450px;max-width:900px;width:100%"/></$m><$m$r@track_id"><$s$h$w$i"$nno"$thttps://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/{@track_id}&amp;secret_token={@secret_token}"$j$p/></$m><$m$rnot(contains(@id,\'://\'))"><$s$h$w$i"$nno"$thttps://w.soundcloud.com/player/?url=https%3A//soundcloud.com/{@id}"$j$p/></$m><$k><$s$h$w$i"$nno"$thttps://w.soundcloud.com/player/?url={@id}"$j$p/></$k></$o>$c$aSPOTIFY"><$u$hspotify"$j$f400px"><$u$j$d120%"><$s$i"$nno"$j$b><$q$xsrc">https://embed.spotify.com/?view=coverart&amp;uri=<$o><$m$r@uri">$e@uri"/></$m><$k>spotify:$etranslate(@path,\'/\',\':\')"/></$k></$o></$q></$s></$u></$u>$c$aTWITCH"><$u$htwitch"$j$f640px"><$u$j$d56.25%"><$s$i"$nno"$j$b><$q$xsrc">//player.twitch.tv/?autoplay=false&amp;<$o><$m$r@archive_id">video=a$e@archive_id"/></$m><$m$r@chapter_id">video=c$e@chapter_id"/></$m><$m$r@video_id">video=v$e@video_id"/></$m><$k>channel=$e@channel"/></$k></$o><$v$r@t">&amp;time=$e@t"/></$v></$q></$s></$u></$u>$c$aURL"><a href="{@url}">$g</a>$c$aVIMEO"><$u$hvimeo"$j$f640px"><$u$j$d56.25%"><$s$i"$nno"$t//player.vimeo.com/video/{@id}"$j$b/></$u></$u>$c$aVINE"><$u$hvine"$j$f480px"><$u$j$d100%"><$s$i"$nno"$thttps://vine.co/v/{@id}/embed/simple?audio=1"$j$b/></$u></$u>$c$aYOUTUBE"><$u$hyoutube"$j$f640px"><$u$j$d56.25%"><$s$i"$nno"$j$b><$q$xsrc">//www.youtube.com/embed/$e@id"/><$v$r@list">?list=$e@list"/></$v><$v$r@t or@m"><$o><$m$r@list">&amp;</$m><$k>?</$k></$o>start=<$o><$m$r@t">$e@t"/></$m><$m$r@h">$e@h*3600+@m*60+@s"/></$m><$k>$e@m*60+@s"/></$k></$o></$v></$q></$s></$u></$u>$c$abr"><br/>$c$ae|i|s"/>$ahtml:abbr"><abbr>$ltitle"/>$g</abbr>$c$ahtml:$u"><$u>$lclass"/>$g</$u>$c$ahtml:img"><img>$lalt|@height|@src|@title|@width"/>$g</img>$c$ahtml:span"><span>$lclass"/>$g</span>$c$ahtml:td"><td>$lcolspan|@rowspan"/>$g</td>$c$ahtml:th"><th>$lcolspan|@rowspan|@scope"/>$g</th>$c</xsl:stylesheet>'.replace(/\$[a-x]/g,function(a){return{$a:'<xsl:template match="',
$b:'border:0;height:100%;left:0;position:absolute;width:100%"',$c:"</xsl:template>",$d:"overflow:hidden;position:relative;padding-bottom:",$e:'<xsl:value-of select="',$f:"display:inline-block;width:100%;max-width:",$g:"<xsl:apply-templates/>",$h:' data-s9e-mediaembed="',$i:' allowfullscreen="',$j:' style="',$k:"xsl:otherwise",$l:'<xsl:copy-of select="@',$m:"xsl:when",$n:' scrolling="',$o:"xsl:choose",$p:'border:0;height:166px;max-width:900px;width:100%"',$q:"xsl:attribute",$r:' test="',$s:"iframe",
$t:' src="',$u:"div",$v:"xsl:if",$w:'soundcloud"',$x:' name="'}[a]});function jb(a){var b=document.createElement("b");jb=function(a){b.innerHTML=a.replace(/</g,"&lt;");return b.textContent};return jb(a)}function kb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function lb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function mb(){return!0}
function nb(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function x(a,b){return b.test(a)?a:!1}
function Ja(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function La(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=nb(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+nb(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function Ka(a,b){if(""!==b.scheme&&!a.O.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.R&&a.R.test(b.host)||a.V&&!a.V.test(b.host))return"URL host is not allowed"}}function ob(){}ob.prototype={};function pb(a,b,c,d){this.p=a;this.name=b;this.k=c;this.q=d;this.c={};this.F=[];isNaN(a+c+d)&&E(this)}pb.prototype.A=!1;pb.prototype.o=0;function qb(a,b){a.F.push(b);a.A&&E(b)}function E(a){a.A||(a.A=!0,a.F.forEach(function(a){E(a)}))}
function F(a,b){a.name===b.name&&(1===a.p&&2===b.p&&b.k>=a.k?(a.w=b,b.B=a,qb(a,b)):2===a.p&&1===b.p&&b.k<=a.k&&(a.B=b,b.w=a))}function rb(a){a.o=1E3}function Aa(a){var b={},c;for(c in a.c)b[c]=a.c[c];return b}function sb(a,b){return a.A||a.name!==b.name||1!==b.p||2!==a.p||a.k<b.k||a.B&&a.B!==b||b.w&&b.w!==a?!1:!0}function Ba(a,b){a.c={};for(var c in b)a.c[c]=b[c]}
var tb,ub,vb,H,wb,L,xb,Ia=new ob,yb,N,O,Ab={Autoemail:{v:function(a,b){b.forEach(function(a){var b=P(1,"EMAIL",a[0][1],0);b.c.email=a[0][0];a=P(2,"EMAIL",a[0][1]+a[0][0].length,0);F(b,a)})},x:"@",y:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,z:1E4},Autolink:{v:function(a,b){b.forEach(function(b){var d=b[0][1];if(!(0<d&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(d-1)))){for(b=b[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,
"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;if(/^www\.|^[^:]+:/i.test(b)){var e=P(2,"URL",d+b.length,0);"."===b.charAt(3)&&(b="http://"+b);d=P(1,"URL",d,0);d.c.url=b;d.o=1;F(d,e)}}})},x:"://",y:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,z:1E4},Escaper:{v:function(a,b){b.forEach(function(a){Q("ESC",a[0][1],1,a[0][1]+a[0][0].length,0)})},x:"\\",y:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,z:1E4},FancyPants:{v:function(a){function b(a,b,c){a=P(3,k.J,a,b);a.c[k.P]=c;return a}
function c(){for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])}function d(c,d,e,g){for(var f;f=d.exec(a);){var k=b(+f.index+f[0].indexOf(c),1,e);f=b(+f.index+f[0].length-1,1,g);qb(k,f)}}function e(a){for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019").o=10}function f(a){for(var c,d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);)if("x"===d[0].charAt(d[0].length-1)&&b(+d.index+
d[0].length-1,1,"\u00d7"),c=d[0].charAt(1),"'"===c||'"'===c)c="'s"===d[0].substr(1,2)?"\u2019":"'"===c?"\u2032":"\u2033",b(+d.index+1,1,c)}function g(){for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var k={P:"char",J:"FP"},h=0<=a.indexOf("'"),p=0<=a.indexOf('"');h&&e(a);(h||p||0<=a.indexOf("x"))&&f(a);h&&d("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");p&&d('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(0<=
a.indexOf("...")||0<=a.indexOf("--"))&&c();0<=a.indexOf("(")&&g()}},HTMLComments:{v:function(a,b){b.forEach(function(a){var b=jb(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");P(3,"HC",a[0][1],a[0][0].length).c.content=b})},x:"\x3c!--",y:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,z:1E4},HTMLElements:{v:function(a,b){var c={a:{"":"URL",href:"url"},em:{"":"EM"},hr:{"":"HR"},s:{"":"S"},strong:{"":"STRONG"},sup:{"":"SUP"}};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),
f=b[0][1],g=b[0][0].length,k=b[2-e][0].toLowerCase(),h=c&&c[k]&&c[k][""]?c[k][""]:"html:"+k;if(e)P(2,h,f,g);else{e=/(<\S+|['"\s])\/>$/.test(b[0][0])?Q(h,f,g,f+g,0):P(1,h,f,g);b=b[3][0];for(var f=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,p;h=f.exec(b);)p=h[0].indexOf("="),0>p&&(p=h[0].length,h[0]+="="+h[0].toLowerCase()),g=h[0].substr(0,p).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),h=h[0].substr(1+p).replace(/^\s+/,"").replace("/s+$/",""),c&&c[k]&&c[k][g]&&(g=c[k][g]),
/^["']/.test(h)&&(h=h.substr(1,h.length-2)),h=jb(h),e.c[g]=h}})},x:"<",y:/<(?:\/((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))|((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,z:1E4},HTMLEntities:{v:function(a,
b){b.forEach(function(a){var b=a[0][0],e=jb(b);e===b||32>e.charCodeAt(0)||(P(3,"HE",a[0][1],b.length).c["char"]=e)})},x:"&",y:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,z:1E4},Litedown:{v:function(a){function b(a,b){F(P(2,"LIST",b,0),a.S);F(P(2,"LI",b,0),a.H);a.N&&a.I.forEach(function(a){a.e&=-9})}function c(a){G.Q&&-1<a.indexOf("&")&&(a=jb(a));a=a.replace(/[\\\x1A]/g,"");w&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\",
"\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]}));return a}function d(a){return c(a.replace(/^\s*(.*?)\s*$/,"$1").replace(/^(['"])(.*)\1$/,"$2"))}function e(a){return a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]})}function f(b,c){return/[ \t]*#*[ \t]*$/.exec(a.substr(b,c-b))[0].length}function g(a){var b=
[c(a[3])];a[4]&&(a=d(a[4]),""<a&&b.push(a));return b}function k(b){if("undefined"===typeof J){J={};for(var e,g=/^(?:> ?)* {0,3}\[([^\x17\]]+)\]: *([^\s\x17]+)([^\n\x17]*)\n?/gm;e=g.exec(a);){zb(e.index,e[0].length).o=-2;var f=e[1].toLowerCase();J[f]||(J[f]=[c(e[2])],e=d(e[3]),""<e&&J[f].push(e))}}b=b.toLowerCase();return J[b]||[]}function h(){var b={};if(-1===a.indexOf("-")&&-1===a.indexOf("="))return b;for(var c,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;c=d.exec(a);){var e=c[0];c=c.index;for(var g=
c-1;0<g&&" "===a[g-1];)--g;b[c-1]={K:c+e.length-g,L:g,U:e.length-e.replace(/>/g,"").length,J:"="===e.charAt(0)?"H1":"H2"}}return b}function p(a){return 0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a)}function I(b){a=a.substr(0,b)+"\u0017"+a.substr(b+1)}function u(b,c){var d=a.indexOf(b);if(-1!==d){var e=[],g=[],f=f=a.indexOf("\u0017",d),k;for(c.lastIndex=d;k=c.exec(a);)d=k.index,k=k[0].length,d>f&&(g.push(e),e=[],f=a.indexOf("\u0017",d)),"_"===a[d]&&1===k&&0<d&&p(a[d-
1])&&p(a[d+k])||e.push([d,k]);g.push(e);g.forEach(B)}}function r(b,c){a=a.substr(0,b)+Array(1+c).join("\u001a")+a.substr(b+c)}function B(a){var b=0,c=-1,d=-1,e;a.forEach(function(a){var g=a[0];a=a[1];var f=Math.min(3,a),k=f&b&1,f=f&b&2,h=g,Fb=g;2<b&&c===d&&(k?c+=2:++d);k&&f&&(c<d?h+=2:++Fb);e=a;k&&(--b,--e,Q("EM",c,1,h,1));f&&(b-=2,e-=2,Q("STRONG",d,2,Fb,2));e=Math.min(3,e);e&1&&(c=g+a-e);e&2&&(d=g+a-e);b+=e})}function y(a,b,c){(b[3]?g(b):k(b[2]||b[1])).forEach(function(b,d){a.c[c[d]]=b})}var G={Q:!0},
w,J,Qa,Ra,Gb,Sa;0>a.indexOf("\\")?w=!1:(w=!0,a=e(a));a+="\n\n\u0017";J=void 0;(function(){for(var c,d=4,e,g=!0,k=[],p=0,u=!1,B=[],y=0,w=h(),S=0,G,Y,J,T,Ta,Hb,D,z,Ua,Ea,ga,U,da,Ib=[],ta,Fa=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+[^`\n]*$|~~~+[^~\n]*$)?)?/gm;ta=Fa.exec(a);)Ib.push(ta),ta.index===Fa.lastIndex&&++Fa.lastIndex;Ib.forEach(function(h){var K=h.index,va=h[0].length;T=0;Y=!g;D=a.indexOf("\n",
K);g=D===K+va&&!h[3]&&!h[4]&&!h[5];va||++Fa.lastIndex;G=g&&Y;h[1]?(ga=h[1].length-h[1].replace(/>/g,"").length,T=h[1].length):ga=0;if(ga<y&&!Y&&!g){u=!0;do F(P(2,"QUOTE",S,0),B.pop());while(ga<--y)}if(ga>y&&!g){u=!0;do{var Z=P(1,"QUOTE",K,0);Z.o=y;B.push(Z)}while(ga>++y)}var M=0,aa=0;if(h[2]&&!c){Ta=h[2];Hb=Ta.length;do" "===Ta.charAt(aa)?++M:M=M+4&-4;while(++aa<Hb&&M<d)}e&&!c&&M<d&&!g&&(u=!0);u&&(u=!1,e&&(r(e.k,S-e.k),J=P(2,"CODE",S,0),F(J,e),J.o=-1,c=e=null),k.forEach(function(a){b(a,S)}),k=[],
p=0,K&&I(K-1));if(M>=d){if(e||!Y)T=(h[1]||"").length+aa,e||(e=P(1,"CODE",K+T,0)),h={}}else{Z=!!h[4];if(M||Y||Z||g)if(Y&&!Z)z=p-1;else if(p)for(z=0;z<p&&M>k[z].M;)++z;else z=!Z||Y&&"\u0017"!==a.charAt(K-1)?-1:0;else z=-1;for(;z<p-1;)b(k.pop(),S),--p;z!==p||Z||--z;if(Z&&0<=z)if(G=!0,U=K+T+aa,da=h[4].length,aa=P(1,"LI",U,da),r(U,da),z<p)F(P(2,"LI",S,0),k[z].H),k[z].H=aa,k[z].I.push(aa);else{++p;z?(Ea=k[z-1].M+1,Ua=Math.max(Ea,4*z)):(Ea=0,Ua=M);M=P(1,"LIST",U,0);if(-1<h[4].indexOf(".")){M.c.type="decimal";
var ta=+h[4];1!==ta&&(M.c.start=ta)}k.push({S:M,H:aa,I:[aa],W:Ea,M:Ua,N:!0})}!p||Y||g||(1<k[0].I.length||!Z)&&k.forEach(function(a){a.N=!1});d=4*(p+1)}if(h[5])if("#"===h[5].charAt(0))Qa=h[5].length,Ra=K+va-Qa,Sa=f(K+va,D),Gb=D-Sa,Q("H"+/#{1,6}/.exec(h[5])[0].length,Ra,Qa,Gb,Sa),I(Ra),I(D),Y&&(G=!0);else{if("`"===h[5].charAt(0)||"~"===h[5].charAt(0))U=K+T,da=D-U,e&&h[5].charAt(0)===c?(J=P(2,"CODE",U,da),F(J,e),J.o=-1,zb(S,U-S),r(e.k,U+da-e.k),c=e=null):e||(e=P(1,"CODE",U,da),c=h[5].charAt(0),zb(U+
da,1),h=h[5].replace(/^[`~\s]*/,"").replace(/\s+$/,""),""!==h&&(e.c.lang=h))}else h[3]&&!p?(P(3,"HR",K+T,va-T),G=!0,I(D)):!w[D]||w[D].U!==ga||g||p||e||(Q(w[D].J,K+T,0,w[D].L,w[D].K),r(D,1),I(w[D].L+w[D].K));G&&(P(3,"pb",S,0),I(S));g||(S=D);T&&rb(zb(K,T))})})();(function(){if(-1!==a.indexOf("`"))for(var b,c=/((`+)(?!`)\s*)(?:[^\x17]*?[^`\s])?(\s*\2)(?!`)/g;b=c.exec(a);){var d=b.index,e=b[0].length,g=b[3].length;Q("C",d,b[1].length,d+e-g,g);r(d,e)}})();(function(){if(-1!==a.indexOf("!["))for(var b,
d=/!\[([^\x17]*?(?=] ?\()|[^\x17\]]*)](?: ?\[([^\x17\]]+)\]| ?\(([^\x17 ")]+)( *(?:"[^\x17"]*"|\'[^\x17\']*\'|[^\x17\)]*))?\))?/g;b=d.exec(a);){var e=b.index,g=b[0].length,h=b[1].length,f=e,h=Q("IMG",f,2,f+2+h,g-2-h),f=c(b[1]);h.c.alt=f;y(h,b,["src","title"]);r(e,g)}})();(function(){if(-1!==a.indexOf("["))for(var b,c=/\[([^\x17]*?(?=] ?\()|[^\x17\]]*)](?: ?\[([^\x17\]]+)\]| ?\(([^\x17 ()]+(?:\([^\x17 ()]+\)[^\x17 ()]*)*[^\x17 )]*)( *(?:"[^\x17"]*"|\'[^\x17\']*\'|[^\x17\)]*))?\))?/g;b=c.exec(a);){var d=
b[1].length,e=b.index,g=e+1+d,d=b[0].length-1-d,h=Q("URL",e,1,g,d);y(h,b,["url","title"]);h.o=-1;r(e,1);r(g,d)}})();(function(){if(-1!==a.indexOf("~~"))for(var b,c=/~~[^\x17]+?~~/g;b=c.exec(a);){var d=b.index;Q("DEL",d,2,d+b[0].length-2,2)}})();(function(){if(-1!==a.indexOf("^"))for(var b,c=/\^[^\x17\s]+/g;b=c.exec(a);){var d=b[0],e=b=b.index,g=b+d.length,d=d.split("^");d.shift();d.forEach(function(a){Q("SUP",e,1,g,0);e+=1+a.length})}})();u("*",/\*+/g);u("_",/_+/g);(function(){for(var b=a.indexOf("  \n");-1!==
b;)P(3,"br",b+2,0),b=a.indexOf("  \n",b+3)})()}},MediaEmbed:{v:function(a,b){b.forEach(function(a){var b=a[0][0];a=P(3,"MEDIA",a[0][1],b.length);a.c.url=b;a.o=-10})},x:":",y:/\b(?:spotify:|https?:\/\/)[^["'\s]+/g,z:1E4}},R,Ha={mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","liveleak.com":"liveleak","open.spotify.com":"spotify","play.spotify.com":"spotify","soundcloud.com":"soundcloud","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine",
"youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{O:/^(?:ftp|https?)$/i}},Bb={d:la,e:8},V={BANDCAMP:{d:l,c:{album_id:A,track_id:A,track_num:A,url:C},g:13,b:[mb,za,gb],i:10,f:wa,j:1E3},C:Xa,CODE:{d:l,c:{lang:Ga},g:4,b:v,i:10,f:{e:4436,n:t},j:1E3},DAILYMOTION:{d:l,r:[["url",/dailymotion\.com\/(?:live\/|user\/[^#]+#video=|video\/)([A-Za-z0-9]+)/,m],["url",/^([A-Za-z0-9]+)$/,m]],c:{id:{b:[function(a){return x(a,/^[A-Za-z0-9]+$/)}],l:!0},url:C},g:13,b:bb,i:10,f:wa,j:1E3},DEL:$a,EM:Ya,EMAIL:{d:ea,
c:{email:{b:[function(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}],l:!0}},g:0,b:v,i:10,f:ca,j:1E3},ESC:{d:l,g:1,b:v,i:10,f:{e:1616},j:1E3},FACEBOOK:{d:l,r:[["url",/\/(?!(?:apps|developers|graph)\.)[-\w.]*facebook\.com\/(?:[\/\w]+\/permalink|(?!pages\/|groups\/).*?)(?:\/|fbid=|\?v=)(\d+)(?=$|[\/?&#])/,m],ra],c:eb,g:0,b:bb,i:10,f:ha,j:1E3},FP:ab,H1:cb,H2:cb,H3:cb,H4:cb,H5:cb,H6:cb,HC:{d:l,c:{content:pa},g:1,b:v,i:10,f:ha,j:1E3},HE:ab,HR:{d:oa,g:4,b:v,i:10,f:{e:3333,n:t},j:1E3},IMG:{d:oa,c:{alt:n,src:Va,
title:n},g:3,b:v,i:10,f:ia,j:1E3},LI:fb,LIST:{d:na,c:{start:{b:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],l:!1},type:Ga},g:4,b:v,i:10,f:ua,j:1E3},LIVELEAK:{d:l,r:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,m],["url",/^([a-f_0-9]+)$/,m]],c:{id:{b:[function(a){return x(a,/^[a-f_0-9]+$/)}],l:!0},url:C},g:13,b:bb,i:10,f:wa,j:1E3},MEDIA:{d:l,g:1,b:[function(a){return function(a,c){function d(a,b){var c=a.w||a,d=a.k,c=P(3,b.toUpperCase(),d,c.k+c.q-d);Ba(c,Aa(a));c.o=a.o}return function(a,b){if("media"in
a.c){var c=a.c.media.toLowerCase(),k;a:{for(k in b)if(b[k]===c){k=!0;break a}k=!1}k&&d(a,c)}else if("url"in a.c){k=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.c.url);if(k[1]&&b[k[1]+":"])c=b[k[1]+":"];else if(k[2])a:{c=k[2];do{if(b[c]){c=b[c];break a}k=c.indexOf(".");if(0>k)break;c=c.substr(1+k)}while(""<c);c=!1}c&&d(a,c)}return!1}(a,c)}(a,Ha.mediasites)}],i:10,f:{e:577},j:1E3},QUOTE:{d:la,g:4,b:v,i:10,f:sa,j:1E3},SOUNDCLOUD:{d:l,r:[["url",/(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)/,
m],["url",/api.soundcloud.com\/playlists\/(\d+)/,["","playlist_id"]],["url",/api.soundcloud.com\/tracks\/(\d+)(?:\?secret_token=([-\w]+))?/,["","track_id","secret_token"]],["url",/soundcloud\.com\/(?!playlists|tracks)[-\w]+\/[-\w]+\/(?=s-)([-\w]+)/,["","secret_token"]],["url",/^((?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$))$/,m]],c:{id:{b:[function(a){return x(a,/^(?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)$/)}],
l:!0},playlist_id:A,secret_token:Pa,track_id:A,url:C},g:0,b:[xa,mb,za],i:10,f:ha,j:1E3},SPOTIFY:{d:l,r:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],c:{path:{b:[function(a){return x(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}],l:!1},uri:{b:[function(a){return x(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}],l:!1},url:C},g:13,b:hb,i:10,f:wa,j:1E3},STRONG:Ya,
SUP:Za,TWITCH:{d:l,r:[["url",/twitch\.tv\/(\w+)(?:\/b\/(\d+)|\/c\/(\d+)|\/v\/(\d+))?/,["","channel","archive_id","chapter_id","video_id"]],["url",/t=((?:(?:\d+h)?\d+m)?\d+s)/,["","t"]]],c:{archive_id:A,channel:{b:[function(a){return x(a,/^\w+$/)}],l:!1},chapter_id:A,t:{b:[function(a){return x(a,/^(?:(?:\d+h)?\d+m)?\d+s$/)}],l:!1},url:C,video_id:A},g:13,b:hb,i:10,f:wa,j:1E3},URL:{d:ea,c:{url:Va},g:0,b:v,i:10,f:ca,j:1E3},VIMEO:{d:l,r:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/|video\/)?(\d+)/,m],ra],
c:eb,g:13,b:bb,i:10,f:wa,j:1E3},VINE:{d:l,r:[["url",/vine\.co\/v\/([^\/]+)/,m],["url",/^([^\/]+)$/,m]],c:{id:{b:[function(a){return x(a,/^[^\/]+$/)}],l:!0},url:C},g:13,b:bb,i:10,f:wa,j:1E3},YOUTUBE:{d:l,r:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,m],["url",/youtu\.be\/([-\w]+)/,m],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,m]],c:{h:A,id:{b:Da,l:!0},list:Pa,m:A,s:A,t:A,url:C},g:13,b:bb,i:10,f:wa,j:1E3},"html:abbr":{d:q,
c:{title:n},g:3,b:v,i:10,f:ba,j:1E3},"html:b":Ya,"html:br":{d:ja,g:3,b:v,i:10,f:fa,j:1E3},"html:code":Xa,"html:dd":{d:la,g:7,b:v,i:10,f:Oa,j:1E3},"html:del":$a,"html:div":{d:la,c:qa,g:4,b:v,i:10,f:sa,j:1E3},"html:dl":{d:[65410,16128],g:4,b:v,i:10,f:ua,j:1E3},"html:dt":{d:ma,g:7,b:v,i:10,f:Oa,j:1E3},"html:i":Ya,"html:img":{d:ja,c:{alt:n,height:n,src:C,title:n,width:n},g:3,b:v,i:10,f:fa,j:1E3},"html:ins":$a,"html:li":fb,"html:ol":db,"html:pre":{d:q,g:4,b:v,i:10,f:{e:276,n:t},j:1E3},"html:rb":{d:q,g:8,
b:v,i:10,f:Wa,j:1E3},"html:rp":{d:q,g:8,b:v,i:10,f:{u:{"html:rb":1,"html:rp":1,"html:rtc":1},e:256,n:t},j:1E3},"html:rt":{d:q,g:9,b:v,i:10,f:{u:{"html:rb":1,"html:rp":1,"html:rt":1},e:256,n:t},j:1E3},"html:rtc":{d:[65295,16130],g:8,b:v,i:10,f:Wa,j:1E3},"html:ruby":{d:[65295,16131],g:3,b:v,i:10,f:ba,j:1E3},"html:span":{d:q,c:qa,g:3,b:v,i:10,f:ba,j:1E3},"html:strong":Ya,"html:sub":Za,"html:sup":Za,"html:table":{d:[65282,16148],g:4,b:v,i:10,f:ua,j:1E3},"html:tbody":{d:ka,g:10,b:v,i:10,f:{u:{"html:tbody":1,
"html:tfoot":1,"html:thead":1},e:3456,n:t},j:1E3},"html:td":{d:la,c:{colspan:n,rowspan:n},g:11,b:v,i:10,f:Na,j:1E3},"html:tfoot":{d:ka,g:10,b:v,i:10,f:{u:{"html:tbody":1,"html:thead":1},e:3456,n:t},j:1E3},"html:th":{d:ma,c:{colspan:n,rowspan:n,scope:n},g:11,b:v,i:10,f:Na,j:1E3},"html:thead":{d:ka,g:10,b:v,i:10,f:{e:3456,n:t},j:1E3},"html:tr":{d:[65282,16136],g:12,b:v,i:10,f:{u:{"html:tr":1},e:3456,n:t},j:1E3},"html:u":Ya,"html:ul":db},W,Cb,X,Db,Eb=0,Jb;
function Kb(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");ub={};vb={};tb=[];wb=0;L=null;xb=!1;yb={};N=[];O="";R=0;W=[];Cb=!0;X=a;Db=X.length;Jb=0;H=Bb;H.D=!1;++Eb;a=Eb;for(var b in Ab)if(!Ab[b].G)a:{var c=b,d=Ab[c];if(!(d.x&&0>X.indexOf(d.x))){var e=[];if(d.y){e=d.y;d=d.z;e.lastIndex=0;for(var f=[],g=0,k=void 0;++g<=d&&(k=e.exec(X));){for(var h=+k.index,p=[[k[0],h]],I=0;++I<k.length;){var u=k[I];void 0===u?p.push(["",-1]):(p.push([u,X.indexOf(u,h)]),h+=u.length)}f.push(p)}e=
f;if(!e.length)break a}(0,Ab[c].v)(X,e)}}Lb();Mb();Nb(Db,0,!0);do b=O,O=O.replace(/<([^ />]+)><\/\1>/g,"");while(O!==b);O=O.replace(/<\/i><i>/g,"",O);O=O.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ob);c=xb?"r":"t";b="<"+c;for(var r in yb)b+=" xmlns:"+r+'="urn:s9e:TextFormatter:'+r+'"';O=b+">"+O+"</"+c+">";if(Eb!==a)throw"The parser has been reset during execution";return O}function Mb(){tb.forEach(function(a){a.F=[];delete a.w;delete a.B});tb=[]}
function ya(a,b){b.r&&b.r.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.c){var e=Pb(a.c[d],e,b),f;for(f in e)f!==d&&f in a.c||(a.c[f]=e[f])}});return!0}function Pb(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Ob(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Qb(a){xb=!0;var b=a.name,c=a.k,d=a.q,e=a.e,f=0,g=0;e&256&&(f=1,g=a.p&2?2:1);var k=!1;a.p&1?e&4&&(k=!0):k=!0;Nb(c,f,k);f=d?lb(X.substr(c,d)):"";if(a.p&1){e&4||Rb(c);e=b.indexOf(":");0<e&&(yb[b.substr(0,e)]=0);O+="<"+b;var h=Aa(a),e=[],p;for(p in h)e.push(p);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){O+=" "+a+'="'+kb(h[a].toString())+'"'});O=3===a.p?d?O+(">"+f+"</"+b+">"):O+"/>":d?O+("><s>"+f+"</s>"):O+">"}else d&&(O+="<e>"+f+"</e>"),O+="</"+b+">";for(Jb=R=c+d;g&&Jb<Db&&"\n"===
X.charAt(Jb);)--g,++Jb}
function Nb(a,b,c){c&&(H.e&8?b=-1:c=!1);R>=a&&c&&Sb();if(Jb>R){var d=Math.min(a,Jb);O+=X.substr(R,d-R);R=d;R>=a&&c&&Sb()}if(H.e&128)d=a-R,b=X.substr(R,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),O+=b,R=a,c&&Sb();else{for(var e=a,d=0;b&&--e>=R;){var f=X.charAt(e);if(" "!==f&&"\n"!==f&&"\t"!==f)break;"\n"===f&&--b;++d}a-=d;if(H.e&8)for(H.D||(Tb(a),a>R&&Rb(a)),b=X.indexOf("\n\n",R);-1<b&&b<a;)Nb(b,0,!0),Rb(a),b=X.indexOf("\n\n",R);a>R&&(b=lb(X.substr(R,a-R)),O+=b);c&&Sb();d&&(O+=X.substr(a,d));R=a+d}}
function Ub(a){var b=a.k;a=a.q;var c=X.substr(b,a);Nb(b,0,!1);O+="<i>"+lb(c)+"</i>";xb=!0;R=b+a}function Rb(a){!H.D&&H.e&8&&(Tb(a),R<Db&&(O+="<p>",H.D=!0))}function Sb(){H.D&&(O+="</p>",H.D=!1)}function Tb(a){for(;R<a&&-1<" \n\t".indexOf(X.charAt(R));)O+=X.charAt(R),++R}function Vb(a,b){var c=a.name;a.e&256&&(b=Wb(b));F(P(2,c,b,0),a)}function Wb(a){for(;a>R&&-1<" \n\t".indexOf(X.charAt(a-1));)--a;return a}
function Lb(){if(W.length){for(var a in V)ub[a]=0,vb[a]=0;do{for(;W.length;)Cb||(W.sort(Xb),Cb=!0),L=W.pop(),H.e&64&&!(sb(L,N[N.length-1])||-1<"br i pb v".indexOf(L.name))||Yb();N.forEach(function(a){Vb(a,Db)})}while(W.length)}}
function Yb(){if(!L.A){var a=L.k,b=L.q;if(R>a){var c;if((c=L.B)&&0<=N.indexOf(c))F(P(2,c.name,R,Math.max(0,a+b-R)),c);else{if("i"===L.name&&(a=a+b-R,0<a)){zb(R,a);return}E(L)}}else if("i"===L.name)Ub(L);else if("br"===L.name)H.e&1024||(Nb(L.k,0,!1),O+="<br/>");else if("pb"===L.name)Nb(L.k,0,!0);else if("v"===L.name)a=H.e,H.e=L.e,Nb(L.k+L.q,0,!1),H.e=a;else if(L.p&1)if(a=L,b=a.name,c=V[b],vb[b]>=c.j)E(a);else{var d=a,e=V[d.name],f=!0;if(e.b)for(var g=0;g<e.b.length;++g)if(!e.b[g](d,e)){f=!1;break}if(f){a:{d=
a;if(N.length&&(f=d.name,g=V[f],g.f.n)){var e=N[N.length-1],k=e.name;if(g.f.n[k]){k!==f&&1E3>wb&&(f=Zb(e,d.k+d.q),qb(d,f));++wb;W.push(d);Vb(e,d.k);d=!0;break a}}d=!1}if(!d)a:{d=a;if(N.length&&(e=V[d.name],e.f.u&&(f=N[N.length-1],e.f.u[f.name]))){W.push(d);Vb(f,d.k);d=!0;break a}d=!1}d||(ub[b]>=c.i?E(a):(c=V[b].g,H.d[c>>3]&1<<(c&7)?(!(a.e&1)||a.w||W.length&&sb(W[W.length-1],a)||(b=new pb(3,b,a.k,a.q),Ba(b,Aa(a)),b.e=a.e,a=b),a.e&4096&&!a.w&&"\n"===X.charAt(a.k+a.q)&&zb(a.k+a.q,1),Qb(a),$b(a)):E(a)))}else E(a)}else ac()}}
function ac(){var a=L;if(ub[a.name]){for(var b=[],c=N.length;0<=--c;){var d=N[c];if(sb(a,d))break;b.push(d);++wb}if(!(0>c)){var e=1E3>wb,f=[];b.forEach(function(b){var c=b.name;e&&(b.e&2?f.push(b):e=!1);var d=a.k;b.e&256&&(d=Wb(d));c=new pb(2,c,d,0);c.e=b.e;Qb(c);bc()});Qb(a);bc();if(b.length&&1E3>wb){d=R;for(c=W.length;0<=--c&&1E3>++wb;){var g=W[c];if(g.k>d||g.p&1)break;for(var k=b.length;0<=--k&&1E3>++wb;)if(sb(g,b[k])){b.splice(k,1);f[k]&&f.splice(k,1);d=Math.max(d,g.k+g.q);break}}d>R&&Ub(new pb(3,
"i",R,d-R))}f.forEach(function(a){var b=Zb(a,R);(a=a.w)&&F(b,a)})}}}function bc(){var a=N.pop();--ub[a.name];H=H.T}function $b(a){var b=a.name,c=a.e,d=V[b];++vb[b];if(3!==a.p){var e=[];c&512?H.d.forEach(function(a,b){e.push(d.d[b]&a)}):H.d.forEach(function(a,b){e.push(d.d[b]&(a&65280|a>>8))});c|=H.e&32;c&16&&(c&=-33);++ub[b];N.push(a);H={d:e,e:c,T:H}}}function zb(a,b){return P(3,"i",a,Math.min(b,Db-a))}function Zb(a,b){var c=P(a.p,a.name,b,0);Ba(c,Aa(a));c.o=a.o;return c}
function P(a,b,c,d){a=new pb(a,b,c,d);tb.push(a);V[b]&&(a.e=V[b].f.e);V[b]||-1<"br i pb v".indexOf(a.name)?V[b]&&V[b].G?E(a):0>d||0>c||c+d>Db?E(a):(Cb&&W.length&&a.k>=W[W.length-1].k&&(Cb=!1),W.push(a)):E(a);return a}function Q(a,b,c,d,e){b=P(1,a,b,c);F(b,P(2,a,d,e));return b}function Xb(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.o!==b.o)return b.o-a.o;c=a.q;d=b.q;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.p]-c[a.p])}var cc="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function dc(a,b){if(cc){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function ec(a,b){if(cc){var c=b.createElement("div"),d=b.createDocumentFragment();fc.input=dc(a,"MSXML2.DOMDocument.6.0");fc.transform();for(c.innerHTML=fc.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(fc.transformToFragment(dc(a),b),!0)}var fc,gc=dc(ib,"MSXML2.FreeThreadedDOMDocument.6.0");
if(cc){var hc=new ActiveXObject("MSXML2.XSLTemplate.6.0");hc.stylesheet=gc;fc=hc.createProcessor()}else fc=new XSLTProcessor,fc.importStylesheet(gc);
window.s9e={TextFormatter:{disablePlugin:function(a){Ab[a]&&(Ab[a].G=!0)},enablePlugin:function(a){Ab[a]&&(Ab[a].G=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,f=b.childNodes,I=c.length,u=f.length,r,B,y=0,G=0;y<I&&y<u;){r=c[y];B=f[y];if(!d(r,B))break;++y}for(var w=Math.min(I-y,u-y);G<w;){r=c[I-(G+1)];B=f[u-(G+1)];if(!d(r,B))break;++G}r=e.createDocumentFragment();for(w=y;w<u-G;)B=f[w].cloneNode(!0),r.appendChild(B),++w;for(w=I-G;--w>=y;)a.removeChild(c[w]);G?a.insertBefore(r,a.childNodes[y]):
a.appendChild(r)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,u=d.length;0<=--u;){var r=d[u],B=r.namespaceURI,r=r.name;b.hasAttributeNS(B,r)||a.removeAttributeNS(B,r)}for(u=f;0<=--u;)d=e[u],B=d.namespaceURI,r=d.name,d=d.value,d!==a.getAttributeNS(B,r)&&a.setAttributeNS(B,r,d);c(a,
b);return!0}var e=b.ownerDocument,f=ec(Kb(a),e);c(b,f)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.3.2/punycode.min.js"></script>
</body>
</html>