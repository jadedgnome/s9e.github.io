<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		pre, code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		pre code
		{
			border: 0;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
		p
		{
			margin: 0;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash like \*this\*
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments <!-- like this one -->
 - **HTMLElements** --- several HTML elements such as <sub>sub</sub> and <sup>sup</sup> are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:  
   http://youtu.be/QH2-TGUlwu4

***

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 33.0 KB (13.7 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var ca=[0,0],m=["","id"],da={d:0},ea={d:514},ha=[61223,7952],ia={d:3089},ka={d:3201},la={d:3093},ma=[65320,65296],na=[65312,65304],oa=[65335,65520],pa=[65312,65296],qa=[64307,65520],ra=[65329,65472],sa={n:!0},n=[65329,65488],p={n:!1},ta={"class":p},ua=["url",/^(\d+)$/,m],r={C:1,EM:1,EMAIL:1,STRONG:1,URL:1,"html:b":1,"html:code":1,"html:i":1,"html:strong":1,"html:u":1},wa={d:268,r:r},xa={d:256,r:r},ya={d:3460,r:r};function za(a,b){return Aa(a,b)}
function Ba(a,b){var c;a:{c=Ca;if(b.j){var d,e,g=Da(a);for(d in g){var f=g[d];if(b.j[d]){if(e=b.j[d],e.b){c.p(d);for(var h=0;h<e.b.length;++h)if(f=e.b[h](f,d),!1===f){delete a.j[d];break}!1!==f&&a.p(d,f)}}else delete a.j[d]}for(d in b.j)if(e=b.j[d],!(d in a.j)&&e.n){c=!1;break a}}else Ea(a,{});c=!0}return c}
var Fa=[function(a){return t(a,/^\d+$/)}],v=[Ba],Ga=[function(a){return t(a,/^[-\w]+$/)}],Ja={b:[function(a){return/^[-\w+., ]+$/.test(a)?a:!1}],n:!1},Oa=[function(a){var b=Ka.urlConfig,c=Ca,d=La(a.replace(/^\s+/,"").replace(/\s+$/,""));Ma(b,d)?(c&&(d.attrValue=a),a=!1):a=Na(d);return a}],Pa={w:{"html:td":1,"html:th":1},d:256,r:r},Qa={w:{"html:dd":1,"html:dt":1},d:256,r:r},Wa={b:[function(a){return t(a,/^\w+$/)}],n:!1},Xa={b:Fa,n:!0},w={b:Fa,n:!1},Ya={b:Ga,n:!1},B={b:Oa,n:!1},Za={b:Oa,n:!0},$a={c:ca,
f:0,b:v,g:10,e:{d:66},i:1E3},ab={c:n,f:0,b:v,g:10,e:da,i:1E3},bb={c:n,f:0,b:v,g:10,e:{d:2},i:1E3},cb={c:oa,f:0,b:v,g:10,e:{d:512},i:1E3},db={c:n,j:{"char":sa},f:0,b:v,g:10,e:ia,i:1E3},eb=[za,Ba],fb={c:n,f:2,b:v,g:10,e:{d:260,r:r},i:1E3},gb={c:ma,f:1,b:v,g:10,e:ya,i:1E3},hb={c:oa,f:3,b:v,g:10,e:{w:{LI:1,"html:li":1},d:264,r:r},i:1E3},ib={c:n,f:8,b:v,g:10,e:{w:{"html:rp":1,"html:rt":1},d:256,r:r},i:1E3};function jb(a){a:{for(var b in Da(a))if("url"!==b){a=!0;break a}a=!1}return a}
var kb=[za,Ba,jb],lb='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aBANDCAMP"><div$ibandcamp"$k$f400px"><div$k$e100%">$h$k$d><$o$qsrc">//bandcamp.com/EmbeddedPlayer/size=large/minimal=true/<$p><$n$l@album_id">album=$b@album_id"/><$r$l@track_num">/t=$b@track_num"/></$r></$n><$m>track=$b@track_id"/></$m></$p></$o></iframe></div></div>$c$aC"><code>$g</code>$c$aCODE"><pre><code><$r$l@lang"><$o$qclass">language-$b@lang"/></$o></$r>$g</code></pre>$c$aDAILYMOTION"><div$idailymotion"$k$f640px"><div$k$e56.25%">$h$s//www.dailymotion.com/embed/video/{@id}"$k$d/></div></div>$c$aDEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:dd|html:del|html:dl|html:dt|html:i|html:ins|html:li|html:ol|html:pre|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|html:ul|p"><xsl:element$q{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}">$g</xsl:element>$c$aEMAIL"><a href="mailto:{@email}">$g</a>$c$aESC">$g$c$aFACEBOOK"><iframe$ifacebook" allowfullscreen="" onload="var a=Math.random();window.addEventListener(\'message\',function(b){{if(b.data.id==a)style.height=b.data.height+\'px\'}});contentWindow.postMessage(\'s9e:\'+a,\'https://s9e.github.io\')" scrolling="no"$shttps://s9e.github.io/iframe/facebook.min.html#{@type}{@id}"$kborder:0;height:360px;max-width:640px;width:100%"/>$c$aFP|HE">$b@char"/>$c$aHC"><xsl:comment>$b@content"/></xsl:comment>$c$aHR"><hr/>$c$aIMG"><img$s{@src}">$jalt|@title"/></img>$c$aLIST"><$p><$n$lnot(@type)"><ul>$g</ul></$n><$m><ol>$jstart"/>$g</ol></$m></$p>$c$aLIVELEAK"><div$iliveleak"$k$f640px"><div$k$e56.25%">$h$s//www.liveleak.com/ll_embed?i={@id}"$k$d/></div></div>$c$aQUOTE"><blockquote>$g</blockquote>$c$aSOUNDCLOUD"><iframe$isoundcloud" allowfullscreen="" scrolling="no"><$o$qsrc">https://w.soundcloud.com/player/?url=<$p><$n$l$t">https%3A//api.soundcloud.com/playlists/$b$t"/></$n><$n$l@track_id">https%3A//api.soundcloud.com/tracks/$b@track_id"/>&amp;secret_token=$b@secret_token"/></$n><$m><$r$lnot(contains(@id,\'://\'))">https%3A//soundcloud.com/</$r>$b@id"/></$m></$p></$o><$o$qstyle">border:0;height:<$p><$n$l$t or contains(@id,\'/sets/\')">450</$n><$m>166</$m></$p>px;max-width:900px;width:100%</$o></iframe>$c$aSPOTIFY"><div$ispotify"$k$f400px"><div$k$e120%">$h$k$d><$o$qsrc">https://embed.spotify.com/?view=coverart&amp;uri=<$p><$n$l@uri">$b@uri"/></$n><$m>spotify:$btranslate(@path,\'/\',\':\')"/></$m></$p></$o></iframe></div></div>$c$aTWITCH"><div$itwitch"$k$f640px"><div$k$e56.25%">$h$k$d><$o$qsrc"><$p><$n$l@clip_id">//clips.twitch.tv/embed?autoplay=false&amp;clip=$b@channel"/>/$b@clip_id"/></$n><$m>//player.twitch.tv/?autoplay=false&amp;<$p><$n$l@archive_id">video=a$b@archive_id"/></$n><$n$l@chapter_id">video=c$b@chapter_id"/></$n><$n$l@video_id">video=v$b@video_id"/></$n><$m>channel=$b@channel"/></$m></$p><$r$l@t">&amp;time=$b@t"/></$r></$m></$p></$o></iframe></div></div>$c$aURL"><a href="{@url}">$jtitle"/>$g</a>$c$aVIMEO"><div$ivimeo"$k$f640px"><div$k$e56.25%">$h$s//player.vimeo.com/video/{@id}"$k$d/></div></div>$c$aVINE"><div$ivine"$k$f480px"><div$k$e100%">$h$shttps://vine.co/v/{@id}/embed/simple?audio=1"$k$d/></div></div>$c$aYOUTUBE"><div$iyoutube"$k$f640px"><div$k$e56.25%">$h$kbackground:url(https://i.ytimg.com/vi/{@id}/hqdefault.jpg) 50% 50% / cover;$d><$o$qsrc">https://www.youtube.com/embed/$b@id"/><$r$l@list">?list=$b@list"/></$r><$r$l@t or@m"><$p><$n$l@list">&amp;</$n><$m>?</$m></$p>start=<$p><$n$l@t">$b@t"/></$n><$n$l@h">$b@h*3600+@m*60+@s"/></$n><$m>$b@m*60+@s"/></$m></$p></$r></$o></iframe></div></div>$c$abr"><br/>$c$ae|i|s"/>$ahtml:abbr"><abbr>$jtitle"/>$g</abbr>$c$ahtml:div"><div>$jclass"/>$g</div>$c$ahtml:img"><img>$jalt|@height|@src|@title|@width"/>$g</img>$c$ahtml:span"><span>$jclass"/>$g</span>$c$ahtml:td"><td>$jcolspan|@rowspan"/>$g</td>$c$ahtml:th"><th>$jcolspan|@rowspan|@scope"/>$g</th>$c</xsl:stylesheet>'.replace(/\$[a-t]/g,
function(a){return{$a:'<xsl:template match="',$b:'<xsl:value-of select="',$c:"</xsl:template>",$d:'border:0;height:100%;left:0;position:absolute;width:100%"',$e:"overflow:hidden;position:relative;padding-bottom:",$f:"display:inline-block;width:100%;max-width:",$g:"<xsl:apply-templates/>",$h:'<iframe allowfullscreen="" scrolling="no"',$i:' data-s9e-mediaembed="',$j:'<xsl:copy-of select="@',$k:' style="',$l:' test="',$m:"xsl:otherwise",$n:"xsl:when",$o:"xsl:attribute",$p:"xsl:choose",$q:' name="',$r:"xsl:if",
$s:' src="',$t:"@playlist_id"}[a]});function mb(a){var b=document.createElement("b");mb=function(a){b.innerHTML=a.replace(/</g,"&lt;");return b.textContent};return mb(a)}function nb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function ob(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function pb(){return!0}
function qb(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function t(a,b){return b.test(a)?a:!1}
function La(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function Na(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=qb(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+qb(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path+a.query+a.fragment,c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c),b=b+c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,escape);a.scheme||(b=b.replace(/^([^\/]*):/,
"$1%3A",b));return b}
function Ma(a,b){if(""!==b.scheme&&!a.Q.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&c)}if(c)return"URL host is invalid";
if(a.S&&a.S.test(b.host)||a.W&&!a.W.test(b.host))return"URL host is not allowed"}}function rb(){}rb.prototype={p:function(){}};function sb(a,b,c,d,e){this.q=+a;this.l=b;this.k=+c;this.o=+d;"undefined"!==typeof e&&(this.B=+e);this.j={};this.J=[];isNaN(a+c+d)&&D(this)}sb.prototype.E=!1;function tb(a,b){a.J.push(b);a.E&&D(b)}function D(a){a.E||(a.E=!0,a.J.forEach(function(a){D(a)}))}
function G(a,b){a.l===b.l&&(1===a.q&&2===b.q&&b.k>=a.k?(a.z=b,b.F=a,tb(a,b)):2===a.q&&1===b.q&&b.k<=a.k&&(a.F=b,b.z=a))}function Da(a){var b={},c;for(c in a.j)b[c]=a.j[c];return b}function ub(a,b){return a.E||a.l!==b.l||1!==b.q||2!==a.q||a.k<b.k||a.F&&a.F!==b||b.z&&b.z!==a?!1:!0}sb.prototype.p=function(a,b){this.j[a]=b};function Ea(a,b){a.j={};for(var c in b)a.j[c]=b[c]}
var vb,wb,H,xb,I,yb,Ca=new rb,zb,L,M,Bb={Autoemail:{v:function(a,b){b.forEach(function(a){var b=N(1,"EMAIL",a[0][1],0,0);b.p("email",a[0][0]);a=O("EMAIL",a[0][1]+a[0][0].length,0);G(b,a)})},x:"@",y:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,A:1E4},Autolink:{v:function(a,b){b.forEach(function(a){var b=a[0][1];for(a=a[0][0];;)if(a=a.replace(/(?![-=\/)])[\s!-.:-@[-`{-~]+$/,""),")"===a.substr(-1)&&a.replace(/[^(]+/g,"").length<a.replace(/[^)]+/g,"").length)a=a.substr(0,a.length-1);else break;if(/^www\.|^[^:]+:/i.test(a)){var c=
O("URL",b+a.length,0);"."===a.charAt(3)&&(a="http://"+a);b=N(1,"URL",b,0,1);b.p("url",a);G(b,c)}})},x:"://",y:/\b(?:ftp|https?):\/\/\S(?:[^\s\[\]\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65]|\[\w*\])+/ig,A:1E4},Escaper:{v:function(a,b){b.forEach(function(a){P("ESC",a[0][1],1,a[0][1]+a[0][0].length,0)})},x:"\\",y:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,A:1E4},FancyPants:{v:function(a){function b(a,b,c,d){a=N(3,"FP",a,b,d||0||0);a.p("char",c);return a}function c(c,d,e,k){for(var f;f=d.exec(a);){var g=
b(+f.index+f[0].indexOf(c),1,e);f=b(+f.index+f[0].length-1,1,k);tb(g,f)}}var d=0<=a.indexOf("'"),e=0<=a.indexOf('"');(function(){if(d)for(var c,f=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=f.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019",10)})();(function(){if(d||e||!(0>a.indexOf("x")))for(var c={"'s":"\u2019","'":"\u2032","' ":"\u2032","'x":"\u2032",'"':"\u2033",'" ':"\u2033",'"x':"\u2033"},f,h=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;f=h.exec(a);){"x"===f[0].charAt(f[0].length-1)&&b(+f.index+f[0].length-
1,1,"\u00d7");var k=f[0].substr(1,2);c[k]&&b(+f.index+1,1,c[k])}})();d&&c("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");e&&c('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(function(){if(!(0>a.indexOf("...")&&0>a.indexOf("--")))for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])})();(function(){if(!(0>a.indexOf("(")))for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,
c[e[0].toLowerCase()])})();(function(){if(!(0>a.indexOf("!=")))for(var c,d=/\b !=(?= \b)/g;c=d.exec(a);)b(+c.index+1,2,"\u2260")})();(function(){if(!(0>a.indexOf("<<")))for(var c,d=/<<( ?)(?! )[^\n<>]*?[^\n <>]\1>>(?!>)/g;c=d.exec(a);){var e=b(+c.index,2,"\u00ab");c=b(+c.index+c[0].length-2,2,"\u00bb");tb(e,c)}})()}},HTMLComments:{v:function(a,b){b.forEach(function(a){var b=mb(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");N(3,"HC",a[0][1],a[0][0].length,0).p("content",
b)})},x:"\x3c!--",y:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,A:1E4},HTMLElements:{v:function(a,b){var c={a:{"":"URL",href:"url"},em:{"":"EM"},hr:{"":"HR"},s:{"":"S"},strong:{"":"STRONG"},sup:{"":"SUP"}};b.forEach(function(b){var d="/"===a.charAt(b[0][1]+1),g=b[0][1],f=b[0][0].length,h=b[2-d][0].toLowerCase(),k=c&&c[h]&&c[h][""]?c[h][""]:"html:"+h;if(d)O(k,g,f);else{d=/(<\S+|['"\s])\/>$/.test(b[0][0])?P(k,g,f,g+f,0):N(1,k,g,f,0);b=b[3][0];for(var g=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,
q;k=g.exec(b);)q=k[0].indexOf("="),0>q&&(q=k[0].length,k[0]+="="+k[0].toLowerCase()),f=k[0].substr(0,q).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),k=k[0].substr(1+q).replace(/^\s+/,"").replace("/s+$/",""),c&&c[h]&&c[h][f]&&(f=c[h][f]),/^["']/.test(k)&&(k=k.substr(1,k.length-2)),d.p(f,mb(k))}})},x:"<",y:/<(?:\/((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))|((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,
A:1E4},HTMLEntities:{v:function(a,b){b.forEach(function(a){var b=a[0][0],c=mb(b);c===b||32>c.charCodeAt(0)||N(3,"HE",a[0][1],b.length,0).p("char",c)})},x:"&",y:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,A:1E4},Litedown:{v:function(a){function b(a,b,c,d,e){var l=P("IMG",a,2,b,c);x(l,d,"src");l.p("alt",g(e));y(a,b+c-a)}function c(a,b,c,d){var l=P("URL",a,1,b,c,1===c?1:-1);x(l,d,"url");y(a,1);y(b,c)}function d(a,b){G(O("LIST",b,0),a.T);G(O("LI",b,0),a.H);a.O&&a.I.forEach(function(a){a.d&=-9})}function e(a,
b){for(var c=a;0<=--b;)c=c.replace(/^ *> ?/,"");return a.length-c.length}function g(a){$b.R&&-1<a.indexOf("&")&&(a=mb(a));a=a.replace(/\x1A/g,"");ja&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":"'","\u001b3":"(","\u001b4":")","\u001b5":"*","\u001b6":"[","\u001b7":"\\","\u001b8":"]","\u001b9":"^","\u001bA":"_","\u001bB":"`","\u001bC":"~"}[a]}));return a}function f(a){return a.replace(/\\[!"'()*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\'":"\u001b2",
"\\(":"\u001b3","\\)":"\u001b4","\\*":"\u001b5","\\[":"\u001b6","\\\\":"\u001b7","\\]":"\u001b8","\\^":"\u001b9","\\_":"\u001bA","\\`":"\u001bB","\\~":"\u001bC"}[a]})}function h(b,c){return/[ \t]*#*[ \t]*$/.exec(a.substr(b,c-b))[0].length}function k(){var b={};if(-1===a.indexOf("-")&&-1===a.indexOf("="))return b;for(var c,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;c=d.exec(a);){var e=c[0];c=c.index;for(var f=c-1;0<f&&" "===a[f-1];)--f;b[c-1]={K:c+e.length-f,L:f,V:e.length-e.replace(/>/g,"").length,
X:"="===e.charAt(0)?"H1":"H2"}}return b}function q(a){return 0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a)}function Z(b){a=a.substr(0,b)+"\u0017"+a.substr(b+1)}function Y(b,c){var d=a.indexOf(b);if(-1!==d){var e=[],f=[],l=l=a.indexOf("\u0017",d),g;for(c.lastIndex=d;g=c.exec(a);)d=g.index,g=g[0].length,d>l&&(f.push(e),e=[],l=a.indexOf("\u0017",d)),"_"===a[d]&&1===g&&0<d&&q(a[d-1])&&q(a[d+g])||e.push([d,g]);f.push(e);f.forEach(E)}}function z(){for(var b,d=/\[(?:[^\x17[\]]|\[[^\x17[\]]*\])*\]\(( *(?:[^\x17\s()]|\([^\x17\s()]*\))*(?=[ )]) *(?:"[^\x17]*?"|'[^\x17]*?'|\([^\x17)]*\))? *)\)/g;b=
d.exec(a);){var e=b[1],f=b.index,g=3+e.length;c(f,f+b[0].length-g,g,e)}}function u(){for(var b={},d,e=/\[((?:[^\x17[\]]|\[[^\x17[\]]*\])*)\]/g;d=e.exec(a);)b[d.index]=d[1].toLowerCase();for(var f in b){d=b[f];var e=+f+2+d.length,g=e-1,h=1;" "===a.charAt(e)&&++e;""<b[e]&&A[b[e]]&&(d=b[e],h=e+2+d.length-g);A[d]&&c(+f,g,h,A[d])}}function y(b,c){a=a.substr(0,b)+Array(1+c).join("\u001a")+a.substr(b+c)}function E(a){var b=0,c=-1,d=-1,e;a.forEach(function(a){var f=a[0];a=a[1];var g=Math.min(3,a),l=g&b&1,
g=g&b&2,h=f,k=f;2<b&&c===d&&(l?c+=2:++d);l&&g&&(c<d?h+=2:++k);e=a;l&&(--b,--e,P("EM",c,1,h,1));g&&(b-=2,e-=2,P("STRONG",d,2,k,2));e=Math.min(3,e);e&1&&(c=f+a-e);e&2&&(d=f+a-e);b+=e})}function x(a,b,c){b=b.replace(/^\s*/,"").replace(/\s*$/,"");var d="",e=b.indexOf(" ");-1!==e&&(d=b.substr(e).replace(/^\s*\S/,"").replace(/\S\s*$/,""),b=b.substr(0,e));a.p(c,g(b));""<d&&a.p("title",g(d))}var $b={R:!0},ja,ba,A,Ra,Sa,Jb,Ta;0>a.indexOf("\\")?ja=!1:(ja=!0,a=f(a));a+="\n\n\u0017";(function(){for(var b,c=4,
f,g=!0,U=[],q=0,z=!1,Y=[],u=0,x=k(),V=0,E,A,ba,K,ja,Kb,F,C,Ua,Ha,W,X,ga,Lb=[],Va,Ia=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+[^`\n]*$|~~~+[^~\n]*$)?)?/gm;Va=Ia.exec(a);)Lb.push(Va),Va.index===Ia.lastIndex&&++Ia.lastIndex;Lb.forEach(function(l){var k=l.index,va=l[0].length;W=K=0;A=!g;F=a.indexOf("\n",k);g=F===k+va&&!l[3]&&!l[4]&&!l[5];va||++Ia.lastIndex;E=g&&A;l[1]&&(W=l[1].length-l[1].replace(/>/g,
"").length,K=l[1].length,f&&"quoteDepth"in f.j&&(W=Math.min(W,f.j.quoteDepth),K=e(l[1],W)),y(k,K));if(W<u&&!A){z=!0;do G(O("QUOTE",V,0),Y.pop());while(W<--u)}if(W>u&&!g){z=!0;do{var fa=N(1,"QUOTE",k,0,u-999||0);Y.push(fa)}while(W>++u)}var J=0,aa=0;if(l[2]&&!b){ja=l[2];Kb=ja.length;do" "===ja.charAt(aa)?++J:J=J+4&-4;while(++aa<Kb&&J<c)}f&&!b&&J<c&&!g&&(z=!0);z&&(z=!1,f&&(y(f.k,V-f.k),ba=O("CODE",V,0,-1),G(ba,f),b=f=null),U.forEach(function(a){d(a,V)}),U=[],q=0,k&&Z(k-1));if(J>=c){if(f||!A)K=(l[1]||
"").length+aa,f||(f=N(1,"CODE",k+K,0,0)),l={}}else{fa=!!l[4];if(J||A||fa)if(A&&!fa)C=q-1;else if(q)for(C=0;C<q&&J>U[C].M;)++C;else C=!fa||A&&"\u0017"!==a.charAt(k-1)?-1:0;else C=-1;for(;C<q-1;)d(U.pop(),V),--q;C!==q||fa||--C;if(fa&&0<=C)if(E=!0,X=k+K+aa,ga=l[4].length,aa=N(1,"LI",X,ga,0),y(X,ga),C<q)G(O("LI",V,0),U[C].H),U[C].H=aa,U[C].I.push(aa);else{++q;C?(Ha=U[C-1].M+1,Ua=Math.max(Ha,4*C)):(Ha=0,Ua=J);J=N(1,"LIST",X,0,0);if(-1<l[4].indexOf(".")){J.p("type","decimal");var Ib=+l[4];1!==Ib&&J.p("start",
Ib)}U.push({T:J,H:aa,I:[aa],Z:Ha,M:Ua,O:!0})}!q||A||g||(1<U[0].I.length||!fa)&&U.forEach(function(a){a.O=!1});c=4*(q+1)}if(l[5])if("#"===l[5].charAt(0))Ra=l[5].length,Sa=k+va-Ra,Ta=h(k+va,F),Jb=F-Ta,P("H"+/#{1,6}/.exec(l[5])[0].length,Sa,Ra,Jb,Ta),Z(Sa),Z(F),A&&(E=!0);else{if("`"===l[5].charAt(0)||"~"===l[5].charAt(0))X=k+K,ga=F-X,f&&l[5]===b?(ba=O("CODE",X,ga,-1),G(ba,f),Ab(V,X-V),y(f.k,X+ga-f.k),b=f=null):f||(f=N(1,"CODE",X,ga,0),b=l[5].replace(/[^`~]+/,""),f.p("quoteDepth",W),Ab(X+ga,1),l=l[5].replace(/^[`~\s]*/,
"").replace(/\s+$/,""),""!==l&&f.p("lang",l))}else l[3]&&!q&&"\u0017"!==a.charAt(k+va)?(N(3,"HR",k+K,va-K,0),E=!0,Z(F)):!x[F]||x[F].V!==W||g||q||f||(P(x[F].X,k+K,0,x[F].L,x[F].K),Z(x[F].L+x[F].K));E&&(N(3,"pb",V,0,0),Z(V));g||(V=F);K&&Ab(k,K,1E3)})})();(function(){ba=!1;A={};if(-1!==a.indexOf("]:"))for(var b,c=/^\x1A* {0,3}\[([^\x17\]]+)\]: *([^\s\x17]+ *(?:"[^\x17]*?"|'[^\x17]*?'|\([^\x17)]*\))?)[^\x17\n]*\n?/gm;b=c.exec(a);){Ab(b.index,b[0].length,-2);var d=b[1].toLowerCase();A[d]||(ba=!0,A[d]=
b[2])}})();(function(){var b;var c=a.indexOf("`");if(0>c)b=[];else{b=/(`+)(\s*)[^\x17`]*/g;var d=0,f=[],e=a.replace(/\x1BB/g,"\\`");for(b.lastIndex=c;c=b.exec(e);)f.push({k:c.index,o:c[1].length,P:d,Y:c[2].length,N:c.index+c[0].length}),d=c[0].length-c[0].replace(/\s+$/,"").length;b=f}e=-1;for(d=b.length;++e<d-1;)for(c=b[e].N,f=e,"`"!==a.charAt(b[e].k)&&(++b[e].k,--b[e].o);++f<d&&b[f].k===c;){if(b[f].o===b[e].o){var e=b[e],g=b[f],c=e.k,k=g.k-g.P,g=g.o+g.P;P("C",c,e.o+e.Y,k,g);y(c,k+g-c);e=f;break}c=
b[f].N}})();(function(){var c=a.indexOf("![");if(-1!==c){if(0<a.indexOf("](",c))for(var d=/!\[(?:[^\x17[\]]|\[[^\x17[\]]*\])*\]\(( *(?:[^\x17\s()]|\([^\x17\s()]*\))*(?=[ )]) *(?:"[^\x17]*?"|'[^\x17]*?'|\([^\x17)]*\))? *)\)/g;c=d.exec(a);){var e=c[1],f=c.index,g=3+e.length;b(f,f+c[0].length-g,g,e,c[0].substr(2,c[0].length-g-2))}if(ba)for(d=/!\[((?:[^\x17[\]]|\[[^\x17[\]]*\])*)\](?: ?\[([^\x17[\]]+)\])?/g;c=d.exec(a);){var e=+c.index,f=e+2+c[1].length,g=1,k=c[1],h=k;if(""<c[2]&&A[c[2]])g=c[0].length-
k.length-2,h=c[2];else if(!A[h])continue;b(e,f,g,A[h],k)}}})();-1!==a.indexOf("](")&&z();ba&&u();(function(){if(-1!==a.indexOf("~~"))for(var b,c=/~~[^\x17]+?~~/g;b=c.exec(a);){var d=b.index;P("DEL",d,2,d+b[0].length-2,2)}})();(function(){if(-1!==a.indexOf("^"))for(var b,c=/\^[^\x17\s]+/g;b=c.exec(a);){var d=b[0],e=b=b.index,f=b+d.length,d=d.split("^");d.shift();d.forEach(function(a){P("SUP",e,1,f,0);e+=1+a.length})}})();Y("*",/\*+/g);Y("_",/_+/g);(function(){for(var b=a.indexOf("  \n");-1!==b;)N(3,
"br",b+2,0,0),b=a.indexOf("  \n",b+3)})()}},MediaEmbed:{v:function(a,b){b.forEach(function(a){var b=a[0][0];N(3,"MEDIA",a[0][1],b.length,-10).p("url",b)})},x:":",y:/\b(?:spotify:|https?:\/\/)[^["'\s]+/ig,A:1E4}},Q,Ka={mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","liveleak.com":"liveleak","open.spotify.com":"spotify","play.spotify.com":"spotify","soundcloud.com":"soundcloud","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine",
"youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{Q:/^(?:ftp|https?)$/i}},Cb={c:oa,d:8},R={BANDCAMP:{c:ra,j:{album_id:w,track_id:w,track_num:w,url:B},f:13,b:[pb,Ba,jb],g:10,e:la,i:1E3},C:$a,CODE:{c:ca,j:{lang:Ja},f:1,b:v,g:10,e:{d:4436,r:r},i:1E3},DAILYMOTION:{c:ra,u:[["url",/dailymotion\.com\/(?:live\/|swf\/|user\/[^#]+#video=|(?:related\/\d+\/)?video\/)([A-Za-z0-9]+)/,m],["url",/^([A-Za-z0-9]+)$/,m]],j:{id:{b:[function(a){return t(a,/^[A-Za-z0-9]+$/)}],n:!0},url:B},f:13,b:eb,g:10,e:la,i:1E3},
DEL:cb,EM:bb,EMAIL:{c:ha,j:{email:{b:[function(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}],n:!0}},f:4,b:v,g:10,e:ea,i:1E3},ESC:{c:ca,f:5,b:v,g:10,e:{d:1616},i:1E3},FACEBOOK:{c:[65329,65408],u:[["url",/\/(?!(?:apps|developers|graph)\.)[-\w.]*facebook\.com\/(?:[\/\w]+\/permalink|(?!pages\/|groups\/).*?)(?:\/|fbid=|\?v=)(\d+)(?=$|[\/?&#])/,m],["url",/\/(video)s?\//,["","type"]],ua],j:{id:Xa,type:{b:[function(a){return t(a,/^video$/)}],n:!1},url:B},f:14,b:eb,g:10,e:ia,i:1E3},FP:db,H1:fb,H2:fb,H3:fb,
H4:fb,H5:fb,H6:fb,HC:{c:ca,j:{content:sa},f:5,b:v,g:10,e:{d:3153},i:1E3},HE:db,HR:{c:n,f:1,b:v,g:10,e:{d:3349},i:1E3},IMG:{c:n,j:{alt:p,src:Za,title:p},f:0,b:v,g:10,e:ia,i:1E3},LI:hb,LIST:{c:ma,j:{start:{b:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],n:!1},type:Ja},f:1,b:v,g:10,e:ya,i:1E3},LIVELEAK:{c:ra,u:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,m],["url",/^([a-f_0-9]+)$/,m]],j:{id:{b:[function(a){return t(a,/^[a-f_0-9]+$/)}],n:!0},url:B},f:13,b:eb,g:10,e:la,i:1E3},MEDIA:{c:[65335,65504],
f:12,b:[function(a){return function(a,c){function b(a,b){var c=a.z||a;Ea(P(b.toUpperCase(),a.k,0,c.k+c.o,0,a.B),Da(a))}return function(a,c){if("site"in a.j){var d=a.j.site.toLowerCase(),e;a:{for(e in c)if(c[e]===d){e=!0;break a}e=!1}e&&b(a,d)}else if("url"in a.j){e=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.j.url);if(e[1]&&c[e[1]+":"])d=c[e[1]+":"];else if(e[2])a:{d=e[2];do{if(c[d]){d=c[d];break a}e=d.indexOf(".");if(0>e)break;d=d.substr(1+e)}while(""<d);d=!1}d&&b(a,d)}return!1}(a,c)}(a,Ka.mediasites)}],
g:10,e:{d:513},i:1E3},QUOTE:{c:oa,f:1,b:v,g:10,e:wa,i:1E3},SOUNDCLOUD:{c:[65329,65344],u:[["url",/(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)/,m],["url",/api\.soundcloud\.com\/playlists\/(\d+)/,["","playlist_id"]],["url",/api\.soundcloud\.com\/tracks\/(\d+)(?:\?secret_token=([-\w]+))?/,["","track_id","secret_token"]],["url",/soundcloud\.com\/(?!playlists|tracks)[-\w]+\/[-\w]+\/(?=s-)([-\w]+)/,["","secret_token"]],["url",/^((?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$))$/,
m]],j:{id:{b:[function(a){return t(a,/^(?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)$/)}],n:!0},playlist_id:w,secret_token:Ya,track_id:w,url:B},f:15,b:[za,pb,Ba],g:10,e:ia,i:1E3},SPOTIFY:{c:ra,u:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[-,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[-\/\w]+)/,["","path"]]],j:{path:{b:[function(a){return t(a,/^(?:(?:album|artist|track|user)\/[-\/\w]+)$/)}],n:!1},uri:{b:[function(a){return t(a,
/^(?:spotify:(?:album|artist|user|track(?:set)?):[-,:\w]+)$/)}],n:!1},url:B},f:13,b:kb,g:10,e:la,i:1E3},STRONG:bb,SUP:ab,TWITCH:{c:ra,u:[["url",/twitch\.tv\/(\w+)(?:\/b\/(\d+)|\/c\/(\d+)|\/v\/(\d+))?/,["","channel","archive_id","chapter_id","video_id"]],["url",/t=((?:(?:\d+h)?\d+m)?\d+s)/,["","t"]],["url",/clips\.twitch\.tv\/(\w+)\/(\w+)/,["","channel","clip_id"]]],j:{archive_id:w,channel:Wa,chapter_id:w,clip_id:Wa,t:{b:[function(a){return t(a,/^(?:(?:\d+h)?\d+m)?\d+s$/)}],n:!1},url:B,video_id:w},
f:13,b:kb,g:10,e:la,i:1E3},URL:{c:ha,j:{title:p,url:Za},f:4,b:v,g:10,e:ea,i:1E3},VIMEO:{c:ra,u:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/|video\/)?(\d+)/,m],ua],j:{id:Xa,url:B},f:13,b:eb,g:10,e:la,i:1E3},VINE:{c:ra,u:[["url",/vine\.co\/v\/([^\/]+)/,m],["url",/^([^\/]+)$/,m]],j:{id:{b:[function(a){return t(a,/^[^\/]+$/)}],n:!0},url:B},f:13,b:eb,g:10,e:la,i:1E3},YOUTUBE:{c:ra,u:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,m],["url",/youtu\.be\/([-\w]+)/,m],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,
["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,m]],j:{h:w,id:{b:Ga,n:!0},list:Ya,m:w,s:w,t:w,url:B},f:13,b:eb,g:10,e:la,i:1E3},"html:abbr":{c:n,j:{title:p},f:0,b:v,g:10,e:da,i:1E3},"html:b":bb,"html:br":{c:pa,f:0,b:v,g:10,e:ka,i:1E3},"html:code":$a,"html:dd":{c:oa,f:6,b:v,g:10,e:Qa,i:1E3},"html:del":cb,"html:div":{c:oa,j:ta,f:1,b:v,g:10,e:wa,i:1E3},"html:dl":{c:[65376,65296],f:1,b:v,g:10,e:ya,i:1E3},"html:dt":{c:qa,f:6,b:v,g:10,e:Qa,i:1E3},"html:i":bb,"html:img":{c:pa,
j:{alt:p,height:p,src:B,title:p,width:p},f:0,b:v,g:10,e:ka,i:1E3},"html:ins":cb,"html:li":hb,"html:ol":gb,"html:pre":{c:n,f:1,b:v,g:10,e:{d:276,r:r},i:1E3},"html:rb":{c:n,f:7,b:v,g:10,e:xa,i:1E3},"html:rp":ib,"html:rt":ib,"html:rtc":{c:[65329,65489],f:7,b:v,g:10,e:xa,i:1E3},"html:ruby":{c:[65457,65489],f:0,b:v,g:10,e:da,i:1E3},"html:span":{c:n,j:ta,f:0,b:v,g:10,e:da,i:1E3},"html:strong":bb,"html:sub":ab,"html:sup":ab,"html:table":{c:[65312,65306],f:1,b:v,g:10,e:ya,i:1E3},"html:tbody":{c:na,f:9,b:v,
g:10,e:{w:{"html:tbody":1,"html:td":1,"html:tfoot":1,"html:th":1,"html:thead":1,"html:tr":1},d:3456,r:r},i:1E3},"html:td":{c:oa,j:{colspan:p,rowspan:p},f:10,b:v,g:10,e:Pa,i:1E3},"html:tfoot":{c:na,f:9,b:v,g:10,e:{w:{"html:tbody":1,"html:td":1,"html:th":1,"html:thead":1,"html:tr":1},d:3456,r:r},i:1E3},"html:th":{c:qa,j:{colspan:p,rowspan:p,scope:p},f:10,b:v,g:10,e:Pa,i:1E3},"html:thead":{c:na,f:9,b:v,g:10,e:{d:3456,r:r},i:1E3},"html:tr":{c:[65312,65300],f:11,b:v,g:10,e:{w:{"html:td":1,"html:th":1,
"html:tr":1},d:3456,r:r},i:1E3},"html:u":bb,"html:ul":gb},S,Db,T,Eb,Fb=0,Gb;
function Hb(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");vb={};wb={};xb=0;I=null;yb=!1;zb={};L=[];M="";Q=0;S=[];Db=!1;T=a;Eb=T.length;Gb=0;H=Cb;H.D=!1;++Fb;a=Fb;for(var b in Bb)if(!Bb[b].G)a:{var c=b,d=Bb[c];if(!(d.x&&0>T.indexOf(d.x))){var e=[];if(d.y){e=d.y;d=d.A;e.lastIndex=0;for(var g=[],f=0,h=void 0;++f<=d&&(h=e.exec(T));){for(var k=+h.index,q=[[h[0],k]],Z=0;++Z<h.length;){var Y=h[Z];void 0===Y?q.push(["",-1]):(q.push([Y,T.indexOf(Y,k)]),k+=Y.length)}g.push(q)}e=
g;if(!e.length)break a}(0,Bb[c].v)(T,e)}}Mb();Nb(Eb,0,!0);do b=M,M=M.replace(/<([^ />]+)><\/\1>/g,"");while(M!==b);M=M.replace(/<\/i><i>/g,"",M);M=M.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ob);c=yb?"r":"t";b="<"+c;for(var z in zb)b+=" xmlns:"+z+'="urn:s9e:TextFormatter:'+z+'"';M=b+">"+M+"</"+c+">";if(Fb!==a)throw"The parser has been reset during execution";return M}
function Aa(a,b){b.u&&b.u.forEach(function(b){var c=b[0];if(c in a.j){b=Pb(a.j[c],b[1],b[2]);for(var e in b)e!==c&&e in a.j||a.p(e,b[e])}});return!0}function Pb(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Ob(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Qb(a){yb=!0;var b=a.l,c=a.k,d=a.o,e=a.d,g=0,f=0;e&256&&(g=1,f=a.q&2?2:1);var h=!1;a.q&1?e&4&&(h=!0):h=!0;Nb(c,g,h);g=d?ob(T.substr(c,d)):"";if(a.q&1){e&4||Rb(c);e=b.indexOf(":");0<e&&(zb[b.substr(0,e)]=0);M+="<"+b;var k=Da(a),e=[],q;for(q in k)e.push(q);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){M+=" "+a+'="'+nb(k[a].toString()).replace(/\n/g,"&#10;")+'"'});M=3===a.q?d?M+(">"+g+"</"+b+">"):M+"/>":d?M+("><s>"+g+"</s>"):M+">"}else d&&(M+="<e>"+g+"</e>"),M+="</"+b+">";for(Gb=
Q=c+d;f&&Gb<Eb&&"\n"===T.charAt(Gb);)--f,++Gb}
function Nb(a,b,c){c&&(H.d&8?b=-1:c=!1);Q>=a&&c&&Sb();if(Gb>Q){var d=Math.min(a,Gb);M+=T.substr(Q,d-Q);Q=d;Q>=a&&c&&Sb()}if(H.d&128)d=a-Q,b=T.substr(Q,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),M+=b,Q=a,c&&Sb();else{for(var e=a,d=0;b&&--e>=Q;){var g=T.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;if(H.d&8)for(H.D||(Tb(a),a>Q&&Rb(a)),b=T.indexOf("\n\n",Q);-1<b&&b<a;)Nb(b,0,!0),Rb(a),b=T.indexOf("\n\n",Q);a>Q&&(b=ob(T.substr(Q,a-Q)),M+=b);c&&Sb();d&&(M+=T.substr(a,d));Q=a+d}}
function Ub(a){var b=a.k;a=a.o;var c=T.substr(b,a);Nb(b,0,!1);M+="<i>"+ob(c)+"</i>";yb=!0;Q=b+a}function Rb(a){!H.D&&H.d&8&&(Tb(a),Q<Eb&&(M+="<p>",H.D=!0))}function Sb(){H.D&&(M+="</p>",H.D=!1)}function Tb(a){for(;Q<a&&-1<" \n\t".indexOf(T.charAt(Q));)M+=T.charAt(Q),++Q}function Vb(a,b){var c=a.l;a.d&256&&(b=Wb(b));c=O(c,b,0);G(c,a)}function Wb(a){for(;a>Q&&-1<" \n\t".indexOf(T.charAt(a-1));)--a;return a}
function Mb(){if(S.length){for(var a in R)vb[a]=0,wb[a]=0;do{for(;S.length;)Db||(S.sort(Xb),Db=!0),I=S.pop(),H.d&64&&!(ub(I,L[L.length-1])||-1<"br i pb v".indexOf(I.l))||Yb();L.forEach(function(a){Vb(a,Eb)})}while(S.length)}}
function Yb(){if(!I.E){var a=I.k,b=I.o;if(Q>a){var c;if((c=I.F)&&0<=L.indexOf(c))G(O(c.l,Q,Math.max(0,a+b-Q)),c);else{if("i"===I.l&&(a=a+b-Q,0<a)){Ab(Q,a);return}D(I)}}else if("i"===I.l)Ub(I);else if("br"===I.l)H.d&1024||(Nb(I.k,0,!1),M+="<br/>");else if("pb"===I.l)Nb(I.k,0,!0);else if("v"===I.l)a=H.d,H.d=I.d,Nb(I.k+I.o,0,!1),H.d=a;else if(I.q&1)if(a=I,b=a.l,c=R[b],wb[b]>=c.i)D(a);else{var d=a,e=R[d.l],g=!0;if(e.b)for(var f=0;f<e.b.length;++f)if(!e.b[f](d,e)){g=!1;break}if(g){a:{d=a;if(L.length&&
(g=d.l,f=R[g],f.e.r)){var e=L[L.length-1],h=e.l;if(f.e.r[h]){h!==g&&1E3>xb&&(g=Zb(e,d.k+d.o),tb(d,g));S.push(d);Vb(e,d.k);xb+=4;d=!0;break a}}d=!1}if(!d)a:{d=a;if(L.length&&(e=R[d.l],e.e.w&&(g=L[L.length-1],e.e.w[g.l]))){S.push(d);Vb(g,d.k);d=!0;break a}d=!1}d||(vb[b]>=c.g?D(a):(c=R[b].f,H.c[c>>3]&1<<(c&7)?(!(a.d&1)||a.z||S.length&&ub(S[S.length-1],a)||(b=new sb(3,b,a.k,a.o),Ea(b,Da(a)),b.d=a.d,a=b),a.d&4096&&!a.z&&"\n"===T.charAt(a.k+a.o)&&Ab(a.k+a.o,1),Qb(a),ac(a)):D(a)))}else D(a)}else bc()}}
function bc(){var a=I;if(vb[a.l]){for(var b=[],c=L.length;0<=--c;){var d=L[c];if(ub(a,d))break;b.push(d);++xb}if(!(0>c)){var e=1E3>xb,g=[];b.forEach(function(b){var c=b.l;e&&(b.d&2?g.push(b):e=!1);var d=a.k;b.d&256&&(d=Wb(d));c=new sb(2,c,d,0);c.d=b.d;Qb(c);cc()});Qb(a);cc();if(b.length&&1E3>xb){d=Q;for(c=S.length;0<=--c&&1E3>++xb;){var f=S[c];if(f.k>d||f.q&1)break;for(var h=b.length;0<=--h&&1E3>++xb;)if(ub(f,b[h])){b.splice(h,1);g[h]&&g.splice(h,1);d=Math.max(d,f.k+f.o);break}}d>Q&&Ub(new sb(3,"i",
Q,d-Q))}g.forEach(function(a){var b=Zb(a,Q);(a=a.z)&&G(b,a)})}}}function cc(){var a=L.pop();--vb[a.l];H=H.U}function ac(a){var b=a.l,c=a.d,d=R[b];++wb[b];if(3!==a.q){var e=[];c&512?H.c.forEach(function(a,b){e.push(d.c[b]&a)}):H.c.forEach(function(a,b){e.push(d.c[b]&(a&65280|a>>8))});c|=H.d&32;c&16&&(c&=-33);++vb[b];L.push(a);H={c:e,d:c,U:H}}}function O(a,b,c,d){return N(2,a,b,c,d||0)}function Ab(a,b,c){N(3,"i",a,Math.min(b,Eb-a),c||0)}
function Zb(a,b){var c=N(a.q,a.l,b,0,a.B);Ea(c,Da(a));return c}function N(a,b,c,d,e){a=new sb(a,b,c,d,e||0);R[b]&&(a.d=R[b].e.d);if(R[b]||-1<"br i pb v".indexOf(a.l))if(R[b]&&R[b].G)D(a);else if(0>d||0>c||c+d>Eb)D(a);else if(Db){for(b=S.length;0<b&&0<Xb(S[b-1],a);)S[b]=S[b-1],--b;S[b]=a}else S.push(a);else D(a);return a}function P(a,b,c,d,e,g){d=O(a,d,e);a=N(1,a,b,c,g||0||0);G(a,d);return a}
function Xb(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.B!==b.B)return b.B-a.B;c=a.o;d=b.o;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.q]-c[a.q])}var dc="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;function ec(a,b){if(dc){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}
function fc(a,b){if(dc){var c=b.createElement("div"),d=b.createDocumentFragment();gc.input=ec(a,"MSXML2.DOMDocument.6.0");gc.transform();for(c.innerHTML=gc.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(gc.transformToFragment(ec(a),b),!0)}var gc,hc=ec(lb,"MSXML2.FreeThreadedDOMDocument.6.0");if(dc){var ic=new ActiveXObject("MSXML2.XSLTemplate.6.0");ic.stylesheet=hc;gc=ic.createProcessor()}else gc=new XSLTProcessor,gc.importStylesheet(hc);
window.s9e={TextFormatter:{disablePlugin:function(a){Bb[a]&&(Bb[a].G=!0)},enablePlugin:function(a){Bb[a]&&(Bb[a].G=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,f=b.childNodes,g=c.length,h=f.length,z,u,y=0,E=0;y<g&&y<h;){z=c[y];u=f[y];if(!d(z,u))break;++y}for(var x=Math.min(g-y,h-y);E<x;){z=c[g-(E+1)];u=f[h-(E+1)];if(!d(z,u))break;++E}z=e.createDocumentFragment();for(x=y;x<h-E;)u=f[x].cloneNode(!0),z.appendChild(u),++x;for(x=g-E;--x>=y;)a.removeChild(c[x]);E?a.insertBefore(z,a.childNodes[y]):
a.appendChild(z)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,g=d.length;0<=--g;){var h=d[g],u=h.namespaceURI,h=h.name;b.hasAttributeNS(u,h)||a.removeAttributeNS(u,h)}for(g=f;0<=--g;)d=e[g],u=d.namespaceURI,h=d.name,d=d.value,d!==a.getAttributeNS(u,h)&&a.setAttributeNS(u,h,d);c(a,
b);return!0}var e=b.ownerDocument,g=fc(Hb(a),e);c(b,g)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.4.1/punycode.min.js"></script>
</body>
</html>