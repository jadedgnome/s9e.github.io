<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		pre, code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		pre code
		{
			border: 0;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
		p
		{
			margin: 0;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash like \*this\*
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments <!-- like this one -->
 - **HTMLElements** --- several HTML elements such as <sub>sub</sub> and <sup>sup</sup> are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:  
   http://youtu.be/QH2-TGUlwu4

***

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 30.7 KB (12.7 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var l=[0,0],aa={d:0},m=["","id"],ba={d:514},da={d:3137},ea={d:3073},fa=[61287,7936],ia={d:3201},p={p:!1},ja=[65376,16128],ka=[65399,16160],la=[65312,16144],ma=[64371,16160],na=[65320,16128],oa={p:!0},q=[65393,16128],pa=[65312,16128],qa={"class":p},ra=["url",/^(\d+)$/,m],t={C:1,EM:1,EMAIL:1,STRONG:1,URL:1,"html:b":1,"html:code":1,"html:i":1,"html:strong":1,"html:u":1},ya={d:268,o:t},za={d:3460,o:t},Aa={d:3397,o:t};function Ba(a,b){return Ca(a,b)}
function Da(a,b){var c;a:{c=Ea;if(b.j){var d,e,g=Fa(a);for(d in g){var f=g[d];if(b.j[d]){if(e=b.j[d],e.b){c.n(d);for(var h=0;h<e.b.length;++h)if(f=e.b[h](f,d),!1===f){delete a.j[d];break}!1!==f&&a.n(d,f)}}else delete a.j[d]}for(d in b.j)if(e=b.j[d],!(d in a.j)&&e.p){c=!1;break a}}else Ga(a,{});c=!0}return c}
var Ha=[function(a){return u(a,/^\d+$/)}],w=[Da],Ka=[function(a){return u(a,/^[-\w]+$/)}],La={b:[function(a){return/^[-\w+., ]+$/.test(a)?a:!1}],p:!1},Qa=[function(a){var b=Ma.urlConfig,c=Ea,d=Na(a.replace(/^\s+/,"").replace(/\s+$/,""));Oa(b,d)?(c&&(d.attrValue=a),a=!1):a=Pa(d);return a}],Ra={w:{"html:td":1,"html:th":1},d:264,o:t},Sa={w:{"html:dd":1,"html:dt":1},d:256,o:t},y={b:Ha,p:!1},Ta={b:Ka,p:!1},z={b:Qa,p:!1},Ua={w:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},d:256,o:t},Va={b:Qa,p:!0},
Xa={c:l,f:0,b:w,g:10,e:{d:66},i:1E3},Ya={c:q,f:0,b:w,g:10,e:{d:2},i:1E3},Za={c:q,f:0,b:w,g:10,e:aa,i:1E3},$a={c:ka,f:0,b:w,g:10,e:{d:512},i:1E3},ab={c:ja,j:{"char":oa},f:6,b:w,g:10,e:ea,i:1E3},bb=[Ba,Da],cb={c:q,f:2,b:w,g:10,e:{d:260,o:t},i:1E3},db={c:na,f:1,b:w,g:10,e:za,i:1E3},eb={id:{b:Ha,p:!0},url:z},fb={c:ka,f:3,b:w,g:10,e:{w:{LI:1,"html:li":1},d:264,o:t},i:1E3};function gb(a){a:{for(var b in Fa(a))if("url"!==b){a=!0;break a}a=!1}return a}
var hb='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aBANDCAMP"><$u$gbandcamp"$j$e400px"><$u$j$h100%"><$r$i"$nno"$j$b><$q$xsrc">//bandcamp.com/EmbeddedPlayer/size=large/minimal=true/<$o><$l$s@album_id">album=$d@album_id"/><$w$s@track_num">/t=$d@track_num"/></$w></$l><$m>track=$d@track_id"/></$m></$o></$q></$r></$u></$u>$c$aC"><code>$f</code>$c$aCODE"><pre><code class="{@lang}">$f</code></pre>$c$aDAILYMOTION"><$u$gdailymotion"$j$e640px"><$u$j$h56.25%"><$r$i"$nno"$t//www.dailymotion.com/embed/video/{@id}"$j$b/></$u></$u>$c$aDEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:dd|html:del|html:dl|html:dt|html:i|html:ins|html:li|html:ol|html:pre|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|html:ul|p"><xsl:element$x{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}">$f</xsl:element>$c$aEMAIL"><a href="mailto:{@email}">$f</a>$c$aESC">$f$c$aFACEBOOK"><$r$gfacebook"$i" onload="var a=Math.random();window.addEventListener(\'message\',function(b){{if(b.data.id==a)style.height=b.data.height+\'px\'}});contentWindow.postMessage(\'s9e:\'+a,src.substr(0,src.indexOf(\'/\',8)))"$nno"$t//s9e.github.io/$r/facebook.min.html#{@id}"$jborder:0;height:360px;max-width:640px;width:100%"/>$c$aFP|HE">$d@char"/>$c$aHC"><xsl:comment>$d@content"/></xsl:comment>$c$aHR"><hr/>$c$aIMG"><img$t{@src}">$kalt|@title"/></img>$c$aLIST"><$o><$l$snot(@type)"><ul>$f</ul></$l><$m><ol>$kstart"/>$f</ol></$m></$o>$c$aLIVELEAK"><$u$gliveleak"$j$e640px"><$u$j$h56.25%"><$r$i"$nno"$thttp://www.liveleak.com/ll_embed?i={@id}"$j$b/></$u></$u>$c$aQUOTE"><blockquote>$f</blockquote>$c$aSOUNDCLOUD"><$o><$l$s@playlist_id"><$r$g$v$i"$nno"$thttps://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/{@playlist_id}"$jborder:0;height:450px;max-width:900px;width:100%"/></$l><$l$s@track_id"><$r$g$v$i"$nno"$thttps://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/{@track_id}&amp;secret_token={@secret_token}"$j$p/></$l><$l$snot(contains(@id,\'://\'))"><$r$g$v$i"$nno"$thttps://w.soundcloud.com/player/?url=https%3A//soundcloud.com/{@id}"$j$p/></$l><$m><$r$g$v$i"$nno"$thttps://w.soundcloud.com/player/?url={@id}"$j$p/></$m></$o>$c$aSPOTIFY"><$u$gspotify"$j$e400px"><$u$j$h120%"><$r$i"$nno"$j$b><$q$xsrc">https://embed.spotify.com/?view=coverart&amp;uri=<$o><$l$s@uri">$d@uri"/></$l><$m>spotify:$dtranslate(@path,\'/\',\':\')"/></$m></$o></$q></$r></$u></$u>$c$aTWITCH"><$u$gtwitch"$j$e640px"><$u$j$h60.9375%;padding-bottom:calc(56.25% + 30px)"><$r$i"$nno"$j$b><$q$xsrc">//s9e.github.io/$r/twitch.min.html#channel=$d@channel"/><$o><$l$s@archive_id">&amp;videoId=a$d@archive_id"/></$l><$l$s@chapter_id">&amp;videoId=c$d@chapter_id"/></$l><$l$s@video_id">&amp;videoId=v$d@video_id"/></$l></$o></$q></$r></$u></$u>$c$aURL"><a href="{@url}">$ktitle"/>$f</a>$c$aVIMEO"><$u$gvimeo"$j$e640px"><$u$j$h56.25%"><$r$i"$nno"$t//player.vimeo.com/video/{@id}"$j$b/></$u></$u>$c$aVINE"><$u$gvine"$j$e480px"><$u$j$h100%"><$r$i"$nno"$thttps://vine.co/v/{@id}/embed/simple?audio=1"$j$b/></$u></$u>$c$aYOUTUBE"><$u$gyoutube"$j$e640px"><$u$j$h56.25%"><$r$i"$nno"$j$b><$q$xsrc">//www.youtube.com/embed/$d@id"/><$w$s@list">?list=$d@list"/></$w><$w$s@t or@m"><$o><$l$s@list">&amp;</$l><$m>?</$m></$o>start=<$o><$l$s@t">$d@t"/></$l><$l$s@h">$d@h*3600+@m*60+@s"/></$l><$m>$d@m*60+@s"/></$m></$o></$w></$q></$r></$u></$u>$c$abr"><br/>$c$ae|i|s"/>$ahtml:abbr"><abbr>$ktitle"/>$f</abbr>$c$ahtml:$u"><$u>$kclass"/>$f</$u>$c$ahtml:img"><img>$kalt|@height|@src|@title|@width"/>$f</img>$c$ahtml:span"><span>$kclass"/>$f</span>$c$ahtml:td"><td>$kcolspan|@rowspan"/>$f</td>$c$ahtml:th"><th>$kcolspan|@rowspan|@scope"/>$f</th>$c</xsl:stylesheet>'.replace(/\$[a-x]/g,function(a){return{$a:'<xsl:template match="',
$b:'border:0;height:100%;left:0;position:absolute;width:100%"',$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:"display:inline-block;width:100%;max-width:",$f:"<xsl:apply-templates/>",$g:' data-s9e-mediaembed="',$h:"position:relative;padding-bottom:",$i:' allowfullscreen="',$j:' style="',$k:'<xsl:copy-of select="@',$l:"xsl:when",$m:"xsl:otherwise",$n:' scrolling="',$o:"xsl:choose",$p:'border:0;height:166px;max-width:900px;width:100%"',$q:"xsl:attribute",$r:"iframe",$s:' test="',$t:' src="',$u:"div",
$v:'soundcloud"',$w:"xsl:if",$x:' name="'}[a]});function ib(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function jb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function kb(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function lb(){return!0}
function mb(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function u(a,b){return b.test(a)?a:!1}
function Na(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function Pa(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=mb(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+mb(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function Oa(a,b){if(""!==b.scheme&&!a.P.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.R&&a.R.test(b.host)||a.V&&!a.V.test(b.host))return"URL host is not allowed"}}function nb(){}nb.prototype={n:function(){}};function ob(a,b,c,d){this.r=a;this.l=b;this.k=c;this.u=d;this.j={};this.G=[];isNaN(a+c+d)&&D(this)}ob.prototype.E=!1;ob.prototype.q=0;function pb(a,b){a.G.push(b);a.E&&D(b)}function D(a){a.E||(a.E=!0,a.G.forEach(function(a){D(a)}))}
function E(a,b){a.l===b.l&&(1===a.r&&2===b.r&&b.k>=a.k?(a.y=b,b.F=a,pb(a,b)):2===a.r&&1===b.r&&b.k<=a.k&&(a.F=b,b.y=a))}function qb(a){a.q=1E3}function Fa(a){var b={},c;for(c in a.j)b[c]=a.j[c];return b}function rb(a,b){return a.E||a.l!==b.l||1!==b.r||2!==a.r||a.k<b.k||a.F&&a.F!==b||b.y&&b.y!==a?!1:!0}ob.prototype.n=function(a,b){this.j[a]=b};function Ga(a,b){a.j={};for(var c in b)a.j[c]=b[c]}
var sb,tb,ub,F,vb,G,wb,Ea=new nb,xb,K,L,zb={Autoemail:{x:function(a,b){b.forEach(function(a){var b=N(1,"EMAIL",a[0][1],0);b.n("email",a[0][0]);a=N(2,"EMAIL",a[0][1]+a[0][0].length,0);E(b,a)})},z:"@",A:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,B:1E4},Autolink:{x:function(a,b){b.forEach(function(b){var d=b[0][1];if(!(0<d&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(d-1)))){for(b=b[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,
"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;if(/^www\.|^[^:]+:/i.test(b)){var e=N(2,"URL",d+b.length,0);"."===b.charAt(3)&&(b="http://"+b);d=N(1,"URL",d,0);d.n("url",b);d.q=1;E(d,e)}}})},z:"://",A:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,B:1E4},Escaper:{x:function(a,b){b.forEach(function(a){O("ESC",a[0][1],1,a[0][1]+a[0][0].length,0)})},z:"\\",A:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,B:1E4},FancyPants:{x:function(a){function b(a,b,c){a=N(3,h.K,a,b);a.n(h.Q,c);return a}
function c(){for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])}function d(c,d,e,f){for(var g;g=d.exec(a);){var h=b(+g.index+g[0].indexOf(c),1,e);g=b(+g.index+g[0].length-1,1,f);pb(h,g)}}function e(a){for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019").q=10}function g(a){for(var c,d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);)if("x"===d[0].charAt(d[0].length-1)&&b(+d.index+
d[0].length-1,1,"\u00d7"),c=d[0].charAt(1),"'"===c||'"'===c)c="'s"===d[0].substr(1,2)?"\u2019":"'"===c?"\u2032":"\u2033",b(+d.index+1,1,c)}function f(){for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var h={Q:"char",K:"FP"},k=0<=a.indexOf("'"),r=0<=a.indexOf('"');k&&e(a);(k||r||0<=a.indexOf("x"))&&g(a);k&&d("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");r&&d('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(0<=
a.indexOf("...")||0<=a.indexOf("--"))&&c();0<=a.indexOf("(")&&f()}},HTMLComments:{x:function(a,b){b.forEach(function(a){var b=ib(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");N(3,"HC",a[0][1],a[0][0].length).n("content",b)})},z:"\x3c!--",A:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,B:1E4},HTMLElements:{x:function(a,b){var c={a:{"":"URL",href:"url"},em:{"":"EM"},hr:{"":"HR"},s:{"":"S"},strong:{"":"STRONG"},sup:{"":"SUP"}};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+
1),g=b[0][1],f=b[0][0].length,h=b[2-e][0].toLowerCase(),k=c&&c[h]&&c[h][""]?c[h][""]:"html:"+h;if(e)N(2,k,g,f);else{e="/>"===b[0][0].substr(f-2)?O(k,g,f,g+f,0):N(1,k,g,f);b=b[3][0];for(var g=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,r;k=g.exec(b);)r=k[0].indexOf("="),0>r&&(r=k[0].length,k[0]+="="+k[0].toLowerCase()),f=k[0].substr(0,r).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),k=k[0].substr(1+r).replace(/^\s+/,"").replace("/s+$/",""),c&&c[h]&&c[h][f]&&(f=c[h][f]),/^["']/.test(k)&&
(k=k.substr(1,k.length-2)),e.n(f,ib(k))}})},z:"<",A:/<(?:\/((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))|((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,B:1E4},HTMLEntities:{x:function(a,b){b.forEach(function(a){var b=
a[0][0],e=ib(b);e!==b&&N(3,"HE",a[0][1],b.length).n("char",e)})},z:"&",A:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,B:1E4},Litedown:{x:function(a){function b(a,b){E(N(2,"LIST",b,0),a.S);E(N(2,"LI",b,0),a.I);a.O&&a.J.forEach(function(a){a.d&=-9})}function c(a){a=a.replace(/[\\\x1A]/g,"");n&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]}));return a}function d(a){return c(a.replace(/^\s*(.*?)\s*$/,
"$1").replace(/^(['"])(.*)\1$/,"$2"))}function e(a){return a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]})}function g(b,c){return/[ \t]*#*[ \t]*$/.exec(a.substr(b,c-b))[0].length}function f(){var b={};if(-1===a.indexOf("-")&&-1===a.indexOf("="))return b;for(var c,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;c=d.exec(a);){var e=
c[0];c=c.index;for(var f=c-1;0<f&&" "===a[f-1];)--f;b[c-1]={L:c+e.length-f,M:f,U:e.length-e.replace(/>/g,"").length,K:"="===e.charAt(0)?"H1":"H2"}}return b}function h(a){return 0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a)}function k(b){a=a.substr(0,b)+"\u0017"+a.substr(b+1)}function r(b,c){var d=a.indexOf(b);if(-1!==d){var e=[],f=[],g=g=a.indexOf("\u0017",d),k;for(c.lastIndex=d;k=c.exec(a);)d=k.index,k=k[0].length,d>g&&(f.push(e),e=[],g=a.indexOf("\u0017",d)),"_"===
a[d]&&1===k&&0<d&&h(a[d-1])&&h(a[d+k])||e.push([d,k]);f.push(e);f.forEach(v)}}function A(b,c){a=a.substr(0,b)+Array(1+c).join("\u001a")+a.substr(b+c)}function v(a){var b=0,c=-1,d=-1,e;a.forEach(function(a){var f=a[0];a=a[1];var g=Math.min(3,a),k=g&b&1,g=g&b&2,h=f,Fb=f;2<b&&c===d&&(k?c+=2:++d);k&&g&&(c<d?h+=2:++Fb);e=a;k&&(--b,--e,O("EM",c,1,h,1));g&&(b-=2,e-=2,O("STRONG",d,2,Fb,2));e=Math.min(3,e);e&1&&(c=f+a-e);e&2&&(d=f+a-e);b+=e})}var n,B,H,U,M;0>a.indexOf("\\")?n=!1:(n=!0,a=e(a));a+="\n\n\u0017";
(function(){for(var c,d=4,e,h=!0,r=[],n=0,v=!1,Gb=[],ua=0,ga=f(),Q=0,va,X,sa,R,Wa,Hb,C,x,wa,Ia,ha,S,ca,Ib=[],ta,Ja=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+.*|~~~+.*)?)?/gm;ta=Ja.exec(a);)Ib.push(ta),ta.index===Ja.lastIndex&&++Ja.lastIndex;Ib.forEach(function(f){var I=f.index,xa=f[0].length;R=0;X=!h;C=a.indexOf("\n",I);h=C===I+xa&&!f[3]&&!f[4]&&!f[5];xa||++Ja.lastIndex;va=h&&X;f[1]?(ha=f[1].length-
f[1].replace(/>/g,"").length,R=f[1].length):ha=0;if(ha<ua&&!X&&!h){v=!0;do E(N(2,"QUOTE",Q,0),Gb.pop());while(ha<--ua)}if(ha>ua&&!h){v=!0;do{var Y=N(1,"QUOTE",I,0);Y.q=ua;Gb.push(Y)}while(ha>++ua)}var J=0,Z=0;if(f[2]){Wa=f[2];Hb=Wa.length;wa=c?0:d;do" "===Wa.charAt(Z)?++J:J=J+4&-4;while(++Z<Hb&&J<wa)}e&&!c&&J<d&&!h&&(v=!0);v&&(v=!1,e&&(A(e.k,Q-e.k),sa=N(2,"CODE",Q,0),E(sa,e),sa.q=-1,c=e=null),r.forEach(function(a){b(a,Q)}),r=[],n=0,I&&k(I-1));if(J>=d){if(e||!X)R=(f[1]||"").length+Z,e||(e=N(1,"CODE",
I+R,0)),f={}}else{Y=!!f[4];if(J||X||Y||h)if(X&&!Y)x=n-1;else if(n)for(x=0;x<n&&J>r[x].N;)++x;else x=!Y||X&&"\u0017"!==a.charAt(I-1)?-1:0;else x=-1;for(;x<n-1;)b(r.pop(),Q),--n;x!==n||Y||--x;if(Y&&0<=x)if(va=!0,S=I+R+Z,ca=f[4].length,Z=N(1,"LI",S,ca),A(S,ca),x<n)E(N(2,"LI",Q,0),r[x].I),r[x].I=Z,r[x].J.push(Z);else{++n;x?(Ia=r[x-1].N+1,wa=Math.max(Ia,4*x)):(Ia=0,wa=J);J=N(1,"LIST",S,0);if(-1<f[4].indexOf(".")){J.n("type","decimal");var ta=+f[4];1!==ta&&J.n("start",ta)}r.push({S:J,I:Z,J:[Z],W:Ia,N:wa,
O:!0})}!n||X||h||(1<r[0].J.length||!Y)&&r.forEach(function(a){a.O=!1});d=4*(n+1)}if(f[5])if("#"===f[5].charAt(0))B=f[5].length,H=I+xa-B,M=g(I+xa,C),U=C-M,O("H"+/#{1,6}/.exec(f[5])[0].length,H,B,U,M),k(H),k(C),X&&(va=!0);else{if("`"===f[5].charAt(0)||"~"===f[5].charAt(0))S=I+R,ca=C-S,e&&f[5].charAt(0)===c?(sa=N(2,"CODE",S,ca),E(sa,e),sa.q=-1,yb(Q,S-Q),A(e.k,S+ca-e.k),c=e=null):e||(e=N(1,"CODE",S,ca),c=f[5].charAt(0),yb(S+ca,1),f=f[5].replace(/^[`~]*/,""),""!==f&&e.n("lang",f))}else f[3]&&!n?(N(3,"HR",
I+R,xa-R),va=!0,k(C)):!ga[C]||ga[C].U!==ha||h||n||e||(O(ga[C].K,I+R,0,ga[C].M,ga[C].L),A(C,1),k(ga[C].M+ga[C].L));va&&(N(3,"pb",Q,0),k(Q));h||(Q=C);R&&qb(yb(I,R))})})();(function(){if(-1!==a.indexOf("`"))for(var b,c=/(``?)[^\x17]*?[^`]\1(?!`)/g;b=c.exec(a);){var d=b.index,e=b[0].length;b=b[1].length;O("C",d,b,d+e-b,b);A(d,e)}})();(function(){if(-1!==a.indexOf("!["))for(var b,e=/!\[([^\x17\]]*)] ?\(([^\x17 ")]+)( *(?:"[^\x17"]*"|\'[^\x17\']*\'|[^\x17\)]*))?\)/g;b=e.exec(a);){var f=b.index,g=b[0].length,
h=b[1].length,k=f,h=O("IMG",k,2,k+2+h,g-2-h);h.n("alt",c(b[1]));h.n("src",c(b[2]));b[3]&&(b=d(b[3]),""<b&&h.n("title",b));A(f,g)}})();(function(){if(-1!==a.indexOf("["))for(var b,e=/\[([^\x17\]]+)] ?\(([^\x17 ()]+(?:\([^\x17 ()]+\)[^\x17 ()]*)*[^\x17 )]*)( *(?:"[^\x17"]*"|\'[^\x17\']*\'|[^\x17\)]*))?\)/g;b=e.exec(a);){var f=b[1].length,g=b.index,h=g+1+f,f=b[0].length-1-f,k=O("URL",g,1,h,f);k.n("url",c(b[2]));b[3]&&(b=d(b[3]),""<b&&k.n("title",b));k.q=-1;A(g,1);A(h,f)}})();(function(){if(-1!==a.indexOf("~~"))for(var b,
c=/~~[^\x17]+?~~/g;b=c.exec(a);){var d=b.index;O("DEL",d,2,d+b[0].length-2,2)}})();(function(){if(-1!==a.indexOf("^"))for(var b,c=/\^[^\x17\s]+/g;b=c.exec(a);){var d=b[0],e=b=b.index,f=b+d.length,d=d.split("^");d.shift();d.forEach(function(a){O("SUP",e,1,f,0);e+=1+a.length})}})();r("*",/\*+/g);r("_",/_+/g);(function(){for(var b=a.indexOf("  \n");-1!==b;)N(3,"br",b+2,0),b=a.indexOf("  \n",b+3)})()}},MediaEmbed:{x:function(a,b){b.forEach(function(a){var b=a[0][0];a=N(3,"MEDIA",a[0][1],b.length);a.n("url",
b);a.q=-10})},z:":",A:/\b(?:spotify:|https?:\/\/)[^["'\s]+/g,B:1E4}},P,Ma={mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","liveleak.com":"liveleak","open.spotify.com":"spotify","play.spotify.com":"spotify","soundcloud.com":"soundcloud","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{P:/^(?:ftp|https?)$/i}},Ab={c:ka,d:8},T={BANDCAMP:{c:l,j:{album_id:y,track_id:y,
track_num:y,url:z},f:13,b:[lb,Da,gb],g:10,e:Aa,i:1E3},C:Xa,CODE:{c:l,j:{lang:La},f:1,b:w,g:10,e:{d:4436,o:t},i:1E3},DAILYMOTION:{c:l,v:[["url",/dailymotion\.com\/(?:live\/|user\/[^#]+#video=|video\/)([A-Za-z0-9]+)/,m],["url",/^([A-Za-z0-9]+)$/,m]],j:{id:{b:[function(a){return u(a,/^[A-Za-z0-9]+$/)}],p:!0},url:z},f:13,b:bb,g:10,e:Aa,i:1E3},DEL:$a,EM:Ya,EMAIL:{c:fa,j:{email:{b:[function(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}],p:!0}},f:4,b:w,g:10,e:ba,i:1E3},ESC:{c:l,f:5,b:w,g:10,e:{d:1616},i:1E3},
FACEBOOK:{c:l,v:[["url",/\/(?!(?:apps|developers|graph)\.)[-\w.]*facebook\.com\/(?:[\/\w]+\/permalink|(?!pages\/|groups\/).*?)(?:\/|fbid=|\?v=)(\d+)(?=$|[\/?&#])/,m],ra],j:eb,f:4,b:bb,g:10,e:da,i:1E3},FP:ab,H1:cb,H2:cb,H3:cb,H4:cb,H5:cb,H6:cb,HC:{c:l,j:{content:oa},f:5,b:w,g:10,e:da,i:1E3},HE:ab,HR:{c:ja,f:1,b:w,g:10,e:{d:3333,o:t},i:1E3},IMG:{c:ja,j:{alt:p,src:Va,title:p},f:0,b:w,g:10,e:ea,i:1E3},LI:fb,LIST:{c:na,j:{start:{b:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],p:!1},type:La},f:1,
b:w,g:10,e:za,i:1E3},LIVELEAK:{c:l,v:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,m],["url",/^([a-f_0-9]+)$/,m]],j:{id:{b:[function(a){return u(a,/^[a-f_0-9]+$/)}],p:!0},url:z},f:13,b:bb,g:10,e:Aa,i:1E3},MEDIA:{c:l,f:5,b:[function(a){return function(a,c){function d(a,b){var c=a.y||a,d=a.k,c=N(3,b.toUpperCase(),d,c.k+c.u-d);Ga(c,Fa(a));c.q=a.q}return function(a,b){if("media"in a.j){var c=a.j.media.toLowerCase(),h;a:{for(h in b)if(b[h]===c){h=!0;break a}h=!1}h&&d(a,c)}else if("url"in a.j){h=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.j.url);
if(h[1]&&b[h[1]+":"])c=b[h[1]+":"];else if(h[2])a:{c=h[2];do{if(b[c]){c=b[c];break a}h=c.indexOf(".");if(0>h)break;c=c.substr(1+h)}while(""<c);c=!1}c&&d(a,c)}return!1}(a,c)}(a,Ma.mediasites)}],g:10,e:{d:577},i:1E3},QUOTE:{c:ka,f:1,b:w,g:10,e:ya,i:1E3},SOUNDCLOUD:{c:l,v:[["url",/(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)/,m],["url",/api.soundcloud.com\/playlists\/(\d+)/,["","playlist_id"]],["url",/api.soundcloud.com\/tracks\/(\d+)(?:\?secret_token=([-\w]+))?/,
["","track_id","secret_token"]],["url",/soundcloud\.com\/(?!playlists|tracks)[-\w]+\/[-\w]+\/(?=s-)([-\w]+)/,["","secret_token"]],["url",/^((?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$))$/,m]],j:{id:{b:[function(a){return u(a,/^(?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\/\w]+\/[-\/\w]+|^[^\/]+\/[^\/]+$)$/)}],p:!0},playlist_id:y,secret_token:Ta,track_id:y,url:z},f:4,b:[Ba,lb,Da],g:10,e:da,i:1E3},SPOTIFY:{c:l,v:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,
["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],j:{path:{b:[function(a){return u(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}],p:!1},uri:{b:[function(a){return u(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}],p:!1},url:z},f:13,b:[Ba,Da,gb],g:10,e:Aa,i:1E3},STRONG:Ya,SUP:Za,TWITCH:{c:l,v:[["url",/twitch\.tv\/((?!m\/)\w+)(?:\/b\/(\d+)|\/c\/(\d+)|\/v\/(\d+))?/,["","channel","archive_id","chapter_id","video_id"]]],j:{archive_id:y,
channel:{b:[function(a){return u(a,/^(?!m\/)\w+$/)}],p:!1},chapter_id:y,url:z,video_id:y},f:13,b:[Ba,lb,Da,gb],g:10,e:Aa,i:1E3},URL:{c:fa,j:{title:p,url:Va},f:4,b:w,g:10,e:ba,i:1E3},VIMEO:{c:l,v:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/|video\/)?(\d+)/,m],ra],j:eb,f:13,b:bb,g:10,e:Aa,i:1E3},VINE:{c:l,v:[["url",/vine\.co\/v\/([^\/]+)/,m],["url",/^([^\/]+)$/,m]],j:{id:{b:[function(a){return u(a,/^[^\/]+$/)}],p:!0},url:z},f:13,b:bb,g:10,e:Aa,i:1E3},YOUTUBE:{c:l,v:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,
m],["url",/youtu\.be\/([-\w]+)/,m],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,m]],j:{h:y,id:{b:Ka,p:!0},list:Ta,m:y,s:y,t:y,url:z},f:13,b:bb,g:10,e:Aa,i:1E3},"html:abbr":{c:q,j:{title:p},f:0,b:w,g:10,e:aa,i:1E3},"html:b":Ya,"html:br":{c:pa,f:0,b:w,g:10,e:ia,i:1E3},"html:code":Xa,"html:dd":{c:ka,f:7,b:w,g:10,e:Sa,i:1E3},"html:del":$a,"html:div":{c:ka,j:qa,f:1,b:w,g:10,e:ya,i:1E3},"html:dl":{c:[65440,16128],f:1,b:w,
g:10,e:za,i:1E3},"html:dt":{c:ma,f:7,b:w,g:10,e:Sa,i:1E3},"html:i":Ya,"html:img":{c:pa,j:{alt:p,height:p,src:z,title:p,width:p},f:0,b:w,g:10,e:ia,i:1E3},"html:ins":$a,"html:li":fb,"html:ol":db,"html:pre":{c:q,f:1,b:w,g:10,e:{d:276,o:t},i:1E3},"html:rb":{c:q,f:8,b:w,g:10,e:Ua,i:1E3},"html:rp":{c:q,f:8,b:w,g:10,e:{w:{"html:rb":1,"html:rp":1,"html:rtc":1},d:256,o:t},i:1E3},"html:rt":{c:q,f:9,b:w,g:10,e:{w:{"html:rb":1,"html:rp":1,"html:rt":1},d:256,o:t},i:1E3},"html:rtc":{c:[65393,16130],f:8,b:w,g:10,
e:Ua,i:1E3},"html:ruby":{c:[65393,16131],f:0,b:w,g:10,e:aa,i:1E3},"html:span":{c:q,j:qa,f:0,b:w,g:10,e:aa,i:1E3},"html:strong":Ya,"html:sub":Za,"html:sup":Za,"html:table":{c:[65312,16148],f:1,b:w,g:10,e:za,i:1E3},"html:tbody":{c:la,f:10,b:w,g:10,e:{w:{"html:tbody":1,"html:tfoot":1,"html:thead":1},d:3456,o:t},i:1E3},"html:td":{c:ka,j:{colspan:p,rowspan:p},f:11,b:w,g:10,e:Ra,i:1E3},"html:tfoot":{c:la,f:10,b:w,g:10,e:{w:{"html:tbody":1,"html:thead":1},d:3456,o:t},i:1E3},"html:th":{c:ma,j:{colspan:p,
rowspan:p,scope:p},f:11,b:w,g:10,e:Ra,i:1E3},"html:thead":{c:la,f:10,b:w,g:10,e:{d:3456,o:t},i:1E3},"html:tr":{c:[65312,16136],f:12,b:w,g:10,e:{w:{"html:tr":1},d:3456,o:t},i:1E3},"html:u":Ya,"html:ul":db},V,Bb,W,Cb,Db=0,Eb;
function Jb(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");tb={};ub={};sb=[];vb=0;G=null;wb=!1;xb={};K=[];L="";P=0;V=[];Bb=!0;W=a;Cb=W.length;Eb=0;F=Ab;F.D=!1;++Db;a=Db;for(var b in zb)if(!zb[b].H)a:{var c=b,d=zb[c];if(!(d.z&&0>W.indexOf(d.z))){var e=[];if(d.A){e=d.A;d=d.B;e.lastIndex=0;for(var g=[],f=0,h=void 0;++f<=d&&(h=e.exec(W));){for(var k=+h.index,r=[[h[0],k]],A=0;++A<h.length;){var v=h[A];void 0===v?r.push(["",-1]):(r.push([v,W.indexOf(v,k)]),k+=v.length)}g.push(r)}e=
g;if(!e.length)break a}(0,zb[c].x)(W,e)}}Kb();Lb();Mb(Cb,0,!0);do b=L,L=L.replace(/<([^ />]+)><\/\1>/g,"");while(L!==b);L=L.replace(/<\/i><i>/g,"",L);L=L.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nb);c=wb?"r":"t";b="<"+c;for(var n in xb)b+=" xmlns:"+n+'="urn:s9e:TextFormatter:'+n+'"';L=b+">"+L+"</"+c+">";if(Db!==a)throw"The parser has been reset during execution";return L}function Lb(){sb.forEach(function(a){a.G=[];delete a.y;delete a.F});sb=[]}
function Ca(a,b){b.v&&b.v.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.j){var e=Ob(a.j[d],e,b),g;for(g in e)g!==d&&g in a.j||a.n(g,e[g])}});return!0}function Ob(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Nb(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Pb(a){wb=!0;var b=a.l,c=a.k,d=a.u,e=a.d,g=0,f=0;e&256&&(g=1,f=a.r&2?2:1);var h=!1;a.r&1?e&4&&(h=!0):h=!0;Mb(c,g,h);g=d?kb(W.substr(c,d)):"";if(a.r&1){e&4||Qb(c);e=b.indexOf(":");0<e&&(xb[b.substr(0,e)]=0);L+="<"+b;var k=Fa(a),e=[],r;for(r in k)e.push(r);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){L+=" "+a+'="'+jb(k[a].toString())+'"'});L=3===a.r?d?L+(">"+g+"</"+b+">"):L+"/>":d?L+("><s>"+g+"</s>"):L+">"}else d&&(L+="<e>"+g+"</e>"),L+="</"+b+">";for(Eb=P=c+d;f&&Eb<Cb&&"\n"===
W.charAt(Eb);)--f,++Eb}
function Mb(a,b,c){c&&(F.d&8?b=-1:c=!1);P>=a&&c&&Rb();if(Eb>P){var d=Math.min(a,Eb);L+=W.substr(P,d-P);P=d;P>=a&&c&&Rb()}if(F.d&128)d=a-P,b=W.substr(P,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),L+=b,P=a,c&&Rb();else{for(var e=a,d=0;b&&--e>=P;){var g=W.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;if(F.d&8)for(F.D||(Sb(a),a>P&&Qb(a)),b=W.indexOf("\n\n",P);-1<b&&b<a;)Mb(b,0,!0),Qb(a),b=W.indexOf("\n\n",P);a>P&&(b=kb(W.substr(P,a-P)),L+=b);c&&Rb();d&&(L+=W.substr(a,d));P=a+d}}
function Tb(a){var b=a.k;a=a.u;var c=W.substr(b,a);Mb(b,0,!1);L+="<i>"+kb(c)+"</i>";wb=!0;P=b+a}function Qb(a){!F.D&&F.d&8&&(Sb(a),P<Cb&&(L+="<p>",F.D=!0))}function Rb(){F.D&&(L+="</p>",F.D=!1)}function Sb(a){for(;P<a&&-1<" \n\t".indexOf(W.charAt(P));)L+=W.charAt(P),++P}function Ub(a,b){var c=a.l;a.d&256&&(b=Vb(b));E(N(2,c,b,0),a)}function Vb(a){for(;a>P&&-1<" \n\t".indexOf(W.charAt(a-1));)--a;return a}
function Kb(){if(V.length){for(var a in T)tb[a]=0,ub[a]=0;do{for(;V.length;)Bb||(V.sort(Wb),Bb=!0),G=V.pop(),F.d&64&&!(rb(G,K[K.length-1])||-1<"br i pb v".indexOf(G.l))||Xb();K.forEach(function(a){Ub(a,Cb)})}while(V.length)}}
function Xb(){if(!G.E){var a=G.k,b=G.u;if(P>a){var c;if((c=G.F)&&0<=K.indexOf(c))E(N(2,c.l,P,Math.max(0,a+b-P)),c);else{if("i"===G.l&&(a=a+b-P,0<a)){yb(P,a);return}D(G)}}else if("i"===G.l)Tb(G);else if("br"===G.l)F.d&1024||(Mb(G.k,0,!1),L+="<br/>");else if("pb"===G.l)Mb(G.k,0,!0);else if("v"===G.l)a=F.d,F.d=G.d,Mb(G.k+G.u,0,!1),F.d=a;else if(G.r&1)if(a=G,b=a.l,c=T[b],ub[b]>=c.i)D(a);else{var d=a,e=T[d.l],g=!0;if(e.b)for(var f=0;f<e.b.length;++f)if(!e.b[f](d,e)){g=!1;break}if(g){a:{d=a;if(K.length&&
(g=d.l,f=T[g],f.e.o)){var e=K[K.length-1],h=e.l;if(f.e.o[h]){h!==g&&1E3>vb&&(g=Yb(e,d.k+d.u),pb(d,g));++vb;V.push(d);Ub(e,d.k);d=!0;break a}}d=!1}if(!d)a:{d=a;if(K.length&&(e=T[d.l],e.e.w&&(g=K[K.length-1],e.e.w[g.l]))){V.push(d);Ub(g,d.k);d=!0;break a}d=!1}d||(tb[b]>=c.g?D(a):(c=T[b].f,F.c[c>>3]&1<<(c&7)?(!(a.d&1)||a.y||V.length&&rb(V[V.length-1],a)||(b=new ob(3,b,a.k,a.u),Ga(b,Fa(a)),b.d=a.d,a=b),a.d&4096&&!a.y&&"\n"===W.charAt(a.k+a.u)&&yb(a.k+a.u,1),Pb(a),Zb(a)):D(a)))}else D(a)}else $b()}}
function $b(){var a=G;if(tb[a.l]){for(var b=[],c=K.length;0<=--c;){var d=K[c];if(rb(a,d))break;b.push(d);++vb}if(!(0>c)){var e=1E3>vb,g=[];b.forEach(function(b){var c=b.l;e&&(b.d&2?g.push(b):e=!1);var d=a.k;b.d&256&&(d=Vb(d));c=new ob(2,c,d,0);c.d=b.d;Pb(c);ac()});Pb(a);ac();if(b.length&&1E3>vb){d=P;for(c=V.length;0<=--c&&1E3>++vb;){var f=V[c];if(f.k>d||f.r&1)break;for(var h=b.length;0<=--h&&1E3>++vb;)if(rb(f,b[h])){b.splice(h,1);g[h]&&g.splice(h,1);d=Math.max(d,f.k+f.u);break}}d>P&&Tb(new ob(3,"i",
P,d-P))}g.forEach(function(a){var b=Yb(a,P);(a=a.y)&&E(b,a)})}}}function ac(){var a=K.pop();--tb[a.l];F=F.T}function Zb(a){var b=a.l,c=a.d,d=T[b];++ub[b];if(3!==a.r){var e=[];c&512?F.c.forEach(function(a,b){e.push(d.c[b]&a)}):F.c.forEach(function(a,b){e.push(d.c[b]&(a&65280|a>>8))});c|=F.d&32;c&16&&(c&=-33);++tb[b];K.push(a);F={c:e,d:c,T:F}}}function yb(a,b){return N(3,"i",a,Math.min(b,Cb-a))}function Yb(a,b){var c=N(a.r,a.l,b,0);Ga(c,Fa(a));c.q=a.q;return c}
function N(a,b,c,d){a=new ob(a,b,c,d);sb.push(a);T[b]&&(a.d=T[b].e.d);T[b]||-1<"br i pb v".indexOf(a.l)?T[b]&&T[b].H?D(a):0>d||0>c||c+d>Cb?D(a):(Bb&&V.length&&a.k>=V[V.length-1].k&&(Bb=!1),V.push(a)):D(a);return a}function O(a,b,c,d,e){b=N(1,a,b,c);E(b,N(2,a,d,e));return b}function Wb(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.q!==b.q)return b.q-a.q;c=a.u;d=b.u;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.r]-c[a.r])}var bc="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function cc(a,b){if(bc){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function dc(a,b){if(bc){var c=b.createElement("div"),d=b.createDocumentFragment();ec.input=cc(a,"MSXML2.DOMDocument.6.0");ec.transform();for(c.innerHTML=ec.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(ec.transformToFragment(cc(a),b),!0)}var ec,fc=cc(hb,"MSXML2.FreeThreadedDOMDocument.6.0");
if(bc){var gc=new ActiveXObject("MSXML2.XSLTemplate.6.0");gc.stylesheet=fc;ec=gc.createProcessor()}else ec=new XSLTProcessor,ec.importStylesheet(fc);
window.s9e={TextFormatter:{disablePlugin:function(a){zb[a]&&(zb[a].H=!0)},enablePlugin:function(a){zb[a]&&(zb[a].H=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,g=b.childNodes,A=c.length,v=g.length,n,B,H=0,U=0;H<A&&H<v;){n=c[H];B=g[H];if(!d(n,B))break;++H}for(var M=Math.min(A-H,v-H);U<M;){n=c[A-(U+1)];B=g[v-(U+1)];if(!d(n,B))break;++U}n=e.createDocumentFragment();for(M=H;M<v-U;)B=g[M].cloneNode(!0),n.appendChild(B),++M;for(M=A-U;--M>=H;)a.removeChild(c[M]);U?a.insertBefore(n,a.childNodes[H]):
a.appendChild(n)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,g=e.length,v=d.length;0<=--v;){var n=d[v],B=n.namespaceURI,n=n.name;b.hasAttributeNS(B,n)||a.removeAttributeNS(B,n)}for(v=g;0<=--v;)d=e[v],B=d.namespaceURI,n=d.name,d=d.value,d!==a.getAttributeNS(B,n)&&a.setAttributeNS(B,n,d);c(a,
b);return!0}var e=b.ownerDocument,g=dc(Jb(a),e);c(b,g)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.3.2/punycode.min.js"></script>
</body>
</html>