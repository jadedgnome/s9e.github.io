<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments
 - **HTMLElements** --- several HTML elements are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:<br/>
   http://youtu.be/QH2-TGUlwu4

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 32.0 KB (11.2 KB compressed)

***

[![Build Status](https://travis-ci.org/s9e/TextFormatter.png?branch=master)](https://travis-ci.org/s9e/TextFormatter)
[![Coverage Status](https://coveralls.io/repos/s9e/TextFormatter/badge.png)](https://coveralls.io/r/s9e/TextFormatter)
[![Scrutinizer Quality Score](https://scrutinizer-ci.com/g/s9e/TextFormatter/badges/quality-score.png?s=3942dab3c410fb9ce02001e7446d1083fa91172c)](https://scrutinizer-ci.com/g/s9e/TextFormatter/)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">function aa(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function m(a,b){return b.test(a)?a:!1}
function ba(a){var b=ca.urlConfig,d=p;a=a.replace(/^\s+/,"").replace(/\s+$/,"");var c=!1,e=!0;"//"===a.substr(0,2)&&(b.Q?(a=b.Q+":"+a,c=!0):b.X||(a="http:"+a,c=!0,e=!1));a=a.replace(/["'()<>[\]\x00-\x20\x7F]+/g,escape).replace(/[^\u0020-\u007E]+/g,encodeURIComponent);var g=/^([a-z\d]+):\/\/(?:[^/]*@)?([^/]+)(?:\/.*)?$/i.exec(a);if(!g)return!1;if(e&&!b.P.test(g[1]))return d&&r(d,"err","URL scheme is not allowed",{attrValue:a,scheme:g[1]}),!1;e=g[2].replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,
"");if(b.R&&b.R.test(e)||b.Y&&!b.Y.test(e))return d&&r(d,"err","URL host is not allowed",{attrValue:a,host:g[2]}),!1;b=a.indexOf(":");return a=c?a.substr(b+1):a.substr(0,b).toLowerCase()+a.substr(b)}function s(){}s.prototype.H={};s.prototype.L=[];function r(a,b,d,c){c=c||{};"attrName"in c||!a.E||(c.attrName=a.E);"tag"in c||!a.G||(c.tag=a.G);a.H[b]&&a.H[b].forEach(function(a){a(d,c)});a.L.push([b,d,c])}s.prototype.get=function(){return this.L};s.prototype.on=function(a,b){this.H[a].push(b)};
s.prototype.l=function(a){this.E=a};function da(a){r(p,"debug","Skipping end tag with no start tag",a)}function x(a,b,d,c){this.o=a;this.m=b;this.n=d;this.v=c;this.k={};this.M=[];isNaN(a+d+c)&&A(this)}x.prototype.D=!1;x.prototype.p=0;function A(a){a.D||(a.D=!0,a.M.forEach(function(a){A(a)}))}function B(a,b){a.m===b.m&&(1===a.o&&2===b.o&&b.n>=a.n?(a.A=b,b.F=a):2===a.o&&1===b.o&&b.n<=a.n&&(a.F=b,b.A=a))}function fa(a){a.p=1E3}function D(a){var b={},d;for(d in a.k)b[d]=a.k[d];return b}
function ga(a,b){return a.D||a.m!==b.m||1!==b.o||2!==a.o||a.n<b.n||a.F&&a.F!==b||b.A&&b.A!==a?!1:!0}function ka(a){return"br"===a.m||"i"===a.m||"pb"===a.m}x.prototype.l=function(a,b){this.k[a]=b};function la(a,b){a.k={};for(var d in b)a.k[d]=b[d]}
var p=new s,ca={urlConfig:{P:/^(?:ftp|https?)$/i,X:0},mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","grooveshark.com":"grooveshark","liveleak.com":"liveleak","soundcloud.com":"soundcloud","open.spotify.com":"spotify","play.spotify.com":"spotify","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","youtube.com":"youtube","youtu.be":"youtube"}},J={C:{b:[E],g:10,f:{c:18},h:1E3,i:0,d:[0],e:[0]},CODE:{k:{lang:{b:[ma],j:0}},b:[E],
g:10,f:{c:916},h:1E3,i:1,d:[0],e:[0]},DEL:{b:[E],g:10,f:{c:64},h:1E3,i:0,d:[119],e:[1023]},EM:{b:[E],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[1023]},H1:{b:[E],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[1023]},H2:{b:[E],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[1023]},H3:{b:[E],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[1023]},H4:{b:[E],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[1023]},H5:{b:[E],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[1023]},H6:{b:[E],g:10,f:{c:516},h:1E3,i:2,d:[113],e:[1023]},HR:{b:[E],g:10,f:{c:645},h:1E3,i:1,d:[96],
e:[1023]},IMG:{k:{alt:{j:0},src:{b:[F],j:1},title:{j:0}},b:[E],g:10,f:{c:129},h:1E3,i:0,d:[96],e:[1023]},LI:{b:[E],g:10,f:{y:{LI:1},c:520},h:1E3,i:3,d:[119],e:[1023]},LIST:{k:{type:{b:[ma],j:0}},b:[E],g:10,f:{c:676},h:1E3,i:1,d:[72],e:[1023]},QUOTE:{b:[E],g:10,f:{c:524},h:1E3,i:1,d:[119],e:[1023]},STRONG:{b:[E],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[1023]},SUP:{b:[E],g:10,f:{c:0},h:1E3,i:0,d:[113],e:[1023]},URL:{k:{title:{j:0},url:{b:[F],j:1}},b:[E],g:10,f:{c:66},h:1E3,i:4,d:[103],e:[1007]},EMAIL:{k:{email:{b:[na],
j:1}},b:[E],g:10,f:{c:66},h:1E3,i:4,d:[103],e:[1007]},ESC:{b:[E],g:10,f:{c:145},h:1E3,i:5,d:[0],e:[0]},FP:{k:{"char":{j:1}},b:[E],g:10,f:{c:129},h:1E3,i:5,d:[96],e:[1023]},HC:{k:{content:{j:1}},b:[E],g:10,f:{c:401},h:1E3,i:6,d:[0],e:[0]},HE:{k:{"char":{j:1}},b:[E],g:10,f:{c:129},h:1E3,i:5,d:[96],e:[1023]},"html:abbr":{k:{title:{j:0}},b:[E],g:10,f:{c:0},h:1E3,i:0,d:[113],e:[1023]},"html:b":{b:[E],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[1023]},"html:br":{b:[E],g:10,f:{c:161},h:1E3,i:0,d:[64],e:[1023]},"html:code":{b:[E],
g:10,f:{c:18},h:1E3,i:0,d:[0],e:[0]},"html:del":{b:[E],g:10,f:{c:64},h:1E3,i:0,d:[119],e:[1023]},"html:i":{b:[E],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[1023]},"html:strong":{b:[E],g:10,f:{c:2},h:1E3,i:0,d:[113],e:[1023]},"html:sub":{b:[E],g:10,f:{c:0},h:1E3,i:0,d:[113],e:[1023]},"html:sup":{b:[E],g:10,f:{c:0},h:1E3,i:0,d:[113],e:[1023]},"html:table":{b:[E],g:10,f:{c:676},h:1E3,i:1,d:[704],e:[1023]},"html:tbody":{b:[E],g:10,f:{y:{"html:tbody":1,"html:tfoot":1,"html:thead":1},c:672},h:1E3,i:7,d:[576],e:[1023]},
"html:td":{k:{colspan:{j:0},rowspan:{j:0}},b:[E],g:10,f:{y:{"html:td":1,"html:th":1},c:520},h:1E3,i:8,d:[119],e:[1023]},"html:tfoot":{b:[E],g:10,f:{y:{"html:tbody":1,"html:thead":1},c:672},h:1E3,i:7,d:[576],e:[1023]},"html:th":{k:{colspan:{j:0},rowspan:{j:0},scope:{j:0}},b:[E],g:10,f:{y:{"html:td":1,"html:th":1},c:520},h:1E3,i:8,d:[115],e:[1019]},"html:thead":{b:[E],g:10,f:{c:672},h:1E3,i:7,d:[576],e:[1023]},"html:tr":{b:[E],g:10,f:{y:{"html:tr":1},c:672},h:1E3,i:9,d:[320],e:[1023]},"html:u":{b:[E],
g:10,f:{c:2},h:1E3,i:0,d:[113],e:[1023]},MEDIA:{b:[oa],g:10,f:{c:81},h:1E3,i:6,d:[0],e:[0]},BANDCAMP:{k:{url:{b:[F],j:0},album_id:{b:[G],j:0},track_num:{b:[G],j:0},track_id:{b:[G],j:0}},b:[pa,E,qa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},DAILYMOTION:{k:{url:{b:[F],j:0},id:{b:[ra],j:1}},q:[["url",/dailymotion\.com\/(?:video\/|user\/[^#]+#video=)([A-Za-z0-9]+)/,["","id"]],["url",/^([A-Za-z0-9]+)$/,["","id"]]],b:[H,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},FACEBOOK:{k:{url:{b:[F],j:0},id:{b:[I],j:1}},q:[["url",
/facebook\.com\/(?:photo|video\/video)\.php\?v=([0-9]+)/,["","id"]],["url",/^([0-9]+)$/,["","id"]]],b:[H,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},GROOVESHARK:{k:{url:{b:[F],j:0},songid:{b:[I],j:0},playlistid:{b:[I],j:0}},q:[["url",/grooveshark\.com(?:\/#!?)?\/playlist\/[^\/]+\/([0-9]+)/,["","playlistid"]]],b:[H,sa,E,qa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},LIVELEAK:{k:{url:{b:[F],j:0},id:{b:[ta],j:1}},q:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,["","id"]],["url",/^([a-f_0-9]+)$/,["","id"]]],
b:[H,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},SOUNDCLOUD:{k:{url:{b:[F],j:0},playlist_id:{b:[G],j:0},track_id:{b:[G],j:0},id:{b:[ua],j:1},secret_token:{b:[va],j:0}},q:[["url",/(https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)/,["","id","secret_token"]],["url",/^(https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)$/,
["","id","secret_token"]]],b:[H,wa,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},SPOTIFY:{k:{url:{b:[F],j:0},uri:{b:[xa],j:0},path:{b:[za],j:0}},q:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],b:[H,E,qa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},TWITCH:{k:{url:{b:[F],j:0},channel:{b:[Aa],j:0},archive_id:{b:[I],j:0},chapter_id:{b:[I],j:0}},q:[["url",/twitch\.tv\/((?!m\/)\w+)(?:\/b\/([0-9]+)|\/c\/([0-9]+))?/,
["","channel","archive_id","chapter_id"]]],b:[H,Ba,E,qa],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},VIMEO:{k:{url:{b:[F],j:0},id:{b:[I],j:1}},q:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/)?([0-9]+)/,["","id"]],["url",/^([0-9]+)$/,["","id"]]],b:[H,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},VINE:{k:{url:{b:[F],j:0},id:{b:[Ca],j:1}},q:[["url",/vine\.co\/v\/([^\/]+)/,["","id"]],["url",/^([^\/]+)$/,["","id"]]],b:[H,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]},YOUTUBE:{k:{url:{b:[F],j:0},id:{b:[va],j:1},t:{b:[G],j:0},
list:{b:[va],j:0}},q:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,["","id"]],["url",/youtu\.be\/([-\w]+)/,["","id"]],["url",/[#&?]t=(\d+)/,["","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,["","id"]]],b:[H,E],g:10,f:{c:145},h:1E3,i:4,d:[0],e:[0]}},K,Da,Fa=0;
function Ga(a){a=a.replace(/\r\n?/g,"\n",a);a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"",a);var b=p;b.L=[];delete b.E;delete b.G;Ha=0;Ia=!1;Ja={};N="";K=a;Da=K.length;O=[];Ka=!0;T=0;++Fa;a=Fa;for(var d in La)if(b=La[d],!(b.I||b.w&&0>K.indexOf(b.w))){var c=[];if(b.x){var c=b.x,e=[],g=void 0;for(c.lastIndex=0;g=c.exec(K);){for(var h=+g.index,f=[[g[0],h]],q=0;++q<g.length;){var k=g[q];void 0===k?f.push(["",-1]):(f.push([k,K.indexOf(k,h)]),h+=k.length)}e.push(f)}c=e;e=c.length;if(!e)continue;e>b.u&&
(c=c.slice(0,b.u),e={pluginName:d,limit:b.u},"warn"===b.z&&r(p,"warn","Regexp limit exceeded. Only the allowed number of matches will be processed",e))}b.r(K,c)}Ma();if(Fa!==a)throw"The parser has been reset during execution";return N}function Na(a,b){b.q&&b.q.forEach(function(b){var c=b[0],e=b[1];b=b[2];if(c in a.k){var g;(g=e.exec(a.k[c]))&&b.forEach(function(b,d){if(""!==b&&"string"===typeof g[d]){var e=g[d];b!==c&&b in a.k||a.l(b,e)}})}});return!0}var Ia,Ja,N,T;
function Oa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function Pa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function Qa(){var a;Ra(Da,0,!0);do a=N,N=N.replace(/<((?:\w+:)?\w+)[^>]*><\/\1>/g,"");while(N!==a);N=N.replace(/<\/i><i>/g,"",N);var b=Ia?"r":"t";a="<"+b;for(var d in Ja)a+=" xmlns:"+d+'="urn:s9e:TextFormatter:'+d+'"';N=a+">"+N+"</"+b+">"}
function Sa(a){Ia=!0;var b=a.m,d=a.n,c=a.v,e=a.c,g=0,h=0;e&512&&(g=a.o&1?2:1,h=a.o&2?2:1);var f=!1;a.o&1?e&4&&(f=!0):f=!0;Ra(d,g,f);g=c?Pa(K.substr(d,c)):"";if(a.o&1){e&4||Ta(d);e=b.indexOf(":");0<e&&(Ja[b.substr(0,e)]=0);N+="<"+b;var q=D(a),e=[],k;for(k in q)e.push([k]);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){N+=" "+a+'="'+Oa(q[a].toString())+'"'});N=3===a.o?c?N+(">"+g+"</"+b+">"):N+"/>":c?N+("><s>"+g+"</s>"):N+">"}else c&&(N+="<e>"+g+"</e>"),N+="</"+b+">";for(T=V=d+c;h&&T<Da&&
"\n"===K.charAt(T);)--h,++T}
function Ra(a,b,d){d&&(W.c&8?b=-1:d=!1);V>=a&&d&&Ua();if(T>V){var c=Math.min(a,T);N+=K.substr(V,c-V);V=c;V>=a&&d&&Ua()}if(W.c&32)c=a-V,b=K.substr(V,c),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),N+=b,V=a,d&&Ua();else{for(var e=a,c=0;b&&--e>=V;){var g=K.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++c}a-=c;if(W.c&8)for(W.B||(Va(a),a>V&&Ta(a)),b=K.indexOf("\n\n",V);-1<b&&b<a;)Ra(b,0,!0),Ta(a),b=K.indexOf("\n\n",V);a>V&&(b=Pa(K.substr(V,a-V)),W.c&128||(b=b.replace(/\n/g,"<br/>\n")),N+=b);
d&&Ua();c&&(N+=K.substr(a,c));V=a+c}}function Wa(a){var b=a.n;a=a.v;var d=K.substr(b,a);Ra(b,0,!1);N+="<i>"+Pa(d)+"</i>";Ia=!0;V=b+a}function Ta(a){!W.B&&W.c&8&&(Va(a),V<Da&&(N+="<p>",W.B=!0))}function Ua(){W.B&&(N+="</p>",W.B=!1)}function Va(a){for(;V<a&&-1<" \n\t".indexOf(K.charAt(V));)N+=K.charAt(V),++V}
var La={Litedown:{r:function(a){function b(a,b){B(X(2,"LIST",b,0),a.U);B(X(2,"LI",b,0),a.J);a.O&&a.K.forEach(function(a){a.c&=-9})}function d(a){return a.replace(/[\\\x1A]/g,"").replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]})}function c(b,d){a=a.substr(0,b)+Array(1+d).join("\u001a")+a.substr(b+d)}var e,g,h,f,q,k,l,v,n,t,u,y,z;0>a.indexOf("\\")||(a=a.replace(/\\[!")*[\\\]^_`~]/g,
function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]}));a+="\n\n\u0017";e=[];var L=4,P=!0,M=[],C=0,ha=!1,Ea=[],ia=0,ea={},U=0,ja,R,Q,S,w;if(a.indexOf("-\n")||a.indexOf("=\n"))for(v=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+)$/gm;f=v.exec(a);){q=f[0];l=f.index;for(h=l-1;0<h&&" "===a[h-1];)--h;ea[l-1]={S:l+q.length-h,T:h,W:q.length-q.replace(/>/g,"").length,Z:"="===
q.charAt(0)?"H1":"H2"}}for(v=/^(?:(?=[-*+\d \t>`#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=.))?[ \t]*(#+[ \t]*(?=.)|```+)?)?/gm;f=v.exec(a);){l=f.index;k=f[0].length;Q=0;R=!P;S=a.indexOf("\n",l);P=S===l+k&&!f[3]&&!f[4]&&!f[5];k||++v.lastIndex;ja=P&&R;f[1]?(n=f[1].length-f[1].replace(/>/g,"").length,Q=f[1].length):n=0;if(n<ia&&!R&&!P){ha=!0;do B(X(2,"QUOTE",U,0),Ea.pop());while(n<--ia)}if(n>ia&&!P){ha=!0;do u=X(1,"QUOTE",l,0),u.p=ia,Ea.push(u);
while(n>++ia)}g=u=0;if(f[2]){w=f[2];y=w.length;do" "===w.charAt(g)?++u:u=u+4&-4;while(++g<y&&u<L)}u<L&&z&&!P&&(ha=!0);ha&&(ha=!1,z&&(C=X(2,"CODE",U,0),B(C,z),C.p=-1,z=null),M.forEach(function(a){b(a,U)}),M=[],C=0,l&&e.push(l-1));if(u>=L){if(z||!R)Q=(f[1]||"").length+g,z||(z=X(1,"CODE",l+Q,0)),f={}}else{L=!!f[4];if(u||R||L||P)if(R&&!L)w=C-1;else if(C)for(w=0;w<C&&u>M[w].N;)++w;else w=!R&&L?0:-1;else w=-1;for(;w<C-1;)b(M.pop(),U),--C;w!==C||L||--w;if(L&&0<=w){ja=!0;var ya=l+Q+g;y=f[4].length;g=X(1,
"LI",ya,y);c(ya,y);w<C?(B(X(2,"LI",U,0),M[w].J),M[w].J=g,M[w].K.push(g)):(++C,w?(y=M[w-1].N+1,u=Math.max(y,4*w)):y=0,w=X(1,"LIST",ya,0),-1<f[4].indexOf(".")&&w.l("type","decimal"),M.push({U:w,J:g,K:[g],$:y,N:u,O:!0}))}!C||R||P||(1<M[0].K.length||!L)&&M.forEach(function(a){a.O=!1});L=4*(C+1)}if(f[5]){if("#"===f[5].charAt(0)){n=f[5].length;t=l+k-n;h=S;for(g=0;-1<" #\t".indexOf(a.charAt(h-1));)--h,++g;Y("H"+/#{1,6}/.exec(f[5])[0].length,t,n,h,g);e.push(t);e.push(h);R&&(ja=!0)}}else f[3]&&!C?(X(3,"HR",
l+Q,k-Q),ja=!0):!ea[S]||ea[S].W!==n||P||C||z||Y(ea[S].Z,l+Q,0,ea[S].T,ea[S].S);ja&&(X(3,"pb",U,0),e.push(U));P||(U=S);Q&&fa(X(3,"i",l,Q))}e.forEach(function(b){a=a.substr(0,b)+"\u0017"+a.substr(1+b)});if(-1<a.indexOf("`"))for(v=/(``?)[^\x17]*?[^`]\1(?!`)/g;f=v.exec(a);)l=f.index,k=f[0].length,y=f[1].length,Y("C",l,y,l+k-y,y),c(l,k);if(-1<a.indexOf("!["))for(v=/!\[([^\x17\]]+)] ?\(([^\x17 ")]+)(?: "([^\x17"]*)")?\)/g;f=v.exec(a);)l=f.index,k=f[0].length,e=f[1].length,t=l,n=2,h=t+n+e,g=k-n-e,e=Y("IMG",
t,n,h,g),e.l("alt",d(f[1])),e.l("src",d(f[2])),""<f[3]&&e.l("title",d(f[3])),c(l,k);if(-1<a.indexOf("["))for(v=/\[([^\x17\]]+)] ?\(([^\x17)]+)\)/g;f=v.exec(a);){l=f.index;k=f[0].length;e=f[1].length;t=l;n=1;h=t+n+e;g=k-n-e;z=f[2];e="";if(f=/^(.+?) "(.*?)"$/.exec(z))z=f[1],e=f[2];u=Y("URL",t,n,h,g);u.l("url",d(z));""!==e&&u.l("title",d(e));c(t,n);c(h,g)}if(-1<a.indexOf("~~"))for(v=/~~[^\x17]+?~~/g;f=v.exec(a);)q=f[0],l=f.index,k=q.length,Y("DEL",l,2,l+k-2,2);if(-1<a.indexOf("^"))for(v=/\^[^\x17\s]+/g;f=
v.exec(a);)q=f[0],l=f.index,k=q.length,t=l,h=l+k,e=q.split("^"),e.shift(),e.forEach(function(a){Y("SUP",t,1,h,0);t+=1+a.length});[["*",/\*+/g],["_",/_+/g]].forEach(function(b){var d=b[0];b=b[1];if(!(0>a.indexOf(d)))for(var c=0,e=a.indexOf("\u0017"),g,h,n,u;f=b.exec(a);)if(q=f[0],l=f.index,k=q.length,l>e&&(c=0,e=a.indexOf("\u0017",l)),3<=k){var t=k;3>c?u=h=l:g<n?(u=l,h=l+2):(u=l+1,h=l,n===g&&(g+=2));c&2&&(Y("STRONG",n,2,u,2),t-=2);c&1&&(Y("EM",g,1,h,1),--t);t?(c=Math.min(t,3),c&1&&(g=l+k-c),c&2&&(n=
l+k-c)):c=0}else 2===k?3===c&&n===g?(Y("STRONG",g+1,2,l,2),c=1):c&2?(Y("STRONG",n,2,l,2),c-=2):(c+=2,n=l):"_"===d&&0<l&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(l-1))&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(l+1))||(3===c&&n===g?(Y("EM",n+2,1,l,1),c=2):c&1?(Y("EM",g,1,l,1),--c):(++c,g=l))})}},Autoemail:{w:"@",x:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,u:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=
X(1,"EMAIL",a[0][1],0);b.l("email",a[0][0]);a=X(2,"EMAIL",a[0][1]+a[0][0].length,0);B(b,a)})}},Autolink:{w:"://",x:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,u:1E4,z:"warn",r:function(a,b){b.forEach(function(a){for(var b=a[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;var e=X(1,"URL",a[0][1],0);e.l("url",b);a=X(2,"URL",a[0][1]+b.length,0);B(e,a)})}},Escaper:{w:"\\",x:/\\[-!#()*+.:@[\\\]^_`{}]/g,
u:1E4,z:"warn",r:function(a,b){b.forEach(function(a){X(3,"ESC",a[0][1],a[0][0].length)})}},FancyPants:{r:function(a){function b(b,e,g,h){for(;f=e.exec(a);){var k=X(3,c,f.index+f[0].indexOf(b),1),q=X(3,c,f.index+f[0].length-1,1);k.l(d,g);q.l(d,h);k.M.push(q);k.D&&A(q)}}var d="char",c="FP",e=0<=a.indexOf("'"),g=0<=a.indexOf('"'),h,f,q,k;if(e)for(h=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;f=h.exec(a);)tag=X(3,c,f.index+f[0].indexOf("'"),1),tag.l(d,"\u2019"),tag.p=10;if(e||g||0<=a.indexOf("x"))for(h=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;f=
h.exec(a);)if(q=f.index+f[0].length-1,"x"===f[0].charAt(q)&&X(3,c,q,1).l(d,"\u00d7"),k=f[0].charAt(1),"'"===k||'"'===k)q=1+f.index,k="'s"===f[0].substr(1,2)?"\u2019":"'"===k?"\u2032":"\u2033",X(3,c,q,1).l(d,k);e&&b("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");g&&b('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");if(0<=a.indexOf("...")||0<=a.indexOf("--"))for(h=/---?|\.\.\./g;f=h.exec(a);)q=f.index,e=f[0].length,k={"--":"\u2013","---":"\u2014","...":"\u2026"}[f[0]],X(3,c,q,e).l(d,k);if(0<=a.indexOf("("))for(h=
/\((?:c|r|tm)\)/gi;f=h.exec(a);)q=f.index,e=f[0].length,k={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"}[f[0].toLowerCase()],X(3,c,q,e).l(d,k)}},HTMLComments:{w:"\x3c!--",x:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,u:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=aa(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");X(3,"HC",a[0][1],a[0][0].length).l("content",b)})}},HTMLEntities:{w:"&",x:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,u:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=
a[0][0],e=aa(b);e!==b&&X(3,"HE",a[0][1],b.length).l("char",e)})}},HTMLElements:{w:"<",x:/<(?:\/((?:u|a(?:bbr)?|br?|code|del|em|hr|i(?:mg)?|s(?:(?:trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)))|((?:u|a(?:bbr)?|br?|code|del|em|hr|i(?:mg)?|s(?:(?:trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)))((?:\s+[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,u:1E4,z:"warn",r:function(a,b){var d={a:{"":"URL",href:"url"},hr:{"":"HR"},img:{"":"IMG"},em:{"":"EM"},s:{"":"S"},strong:{"":"STRONG"},
sub:{"":"SUB"},sup:{"":"SUP"}};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),g=b[0][1],h=b[0][0].length,f=b[2-e][0].toLowerCase(),q=d&&d[f]&&d[f][""]?d[f][""]:"html:"+f;if(e)X(2,q,g,h);else for(var e="/>"===b[0][0].substr(h-2)?Y(q,g,h,g+h,0):X(1,q,g,h),h=/[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,k;k=h.exec(b[3][0]);)g=k[0].indexOf("="),0>g&&(g=k[0].length,k[0]+="="+k[0].toLowerCase()),q=k[0].substr(0,g).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),g=k[0].substr(1+
g).replace(/^\s+/,"").replace("/s+$/",""),d&&d[f]&&d[f][q]&&(q=d[f][q]),/^["']/.test(g)&&(g=g.substr(1,g.length-2)),e.l(q,aa(g))})}},MediaEmbed:{w:":",x:/\b(?:spotify:|https?:\/\/(?:[-.\w]+\.)?(?:twitch\.tv|vi(?:meo\.com|ne\.co)|youtu(?:\.be|be\.com)|(?:bandcamp|dailymotion|facebook|grooveshark|liveleak|soundcloud|(?:open|play)\.spotify)\.com)\/)[^["'\s]+(?!\S)/g,u:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=a[0][0];a=X(3,"MEDIA",a[0][1],b.length);a.l("url",b);a.p=-10})}}},Xa,Ya,W,Ha,
Z,Za=1E3,$,V,$a={d:[119],e:[1023],c:392};function ab(a,b){var d=a.m;a.c&512&&(b=bb(b));B(X(2,d,b,0),a)}function bb(a){for(;a>V&&-1<" \n\t".indexOf(K.charAt(a-1));)--a;return a}function Ma(){V=0;Xa={};Ya={};$=[];Z=null;W=$a;W.B=!1;for(var a in J)Xa[a]=0,Ya[a]=0;do{for(;O.length;)Ka||(O.sort(cb),Ka=!0),Z=O.pop(),W.c&16&&!ga(Z,$[$.length-1])&&!ka(Z)||db();$.forEach(function(a){ab(a,Da)})}while(O.length);Qa()}
function db(){if(!Z.D){var a=Z.n,b=Z.v;if(a+b>Da)A(Z);else if(V>a){var d;if((d=Z.F)&&0<=$.indexOf(d))a=Math.max(0,a+b-V),a=X(2,d.m,V,a),B(a,d);else{if("i"===Z.m&&(d=a+b-V,0<d)){X(3,"i",V,d);return}A(Z)}}else if("i"===Z.m)Wa(Z);else if("br"===Z.m)W.c&128||(Ra(Z.n,0,!1),N+="<br/>");else if("pb"===Z.m)Ra(Z.n,0,!0);else if(Z.o&1)if(d=Z,a=d.m,b=J[a],Ya[a]>=b.h)r(p,"err","Tag limit exceeded",{tag:d,tagName:a,tagLimit:b.h}),A(d);else{var c=d,e=J[c.m],g=!0;if(e.b){p.G=c;for(var h=0;h<e.b.length;++h)if(!e.b[h](c,
e)){g=!1;break}delete p.G}if(g){a:{c=d;if($.length&&(e=J[c.m],e.f.y&&(g=$[$.length-1],e.f.y[g.m]))){O.push(c);ab(g,c.n);c=!0;break a}c=!1}c||(Xa[a]>=b.g?(r(p,"err","Nesting limit exceeded",{tag:d,tagName:a,nestingLimit:b.g}),A(d)):(b=J[a].i,W.d[b>>5]&1<<(b&31)?(d.c&1&&!d.A&&(a=new x(3,a,d.n,d.v),la(a,D(d)),a.c=d.c,d=a),Sa(d),eb(d)):(r(p,"warn","Tag is not allowed in this context",{tag:d,tagName:a}),A(d))))}else A(d)}else fb()}}
function fb(){var a=Z;if(Xa[a.m]){for(var b=[],d=$.length;0<=--d;){var c=$[d];if(ga(a,c))break;if(++Ha>Za)throw"Fixing cost exceeded";b.push(c)}if(0>d)da({tag:a});else{var e=Ha<Za,g=[];b.forEach(function(b){var c=b.m;e&&(b.c&2?g.push(b):e=!1);var d=a.n;b.c&512&&(d=bb(d));c=new x(2,c,d,0);c.c=b.c;Sa(c);gb()});Sa(a);gb();if(b.length&&Ha<Za){c=V;for(d=O.length;0<=--d&&++Ha<Za;){var h=O[d];if(h.n>c||h.o&1)break;for(var f=b.length;0<=--f&&++Ha<Za;)if(ga(h,b[f])){b.splice(f,1);g[f]&&g.splice(f,1);c=Math.max(c,
h.n+h.v);break}}c>V&&Wa(new x(3,"i",V,c-V))}g.forEach(function(a){var b=X(a.o,a.m,V,0);la(b,D(a));b.p=a.p;(a=a.A)&&B(b,a)})}}}function gb(){var a=$.pop();--Xa[a.m];W=W.V}function eb(a){function b(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=a[c]&b[c];return e}var d=a.m,c=a.c,e=J[d];++Ya[d];3!==a.o&&(++Xa[d],$.push(a),a=b(e.d,e.d),c&64&&(a=b(a,W.d)),e=b(W.e,e.e),a=b(a,e),W.c&256&&(c|=256),c&256&&(c|=128),W={d:a,e:e,c:c,V:W})}var O,Ka;
function X(a,b,d,c){a=new x(a,b,d,c);J[b]&&(a.c=J[b].f.c);J[b]||ka(a)?J[b]&&J[b].I?(r(p,"warn","Tag is disabled",{tag:a,tagName:b}),A(a)):0>c||0>d?A(a):(Ka&&O.length&&a.n>=O[O.length-1].n&&(Ka=!1),O.push(a)):A(a);return a}function Y(a,b,d,c,e){b=X(1,a,b,d);B(b,X(2,a,c,e));return b}function cb(a,b){var d=a.n,c=b.n;if(d!==c)return c-d;if(a.p!==b.p)return b.p-a.p;d=a.v;c=b.v;return d&&c?d-c:d||c?d?-1:1:(d={2:0,3:1,1:2},d[b.o]-d[a.o])}
function hb(a){return(new DOMParser).parseFromString(a,"text/xml")}var ib=new XSLTProcessor;ib.importStylesheet(hb('<?xml version="1.0" encoding="utf-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:template match="BANDCAMP"><iframe width="400" height="{120-78*boolean(@track_id|@track_num)}" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//bandcamp.com/EmbeddedPlayer/<xsl:choose><xsl:when test="@album_id">album=<xsl:value-of select="@album_id"/>/size=<xsl:choose><xsl:when test="@track_num">small/t=<xsl:value-of select="@track_num"/></xsl:when><xsl:otherwise>medium</xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise>track=<xsl:value-of select="@track_id"/>/size=small</xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="C"><code class="inline"><xsl:apply-templates/></code></xsl:template><xsl:template match="CODE"><pre><code class="{@lang}"><xsl:apply-templates/></code></pre></xsl:template><xsl:template match="DAILYMOTION"><iframe width="560" height="315" src="//www.dailymotion.com/embed/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="DEL|html:del"><del><xsl:apply-templates/></del></xsl:template><xsl:template match="EM"><em><xsl:apply-templates/></em></xsl:template><xsl:template match="EMAIL"><a href="mailto:{@email}"><xsl:apply-templates/></a></xsl:template><xsl:template match="ESC"><xsl:value-of select="substring(.,2)"/></xsl:template><xsl:template match="FACEBOOK"><iframe width="560" height="315" src="https://www.facebook.com/video/embed?video_id={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="FP|HE"><xsl:value-of select="@char"/></xsl:template><xsl:template match="GROOVESHARK"><object type="application/x-shockwave-flash" typemustmatch="" width="250" height="{250-210*boolean(@songid)}" data="//grooveshark.com/{substring(\'songWw\',6-5*boolean(@songid),5)}idget.swf"><param name="allowfullscreen" value="true"/><param name="flashvars" value="playlistID={@playlistid}&amp;songID={@songid}"/><embed type="application/x-shockwave-flash" src="//grooveshark.com/{substring(\'songWw\',6-5*boolean(@songid),5)}idget.swf" width="250" height="{250-210*boolean(@songid)}" allowfullscreen="" flashvars="playlistID={@playlistid}&amp;songID={@songid}"/></object></xsl:template><xsl:template match="H1"><h1><xsl:apply-templates/></h1></xsl:template><xsl:template match="H2"><h2><xsl:apply-templates/></h2></xsl:template><xsl:template match="H3"><h3><xsl:apply-templates/></h3></xsl:template><xsl:template match="H4"><h4><xsl:apply-templates/></h4></xsl:template><xsl:template match="H5"><h5><xsl:apply-templates/></h5></xsl:template><xsl:template match="H6"><h6><xsl:apply-templates/></h6></xsl:template><xsl:template match="HC"><xsl:comment><xsl:value-of select="@content"/></xsl:comment></xsl:template><xsl:template match="HR"><hr/></xsl:template><xsl:template match="IMG"><img src="{@src}"><xsl:copy-of select="@alt"/><xsl:copy-of select="@title"/></img></xsl:template><xsl:template match="LI"><li><xsl:apply-templates/></li></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:otherwise><ol><xsl:apply-templates/></ol></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="LIVELEAK"><iframe width="640" height="360" src="http://www.liveleak.com/ll_embed?i={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:apply-templates/></blockquote></xsl:template><xsl:template match="SOUNDCLOUD"><iframe width="560" height="166" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://w.soundcloud.com/player/?url=<xsl:choose><xsl:when test="@secret_token and@playlist_id">https://api.soundcloud.com/playlists/<xsl:value-of select="@playlist_id"/>&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:when><xsl:when test="@secret_token and@track_id">https://api.soundcloud.com/tracks/<xsl:value-of select="@track_id"/>&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:when><xsl:otherwise><xsl:value-of select="@id"/><xsl:if test="@secret_token">&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:if></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="SPOTIFY"><iframe width="300" height="{380-300*(contains(@uri,\':track:\')orstarts-with(@path,\'track/\'))}" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://embed.spotify.com/?uri=<xsl:choose><xsl:when test="@uri"><xsl:value-of select="@uri"/></xsl:when><xsl:otherwise>spotify:<xsl:value-of select="translate(@path,\'/\',\':\')"/></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="STRONG|html:strong"><strong><xsl:apply-templates/></strong></xsl:template><xsl:template match="SUP|html:sup"><sup><xsl:apply-templates/></sup></xsl:template><xsl:template match="TWITCH"><object type="application/x-shockwave-flash" typemustmatch="" width="620" height="378" data="http://www.twitch.tv/widgets/{substring(\'archl\',5-4*boolean(@archive_id|@chapter_id),4)}ive_embed_player.swf"><param name="allowfullscreen" value="true"/><param name="flashvars"><xsl:attribute name="value">channel=<xsl:value-of select="@channel"/><xsl:if test="@archive_id">&amp;archive_id=<xsl:value-of select="@archive_id"/></xsl:if><xsl:if test="@chapter_id">&amp;chapter_id=<xsl:value-of select="@chapter_id"/></xsl:if>&amp;auto_play=false</xsl:attribute></param><embed type="application/x-shockwave-flash" width="620" height="378" src="http://www.twitch.tv/widgets/{substring(\'archl\',5-4*boolean(@archive_id|@chapter_id),4)}ive_embed_player.swf" allowfullscreen=""/></object></xsl:template><xsl:template match="URL"><a href="{@url}"><xsl:apply-templates/></a></xsl:template><xsl:template match="VIMEO"><iframe width="560" height="315" src="//player.vimeo.com/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="VINE"><iframe width="480" height="480" src="https://vine.co/v/{@id}/embed/simple" allowfullscreen="" frameborder="0" scrolling="no"/><script async="" src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"/></xsl:template><xsl:template match="YOUTUBE"><iframe width="560" height="315" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//www.youtube.com/embed/<xsl:value-of select="@id"/><xsl:if test="@list or@t">?<xsl:if test="@list">list=<xsl:value-of select="@list"/><xsl:if test="@t">&amp;</xsl:if></xsl:if><xsl:if test="@t">start=<xsl:value-of select="@t"/></xsl:if></xsl:if></xsl:attribute></iframe></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/><xsl:template match="html:abbr"><abbr><xsl:copy-of select="@title"/><xsl:apply-templates/></abbr></xsl:template><xsl:template match="html:b"><b><xsl:apply-templates/></b></xsl:template><xsl:template match="html:br"><br><xsl:apply-templates/></br></xsl:template><xsl:template match="html:code"><code><xsl:apply-templates/></code></xsl:template><xsl:template match="html:i"><i><xsl:apply-templates/></i></xsl:template><xsl:template match="html:sub"><sub><xsl:apply-templates/></sub></xsl:template><xsl:template match="html:table"><table><xsl:apply-templates/></table></xsl:template><xsl:template match="html:tbody"><tbody><xsl:apply-templates/></tbody></xsl:template><xsl:template match="html:td"><td><xsl:copy-of select="@colspan"/><xsl:copy-of select="@rowspan"/><xsl:apply-templates/></td></xsl:template><xsl:template match="html:tfoot"><tfoot><xsl:apply-templates/></tfoot></xsl:template><xsl:template match="html:th"><th><xsl:copy-of select="@colspan"/><xsl:copy-of select="@rowspan"/><xsl:copy-of select="@scope"/><xsl:apply-templates/></th></xsl:template><xsl:template match="html:thead"><thead><xsl:apply-templates/></thead></xsl:template><xsl:template match="html:tr"><tr><xsl:apply-templates/></tr></xsl:template><xsl:template match="html:u"><u><xsl:apply-templates/></u></xsl:template><xsl:template match="p"><p><xsl:apply-templates/></p></xsl:template></xsl:stylesheet>'));
function E(a,b){var d;a:{d=p;if(b.k){var c,e,g=D(a);for(c in g){var h=g[c];if(b.k[c]){if(e=b.k[c],e.b){d.l(c);for(var f=0;f<e.b.length;++f)if(h=e.b[f](h,c),!1===h){delete a.k[c];break}!1!==h&&a.l(c,h);delete d.E}}else delete a.k[c]}for(c in b.k)if(e=b.k[c],!(c in a.k)&&e.j){d=!1;break a}}else la(a,{});d=!0}return d}function ma(a){return/^[-\w+., ]+$/.test(a)?a:!1}function F(a){return ba(a)}function na(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}
function oa(a){var b=ca.mediasites,d;if("media"in a.k)d=a.k.media,!("id"in a.k)&&"url"in a.k&&-1===a.k.url.indexOf("://")&&a.l("id",a.k.url);else if("url"in a.k){var c=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.k.url);if(c[1]&&b[c[1]+":"])d=b[c[1]+":"];else if(c[2]){c=c[2];do{if(b[c]){d=b[c];break}var e=c.indexOf(".");if(-1==e)break;c=c.substr(1+e)}while(""<c)}}d&&(b=a.A||a,c=a.n,d=X(3,d.toUpperCase(),c,b.n+b.v-c),la(d,D(a)),d.p=a.p);return!1}function pa(){return!0}
function qa(a){a:{for(var b in D(a))if("url"!==b){a=!0;break a}a=!1}return a}function G(a){return m(a,/^(?:\d+)$/)}function H(a,b){return Na(a,b)}function ra(a){return m(a,/^(?:[A-Za-z0-9]+)$/)}function I(a){return m(a,/^(?:[0-9]+)$/)}function sa(){return!0}function ta(a){return m(a,/^(?:[a-f_0-9]+)$/)}function wa(){return!0}
function ua(a){return m(a,/^(?:https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)$/)}function va(a){return m(a,/^(?:[-\w]+)$/)}function xa(a){return m(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}function za(a){return m(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}function Ba(){return!0}function Aa(a){return m(a,/^(?:(?!m\/)\w+)$/)}function Ca(a){return m(a,/^(?:[^\/]+)$/)}
window.s9e={TextFormatter:{disablePlugin:function(a){La[a]&&(La[a].I=!0)},enablePlugin:function(a){La[a]&&(La[a].I=!1)},preview:function(a,b){function d(a,b){for(var d=a.childNodes,e=b.childNodes,l=d.length,v=e.length,n,t,u=0,y=0;u<l&&u<v;){n=d[u];t=e[u];if(!c(n,t))break;++u}for(var z=Math.min(l-u,v-u);y<z;){n=d[l-(y+1)];t=e[v-(y+1)];if(!c(n,t))break;++y}n=g.createDocumentFragment();for(z=u;z<v-y;)t=e[z].cloneNode(!0),n.appendChild(t),++z;for(z=l-y;--z>=u;)a.removeChild(d[z]);y?a.insertBefore(n,a.childNodes[u]):
a.appendChild(n)}function c(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var c=a.attributes,e=b.attributes,g=e.length,v=c.length;0<=--v;){var n=c[v],t=n.namespaceURI,n=n.name;b.hasAttributeNS(t,n)||a.removeAttributeNS(t,n)}for(v=g;0<=--v;)c=e[v],t=c.namespaceURI,n=c.name,c=c.value,c!==a.getAttributeNS(t,n)&&a.setAttributeNS(t,n,c);d(a,
b);return!0}var e=Ga(a),e=hb(e),g=b.ownerDocument,e=g.importNode(ib.transformToFragment(e,g),!0);d(b,e)}}};
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		window.setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
</body>
</html>