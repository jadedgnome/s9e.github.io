<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLElements** --- several HTML elements are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:<br/>
   http://youtu.be/QH2-TGUlwu4

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 32.3 KB (11.1 KB compressed)

***

[![Build Status](https://travis-ci.org/s9e/TextFormatter.png?branch=master)](https://travis-ci.org/s9e/TextFormatter)
[![Coverage Status](https://coveralls.io/repos/s9e/TextFormatter/badge.png)](https://coveralls.io/r/s9e/TextFormatter)
[![Scrutinizer Quality Score](https://scrutinizer-ci.com/g/s9e/TextFormatter/badges/quality-score.png?s=3942dab3c410fb9ce02001e7446d1083fa91172c)](https://scrutinizer-ci.com/g/s9e/TextFormatter/)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">function aa(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function l(a,b){return b.test(a)?a:!1}
function ba(a){var b=ea.urlConfig,c=n;a=a.replace(/^\s+/,"").replace(/\s+$/,"");var d=!1,e=!0;"//"===a.substr(0,2)&&(b.O?(a=b.O+":"+a,d=!0):b.V||(a="http:"+a,d=!0,e=!1));a=a.replace(/["'()<>[\]\x00-\x20\x7F]+/g,escape).replace(/[^\u0020-\u007E]+/g,encodeURIComponent);var f=/^([a-z\d]+):\/\/(?:[^/]*@)?([^/]+)(?:\/.*)?$/i.exec(a);if(!f)return!1;if(e&&!b.N.test(f[1]))return c&&q(c,"err","URL scheme is not allowed",{attrValue:a,scheme:f[1]}),!1;e=f[2].replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,
"");if(b.P&&b.P.test(e)||b.W&&!b.W.test(e))return c&&q(c,"err","URL host is not allowed",{attrValue:a,host:f[2]}),!1;b=a.indexOf(":");return a=d?a.substr(b+1):a.substr(0,b).toLowerCase()+a.substr(b)}function r(){}r.prototype.G={};r.prototype.J=[];function q(a,b,c,d){d=d||{};"attrName"in d||!a.D||(d.attrName=a.D);"tag"in d||!a.F||(d.tag=a.F);a.G[b]&&a.G[b].forEach(function(a){a(c,d)});a.J.push([b,c,d])}r.prototype.get=function(){return this.J};r.prototype.on=function(a,b){this.G[a].push(b)};
r.prototype.l=function(a){this.D=a};function fa(a){q(n,"debug","Skipping end tag with no start tag",a)}function w(a,b,c,d){this.n=a;this.k=b;this.m=c;this.q=d;isNaN(a+c+d)&&z(this);this.j={};this.K=[]}w.prototype.B=!1;w.prototype.o=0;function z(a){a.B||(a.B=!0,a.K.forEach(function(a){z(a)}))}function A(a,b){a.k===b.k&&(1===a.n&&2===b.n&&b.m>=a.m?(a.y=b,b.E=a):2===a.n&&1===b.n&&b.m<=a.m&&(a.E=b,b.y=a))}function ja(a){a.o=1E3}function B(a){var b={},c;for(c in a.j)b[c]=a.j[c];return b}
function ka(a,b){return a.B||a.k!==b.k||1!==b.n||2!==a.n||a.m<b.m||a.E&&a.E!==b||b.y&&b.y!==a?!1:!0}function la(a){return"br"===a.k||"i"===a.k||"pb"===a.k}w.prototype.l=function(a,b){this.j[a]=b};function ma(a,b){a.j={};for(var c in b)a.j[c]=b[c]}
var n=new r,ea={urlConfig:{N:/^(?:ftp|https?)$/i,V:0},mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","facebook.com":"facebook","grooveshark.com":"grooveshark","liveleak.com":"liveleak","soundcloud.com":"soundcloud","open.spotify.com":"spotify","play.spotify.com":"spotify","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","youtube.com":"youtube","youtu.be":"youtube"}},I={C:{a:[D],f:10,e:{b:18},g:1E3,h:0,c:[0],d:[0]},CODE:{j:{lang:{a:[na],i:0}},a:[D],
f:10,e:{b:916},g:1E3,h:1,c:[0],d:[0]},DEL:{a:[D],f:10,e:{b:64},g:1E3,h:0,c:[567],d:[1023]},EM:{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},H1:{a:[D],f:10,e:{b:516},g:1E3,h:2,c:[561],d:[1023]},H2:{a:[D],f:10,e:{b:516},g:1E3,h:2,c:[561],d:[1023]},H3:{a:[D],f:10,e:{b:516},g:1E3,h:2,c:[561],d:[1023]},H4:{a:[D],f:10,e:{b:516},g:1E3,h:2,c:[561],d:[1023]},H5:{a:[D],f:10,e:{b:516},g:1E3,h:2,c:[561],d:[1023]},H6:{a:[D],f:10,e:{b:516},g:1E3,h:2,c:[561],d:[1023]},HR:{a:[D],f:10,e:{b:645},g:1E3,h:1,c:[544],
d:[1023]},IMG:{j:{alt:{i:0},src:{a:[E],i:1},title:{i:0}},a:[D],f:10,e:{b:129},g:1E3,h:0,c:[544],d:[1023]},LI:{a:[D],f:10,e:{v:{LI:1},b:520},g:1E3,h:3,c:[567],d:[1023]},LIST:{j:{type:{a:[na],i:0}},a:[D],f:10,e:{b:676},g:1E3,h:1,c:[520],d:[1023]},QUOTE:{a:[D],f:10,e:{b:524},g:1E3,h:1,c:[567],d:[1023]},STRONG:{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},SUP:{a:[D],f:10,e:{b:0},g:1E3,h:0,c:[561],d:[1023]},URL:{j:{title:{i:0},url:{a:[E],i:1}},a:[D],f:10,e:{b:66},g:1E3,h:4,c:[551],d:[1007]},EMAIL:{j:{email:{a:[oa],
i:1}},a:[D],f:10,e:{b:66},g:1E3,h:4,c:[551],d:[1007]},ESC:{a:[D],f:10,e:{b:145},g:1E3,h:5,c:[0],d:[0]},FP:{j:{"char":{i:1}},a:[D],f:10,e:{b:129},g:1E3,h:5,c:[544],d:[1023]},HE:{j:{"char":{i:1}},a:[D],f:10,e:{b:129},g:1E3,h:5,c:[544],d:[1023]},"html:a":{j:{href:{a:[E],i:1},title:{i:0}},a:[D],f:10,e:{b:66},g:1E3,h:4,c:[551],d:[1007]},"html:abbr":{j:{title:{i:0}},a:[D],f:10,e:{b:0},g:1E3,h:0,c:[561],d:[1023]},"html:b":{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},"html:br":{a:[D],f:10,e:{b:161},g:1E3,
h:0,c:[512],d:[1023]},"html:code":{a:[D],f:10,e:{b:18},g:1E3,h:0,c:[0],d:[0]},"html:del":{a:[D],f:10,e:{b:64},g:1E3,h:0,c:[567],d:[1023]},"html:em":{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},"html:hr":{a:[D],f:10,e:{b:677},g:1E3,h:1,c:[512],d:[1023]},"html:i":{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},"html:img":{j:{alt:{i:0},src:{a:[E],i:1},title:{i:0}},a:[D],f:10,e:{b:161},g:1E3,h:0,c:[512],d:[1023]},"html:s":{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},"html:strong":{a:[D],f:10,e:{b:2},
g:1E3,h:0,c:[561],d:[1023]},"html:sub":{a:[D],f:10,e:{b:0},g:1E3,h:0,c:[561],d:[1023]},"html:sup":{a:[D],f:10,e:{b:0},g:1E3,h:0,c:[561],d:[1023]},"html:table":{a:[D],f:10,e:{b:676},g:1E3,h:1,c:[832],d:[1023]},"html:tbody":{a:[D],f:10,e:{v:{"html:tbody":1,"html:tfoot":1,"html:thead":1},b:672},g:1E3,h:6,c:[768],d:[1023]},"html:td":{j:{colspan:{i:0},rowspan:{i:0}},a:[D],f:10,e:{v:{"html:td":1,"html:th":1},b:520},g:1E3,h:7,c:[567],d:[1023]},"html:tfoot":{a:[D],f:10,e:{v:{"html:tbody":1,"html:thead":1},
b:672},g:1E3,h:6,c:[768],d:[1023]},"html:th":{j:{colspan:{i:0},rowspan:{i:0},scope:{i:0}},a:[D],f:10,e:{v:{"html:td":1,"html:th":1},b:520},g:1E3,h:7,c:[563],d:[1019]},"html:thead":{a:[D],f:10,e:{b:672},g:1E3,h:6,c:[768],d:[1023]},"html:tr":{a:[D],f:10,e:{v:{"html:tr":1},b:672},g:1E3,h:8,c:[640],d:[1023]},"html:u":{a:[D],f:10,e:{b:2},g:1E3,h:0,c:[561],d:[1023]},MEDIA:{a:[pa],f:10,e:{b:81},g:1E3,h:9,c:[0],d:[0]},BANDCAMP:{j:{url:{a:[E],i:0},album_id:{a:[F],i:0},track_num:{a:[F],i:0},track_id:{a:[F],
i:0}},a:[qa,D,ra],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},DAILYMOTION:{j:{url:{a:[E],i:0},id:{a:[sa],i:1}},p:[["url",/dailymotion\.com\/(?:video\/|user\/[^#]+#video=)([A-Za-z0-9]+)/,["","id"]],["url",/^([A-Za-z0-9]+)$/,["","id"]]],a:[G,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},FACEBOOK:{j:{url:{a:[E],i:0},id:{a:[H],i:1}},p:[["url",/facebook\.com\/(?:photo|video\/video)\.php\?v=([0-9]+)/,["","id"]],["url",/^([0-9]+)$/,["","id"]]],a:[G,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},GROOVESHARK:{j:{url:{a:[E],
i:0},songid:{a:[H],i:0},playlistid:{a:[H],i:0}},p:[["url",/grooveshark\.com(?:\/#!?)?\/playlist\/[^\/]+\/([0-9]+)/,["","playlistid"]]],a:[G,ta,D,ra],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},LIVELEAK:{j:{url:{a:[E],i:0},id:{a:[ua],i:1}},p:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,["","id"]],["url",/^([a-f_0-9]+)$/,["","id"]]],a:[G,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},SOUNDCLOUD:{j:{url:{a:[E],i:0},playlist_id:{a:[F],i:0},track_id:{a:[F],i:0},id:{a:[va],i:1},secret_token:{a:[wa],i:0}},p:[["url",
/(https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)/,["","id","secret_token"]],["url",/^(https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)$/,["","id","secret_token"]]],a:[G,xa,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},SPOTIFY:{j:{url:{a:[E],i:0},uri:{a:[ya],i:0},path:{a:[za],i:0}},p:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,
["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],a:[G,D,ra],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},TWITCH:{j:{url:{a:[E],i:0},channel:{a:[Aa],i:0},archive_id:{a:[H],i:0},chapter_id:{a:[H],i:0}},p:[["url",/twitch\.tv\/((?!m\/)\w+)(?:\/b\/([0-9]+)|\/c\/([0-9]+))?/,["","channel","archive_id","chapter_id"]]],a:[G,Ba,D,ra],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},VIMEO:{j:{url:{a:[E],i:0},id:{a:[H],i:1}},p:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/)?([0-9]+)/,
["","id"]],["url",/^([0-9]+)$/,["","id"]]],a:[G,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},VINE:{j:{url:{a:[E],i:0},id:{a:[Da],i:1}},p:[["url",/vine\.co\/v\/([^\/]+)/,["","id"]],["url",/^([^\/]+)$/,["","id"]]],a:[G,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]},YOUTUBE:{j:{url:{a:[E],i:0},id:{a:[wa],i:1},t:{a:[F],i:0},list:{a:[wa],i:0}},p:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,["","id"]],["url",/youtu\.be\/([-\w]+)/,["","id"]],["url",/[#&?]t=(\d+)/,["","t"]],["url",/&list=([-\w]+)/,["","list"]],
["url",/^([-\w]+)$/,["","id"]]],a:[G,D],f:10,e:{b:145},g:1E3,h:4,c:[0],d:[0]}},J,K,Ea=0;
function Fa(a){a=a.replace(/\r\n?/g,"\n",a);a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"",a);var b=n;b.J=[];delete b.D;delete b.F;L=0;Ga=!1;Ha={};Q="";J=a;K=J.length;S=[];Ia=!0;T=0;++Ea;a=Ea;for(var c in Ja)if(b=Ja[c],!(b.H||b.w&&0>J.indexOf(b.w))){var d=[];if(b.x){var d=b.x,e=[],f=void 0;for(d.lastIndex=0;f=d.exec(J);){for(var g=+f.index,k=[[f[0],g]],m=0;++m<f.length;){var h=f[m];void 0===h?k.push(["",-1]):(k.push([h,J.indexOf(h,g)]),g+=h.length)}e.push(k)}d=e;e=d.length;if(!e)continue;e>b.s&&
(d=d.slice(0,b.s),e={pluginName:c,limit:b.s},"warn"===b.z&&q(n,"warn","Regexp limit exceeded. Only the allowed number of matches will be processed",e))}b.r(J,d)}Ka();if(Ea!==a)throw"The parser has been reset during execution";return Q}function La(a,b){b.p&&b.p.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.j){var f;(f=e.exec(a.j[d]))&&b.forEach(function(b,c){if(""!==b&&"string"===typeof f[c]){var e=f[c];b!==d&&b in a.j||a.l(b,e)}})}});return!0}var Ga,Ha,Q,T;
function Ma(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function Na(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function Oa(){var a;Pa(K,0,!0);do a=Q,Q=Q.replace(/<((?:\w+:)?\w+)[^>]*><\/\1>/g,"");while(Q!==a);Q=Q.replace(/<\/i><i>/g,"",Q);var b=Ga?"r":"t";a="<"+b;for(var c in Ha)a+=" xmlns:"+c+'="urn:s9e:TextFormatter:'+c+'"';Q=a+">"+Q+"</"+b+">"}
function Qa(a){Ga=!0;var b=a.k,c=a.m,d=a.q,e=a.b,f=0,g=0;e&512&&(f=a.n&1?2:1,g=a.n&2?2:1);var k=!1;a.n&1?e&4&&(k=!0):k=!0;Pa(c,f,k);f=d?Na(J.substr(c,d)):"";if(a.n&1){e&4||Ra(c);e=b.indexOf(":");0<e&&(Ha[b.substr(0,e)]=0);Q+="<"+b;var m=B(a),e=[],h;for(h in m)e.push([h]);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){Q+=" "+a+'="'+Ma(m[a].toString())+'"'});Q=3===a.n?d?Q+(">"+f+"</"+b+">"):Q+"/>":d?Q+("><s>"+f+"</s>"):Q+">"}else d&&(Q+="<e>"+f+"</e>"),Q+="</"+b+">";for(T=V=c+d;g&&T<K&&
"\n"===J.charAt(T);)--g,++T}
function Pa(a,b,c){c&&(W.b&8?b=-1:c=!1);V>=a&&c&&Sa();if(T>V){var d=Math.min(a,T);Q+=J.substr(V,d-V);V=d;V>=a&&c&&Sa()}if(W.b&32)d=a-V,b=J.substr(V,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),Q+=b,V=a,c&&Sa();else{for(var e=a,d=0;b&&--e>=V;){var f=J.charAt(e);if(" "!==f&&"\n"!==f&&"\t"!==f)break;"\n"===f&&--b;++d}a-=d;if(W.b&8)for(W.A||(Ta(a),a>V&&Ra(a)),b=J.indexOf("\n\n",V);-1<b&&b<a;)Pa(b,0,!0),Ra(a),b=J.indexOf("\n\n",V);a>V&&(b=Na(J.substr(V,a-V)),W.b&128||(b=b.replace(/\n/g,"<br/>\n")),Q+=b);
c&&Sa();d&&(Q+=J.substr(a,d));V=a+d}}function Ua(a){var b=a.m;a=a.q;var c=J.substr(b,a);Pa(b,0,!1);Q+="<i>"+Na(c)+"</i>";Ga=!0;V=b+a}function Ra(a){!W.A&&W.b&8&&(Ta(a),V<K&&(Q+="<p>",W.A=!0))}function Sa(){W.A&&(Q+="</p>",W.A=!1)}function Ta(a){for(;V<a&&-1<" \n\t".indexOf(J.charAt(V));)Q+=J.charAt(V),++V}
var Ja={Litedown:{r:function(a){function b(a){return a.replace(/[\\\x1A]/g,"").replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]})}function c(b,d){a=a.substr(0,b)+Array(1+d).join("\u001a")+a.substr(b+d)}var d,e,f,g,k,m,h,x,u,p,s,t,y;0>a.indexOf("\\")||(a=a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3",
"\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]}));a+="\n\n\u0017";d=[];var v=4,O=!0,U=[],C=0,ga=!1,Ca=[],ha=0,ca={},M=0,ia,R,N,P;if(a.indexOf("-\n")||a.indexOf("=\n"))for(x=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+)$/gm;g=x.exec(a);){k=g[0];h=g.index;for(f=h-1;0<f&&" "===a[f-1];)--f;ca[h-1]={Q:h+k.length-f,R:f,U:k.length-k.replace(/>/g,"").length,X:"="===k.charAt(0)?"H1":"H2"}}for(x=/^(?:(?=[-*+\d \t>`#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=.))?[ \t]*(#+[ \t]*(?=.)|```+)?)?/gm;g=
x.exec(a);){h=g.index;m=g[0].length;N=0;R=!O;P=a.indexOf("\n",h);O=P===h+m&&!g[3]&&!g[4]&&!g[5];m||++x.lastIndex;ia=O&&R;g[1]?(u=g[1].length-g[1].replace(/>/g,"").length,N=g[1].length):u=0;if(u<ha&&!R&&!O){ga=!0;do A(X(2,"QUOTE",M,0),Ca.pop());while(u<--ha)}if(u>ha&&!O){ga=!0;do s=X(1,"QUOTE",h,0),s.o=ha,Ca.push(s);while(u>++ha)}e=s=0;var da;if(g[2]){t=g[2];da=t.length;do" "===t.charAt(e)?++s:s=s+4&-4;while(++e<da&&s<v)}s<v&&y&&!O&&(ga=!0);ga&&(ga=!1,y&&(C=X(2,"CODE",M,0),A(C,y),C.o=-1,y=null),U.forEach(function(a){A(X(2,
"LIST",M,0),a.L);A(X(2,"LI",M,0),a.I)}),U=[],C=0,h&&d.push(h-1));if(s>=v){if(y||!R)N=(g[1]||"").length+e,y||(y=X(1,"CODE",h+N,0)),g={}}else{t=!!g[4];if(s||R||t||O)if(R&&!t)v=C-1;else if(C)for(v=0;v<C&&s>U[v].M;)++v;else v=!R&&t?0:-1;else v=-1;for(;v<C-1;)list=U.pop(),--C,A(X(2,"LIST",M,0),list.L),A(X(2,"LI",M,0),list.I);v!==C||t||--v;t&&0<=v&&(ia=!0,da=h+N+e,t=g[4].length,e=X(1,"LI",da,t),e.b&=-9,c(da,t),v<C?A(X(2,"LI",M,0),U[v].I):(++C,v?(t=U[v-1].M+1,s=Math.max(t,4*v)):t=0,v=X(1,"LIST",da,0),-1<
g[4].indexOf(".")&&v.l("type","decimal"),U.push({L:v,I:e,Y:t,M:s})));v=4*(C+1)}if(g[5]){if("#"===g[5].charAt(0)){u=g[5].length;p=h+m-u;f=P;for(e=0;-1<" #\t".indexOf(a.charAt(f-1));)--f,++e;Y("H"+/#{1,6}/.exec(g[5])[0].length,p,u,f,e);d.push(p);d.push(f);R&&(ia=!0)}}else g[3]&&!C?(X(3,"HR",h+N,m-N),ia=!0):!ca[P]||ca[P].U!==u||O||C||y||Y(ca[P].X,h+N,0,ca[P].R,ca[P].Q);ia&&(X(3,"pb",M,0),d.push(M));O||(M=P);N&&ja(X(3,"i",h,N))}d.forEach(function(b){a=a.substr(0,b)+"\u0017"+a.substr(1+b)});if(-1<a.indexOf("`"))for(x=
/(``?)[^\x17]*?[^`]\1(?!`)/g;g=x.exec(a);)h=g.index,m=g[0].length,t=g[1].length,Y("C",h,t,h+m-t,t),c(h,m);if(-1<a.indexOf("!["))for(x=/!\[([^\x17\]]+)] ?\(([^\x17 ")]+)(?: "([^\x17"]*)")?\)/g;g=x.exec(a);)h=g.index,m=g[0].length,d=g[1].length,p=h,u=2,f=p+u+d,e=m-u-d,d=Y("IMG",p,u,f,e),d.l("alt",b(g[1])),d.l("src",b(g[2])),""<g[3]&&d.l("title",b(g[3])),c(h,m);if(-1<a.indexOf("["))for(x=/\[([^\x17\]]+)] ?\(([^\x17)]+)\)/g;g=x.exec(a);){h=g.index;m=g[0].length;d=g[1].length;p=h;u=1;f=p+u+d;e=m-u-d;y=
g[2];d="";if(g=/^(.+?) "(.*?)"$/.exec(y))y=g[1],d=g[2];s=Y("URL",p,u,f,e);s.l("url",b(y));""!==d&&s.l("title",b(d));c(p,u);c(f,e)}if(-1<a.indexOf("~~"))for(x=/~~[^\x17]+?~~/g;g=x.exec(a);)k=g[0],h=g.index,m=k.length,Y("DEL",h,2,h+m-2,2);if(-1<a.indexOf("^"))for(x=/\^[^\x17\s]+/g;g=x.exec(a);)k=g[0],h=g.index,m=k.length,p=h,f=h+m,d=k.split("^"),d.shift(),d.forEach(function(a){Y("SUP",p,1,f,0);p+=1+a.length});[["*",/\*+/g],["_",/_+/g]].forEach(function(b){var d=b[0];b=b[1];if(!(0>a.indexOf(d)))for(var c=
0,e=a.indexOf("\u0017"),f,t,p,u;g=b.exec(a);)if(k=g[0],h=g.index,m=k.length,h>e&&(c=0,e=a.indexOf("\u0017",h)),3<=m){var s=m;3>c?u=t=h:f<p?(u=h,t=h+2):(u=h+1,t=h,p===f&&(f+=2));c&2&&(Y("STRONG",p,2,u,2),s-=2);c&1&&(Y("EM",f,1,t,1),--s);s?(c=Math.min(s,3),c&1&&(f=h+m-c),c&2&&(p=h+m-c)):c=0}else 2===m?3===c&&p===f?(Y("STRONG",f+1,2,h,2),c=1):c&2?(Y("STRONG",p,2,h,2),c-=2):(c+=2,p=h):"_"===d&&0<h&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(h-1))&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(h+
1))||(3===c&&p===f?(Y("EM",p+2,1,h,1),c=2):c&1?(Y("EM",f,1,h,1),--c):(++c,f=h))})}},Autoemail:{w:"@",x:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,s:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=X(1,"EMAIL",a[0][1],0);b.l("email",a[0][0]);a=X(2,"EMAIL",a[0][1]+a[0][0].length,0);A(b,a)})}},Autolink:{w:"://",x:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,s:1E4,z:"warn",r:function(a,b){b.forEach(function(a){for(var b=a[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,
"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;var e=X(1,"URL",a[0][1],0);e.l("url",b);a=X(2,"URL",a[0][1]+b.length,0);A(e,a)})}},Escaper:{w:"\\",x:/\\[-!#()*+.:@[\\\]^_`{}]/g,s:1E4,z:"warn",r:function(a,b){b.forEach(function(a){X(3,"ESC",a[0][1],a[0][0].length)})}},FancyPants:{r:function(a){function b(b,g,e,f){for(;k=g.exec(a);){var h=X(3,d,k.index+k[0].indexOf(b),1),m=X(3,d,k.index+k[0].length-1,1);h.l(c,e);m.l(c,f);h.K.push(m);h.B&&z(m)}}var c="char",d="FP",e=0<=a.indexOf("'"),
f=0<=a.indexOf('"'),g,k,m,h;if(e)for(g=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;k=g.exec(a);)tag=X(3,d,k.index+k[0].indexOf("'"),1),tag.l(c,"\u2019"),tag.o=10;if(e||f||0<=a.indexOf("x"))for(g=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;k=g.exec(a);)if(m=k.index+k[0].length-1,"x"===k[0].charAt(m)&&X(3,d,m,1).l(c,"\u00d7"),h=k[0].charAt(1),"'"===h||'"'===h)m=1+k.index,h="'s"===k[0].substr(1,2)?"\u2019":"'"===h?"\u2032":"\u2033",X(3,d,m,1).l(c,h);e&&b("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");f&&b('"',
/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");if(0<=a.indexOf("...")||0<=a.indexOf("--"))for(g=/---?|\.\.\./g;k=g.exec(a);)m=k.index,e=k[0].length,h={"--":"\u2013","---":"\u2014","...":"\u2026"}[k[0]],X(3,d,m,e).l(c,h);if(0<=a.indexOf("("))for(g=/\((?:c|r|tm)\)/gi;k=g.exec(a);)m=k.index,e=k[0].length,h={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"}[k[0].toLowerCase()],X(3,d,m,e).l(c,h)}},HTMLEntities:{w:"&",x:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,s:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=
a[0][0],e=aa(b);e!==b&&X(3,"HE",a[0][1],b.length).l("char",e)})}},HTMLElements:{w:"<",x:/<(?:\/((?:u|a(?:bbr)?|br?|code|del|em|hr|i(?:mg)?|s(?:(?:trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)))|((?:u|a(?:bbr)?|br?|code|del|em|hr|i(?:mg)?|s(?:(?:trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)))((?:\s+[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,s:1E4,z:"warn",r:function(a,b){var c={T:"html"};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),f=b[0][1],g=b[0][0].length,
k=b[2-e][0].toLowerCase(),m=c.u&&c.u[k]&&c.u[k][""]?c.u[k][""]:c.T+":"+k;if(e)X(2,m,f,g);else for(var e="/>"===b[0][0].substr(g-2)?Y(m,f,g,f+g,0):X(1,m,f,g),g=/[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,h;h=g.exec(b[3][0]);)f=h[0].indexOf("="),0>f&&(f=h[0].length,h[0]+="="+h[0].toLowerCase()),m=h[0].substr(0,f).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),f=h[0].substr(1+f).replace(/^\s+/,"").replace("/s+$/",""),c.u&&c.u[k]&&c.u[k][m]&&(m=c.u[k][m]),/^["']/.test(f)&&(f=f.substr(1,
f.length-2)),e.l(m,aa(f))})}},MediaEmbed:{w:":",x:/\b(?:spotify:|https?:\/\/(?:[-.\w]+\.)?(?:twitch\.tv|vi(?:meo\.com|ne\.co)|youtu(?:\.be|be\.com)|(?:bandcamp|dailymotion|facebook|grooveshark|liveleak|soundcloud|(?:open|play)\.spotify)\.com)\/)[^["'\s]+(?!\S)/g,s:1E4,z:"warn",r:function(a,b){b.forEach(function(a){var b=a[0][0];a=X(3,"MEDIA",a[0][1],b.length);a.l("url",b);a.o=-10})}}},Va,Wa,W,L,Z,Xa=1E3,$,V,Ya={c:[567],d:[1023],b:392};
function Za(a,b){var c=a.k;a.b&512&&(b=$a(b));A(X(2,c,b,0),a)}function $a(a){for(;a>V&&-1<" \n\t".indexOf(J.charAt(a-1));)--a;return a}function Ka(){V=0;Va={};Wa={};$=[];Z=null;W=Ya;W.A=!1;for(var a in I)Va[a]=0,Wa[a]=0;do{for(;S.length;)Ia||(S.sort(ab),Ia=!0),Z=S.pop(),W.b&16&&!ka(Z,$[$.length-1])&&!la(Z)||bb();$.forEach(function(a){Za(a,K)})}while(S.length);Oa()}
function bb(){if(!Z.B){var a=Z.m,b=Z.q;if(a+b>K)z(Z);else if(V>a){var c;if((c=Z.E)&&0<=$.indexOf(c))a=Math.max(0,a+b-V),a=X(2,c.k,V,a),A(a,c);else{if("i"===Z.k&&(c=a+b-V,0<c)){X(3,"i",V,c);return}z(Z)}}else if("i"===Z.k)Ua(Z);else if("br"===Z.k)W.b&128||(Pa(Z.m,0,!1),Q+="<br/>");else if("pb"===Z.k)Pa(Z.m,0,!0);else if(Z.n&1)if(c=Z,a=c.k,b=I[a],Wa[a]>=b.g)q(n,"err","Tag limit exceeded",{tag:c,tagName:a,tagLimit:b.g}),z(c);else{var d=c,e=I[d.k],f=!0;if(e.a){n.F=d;for(var g=0;g<e.a.length;++g)if(!e.a[g](d,
e)){f=!1;break}delete n.F}if(f){a:{d=c;if($.length&&(e=I[d.k],e.e.v&&(f=$[$.length-1],e.e.v[f.k]))){S.push(d);Za(f,d.m);d=!0;break a}d=!1}d||(Va[a]>=b.f?(q(n,"err","Nesting limit exceeded",{tag:c,tagName:a,nestingLimit:b.f}),z(c)):(b=I[a].h,W.c[b>>5]&1<<(b&31)?(c.b&1&&!c.y&&(a=new w(3,a,c.m,c.q),ma(a,B(c)),a.b=c.b,c=a),Qa(c),cb(c)):(q(n,"warn","Tag is not allowed in this context",{tag:c,tagName:a}),z(c))))}else z(c)}else db()}}
function db(){var a=Z;if(Va[a.k]){for(var b=[],c=$.length;0<=--c;){var d=$[c];if(ka(a,d))break;if(++L>Xa)throw"Fixing cost exceeded";b.push(d)}if(0>c)fa({tag:a});else{var e=L<Xa,f=[];b.forEach(function(b){var c=b.k;e&&(b.b&2?f.push(b):e=!1);var d=a.m;b.b&512&&(d=$a(d));c=new w(2,c,d,0);c.b=b.b;Qa(c);eb()});Qa(a);eb();if(b.length&&L<Xa){d=V;for(c=S.length;0<=--c&&++L<Xa;){var g=S[c];if(g.m>d||g.n&1)break;for(var k=b.length;0<=--k&&++L<Xa;)if(ka(g,b[k])){b.splice(k,1);f[k]&&f.splice(k,1);d=Math.max(d,
g.m+g.q);break}}d>V&&Ua(new w(3,"i",V,d-V))}f.forEach(function(a){var b=X(a.n,a.k,V,0);ma(b,B(a));b.o=a.o;(a=a.y)&&A(b,a)})}}}function eb(){var a=$.pop();--Va[a.k];W=W.S}function cb(a){function b(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=a[c]&b[c];return e}var c=a.k,d=a.b,e=I[c];++Wa[c];3!==a.n&&(++Va[c],$.push(a),a=b(e.c,e.c),d&64&&(a=b(a,W.c)),e=b(W.d,e.d),a=b(a,e),W.b&256&&(d|=256),d&256&&(d|=128),W={c:a,d:e,b:d,S:W})}var S,Ia;
function X(a,b,c,d){a=new w(a,b,c,d);I[b]&&(a.b=I[b].e.b);I[b]||la(a)?I[b]&&I[b].H?(q(n,"warn","Tag is disabled",{tag:a,tagName:b}),z(a)):0>d||0>c?z(a):(Ia&&S.length&&a.m>=S[S.length-1].m&&(Ia=!1),S.push(a)):z(a);return a}function Y(a,b,c,d,e){b=X(1,a,b,c);A(b,X(2,a,d,e));return b}function ab(a,b){var c=a.m,d=b.m;if(c!==d)return d-c;if(a.o!==b.o)return b.o-a.o;c=a.q;d=b.q;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.n]-c[a.n])}
function fb(a){return(new DOMParser).parseFromString(a,"text/xml")}var gb=new XSLTProcessor;gb.importStylesheet(fb('<?xml version="1.0" encoding="utf-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:template match="BANDCAMP"><iframe width="400" height="{120-78*boolean(@track_id|@track_num)}" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//bandcamp.com/EmbeddedPlayer/<xsl:choose><xsl:when test="@album_id">album=<xsl:value-of select="@album_id"/>/size=<xsl:choose><xsl:when test="@track_num">small/t=<xsl:value-of select="@track_num"/></xsl:when><xsl:otherwise>medium</xsl:otherwise></xsl:choose></xsl:when><xsl:otherwise>track=<xsl:value-of select="@track_id"/>/size=small</xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="C"><code class="inline"><xsl:apply-templates/></code></xsl:template><xsl:template match="CODE"><pre><code class="{@lang}"><xsl:apply-templates/></code></pre></xsl:template><xsl:template match="DAILYMOTION"><iframe width="560" height="315" src="//www.dailymotion.com/embed/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="DEL|html:del"><del><xsl:apply-templates/></del></xsl:template><xsl:template match="EM|html:em"><em><xsl:apply-templates/></em></xsl:template><xsl:template match="EMAIL"><a href="mailto:{@email}"><xsl:apply-templates/></a></xsl:template><xsl:template match="ESC"><xsl:value-of select="substring(.,2)"/></xsl:template><xsl:template match="FACEBOOK"><iframe width="560" height="315" src="https://www.facebook.com/video/embed?video_id={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="FP|HE"><xsl:value-of select="@char"/></xsl:template><xsl:template match="GROOVESHARK"><object type="application/x-shockwave-flash" typemustmatch="" width="250" height="{250-210*boolean(@songid)}" data="//grooveshark.com/{substring(\'songWw\',6-5*boolean(@songid),5)}idget.swf"><param name="allowfullscreen" value="true"/><param name="flashvars" value="playlistID={@playlistid}&amp;songID={@songid}"/><embed type="application/x-shockwave-flash" src="//grooveshark.com/{substring(\'songWw\',6-5*boolean(@songid),5)}idget.swf" width="250" height="{250-210*boolean(@songid)}" allowfullscreen="" flashvars="playlistID={@playlistid}&amp;songID={@songid}"/></object></xsl:template><xsl:template match="H1"><h1><xsl:apply-templates/></h1></xsl:template><xsl:template match="H2"><h2><xsl:apply-templates/></h2></xsl:template><xsl:template match="H3"><h3><xsl:apply-templates/></h3></xsl:template><xsl:template match="H4"><h4><xsl:apply-templates/></h4></xsl:template><xsl:template match="H5"><h5><xsl:apply-templates/></h5></xsl:template><xsl:template match="H6"><h6><xsl:apply-templates/></h6></xsl:template><xsl:template match="HR"><hr/></xsl:template><xsl:template match="IMG"><img alt="{@alt}" src="{@src}" title="{@title}"/></xsl:template><xsl:template match="LI"><li><xsl:apply-templates/></li></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:when test="contains(\'upperlowerdecim\',substring(@type,1,5))"><ol style="list-style-type:{@type}"><xsl:apply-templates/></ol></xsl:when><xsl:otherwise><ul style="list-style-type:{@type}"><xsl:apply-templates/></ul></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="LIVELEAK"><iframe width="640" height="360" src="http://www.liveleak.com/ll_embed?i={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:apply-templates/></blockquote></xsl:template><xsl:template match="SOUNDCLOUD"><iframe width="560" height="166" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://w.soundcloud.com/player/?url=<xsl:choose><xsl:when test="@secret_token and@playlist_id">https://api.soundcloud.com/playlists/<xsl:value-of select="@playlist_id"/>&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:when><xsl:when test="@secret_token and@track_id">https://api.soundcloud.com/tracks/<xsl:value-of select="@track_id"/>&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:when><xsl:otherwise><xsl:value-of select="@id"/><xsl:if test="@secret_token">&amp;secret_token=<xsl:value-of select="@secret_token"/></xsl:if></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="SPOTIFY"><iframe width="300" height="{380-300*(contains(@uri,\':track:\')orstarts-with(@path,\'track/\'))}" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://embed.spotify.com/?uri=<xsl:choose><xsl:when test="@uri"><xsl:value-of select="@uri"/></xsl:when><xsl:otherwise>spotify:<xsl:value-of select="translate(@path,\'/\',\':\')"/></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="STRONG|html:strong"><strong><xsl:apply-templates/></strong></xsl:template><xsl:template match="SUP|html:sup"><sup><xsl:apply-templates/></sup></xsl:template><xsl:template match="TWITCH"><object type="application/x-shockwave-flash" typemustmatch="" width="620" height="378" data="http://www.twitch.tv/widgets/{substring(\'archl\',5-4*boolean(@archive_id|@chapter_id),4)}ive_embed_player.swf"><param name="allowfullscreen" value="true"/><param name="flashvars"><xsl:attribute name="value">channel=<xsl:value-of select="@channel"/><xsl:if test="@archive_id">&amp;archive_id=<xsl:value-of select="@archive_id"/></xsl:if><xsl:if test="@chapter_id">&amp;chapter_id=<xsl:value-of select="@chapter_id"/></xsl:if>&amp;auto_play=false</xsl:attribute></param><embed type="application/x-shockwave-flash" width="620" height="378" src="http://www.twitch.tv/widgets/{substring(\'archl\',5-4*boolean(@archive_id|@chapter_id),4)}ive_embed_player.swf" allowfullscreen=""/></object></xsl:template><xsl:template match="URL"><a href="{@url}"><xsl:apply-templates/></a></xsl:template><xsl:template match="VIMEO"><iframe width="560" height="315" src="//player.vimeo.com/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="VINE"><iframe width="480" height="480" src="https://vine.co/v/{@id}/embed/simple" allowfullscreen="" frameborder="0" scrolling="no"/><script async="" src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"/></xsl:template><xsl:template match="YOUTUBE"><iframe width="560" height="315" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//www.youtube.com/embed/<xsl:value-of select="@id"/><xsl:if test="@list or@t">?<xsl:if test="@list">list=<xsl:value-of select="@list"/><xsl:if test="@t">&amp;</xsl:if></xsl:if><xsl:if test="@t">start=<xsl:value-of select="@t"/></xsl:if></xsl:if></xsl:attribute></iframe></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/><xsl:template match="html:a"><a><xsl:copy-of select="@href"/><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="html:abbr"><abbr><xsl:copy-of select="@title"/><xsl:apply-templates/></abbr></xsl:template><xsl:template match="html:b"><b><xsl:apply-templates/></b></xsl:template><xsl:template match="html:br"><br><xsl:apply-templates/></br></xsl:template><xsl:template match="html:code"><code><xsl:apply-templates/></code></xsl:template><xsl:template match="html:hr"><hr><xsl:apply-templates/></hr></xsl:template><xsl:template match="html:i"><i><xsl:apply-templates/></i></xsl:template><xsl:template match="html:img"><img><xsl:copy-of select="@alt"/><xsl:copy-of select="@src"/><xsl:copy-of select="@title"/><xsl:apply-templates/></img></xsl:template><xsl:template match="html:s"><s><xsl:apply-templates/></s></xsl:template><xsl:template match="html:sub"><sub><xsl:apply-templates/></sub></xsl:template><xsl:template match="html:table"><table><xsl:apply-templates/></table></xsl:template><xsl:template match="html:tbody"><tbody><xsl:apply-templates/></tbody></xsl:template><xsl:template match="html:td"><td><xsl:copy-of select="@colspan"/><xsl:copy-of select="@rowspan"/><xsl:apply-templates/></td></xsl:template><xsl:template match="html:tfoot"><tfoot><xsl:apply-templates/></tfoot></xsl:template><xsl:template match="html:th"><th><xsl:copy-of select="@colspan"/><xsl:copy-of select="@rowspan"/><xsl:copy-of select="@scope"/><xsl:apply-templates/></th></xsl:template><xsl:template match="html:thead"><thead><xsl:apply-templates/></thead></xsl:template><xsl:template match="html:tr"><tr><xsl:apply-templates/></tr></xsl:template><xsl:template match="html:u"><u><xsl:apply-templates/></u></xsl:template><xsl:template match="p"><p><xsl:apply-templates/></p></xsl:template></xsl:stylesheet>'));
function D(a,b){var c;a:{c=n;if(b.j){var d,e,f=B(a);for(d in f){var g=f[d];if(b.j[d]){if(e=b.j[d],e.a){c.l(d);for(var k=0;k<e.a.length;++k)if(g=e.a[k](g,d),!1===g){delete a.j[d];break}!1!==g&&a.l(d,g);delete c.D}}else delete a.j[d]}for(d in b.j)if(e=b.j[d],!(d in a.j)&&e.i){c=!1;break a}}else ma(a,{});c=!0}return c}function na(a){return/^[-\w+., ]+$/.test(a)?a:!1}function E(a){return ba(a)}function oa(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}
function pa(a){var b=ea.mediasites,c;if("media"in a.j)c=a.j.media,!("id"in a.j)&&"url"in a.j&&-1===a.j.url.indexOf("://")&&a.l("id",a.j.url);else if("url"in a.j){var d=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.j.url);if(d[1]&&b[d[1]+":"])c=b[d[1]+":"];else if(d[2]){d=d[2];do{if(b[d]){c=b[d];break}var e=d.indexOf(".");if(-1==e)break;d=d.substr(1+e)}while(""<d)}}c&&(b=a.y||a,d=a.m,c=X(3,c.toUpperCase(),d,b.m+b.q-d),ma(c,B(a)),c.o=a.o);return!1}function qa(){return!0}
function ra(a){a:{for(var b in B(a))if("url"!==b){a=!0;break a}a=!1}return a}function F(a){return l(a,/^(?:\d+)$/)}function G(a,b){return La(a,b)}function sa(a){return l(a,/^(?:[A-Za-z0-9]+)$/)}function H(a){return l(a,/^(?:[0-9]+)$/)}function ta(){return!0}function ua(a){return l(a,/^(?:[a-f_0-9]+)$/)}function xa(){return!0}
function va(a){return l(a,/^(?:https?:\/\/(?:(?:api\.soundcloud\.com\/(?:playlist|track)s\/\d+)|soundcloud\.com\/[^\/]+\/(?:sets\/)?[^\/]+)(?:(?:\?secret_token=|\/(?=s-))([-\w]+))?)$/)}function wa(a){return l(a,/^(?:[-\w]+)$/)}function ya(a){return l(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}function za(a){return l(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}function Ba(){return!0}function Aa(a){return l(a,/^(?:(?!m\/)\w+)$/)}function Da(a){return l(a,/^(?:[^\/]+)$/)}
window.s9e={TextFormatter:{disablePlugin:function(a){Ja[a]&&(Ja[a].H=!0)},enablePlugin:function(a){Ja[a]&&(Ja[a].H=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,e=b.childNodes,x=c.length,u=e.length,p,s,t=0,y=0;t<x&&t<u;){p=c[t];s=e[t];if(!d(p,s))break;++t}for(var v=Math.min(x-t,u-t);y<v;){p=c[x-(y+1)];s=e[u-(y+1)];if(!d(p,s))break;++y}p=f.createDocumentFragment();for(v=t;v<u-y;)s=e[v].cloneNode(!0),p.appendChild(s),++v;for(v=x-y;--v>=t;)a.removeChild(c[v]);y?a.insertBefore(p,a.childNodes[t]):
a.appendChild(p)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,u=d.length;0<=--u;){var p=d[u],s=p.namespaceURI,p=p.name;b.hasAttributeNS(s,p)||a.removeAttributeNS(s,p)}for(u=f;0<=--u;)d=e[u],s=d.namespaceURI,p=d.name,d=d.value,d!==a.getAttributeNS(s,p)&&a.setAttributeNS(s,p,d);c(a,b);return!0}var e=
Fa(a),e=fb(e),f=b.ownerDocument,e=f.importNode(gb.transformToFragment(e,f),!0);c(b,e)}}};
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		window.setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
</body>
</html>