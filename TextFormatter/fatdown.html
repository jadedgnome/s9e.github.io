<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Fatdown/JS Demo</title>
	<base href="http://s9e.github.io/TextFormatter/fatdown.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}
		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
		blockquote
		{
			background-color: #fff;
			border: solid 1px #ddd;
			border-left-width: 4px;
			padding-left: 1em;
		}
		p
		{
			margin: 0;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">The Fatdown bundle includes the following plugins:

 - **Autoemail** --- email addresses such as example@example.org are automatically turned into links
 - **Autolink** --- URLs such as http://github.com are automatically turned into links
 - **Escaper** --- special characters can be escaped with a backslash like \*this\*
 - **FancyPants** --- some typography is enhanced, e.g. (c) (tm) and "quotes"
 - **HTMLComments** --- you can use HTML comments <!-- like this one -->
 - **HTMLElements** --- several HTML elements such as <sub>sub</sub> and <sup>sup</sup> are allowed
 - **HTMLEntities** --- HTML entities such as &amp;hearts; are decoded
 - **Litedown** --- a Markdown*-like* syntax
 - **MediaEmbed** --- URLs from media sites are automatically embedded:  
   http://youtu.be/QH2-TGUlwu4

***

The parser/renderer used on this page page has been generated by [this script](https://github.com/s9e/TextFormatter/blob/master/scripts/generateFatdownDemo.php). It's been minified with Google Closure Compiler to 32.6 KB (12.5 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autoemail" checked="checked" onchange="toggle(this)"><label for="Autoemail">&nbsp;Autoemail</label><br><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="Escaper" checked="checked" onchange="toggle(this)"><label for="Escaper">&nbsp;Escaper</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLComments" checked="checked" onchange="toggle(this)"><label for="HTMLComments">&nbsp;HTMLComments</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="Litedown" checked="checked" onchange="toggle(this)"><label for="Litedown">&nbsp;Litedown</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var l=[ba],ea={b:l,g:10,e:{d:66},i:1E3,f:0,c:[0,0]},ia={b:[fa],p:!1},n={C:1,EM:1,STRONG:1,URL:1,EMAIL:1,"html:b":1,"html:code":1,"html:i":1,"html:strong":1,"html:u":1},ja={j:{lang:ia},b:l,g:10,e:{o:n,d:4436},i:1E3,f:1,c:[0,0]},ka=[65399,7936],la={b:l,g:10,e:{d:512},i:1E3,f:0,c:ka},p=[65393,7936],ma={b:l,g:10,e:{d:2},i:1E3,f:0,c:p},na={b:l,g:10,e:{o:n,d:260},i:1E3,f:2,c:p},oa=[65376,7936],pa={b:l,g:10,e:{o:n,d:3333},i:1E3,f:1,c:oa},q={p:!1},ra=[qa],ua={b:ra,p:!0},Aa={d:3073},Ba={j:{alt:q,src:ua,title:q},
b:l,g:10,e:Aa,i:1E3,f:0,c:oa},Ca={b:l,g:10,e:{o:n,w:{LI:1,"html:li":1},d:264},i:1E3,f:3,c:ka},Da={o:n,d:3460},Ea=[65352,7936],Fa={j:{type:ia},b:l,g:10,e:Da,i:1E3,f:1,c:Ea},Ga={o:n,d:268},Ha={b:l,g:10,e:Ga,i:1E3,f:1,c:ka},Ia={d:0},Ja={b:l,g:10,e:Ia,i:1E3,f:0,c:p},Ma={d:514},Na=[61287,7936],Oa={j:{title:q,url:ua},b:l,g:10,e:Ma,i:1E3,f:4,c:Na},Qa={j:{email:{b:[Pa],p:!0}},b:l,g:10,e:Ma,i:1E3,f:4,c:Na},Ra={p:!0},Sa={j:{"char":Ra},b:l,g:10,e:Aa,i:1E3,f:5,c:oa},t={d:3137},Ta={j:{content:Ra},b:l,g:10,e:t,
i:1E3,f:6,c:[0,0]},Ua={j:{title:q},b:l,g:10,e:Ia,i:1E3,f:0,c:p},Wa={d:3201},Xa=[65344,7936],Ya={b:l,g:10,e:Wa,i:1E3,f:0,c:Xa},Za={o:n,w:{"html:dd":1,"html:dt":1},d:256},$a={b:l,g:10,e:Za,i:1E3,f:7,c:ka},ab={"class":q},bb={j:ab,b:l,g:10,e:Ga,i:1E3,f:1,c:ka},cb={b:l,g:10,e:Da,i:1E3,f:1,c:[65472,7936]},db=[64371,7936],eb={b:l,g:10,e:Za,i:1E3,f:7,c:db},u={b:ra,p:!1},fb={j:{alt:q,height:q,src:u,title:q,width:q},b:l,g:10,e:Wa,i:1E3,f:0,c:Xa},gb={b:l,g:10,e:Da,i:1E3,f:1,c:Ea},hb={b:l,g:10,e:{o:n,d:276},
i:1E3,f:1,c:p},ib={o:n,w:{"html:rb":1,"html:rp":1,"html:rt":1,"html:rtc":1},d:256},jb={b:l,g:10,e:ib,i:1E3,f:8,c:p},kb={b:l,g:10,e:{o:n,w:{"html:rb":1,"html:rp":1,"html:rtc":1},d:256},i:1E3,f:8,c:p},lb={b:l,g:10,e:{o:n,w:{"html:rb":1,"html:rp":1,"html:rt":1},d:256},i:1E3,f:9,c:p},mb={b:l,g:10,e:ib,i:1E3,f:8,c:[65393,7938]},nb={b:l,g:10,e:Ia,i:1E3,f:0,c:[65393,7939]},ob={j:ab,b:l,g:10,e:Ia,i:1E3,f:0,c:p},pb={b:l,g:10,e:Da,i:1E3,f:1,c:[65344,7956]},qb=[65344,7952],rb={b:l,g:10,e:{o:n,w:{"html:tbody":1,
"html:tfoot":1,"html:thead":1},d:3456},i:1E3,f:10,c:qb},sb={o:n,w:{"html:td":1,"html:th":1},d:264},tb={j:{colspan:q,rowspan:q},b:l,g:10,e:sb,i:1E3,f:11,c:ka},ub={b:l,g:10,e:{o:n,w:{"html:tbody":1,"html:thead":1},d:3456},i:1E3,f:10,c:qb},vb={j:{colspan:q,rowspan:q,scope:q},b:l,g:10,e:sb,i:1E3,f:11,c:db},wb={b:l,g:10,e:{o:n,d:3456},i:1E3,f:10,c:qb},xb={b:l,g:10,e:{o:n,w:{"html:tr":1},d:3456},i:1E3,f:12,c:[65344,7944]},zb={b:[yb],g:10,e:{d:577},i:1E3,f:6,c:[0,0]},Bb=[Ab],v={b:Bb,p:!1},Gb={j:{url:u,album_id:v,
track_num:v,track_id:v},b:[Eb,ba,Fb],g:10,e:t,i:1E3,f:4,c:[0,0]},z=["","id"],Ib=[Hb,ba],Kb={j:{url:u,id:{b:[Jb],p:!0}},v:[["url",/dailymotion\.com\/(?:live\/|user\/[^#]+#video=|video\/)([A-Za-z0-9]+)/,z],["url",/^([A-Za-z0-9]+)$/,z]],b:Ib,g:10,e:t,i:1E3,f:4,c:[0,0]},Lb={url:u,id:{b:Bb,p:!0}},Mb=["url",/^(\d+)$/,z],Nb={j:Lb,v:[["url",/(?:m|www)\.facebook\.com\/(?:[\w\/]+\/permalink|(?!pages\/|groups\/).*?)(?:\/|fbid=|\?v=)(\d+)(?=$|[\/?&#])/,z],Mb],b:Ib,g:10,e:t,i:1E3,f:4,c:[0,0]},Pb={j:{url:u,id:{b:[Ob],
p:!0}},v:[["url",/liveleak\.com\/view\?i=([a-f_0-9]+)/,z],["url",/^([a-f_0-9]+)$/,z]],b:Ib,g:10,e:t,i:1E3,f:4,c:[0,0]},Sb={j:{url:u,playlist_id:v,id:{b:[Qb],p:!0},track_id:v},v:[["url",/(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\w\/]+\/[-\w\/]+|^[^\/]+\/[^\/]+$)/,z],["url",/api.soundcloud.com\/playlists\/(\d+)/,["","playlist_id"]],["url",/api.soundcloud.com\/tracks\/(\d+)/,["","track_id"]],["url",/^(https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\w\/]+\/[-\w\/]+|^[^\/]+\/[^\/]+$)$/,
z]],b:[Hb,Rb,ba],g:10,e:t,i:1E3,f:4,c:[0,0]},Vb={j:{url:u,uri:{b:[Tb],p:!1},path:{b:[Ub],p:!1}},v:[["url",/(spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)/,["","uri"]],["url",/(?:open|play)\.spotify\.com\/((?:album|artist|track|user)\/[\/\w]+)/,["","path"]]],b:[Hb,ba,Fb],g:10,e:t,i:1E3,f:4,c:[0,0]},Yb={j:{url:u,channel:{b:[Wb],p:!1},archive_id:v,chapter_id:v,video_id:v},v:[["url",/twitch\.tv\/((?!m\/)\w+)(?:\/b\/(\d+)|\/c\/(\d+)|\/v\/(\d+))?/,["","channel","archive_id","chapter_id","video_id"]]],
b:[Hb,Xb,ba,Fb],g:10,e:t,i:1E3,f:4,c:[0,0]},Zb={j:Lb,v:[["url",/vimeo\.com\/(?:channels\/[^\/]+\/|video\/)?(\d+)/,z],Mb],b:Ib,g:10,e:t,i:1E3,f:4,c:[0,0]},ac={j:{url:u,id:{b:[$b],p:!0}},v:[["url",/vine\.co\/v\/([^\/]+)/,z],["url",/^([^\/]+)$/,z]],b:Ib,g:10,e:t,i:1E3,f:4,c:[0,0]},cc=[bc],dc={j:{url:u,id:{b:cc,p:!0},h:v,m:v,s:v,t:v,list:{b:cc,p:!1}},v:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,z],["url",/youtu\.be\/([-\w]+)/,z],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s",
"t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,z]],b:Ib,g:10,e:t,i:1E3,f:4,c:[0,0]};function ec(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function fc(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function gc(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}
function hc(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function A(a,b){return b.test(a)?a:!1}
function ic(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function jc(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=hc(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+hc(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function kc(a,b){if(""!==b.scheme&&!a.N.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.P&&a.P.test(b.host)||a.V&&!a.V.test(b.host))return"URL host is not allowed"}}function lc(){}lc.prototype={n:function(){}};function mc(a,b,c,d){this.q=a;this.l=b;this.k=c;this.u=d;this.j={};this.G=[];isNaN(a+c+d)&&B(this)}mc.prototype.E=!1;mc.prototype.r=0;function nc(a,b){a.G.push(b);a.E&&B(b)}function B(a){a.E||(a.E=!0,a.G.forEach(function(a){B(a)}))}
function D(a,b){a.l===b.l&&(1===a.q&&2===b.q&&b.k>=a.k?(a.y=b,b.F=a,nc(a,b)):2===a.q&&1===b.q&&b.k<=a.k&&(a.F=b,b.y=a))}function oc(a){a.r=1E3}function pc(a){var b={},c;for(c in a.j)b[c]=a.j[c];return b}function qc(a,b){return a.E||a.l!==b.l||1!==b.q||2!==a.q||a.k<b.k||a.F&&a.F!==b||b.y&&b.y!==a?!1:!0}mc.prototype.n=function(a,b){this.j[a]=b};function rc(a,b){a.j={};for(var c in b)a.j[c]=b[c]}
var sc,tc,uc,E,vc,F,wc,xc=new lc,yc,J,K,zc={Litedown:{x:function(a){function b(a,c){D(M(2,"LIST",c,0),a.S);D(M(2,"LI",c,0),a.I);a.M&&a.J.forEach(function(a){a.d&=-9})}function c(a){a=a.replace(/[\\\x1A]/g,"");f&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")","\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]}));return a}function d(a){return a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",
'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]})}function e(){var c={};if(-1===a.indexOf("-")&&-1===a.indexOf("="))return c;for(var b,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;b=d.exec(a);){var e=b[0];b=b.index;for(var h=b-1;0<h&&" "===a[h-1];)--h;c[b-1]={Q:b+e.length-h,R:h,U:e.length-e.replace(/>/g,"").length,K:"="===e.charAt(0)?"H1":"H2"}}return c}function g(c,b){return/[ \t]*#*[ \t]*$/.exec(a.substr(c,
b-c))[0].length}function h(c,b){var d=a.indexOf(c);if(-1!==d)for(var e=0,d=a.indexOf("\u0017",d),h,f,g,k;f=b.exec(a);){var m=f.index,r=f[0].length;m>d&&(e=0,d=a.indexOf("\u0017",m));if(3<=r){var y=r;3>e?k=f=m:h<g?(k=m,f=m+2):(k=m+1,f=m,g===h&&(h+=2));e&2&&(N("STRONG",g,2,k,2),y-=2);e&1&&(N("EM",h,1,f,1),--y);y?(e=Math.min(y,3),e&1&&(h=m+r-e),e&2&&(g=m+r-e)):e=0}else 2===r?3===e&&g===h?(N("STRONG",h+1,2,m,2),e=1):e&2?(N("STRONG",g,2,m,2),e-=2):(e+=2,g=m):"_"===c&&0<m&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(m-
1))&&0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(m+1))||(3===e&&g===h?(N("EM",g+2,1,m,1),e=2):e&1?(N("EM",h,1,m,1),--e):(++e,h=m))}}function k(c,b){a=a.substr(0,c)+Array(1+b).join("\u001a")+a.substr(c+b)}var f,w,y,r,m;0>a.indexOf("\\")?f=!1:(f=!0,a=d(a));a+="\n\n\u0017";(function(){for(var c=[],d,h=4,f,V=!0,P=[],G=0,va=!1,Cb=[],wa=0,xa=e(),Q=0,ya,Z,sa,R,H,x,Va,Ka,ha,S,da,Db=[],ta,La=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+.*|~~~+.*)?)?/gm;ta=
La.exec(a);)Db.push(ta),ta.index===La.lastIndex&&++La.lastIndex;Db.forEach(function(e){var I=e.index,za=e[0].length;R=0;Z=!V;H=a.indexOf("\n",I);V=H===I+za&&!e[3]&&!e[4]&&!e[5];za||++La.lastIndex;ya=V&&Z;e[1]?(ha=e[1].length-e[1].replace(/>/g,"").length,R=e[1].length):ha=0;if(ha<wa&&!Z&&!V){va=!0;do D(M(2,"QUOTE",Q,0),Cb.pop());while(ha<--wa)}if(ha>wa&&!V){va=!0;do{var C=M(1,"QUOTE",I,0);C.r=wa;Cb.push(C)}while(ha>++wa)}var aa=C=0,W,ta;if(e[2]){W=e[2];ta=W.length;do" "===W.charAt(aa)?++C:C=C+4&-4;
while(++aa<ta&&C<h)}f&&!d&&C<h&&!V&&(va=!0);va&&(va=!1,f&&(k(f.k,Q-f.k),sa=M(2,"CODE",Q,0),D(sa,f),sa.r=-1,d=f=null),P.forEach(function(a){b(a,Q)}),P=[],G=0,I&&c.push(I-1));if(C>=h){if(f||!Z)R=(e[1]||"").length+aa,f||(f=M(1,"CODE",I+R,0)),e={}}else{W=!!e[4];if(C||Z||W||V)if(Z&&!W)x=G-1;else if(G)for(x=0;x<G&&C>P[x].L;)++x;else x=!Z&&W?0:-1;else x=-1;for(;x<G-1;)b(P.pop(),Q),--G;x!==G||W||--x;W&&0<=x&&(ya=!0,S=I+R+aa,da=e[4].length,aa=M(1,"LI",S,da),k(S,da),x<G?(D(M(2,"LI",Q,0),P[x].I),P[x].I=aa,P[x].J.push(aa)):
(++G,x?(Ka=P[x-1].L+1,Va=Math.max(Ka,4*x)):(Ka=0,Va=C),C=M(1,"LIST",S,0),-1<e[4].indexOf(".")&&C.n("type","decimal"),P.push({S:C,I:aa,J:[aa],W:Ka,L:Va,M:!0})));!G||Z||V||(1<P[0].J.length||!W)&&P.forEach(function(a){a.M=!1});h=4*(G+1)}if(e[5])if("#"===e[5].charAt(0))w=e[5].length,y=I+za-w,m=g(I+za,H),r=H-m,N("H"+/#{1,6}/.exec(e[5])[0].length,y,w,r,m),c.push(y),c.push(r),Z&&(ya=!0);else{if("`"===e[5].charAt(0)||"~"===e[5].charAt(0))S=I+R,da=H-S,f&&e[5].charAt(0)===d?(sa=M(2,"CODE",S,da),D(sa,f),sa.r=
-1,M(3,"i",Q,S-Q),k(f.k,S+da-f.k),d=f=null):f||(f=M(1,"CODE",S,da),d=e[5].charAt(0),M(3,"i",S+da,1),e=e[5].replace(/^[`~]*/,""),""!==e&&f.n("lang",e))}else e[3]&&!G?(M(3,"HR",I+R,za-R),ya=!0,k(H,1)):!xa[H]||xa[H].U!==ha||V||G||f||(N(xa[H].K,I+R,0,xa[H].R,xa[H].Q),k(H,1));ya&&(M(3,"pb",Q,0),c.push(Q));V||(Q=H);R&&oc(M(3,"i",I,R))});c.forEach(function(c){a=a.substr(0,c)+"\u0017"+a.substr(1+c)})})();(function(){if(-1!==a.indexOf("`"))for(var c,b=/(``?)[^\x17]*?[^`]\1(?!`)/g;c=b.exec(a);){var d=c.index,
e=c[0].length;c=c[1].length;N("C",d,c,d+e-c,c);k(d,e)}})();(function(){if(-1!==a.indexOf("!["))for(var b,d=/!\[([^\x17\]]*)] ?\(([^\x17 ")]+)(?: "([^\x17"]*)")?\)/g;b=d.exec(a);){var e=b.index,h=b[0].length,f=b[1].length,g=e,f=N("IMG",g,2,g+2+f,h-2-f);f.n("alt",c(b[1]));f.n("src",c(b[2]));""<b[3]&&f.n("title",c(b[3]));k(e,h)}})();(function(){if(-1!==a.indexOf("["))for(var b,d=/\[([^\x17\]]+)] ?\(([^\x17 ()]+(?:\([^\x17 ()]+\)[^\x17 ()]*)*[^\x17 )]*)(?: "(.*?)")?\)/g;b=d.exec(a);){var e=b[1].length,
h=b.index,f=h+1+e,e=b[0].length-1-e,g=N("URL",h,1,f,e);g.n("url",c(b[2]));""<b[3]&&g.n("title",c(b[3]));k(h,1);k(f,e)}})();(function(){if(-1!==a.indexOf("~~"))for(var c,b=/~~[^\x17]+?~~/g;c=b.exec(a);){var d=c.index;N("DEL",d,2,d+c[0].length-2,2)}})();(function(){if(-1!==a.indexOf("^"))for(var c,b=/\^[^\x17\s]+/g;c=b.exec(a);){var d=c[0],e=c=c.index,h=c+d.length,d=d.split("^");d.shift();d.forEach(function(a){N("SUP",e,1,h,0);e+=1+a.length})}})();h("*",/\*+/g);h("_",/_+/g);(function(){for(var c=a.indexOf("  \n");-1!==
c;)M(3,"br",c+2,0),c=a.indexOf("  \n",c+3)})()}},Autoemail:{z:"@",A:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,B:1E4,x:function(a,b){b.forEach(function(a){var b=M(1,"EMAIL",a[0][1],0);b.n("email",a[0][0]);a=M(2,"EMAIL",a[0][1]+a[0][0].length,0);D(b,a)})}},Autolink:{A:/(?:ftp|https?):\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,z:"://",B:1E4,x:function(a,b){b.forEach(function(c){var b=c[0][1];if(!(0<b&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(b-1)))){for(c=c[0][0];;)if(c=
c.replace(/[\s!"',.<>?]+$/,""),")"===c.substr(-1)&&c.replace(/[^(]+/g,"").length<c.replace(/[^)]+/g,"").length)c=c.substr(0,c.length-1);else break;if(/^www\.|^[^:]+:/i.test(c)){var e=M(2,"URL",b+c.length,0);"."===c.charAt(3)&&(c="http://"+c);b=M(1,"URL",b,0);b.n("url",c);D(b,e)}}})}},Escaper:{z:"\\",A:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,B:1E4,x:function(a,b){b.forEach(function(a){var b=M(3,"v",a[0][1]+1,a[0][0].length-1);b.d=0;b.r=-1E3;nc(M(3,"i",a[0][1],1),b)})}},FancyPants:{x:function(a){function b(a,
b,c){a=M(3,k.K,a,b);a.n(k.O,c);return a}function c(){for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])}function d(c,d,e,h){for(var f;f=d.exec(a);){var g=b(+f.index+f[0].indexOf(c),1,e);f=b(+f.index+f[0].length-1,1,h);nc(g,f)}}function e(a){for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019").r=10}function g(a){for(var c,d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);)if("x"===
d[0].charAt(d[0].length-1)&&b(+d.index+d[0].length-1,1,"\u00d7"),c=d[0].charAt(1),"'"===c||'"'===c)c="'s"===d[0].substr(1,2)?"\u2019":"'"===c?"\u2032":"\u2033",b(+d.index+1,1,c)}function h(){for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var k={O:"char",K:"FP"},f=0<=a.indexOf("'"),w=0<=a.indexOf('"');f&&e(a);(f||w||0<=a.indexOf("x"))&&g(a);f&&d("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");w&&d('"',/(?:^|\W)".+?"(?!\w)/g,
"\u201c","\u201d");(0<=a.indexOf("...")||0<=a.indexOf("--"))&&c();0<=a.indexOf("(")&&h()}},HTMLComments:{z:"\x3c!--",A:/\x3c!--(?!\[if)[\s\S]*?--\x3e/ig,B:1E4,x:function(a,b){b.forEach(function(a){var b=ec(a[0][0].substr(4,a[0][0].length-7)),b=b.replace(/[<>]/g,""),b=b.replace(/--/g,"");M(3,"HC",a[0][1],a[0][0].length).n("content",b)})}},HTMLEntities:{z:"&",A:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,B:1E4,x:function(a,b){b.forEach(function(a){var b=a[0][0],e=ec(b);e!==b&&M(3,"HE",a[0][1],b.length).n("char",
e)})}},HTMLElements:{z:"<",A:/<(?:\/((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))|((?:a(?:bbr)?|br?|code|d(?:[dlt]|el|iv)|em|hr|i(?:mg|ns)?|li|ol|pre|r(?:[bp]|tc?|uby)|s(?:(?:pan|trong|u[bp]))?|t(?:[dr]|able|body|foot|h(?:ead)?)|ul?))((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,B:1E4,x:function(a,b){var c={a:{"":"URL",href:"url"},hr:{"":"HR"},em:{"":"EM"},
s:{"":"S"},strong:{"":"STRONG"},sup:{"":"SUP"}};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),g=b[0][1],h=b[0][0].length,k=b[2-e][0].toLowerCase(),f=c&&c[k]&&c[k][""]?c[k][""]:"html:"+k;if(e)M(2,f,g,h);else{e="/>"===b[0][0].substr(h-2)?N(f,g,h,g+h,0):M(1,f,g,h);b=b[3][0];for(var g=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,w;f=g.exec(b);)w=f[0].indexOf("="),0>w&&(w=f[0].length,f[0]+="="+f[0].toLowerCase()),h=f[0].substr(0,w).toLowerCase().replace(/^\s+/,"").replace("/s+$/",
""),f=f[0].substr(1+w).replace(/^\s+/,"").replace("/s+$/",""),c&&c[k]&&c[k][h]&&(h=c[k][h]),/^["']/.test(f)&&(f=f.substr(1,f.length-2)),e.n(h,ec(f))}})}},MediaEmbed:{z:":",A:/\b(?:spotify:|https?:\/\/(?:[-.\w]+\.)?(?:twitch\.tv|vi(?:meo\.com|ne\.co)|youtu(?:\.be|be\.com)|(?:bandcamp|dailymotion|liveleak|soundcloud|www\.facebook|(?:open|play)\.spotify)\.com)\/)[^["'\s]+(?!\S)/g,B:1E4,x:function(a,b){b.forEach(function(a){var b=a[0][0];a=M(3,"MEDIA",a[0][1],b.length);a.n("url",b);a.r=-10})}}},O,Ac=
{urlConfig:{N:/^(?:ftp|https?)$/i},mediasites:{"bandcamp.com":"bandcamp","dailymotion.com":"dailymotion","www.facebook.com":"facebook","liveleak.com":"liveleak","soundcloud.com":"soundcloud","open.spotify.com":"spotify","play.spotify.com":"spotify","spotify:":"spotify","twitch.tv":"twitch","vimeo.com":"vimeo","vine.co":"vine","youtube.com":"youtube","youtu.be":"youtube"}},Bc={c:[65399,7936],d:8},T={C:ea,CODE:ja,DEL:la,EM:ma,H1:na,H2:na,H3:na,H4:na,H5:na,H6:na,HR:pa,IMG:Ba,LI:Ca,LIST:Fa,QUOTE:Ha,STRONG:ma,
SUP:Ja,URL:Oa,EMAIL:Qa,FP:Sa,HC:Ta,HE:Sa,"html:abbr":Ua,"html:b":ma,"html:br":Ya,"html:code":ea,"html:dd":$a,"html:del":la,"html:div":bb,"html:dl":cb,"html:dt":eb,"html:i":ma,"html:img":fb,"html:ins":la,"html:li":Ca,"html:ol":gb,"html:pre":hb,"html:rb":jb,"html:rp":kb,"html:rt":lb,"html:rtc":mb,"html:ruby":nb,"html:span":ob,"html:strong":ma,"html:sub":Ja,"html:sup":Ja,"html:table":pb,"html:tbody":rb,"html:td":tb,"html:tfoot":ub,"html:th":vb,"html:thead":wb,"html:tr":xb,"html:u":ma,"html:ul":gb,MEDIA:zb,
BANDCAMP:Gb,DAILYMOTION:Kb,FACEBOOK:Nb,LIVELEAK:Pb,SOUNDCLOUD:Sb,SPOTIFY:Vb,TWITCH:Yb,VIMEO:Zb,VINE:ac,YOUTUBE:dc},X,Cc,Y,Dc,Ec=0,Fc;
function Gc(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");tc={};uc={};sc=[];vc=0;F=null;wc=!1;yc={};J=[];K="";O=0;X=[];Cc=!0;Y=a;Dc=Y.length;Fc=0;E=Bc;E.D=!1;++Ec;a=Ec;for(var b in zc)if(!zc[b].H)a:{var c=b,d=zc[c];if(!(d.z&&0>Y.indexOf(d.z))){var e=[];if(d.A){e=d.A;d=d.B;e.lastIndex=0;for(var g=[],h=0,k=void 0;++h<=d&&(k=e.exec(Y));){for(var f=+k.index,w=[[k[0],f]],y=0;++y<k.length;){var r=k[y];void 0===r?w.push(["",-1]):(w.push([r,Y.indexOf(r,f)]),f+=r.length)}g.push(w)}e=
g;if(!e.length)break a}(0,zc[c].x)(Y,e)}}Hc();Ic();Jc(Dc,0,!0);do b=K,K=K.replace(/<(?!\/)[^>]+><\/[\w:]+>/g,"");while(K!==b);K=K.replace(/<\/i><i>/g,"",K);K=K.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kc);c=wc?"r":"t";b="<"+c;for(var m in yc)b+=" xmlns:"+m+'="urn:s9e:TextFormatter:'+m+'"';K=b+">"+K+"</"+c+">";if(Ec!==a)throw"The parser has been reset during execution";return K}function Ic(){sc.forEach(function(a){a.G=[];delete a.y;delete a.F});sc=[]}
function Lc(a,b){b.v&&b.v.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.j){var e=Mc(a.j[d],e,b),g;for(g in e)g!==d&&g in a.j||a.n(g,e[g])}});return!0}function Mc(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Kc(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Nc(a){wc=!0;var b=a.l,c=a.k,d=a.u,e=a.d,g=0,h=0;e&256&&(g=1,h=a.q&2?2:1);var k=!1;a.q&1?e&4&&(k=!0):k=!0;Jc(c,g,k);g=d?gc(Y.substr(c,d)):"";if(a.q&1){e&4||Oc(c);e=b.indexOf(":");0<e&&(yc[b.substr(0,e)]=0);K+="<"+b;var f=pc(a),e=[],w;for(w in f)e.push(w);e.sort(function(a,b){return a>b?1:-1});e.forEach(function(a){K+=" "+a+'="'+fc(f[a].toString())+'"'});K=3===a.q?d?K+(">"+g+"</"+b+">"):K+"/>":d?K+("><s>"+g+"</s>"):K+">"}else d&&(K+="<e>"+g+"</e>"),K+="</"+b+">";for(Fc=O=c+d;h&&Fc<Dc&&"\n"===
Y.charAt(Fc);)--h,++Fc}
function Jc(a,b,c){c&&(E.d&8?b=-1:c=!1);O>=a&&c&&Pc();if(Fc>O){var d=Math.min(a,Fc);K+=Y.substr(O,d-O);O=d;O>=a&&c&&Pc()}if(E.d&128)d=a-O,b=Y.substr(O,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),K+=b,O=a,c&&Pc();else{for(var e=a,d=0;b&&--e>=O;){var g=Y.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;if(E.d&8)for(E.D||(Qc(a),a>O&&Oc(a)),b=Y.indexOf("\n\n",O);-1<b&&b<a;)Jc(b,0,!0),Oc(a),b=Y.indexOf("\n\n",O);a>O&&(b=gc(Y.substr(O,a-O)),K+=b);c&&Pc();d&&(K+=Y.substr(a,d));O=a+d}}
function Rc(a){var b=a.k;a=a.u;var c=Y.substr(b,a);Jc(b,0,!1);K+="<i>"+gc(c)+"</i>";wc=!0;O=b+a}function Oc(a){!E.D&&E.d&8&&(Qc(a),O<Dc&&(K+="<p>",E.D=!0))}function Pc(){E.D&&(K+="</p>",E.D=!1)}function Qc(a){for(;O<a&&-1<" \n\t".indexOf(Y.charAt(O));)K+=Y.charAt(O),++O}function Sc(a,b){var c=a.l;a.d&256&&(b=Tc(b));D(M(2,c,b,0),a)}function Tc(a){for(;a>O&&-1<" \n\t".indexOf(Y.charAt(a-1));)--a;return a}
function Hc(){if(X.length){for(var a in T)tc[a]=0,uc[a]=0;do{for(;X.length;)Cc||(X.sort(Uc),Cc=!0),F=X.pop(),E.d&64&&!(qc(F,J[J.length-1])||-1<"br i pb v".indexOf(F.l))||Vc();J.forEach(function(a){Sc(a,Dc)})}while(X.length)}}
function Vc(){if(!F.E){var a=F.k,b=F.u;if(O>a){var c;if((c=F.F)&&0<=J.indexOf(c))a=Math.max(0,a+b-O),a=M(2,c.l,O,a),D(a,c);else{if("i"===F.l&&(c=a+b-O,0<c)){M(3,"i",O,c);return}B(F)}}else if("i"===F.l)Rc(F);else if("br"===F.l)E.d&1024||(Jc(F.k,0,!1),K+="<br/>");else if("pb"===F.l)Jc(F.k,0,!0);else if("v"===F.l)c=E.d,E.d=F.d,Jc(F.k+F.u,0,!1),E.d=c;else if(F.q&1)if(c=F,a=c.l,b=T[a],uc[a]>=b.i)B(c);else{var d=c,e=T[d.l],g=!0;if(e.b)for(var h=0;h<e.b.length;++h)if(!e.b[h](d,e)){g=!1;break}if(g){a:{d=
c;if(J.length&&(g=d.l,h=T[g],h.e.o)){var e=J[J.length-1],k=e.l;if(h.e.o[k]){k!==g&&1E3>vc&&(g=Wc(e,d.k+d.u),nc(d,g));++vc;X.push(d);Sc(e,d.k);d=!0;break a}}d=!1}if(!d)a:{d=c;if(J.length&&(e=T[d.l],e.e.w&&(g=J[J.length-1],e.e.w[g.l]))){X.push(d);Sc(g,d.k);d=!0;break a}d=!1}d||(tc[a]>=b.g?B(c):(b=T[a].f,E.c[b>>3]&1<<(b&7)?(!(c.d&1)||c.y||X.length&&qc(X[X.length-1],c)||(a=new mc(3,a,c.k,c.u),rc(a,pc(c)),a.d=c.d,c=a),c.d&4096&&!c.y&&"\n"===Y.charAt(c.k+c.u)&&M(3,"i",c.k+c.u,1),Nc(c),Xc(c)):B(c)))}else B(c)}else Yc()}}
function Yc(){var a=F;if(tc[a.l]){for(var b=[],c=J.length;0<=--c;){var d=J[c];if(qc(a,d))break;b.push(d);++vc}if(!(0>c)){var e=1E3>vc,g=[];b.forEach(function(b){var c=b.l;e&&(b.d&2?g.push(b):e=!1);var d=a.k;b.d&256&&(d=Tc(d));c=new mc(2,c,d,0);c.d=b.d;Nc(c);Zc()});Nc(a);Zc();if(b.length&&1E3>vc){d=O;for(c=X.length;0<=--c&&1E3>++vc;){var h=X[c];if(h.k>d||h.q&1)break;for(var k=b.length;0<=--k&&1E3>++vc;)if(qc(h,b[k])){b.splice(k,1);g[k]&&g.splice(k,1);d=Math.max(d,h.k+h.u);break}}d>O&&Rc(new mc(3,"i",
O,d-O))}g.forEach(function(a){var b=Wc(a,O);(a=a.y)&&D(b,a)})}}}function Zc(){var a=J.pop();--tc[a.l];E=E.T}function Xc(a){var b=a.l,c=a.d,d=T[b];++uc[b];if(3!==a.q){var e=[];c&512?E.c.forEach(function(a,b){e.push(d.c[b]&a)}):E.c.forEach(function(a,b){e.push(d.c[b]&(a&65280|a>>8))});c|=E.d&32;c&16&&(c&=-33);++tc[b];J.push(a);E={c:e,d:c,T:E}}}function Wc(a,b){var c=M(a.q,a.l,b,0);rc(c,pc(a));c.r=a.r;return c}
function M(a,b,c,d){a=new mc(a,b,c,d);sc.push(a);T[b]&&(a.d=T[b].e.d);T[b]||-1<"br i pb v".indexOf(a.l)?T[b]&&T[b].H?B(a):0>d||0>c||c+d>Dc?B(a):(Cc&&X.length&&a.k>=X[X.length-1].k&&(Cc=!1),X.push(a)):B(a);return a}function N(a,b,c,d,e){b=M(1,a,b,c);D(b,M(2,a,d,e));return b}function Uc(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.r!==b.r)return b.r-a.r;c=a.u;d=b.u;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.q]-c[a.q])}var $c="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function ad(a,b){if($c){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function bd(a,b){if($c){var c=b.createElement("div"),d=b.createDocumentFragment();cd.input=ad(a,"MSXML2.DOMDocument.6.0");cd.transform();for(c.innerHTML=cd.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(cd.transformToFragment(ad(a),b),!0)}
var cd,dd=ad('<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:template match="BANDCAMP"><iframe width="400" height="400" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//bandcamp.com/EmbeddedPlayer/size=large/minimal=true/<xsl:choose><xsl:when test="@album_id">album=<xsl:value-of select="@album_id"/><xsl:if test="@track_num">/t=<xsl:value-of select="@track_num"/></xsl:if></xsl:when><xsl:otherwise>track=<xsl:value-of select="@track_id"/></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="C"><code><xsl:apply-templates/></code></xsl:template><xsl:template match="CODE"><pre><code class="{@lang}"><xsl:apply-templates/></code></pre></xsl:template><xsl:template match="DAILYMOTION"><iframe width="560" height="315" src="//www.dailymotion.com/embed/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="DEL|EM|H1|H2|H3|H4|H5|H6|LI|STRONG|SUP|html:b|html:br|html:code|html:dd|html:del|html:dl|html:dt|html:i|html:ins|html:li|html:ol|html:pre|html:rb|html:rp|html:rt|html:rtc|html:ruby|html:strong|html:sub|html:sup|html:table|html:tbody|html:tfoot|html:thead|html:tr|html:u|html:ul|p"><xsl:element name="{translate(local-name(),\'DEGHILMNOPRSTU\',\'deghilmnoprstu\')}"><xsl:apply-templates/></xsl:element></xsl:template><xsl:template match="EMAIL"><a href="mailto:{@email}"><xsl:apply-templates/></a></xsl:template><xsl:template match="FACEBOOK"><iframe width="560" height="315" src="//s9e.github.io/iframe/facebook.min.html#{@id}" onload="var a=Math.random();window.addEventListener(\'message\',function(b){{if(b.data.id==a)style.height=b.data.height+\'px\'}});contentWindow.postMessage(\'s9e:\'+a,src.substr(0,src.indexOf(\'/\',8)))" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="FP|HE"><xsl:value-of select="@char"/></xsl:template><xsl:template match="HC"><xsl:comment><xsl:value-of select="@content"/></xsl:comment></xsl:template><xsl:template match="HR"><hr/></xsl:template><xsl:template match="IMG"><img src="{@src}"><xsl:copy-of select="@alt|@title"/></img></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:otherwise><ol><xsl:apply-templates/></ol></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="LIVELEAK"><iframe width="640" height="360" src="http://www.liveleak.com/ll_embed?i={@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:apply-templates/></blockquote></xsl:template><xsl:template match="SOUNDCLOUD"><iframe width="100%" style="max-width:900px" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="height"><xsl:choose><xsl:when test="@playlist_id">450</xsl:when><xsl:otherwise>166</xsl:otherwise></xsl:choose></xsl:attribute><xsl:attribute name="src">https://w.soundcloud.com/player/?url=<xsl:choose><xsl:when test="@playlist_id">https%3A//api.soundcloud.com/playlists/<xsl:value-of select="@playlist_id"/></xsl:when><xsl:when test="@track_id">https%3A//api.soundcloud.com/tracks/<xsl:value-of select="@track_id"/></xsl:when><xsl:otherwise><xsl:if test="not(contains(@id,\'://\'))">https%3A//soundcloud.com/</xsl:if><xsl:value-of select="@id"/></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="SPOTIFY"><iframe width="400" height="480" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">https://embed.spotify.com/?view=coverart&amp;uri=<xsl:choose><xsl:when test="@uri"><xsl:value-of select="@uri"/></xsl:when><xsl:otherwise>spotify:<xsl:value-of select="translate(@path,\'/\',\':\')"/></xsl:otherwise></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="TWITCH"><iframe width="620" height="378" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//s9e.github.io/iframe/twitch.min.html#channel=<xsl:value-of select="@channel"/><xsl:choose><xsl:when test="@archive_id">&amp;videoId=a<xsl:value-of select="@archive_id"/></xsl:when><xsl:when test="@chapter_id">&amp;videoId=c<xsl:value-of select="@chapter_id"/></xsl:when><xsl:when test="@video_id">&amp;videoId=v<xsl:value-of select="@video_id"/></xsl:when></xsl:choose></xsl:attribute></iframe></xsl:template><xsl:template match="URL"><a href="{@url}"><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="VIMEO"><iframe width="560" height="315" src="//player.vimeo.com/video/{@id}" allowfullscreen="" frameborder="0" scrolling="no"/></xsl:template><xsl:template match="VINE"><iframe width="480" height="480" src="https://vine.co/v/{@id}/embed/simple" allowfullscreen="" frameborder="0" scrolling="no"/><script async="" src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"/></xsl:template><xsl:template match="YOUTUBE"><iframe width="560" height="315" allowfullscreen="" frameborder="0" scrolling="no"><xsl:attribute name="src">//www.youtube.com/embed/<xsl:value-of select="@id"/><xsl:if test="@list">?list=<xsl:value-of select="@list"/></xsl:if><xsl:if test="@t or@m"><xsl:choose><xsl:when test="@list">&amp;</xsl:when><xsl:otherwise>?</xsl:otherwise></xsl:choose>start=<xsl:choose><xsl:when test="@t"><xsl:value-of select="@t"/></xsl:when><xsl:when test="@h"><xsl:value-of select="@h*3600+@m*60+@s"/></xsl:when><xsl:otherwise><xsl:value-of select="@m*60+@s"/></xsl:otherwise></xsl:choose></xsl:if></xsl:attribute></iframe></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/><xsl:template match="html:abbr"><abbr><xsl:copy-of select="@title"/><xsl:apply-templates/></abbr></xsl:template><xsl:template match="html:div"><div><xsl:copy-of select="@class"/><xsl:apply-templates/></div></xsl:template><xsl:template match="html:img"><img><xsl:copy-of select="@alt|@height|@src|@title|@width"/><xsl:apply-templates/></img></xsl:template><xsl:template match="html:span"><span><xsl:copy-of select="@class"/><xsl:apply-templates/></span></xsl:template><xsl:template match="html:td"><td><xsl:copy-of select="@colspan|@rowspan"/><xsl:apply-templates/></td></xsl:template><xsl:template match="html:th"><th><xsl:copy-of select="@colspan|@rowspan|@scope"/><xsl:apply-templates/></th></xsl:template></xsl:stylesheet>',"MSXML2.FreeThreadedDOMDocument.6.0");
if($c){var ed=new ActiveXObject("MSXML2.XSLTemplate.6.0");ed.stylesheet=dd;cd=ed.createProcessor()}else cd=new XSLTProcessor,cd.importStylesheet(dd);function bc(a){return A(a,/^(?:[-\w]+)$/)}function Qb(a){return A(a,/^(?:https?:\/\/(?:api\.)?soundcloud\.com\/(?!pages\/)[-\w\/]+\/[-\w\/]+|^[^\/]+\/[^\/]+$)$/)}function Hb(a,b){return Lc(a,b)}function Ob(a){return A(a,/^(?:[a-f_0-9]+)$/)}function Xb(){return!0}
function ba(a,b){var c;a:{c=xc;if(b.j){var d,e,g=pc(a);for(d in g){var h=g[d];if(b.j[d]){if(e=b.j[d],e.b){c.n(d);for(var k=0;k<e.b.length;++k)if(h=e.b[k](h,d),!1===h){delete a.j[d];break}!1!==h&&a.n(d,h)}}else delete a.j[d]}for(d in b.j)if(e=b.j[d],!(d in a.j)&&e.p){c=!1;break a}}else rc(a,{});c=!0}return c}function Ab(a){return A(a,/^(?:\d+)$/)}function qa(a){var b=Ac.urlConfig,c=xc,d=ic(a.replace(/^\s+/,"").replace(/\s+$/,""));kc(b,d)?(c&&(d.attrValue=a),a=!1):a=jc(d);return a}
function Ub(a){return A(a,/^(?:(?:album|artist|track|user)\/[\/\w]+)$/)}
function yb(a){var b=Ac.mediasites,c;if("media"in a.j)c=a.j.media,!("id"in a.j)&&"url"in a.j&&-1===a.j.url.indexOf("://")&&a.n("id",a.j.url);else if("url"in a.j){var d=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.j.url);if(d[1]&&b[d[1]+":"])c=b[d[1]+":"];else if(d[2]){d=d[2];do{if(b[d]){c=b[d];break}var e=d.indexOf(".");if(-1==e)break;d=d.substr(1+e)}while(""<d)}}c&&(b=a.y||a,d=a.k,c=M(3,c.toUpperCase(),d,b.k+b.u-d),rc(c,pc(a)),c.r=a.r);return!1}
function Fb(a){a:{for(var b in pc(a))if("url"!==b){a=!0;break a}a=!1}return a}function fa(a){return/^[-\w+., ]+$/.test(a)?a:!1}function Rb(){return!0}function Wb(a){return A(a,/^(?:(?!m\/)\w+)$/)}function Eb(){return!0}function Tb(a){return A(a,/^(?:spotify:(?:album|artist|user|track(?:set)?):[,:\w]+)$/)}function $b(a){return A(a,/^(?:[^\/]+)$/)}function Jb(a){return A(a,/^(?:[A-Za-z0-9]+)$/)}function Pa(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}
window.s9e={TextFormatter:{disablePlugin:function(a){zc[a]&&(zc[a].H=!0)},enablePlugin:function(a){zc[a]&&(zc[a].H=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,g=b.childNodes,y=c.length,r=g.length,m,L,U=0,ga=0;U<y&&U<r;){m=c[U];L=g[U];if(!d(m,L))break;++U}for(var ca=Math.min(y-U,r-U);ga<ca;){m=c[y-(ga+1)];L=g[r-(ga+1)];if(!d(m,L))break;++ga}m=e.createDocumentFragment();for(ca=U;ca<r-ga;)L=g[ca].cloneNode(!0),m.appendChild(L),++ca;for(ca=y-ga;--ca>=U;)a.removeChild(c[ca]);ga?a.insertBefore(m,
a.childNodes[U]):a.appendChild(m)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,g=e.length,r=d.length;0<=--r;){var m=d[r],L=m.namespaceURI,m=m.name;b.hasAttributeNS(L,m)||a.removeAttributeNS(L,m)}for(r=g;0<=--r;)d=e[r],L=d.namespaceURI,m=d.name,d=d.value,d!==a.getAttributeNS(L,m)&&a.setAttributeNS(L,
m,d);c(a,b);return!0}var e=b.ownerDocument,g=bd(Gc(a),e);c(b,g)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.3.2/punycode.min.js"></script>
</body>
</html>