<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="http://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right][youtube]http://www.youtube.com/watch?v=QH2-TGUlwu4[/youtube][/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter/tree/master/src/ title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as http://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][YOUTUBE][/C], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=http://softwaremaniacs.org/soft/highlight/en/]Highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

[hr]

The parser/renderer used on this page page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 20.5 KB (9.1 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked="checked" onchange="toggle(this)"><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var m=[0],n=[16190],aa=[16176],ba=[16186],ca=[14134],da=["","id"],ea={b:2},fa={b:514},ga={b:3073},ha={b:3137},p={p:!1},q={B:1,C:1,COLOR:1,I:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},ia={b:256,D:q};
function ja(a,b){var c;a:{c=ka;if(b.d){var d,e,g=t(a);for(d in g){var h=g[d];if(b.d[d]){if(e=b.d[d],e.c){c.r(d);for(var f=0;f<e.c.length;++f)if(h=e.c[f](h,d),!1===h){delete a.d[d];break}!1!==h&&a.r(d,h)}}else delete a.d[d]}for(d in b.d)if(e=b.d[d],!(d in a.d)&&e.p){c=!1;break a}}else u(a,{});c=!0}return c}
var v=[ja],la=[function(a){return w(a,/^[-\w]+$/)}],ra=[function(a){var b=ma.urlConfig,c=ka,d=oa(a.replace(/^\s+/,"").replace(/\s+$/,""));pa(b,d)?(c&&(d.attrValue=a),a=!1):a=qa(d);return a}],x={c:[function(a){return w(a,/^\d+$/)}],p:!1},sa={c:ra,p:!1},A={g:ba,k:1,c:v,l:10,j:ea,n:1E3},ta={g:aa,d:{"char":{p:!0}},k:4,c:v,l:10,j:ga,n:1E3},ua='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aB|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}">$b</xsl:element>$c$aC"><code class="inline">$b</code>$c$aCENSOR"><$g><$f$i@with">$d@with"/></$f><$e>****</$e></$g>$c$aCODE"><pre data-hljs="" data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs)hljs._hb(this)"><code class="{@lang}">$b</code></pre><script>if("undefined"!==typeof hljs)hljs._ha();else if("undefined"===typeof hljsLoading){hljsLoading=1;var a=document.getElementsByTagName("head")[0],e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css";a.appendChild(e);e=document.createElement("script");e.type="text/javascript";e.onload=function(){var d={},f=0;hljs._hb=function(b){b.removeAttribute("data-hljs");var c=b.innerHTML;c in d?b.innerHTML=d[c]:(7&lt;++f&amp;&amp;(d={},f=0),hljs.highlightBlock(b.firstChild),d[c]=b.innerHTML)};hljs._ha=function(){for(var b=document.querySelectorAll("pre[data-hljs]"),c=b.length;0&lt;c;)hljs._hb(b.item(--c))};hljs._ha()};e.async=!0;e.src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js";a.appendChild(e)}\x3c/script>$c$aCOLOR"><span$kcolor:{@color}">$b</span>$c$aE"><$g><$f$i.=\':)\'"><img src="s.png" alt=":)"/></$f><$e>$d."/></$e></$g>$c$aFLOAT"><div$kfloat:{@float}">$b</div>$c$aFP|HE">$d@char"/>$c$aHR"><hr/>$c$aLIST"><$g><$f$inot(@type)"><ul>$b</ul></$f><$f$istarts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol$k$j>$hstart"/>$b</ol></$f><$e><ul$k$j>$b</ul></$e></$g>$c$aPREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}">$b</a>$c$aQUOTE"><blockquote><xsl:if$inot(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if$i@author"><cite>$d@author"/> wrote:</cite></xsl:if>$b</div></blockquote>$c$aURL"><a href="{@url}">$htitle"/>$b</a>$c$aYOUTUBE"><iframe width="240" height="180" src="http://www.youtube.com/embed/{@id}" allowfullscreen=""/>$c$abr"><br/>$c$ae|i|s"/>$ahtml:a"><a>$hhref|@title"/>$b</a>$c</xsl:stylesheet>'.replace(/\$[a-k]/g,
function(a){return{$a:'<xsl:template match="',$b:"<xsl:apply-templates/>",$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:"xsl:otherwise",$f:"xsl:when",$g:"xsl:choose",$h:'<xsl:copy-of select="@',$i:' test="',$j:'list-style-type:{@type}"',$k:' style="'}[a]});function va(a){var b=document.createElement("b");va=function(a){b.innerHTML=a.replace(/</g,"&lt;");return b.textContent};return va(a)}
function wa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function xa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function ya(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function w(a,b){return b.test(a)?a:!1}
function oa(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function qa(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=ya(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+ya(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function pa(a,b){if(""!==b.scheme&&!a.T.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.W&&a.W.test(b.host)||a.Z&&!a.Z.test(b.host))return"URL host is not allowed"}}function za(){}za.prototype={r:function(){}};function B(a,b,c,d){this.o=a;this.f=b;this.e=c;this.q=d;this.d={};this.M=[];isNaN(a+c+d)&&E(this)}B.prototype.G=!1;B.prototype.u=0;function Aa(a,b){a.M.push(b);a.G&&E(b)}function E(a){a.G||(a.G=!0,a.M.forEach(function(a){E(a)}))}
function G(a,b){a.f===b.f&&(1===a.o&&2===b.o&&b.e>=a.e?(a.w=b,b.H=a,Aa(a,b)):2===a.o&&1===b.o&&b.e<=a.e&&(a.H=b,b.w=a))}function t(a){var b={},c;for(c in a.d)b[c]=a.d[c];return b}function Ba(a,b){return a.G||a.f!==b.f||1!==b.o||2!==a.o||a.e<b.e||a.H&&a.H!==b||b.w&&b.w!==a?!1:!0}B.prototype.r=function(a,b){this.d[a]=b};function u(a,b){a.d={};for(var c in b)a.d[c]=b[c]}
var Ca,H,Da,J,K,L,Ea,ka=new za,Fa,M,N,Q={Autolink:{v:function(a,b){b.forEach(function(b){var d=b[0][1];if(!(0<d&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(d-1)))){for(b=b[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;if(/^www\.|^[^:]+:/i.test(b)){var e=O(2,"URL",d+b.length,0);"."===b.charAt(3)&&(b="http://"+b);d=O(1,"URL",d,0);d.r("url",b);d.u=
1;G(d,e)}}})},y:"://",x:/https?:\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,z:1E4},BBCodes:{v:function(a,b){function c(){var a=O(3,r.F||y,D,l-D);u(a,k)}function d(){var a=O(1,r.F||y,D,l-D);u(a,k);return a}function e(){var b="[/"+y+z+"]",c=a.toUpperCase().indexOf(b,l);return 0>c?null:O(2,r.F||y,c,b.length)}function g(){var b=l,c;for(k={};l<na;)if(c=a.charAt(l),-1<" \n\t".indexOf(c))++l;else{if(-1<"/]".indexOf(c))break;var d=/^[-\w]*/.exec(a.substr(l,100))[0].length;if(d){c=a.substr(l,d).toLowerCase();l+=
d;if(l>=na)throw"";if("="!==a.charAt(l))continue}else if("="===c&&l===b)c=r.K||y.toLowerCase();else throw"";if(++l>=na)throw"";var d=k,e;if('"'===a.charAt(l)||"'"===a.charAt(l)){e=a.charAt(l);for(var h=l+1;;){l=a.indexOf(e,l+1);if(0>l)throw"";var g=0;do++g;while("\\"===a.charAt(l-g));if(g%2)break}e=a.substr(h,l-h).replace(/\\([\\'"])/g,"$1");++l}else{e=/[^\]\n]*?(?=\s*(?:\s\/)?\]|\s+[-\w]+=)/.exec(a.substr(l));if(!e)throw"";e=e[0];l+=e.length}d[c]=e}}function h(){z="";":"===a[l]&&(z=/^:\d*/.exec(a.substr(l))[0],
l+=z.length);if("/"===a.charAt(D+1))"]"===a.charAt(l)&&""===z&&(++l,O(2,r.F||y,D,l-D));else{g();if(r.R)for(var b in r.R)b in k||(k[b]=r.R[b]);if("]"===a.charAt(l)){++l;var h=[];r.J&&r.J.forEach(function(a){a in k||h.push(a)});var f=(b=z||r.$)||h.length?e():null;if(f)h.forEach(function(b){k[b]=a.substr(l,f.e-l)});else if(b)return;b=d();f&&G(b,f)}else"/]"===a.substr(l,2)&&(l+=2,c())}}var f={"*":{F:"LI"},B:[],C:[],CODE:{K:"lang"},COLOR:[],FLOAT:[],HR:[],I:[],LIST:{K:"type"},MEDIA:{J:["url"]},QUOTE:{K:"author"},
S:[],U:[],URL:{J:["url"]},YOUTUBE:{J:["url"],K:"url"}},k,r,y,z,l,D,na=a.length;b.forEach(function(a){y=a[1][0].toUpperCase();if(y in f){r=f[y];D=a[0][1];l=D+a[0][0].length;try{h()}catch(b){}}})},y:"[",x:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,z:1E4},Censor:{v:function(a,b){var c=[[/^apple$/i,"banana"]];b.forEach(function(a){var b=/^\W/.test(a[0][0])?1:0,g=a[0][0].substr(b);a=O(3,"CENSOR",a[0][1]+b,g.length);if(c)for(b=0;b<c.length;++b){var h=c[b][1];if(c[b][0].test(g)){a.r("with",h);break}}})},x:/(?:^|\W)apple(?!\w)/ig,
z:1E4},Emoticons:{v:function(a,b){b.forEach(function(a){O(3,"E",a[0][1],a[0][0].length)})},y:":)",x:/:\)/g,z:1E4},FancyPants:{v:function(a){function b(a,b,c){a=O(3,f.F,a,b);a.r(f.V,c);return a}function c(){for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])}function d(c,d,e,h){for(var g;g=d.exec(a);){var f=b(+g.index+g[0].indexOf(c),1,e);g=b(+g.index+g[0].length-1,1,h);Aa(f,g)}}function e(a){for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=
d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019").u=10}function g(a){for(var c,d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);)if("x"===d[0].charAt(d[0].length-1)&&b(+d.index+d[0].length-1,1,"\u00d7"),c=d[0].charAt(1),"'"===c||'"'===c)c="'s"===d[0].substr(1,2)?"\u2019":"'"===c?"\u2032":"\u2033",b(+d.index+1,1,c)}function h(){for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var f={V:"char",F:"FP"},
k=0<=a.indexOf("'"),r=0<=a.indexOf('"');k&&e(a);(k||r||0<=a.indexOf("x"))&&g(a);k&&d("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");r&&d('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(0<=a.indexOf("...")||0<=a.indexOf("--"))&&c();0<=a.indexOf("(")&&h()}},HTMLElements:{v:function(a,b){var c={Y:"html"};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),g=b[0][1],h=b[0][0].length,f=b[2-e][0].toLowerCase(),f=c.L&&c.L[f]&&c.L[f][""]?c.L[f][""]:c.Y+":"+f;if(e)O(2,f,g,h);else{e=/(<\S+|['"\s])\/>$/.test(b[0][0])?
Ga(f,g,h,g+h,0):O(1,f,g,h);b=b[3][0];for(var g=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,k;f=g.exec(b);)k=f[0].indexOf("="),0>k&&(k=f[0].length,f[0]+="="+f[0].toLowerCase()),h=f[0].substr(0,k).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),f=f[0].substr(1+k).replace(/^\s+/,"").replace("/s+$/",""),/^["']/.test(f)&&(f=f.substr(1,f.length-2)),e.r(h,va(f))}})},y:"<",x:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,z:1E4},
HTMLEntities:{v:function(a,b){b.forEach(function(a){var b=a[0][0],e=va(b);e===b||32>e.charCodeAt(0)||O(3,"HE",a[0][1],b.length).r("char",e)})},y:"&",x:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,z:1E4},MediaEmbed:{v:function(a,b){b.forEach(function(a){var b=a[0][0];a=O(3,"MEDIA",a[0][1],b.length);a.r("url",b);a.u=-10})},y:"://",x:/\bhttps?:\/\/[^["'\s]+/g,z:1E4},Preg:{v:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1],e=b[2];b=b[3];var g;for(d.lastIndex=
0;g=d.exec(a);){var h=g.index,f=g[0].length,k;if(e&&""!==g[e]){var r=a.indexOf(g[e],h),y=g[e].length,z=r-h;k=Ga(c,h,z,r+y,f-(z+y))}else k=O(3,c,h,f);b.forEach(function(a,b){a&&"undefined"!==typeof g[b]&&k.r(a,g[b])})}})}}},R,ma={mediasites:{"youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{T:/^https?$/i}},Ha={g:n,b:32},S={B:A,C:{g:m,k:1,c:v,l:10,j:{b:66},n:1E3},CENSOR:{g:m,d:{"with":p},k:4,c:v,l:10,j:ha,n:1E3},CODE:{g:m,d:{lang:{c:[function(a){return/^[-\w]+$/.test(a)?a:!1}],p:!1}},k:2,c:v,
l:10,j:{b:4432,D:q},n:1E3},COLOR:{g:ba,d:{color:{c:[function(a){return/^(?:#[0-9a-f]{3,6}|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|[a-z]+)$/i.test(a)?a:!1}],p:!0}},k:1,c:v,l:10,j:ea,n:1E3},E:{g:aa,k:1,c:v,l:10,j:ga,n:1E3},FLOAT:{g:n,d:{"float":{c:[function(a){return w(a,/^(?:left|none|right)$/i)}],p:!0}},k:2,c:v,l:10,j:ia,n:1E3},FP:ta,HE:ta,HR:{g:aa,k:2,c:v,l:10,j:{b:3329,D:q},n:1E3},I:A,LI:{g:n,k:0,c:v,l:10,j:{P:{LI:1},b:256,D:q},n:1E3},LIST:{g:[16161],d:{start:{c:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?
a:!1}],p:!1},type:{c:[function(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a},function(a){return/^[-\w+., ]+$/.test(a)?a:!1}],p:!1}},k:2,c:v,l:10,j:{b:3456,D:q},n:1E3},MEDIA:{g:m,k:5,c:[function(a){return function(a,c){function d(a,b){var c=a.w||a,d=a.e,c=O(3,b.toUpperCase(),d,c.e+c.q-d);u(c,t(a));c.u=a.u}return function(a,b){if("media"in a.d){var c=a.d.media.toLowerCase(),f;a:{for(f in b)if(b[f]===c){f=!0;break a}f=!1}f&&d(a,c)}else if("url"in
a.d){f=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.d.url);if(f[1]&&b[f[1]+":"])c=b[f[1]+":"];else if(f[2])a:{c=f[2];do{if(b[c]){c=b[c];break a}f=c.indexOf(".");if(0>f)break;c=c.substr(1+f)}while(""<c);c=!1}c&&d(a,c)}return!1}(a,c)}(a,ma.mediasites)}],l:10,j:{b:577},n:1E3},PREG_60D5AB76:{g:ca,d:{tag:{c:[function(a){return w(a,/^[a-z0-9]+$/i)}],p:!0}},k:3,c:v,l:10,j:fa,n:1E3},QUOTE:{g:n,d:{author:p},k:2,c:v,l:10,j:ia,n:1E3},S:A,U:A,URL:{g:ca,d:{title:p,url:{c:ra,p:!0}},k:3,c:v,l:10,j:fa,n:1E3},YOUTUBE:{g:m,
O:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,da],["url",/youtu\.be\/([-\w]+)/,da],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,da]],d:{h:x,id:{c:la,p:!0},list:{c:la,p:!1},m:x,s:x,t:x,url:sa},k:3,c:[function(a,b){return Ia(a,b)},ja],l:10,j:ha,n:1E3},"html:a":{g:ca,d:{href:sa,title:p},k:3,c:v,l:10,j:fa,n:1E3},"html:b":A},T,U,V,W,Ja=0,X;
function Ka(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");H={};Da={};Ca=[];K=0;L=null;Ea=!1;Fa={};M=[];N="";R=0;T=[];U=!0;V=a;W=V.length;X=0;J=Ha;J.Q=!1;++Ja;a=Ja;for(var b in Q)if(!Q[b].N)a:{var c=b,d=Q[c];if(!(d.y&&0>V.indexOf(d.y))){var e=[];if(d.x){e=d.x;d=d.z;e.lastIndex=0;for(var g=[],h=0,f=void 0;++h<=d&&(f=e.exec(V));){for(var k=+f.index,r=[[f[0],k]],y=0;++y<f.length;){var z=f[y];void 0===z?r.push(["",-1]):(r.push([z,V.indexOf(z,k)]),k+=z.length)}g.push(r)}e=
g;if(!e.length)break a}(0,Q[c].v)(V,e)}}La();Ma();Y(W,0,!0);do b=N,N=N.replace(/<([^ />]+)><\/\1>/g,"");while(N!==b);N=N.replace(/<\/i><i>/g,"",N);N=N.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Na);c=Ea?"r":"t";b="<"+c;for(var l in Fa)b+=" xmlns:"+l+'="urn:s9e:TextFormatter:'+l+'"';N=b+">"+N+"</"+c+">";if(Ja!==a)throw"The parser has been reset during execution";return N}function Ma(){Ca.forEach(function(a){a.M=[];delete a.w;delete a.H});Ca=[]}
function Ia(a,b){b.O&&b.O.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.d){var e=Oa(a.d[d],e,b),g;for(g in e)g!==d&&g in a.d||a.r(g,e[g])}});return!0}function Oa(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Na(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Pa(a){Ea=!0;var b=a.f,c=a.e,d=a.q,e=0,g=0;a.b&256&&(e=1,g=a.o&2?2:1);var h=!1;a.o&1||(h=!0);Y(c,e,h);e=d?xa(V.substr(c,d)):"";if(a.o&1){h=b.indexOf(":");0<h&&(Fa[b.substr(0,h)]=0);N+="<"+b;var f=t(a),h=[],k;for(k in f)h.push(k);h.sort(function(a,b){return a>b?1:-1});h.forEach(function(a){N+=" "+a+'="'+wa(f[a].toString())+'"'});N=3===a.o?d?N+(">"+e+"</"+b+">"):N+"/>":d?N+("><s>"+e+"</s>"):N+">"}else d&&(N+="<e>"+e+"</e>"),N+="</"+b+">";for(X=R=c+d;g&&X<W&&"\n"===V.charAt(X);)--g,++X}
function Y(a,b,c){c&&(J.b&8?b=-1:c=!1);R>=a&&c&&Qa();if(X>R){var d=Math.min(a,X);N+=V.substr(R,d-R);R=d;R>=a&&c&&Qa()}if(J.b&128)b=a-R,b=V.substr(R,b),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),N+=b,R=a,c&&Qa();else{for(var e=a,d=0;b&&--e>=R;){var g=V.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;a>R&&(b=xa(V.substr(R,a-R)),32===(J.b&2096)&&(b=b.replace(/\n/g,"<br/>\n")),N+=b);c&&Qa();d&&(N+=V.substr(a,d));R=a+d}}
function Ra(a){var b=a.e;a=a.q;var c=V.substr(b,a);Y(b,0,!1);N+="<i>"+xa(c)+"</i>";Ea=!0;R=b+a}function Qa(){J.Q&&(N+="</p>",J.Q=!1)}function Sa(a,b){var c=a.f;a.b&256&&(b=Ta(b));G(O(2,c,b,0),a)}function Ta(a){for(;a>R&&-1<" \n\t".indexOf(V.charAt(a-1));)--a;return a}function La(){if(T.length){for(var a in S)H[a]=0,Da[a]=0;do{for(;T.length;)U||(T.sort(Ua),U=!0),L=T.pop(),J.b&64&&!(Ba(L,M[M.length-1])||-1<"br i pb v".indexOf(L.f))||Va();M.forEach(function(a){Sa(a,W)})}while(T.length)}}
function Va(){if(!L.G){var a=L.e,b=L.q;if(R>a){var c;if((c=L.H)&&0<=M.indexOf(c))G(O(2,c.f,R,Math.max(0,a+b-R)),c);else{if("i"===L.f&&(a=a+b-R,0<a)){O(3,"i",R,Math.min(a,W-R));return}E(L)}}else if("i"===L.f)Ra(L);else if("br"===L.f)J.b&1024||(Y(L.e,0,!1),N+="<br/>");else if("pb"===L.f)Y(L.e,0,!0);else if("v"===L.f)a=J.b,J.b=L.b,Y(L.e+L.q,0,!1),J.b=a;else if(L.o&1)if(a=L,b=a.f,c=S[b],Da[b]>=c.n)E(a);else{var d=a,e=S[d.f],g=!0;if(e.c)for(var h=0;h<e.c.length;++h)if(!e.c[h](d,e)){g=!1;break}if(g){a:{d=
a;if(M.length&&(g=d.f,h=S[g],h.j.D)){var e=M[M.length-1],f=e.f;if(h.j.D[f]){f!==g&&1E3>K&&(g=Wa(e,d.e+d.q),Aa(d,g));++K;T.push(d);Sa(e,d.e);d=!0;break a}}d=!1}if(!d)a:{d=a;if(M.length&&(e=S[d.f],e.j.P&&(g=M[M.length-1],e.j.P[g.f]))){T.push(d);Sa(g,d.e);d=!0;break a}d=!1}d||(H[b]>=c.l?E(a):(c=S[b].k,J.g[c>>3]&1<<(c&7)?(!(a.b&1)||a.w||T.length&&Ba(T[T.length-1],a)||(b=new B(3,b,a.e,a.q),u(b,t(a)),b.b=a.b,a=b),a.b&4096&&!a.w&&"\n"===V.charAt(a.e+a.q)&&(b=a.e+a.q,O(3,"i",b,Math.min(1,W-b))),Pa(a),Xa(a)):
E(a)))}else E(a)}else Ya()}}
function Ya(){var a=L;if(H[a.f]){for(var b=[],c=M.length;0<=--c;){var d=M[c];if(Ba(a,d))break;b.push(d);++K}if(!(0>c)){var e=1E3>K,g=[];b.forEach(function(b){var c=b.f;e&&(b.b&2?g.push(b):e=!1);var d=a.e;b.b&256&&(d=Ta(d));c=new B(2,c,d,0);c.b=b.b;Pa(c);Za()});Pa(a);Za();if(b.length&&1E3>K){d=R;for(c=T.length;0<=--c&&1E3>++K;){var h=T[c];if(h.e>d||h.o&1)break;for(var f=b.length;0<=--f&&1E3>++K;)if(Ba(h,b[f])){b.splice(f,1);g[f]&&g.splice(f,1);d=Math.max(d,h.e+h.q);break}}d>R&&Ra(new B(3,"i",R,d-R))}g.forEach(function(a){var b=
Wa(a,R);(a=a.w)&&G(b,a)})}}}function Za(){var a=M.pop();--H[a.f];J=J.X}function Xa(a){var b=a.f,c=a.b,d=S[b];++Da[b];if(3!==a.o){var e=[];c&512?J.g.forEach(function(a,b){e.push(d.g[b]&a)}):J.g.forEach(function(a,b){e.push(d.g[b]&(a&65280|a>>8))});c|=J.b&32;c&16&&(c&=-33);++H[b];M.push(a);J={g:e,b:c,X:J}}}function Wa(a,b){var c=O(a.o,a.f,b,0);u(c,t(a));c.u=a.u;return c}
function O(a,b,c,d){a=new B(a,b,c,d);Ca.push(a);S[b]&&(a.b=S[b].j.b);S[b]||-1<"br i pb v".indexOf(a.f)?S[b]&&S[b].N?E(a):0>d||0>c||c+d>W?E(a):(U&&T.length&&a.e>=T[T.length-1].e&&(U=!1),T.push(a)):E(a);return a}function Ga(a,b,c,d,e){b=O(1,a,b,c);G(b,O(2,a,d,e));return b}function Ua(a,b){var c=a.e,d=b.e;if(c!==d)return d-c;if(a.u!==b.u)return b.u-a.u;c=a.q;d=b.q;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.o]-c[a.o])}var $a="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function ab(a,b){if($a){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function bb(a,b){if($a){var c=b.createElement("div"),d=b.createDocumentFragment();Z.input=ab(a,"MSXML2.DOMDocument.6.0");Z.transform();for(c.innerHTML=Z.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(Z.transformToFragment(ab(a),b),!0)}var Z,cb=ab(ua,"MSXML2.FreeThreadedDOMDocument.6.0");
if($a){var db=new ActiveXObject("MSXML2.XSLTemplate.6.0");db.stylesheet=cb;Z=db.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(cb);var eb={};
window.s9e={TextFormatter:{disablePlugin:function(a){Q[a]&&(Q[a].N=!0)},enablePlugin:function(a){Q[a]&&(Q[a].N=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,f=b.childNodes,g=c.length,h=f.length,k,P,C=0,I=0;C<g&&C<h;){k=c[C];P=f[C];if(!d(k,P))break;++C}for(var F=Math.min(g-C,h-C);I<F;){k=c[g-(I+1)];P=f[h-(I+1)];if(!d(k,P))break;++I}k=e.createDocumentFragment();for(F=C;F<h-I;)P=f[F].cloneNode(!0),k.appendChild(P),++F;for(F=g-I;--F>=C;)a.removeChild(c[F]);I?a.insertBefore(k,a.childNodes[C]):
a.appendChild(k)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,g=d.length;0<=--g;){var h=d[g],k=h.namespaceURI,h=h.name;b.hasAttributeNS(k,h)||a.removeAttributeNS(k,h)}for(g=f;0<=--g;)d=e[g],k=d.namespaceURI,h=d.name,d=d.value,d!==a.getAttributeNS(k,h)&&a.setAttributeNS(k,h,d);c(a,
b);return!0}for(var e=b.ownerDocument,g=bb(Ka(a),e),h=g.querySelectorAll("[data-s9e-livepreview-postprocess]"),f=h.length;0<=--f;){var k=h[f].getAttribute("data-s9e-livepreview-postprocess");eb[k]||(eb[k]=new Function(k));eb[k].call(h[f])}c(b,g)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.3.2/punycode.min.js"></script>
</body>
</html>