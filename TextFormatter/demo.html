<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="http://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right][youtube]http://www.youtube.com/watch?v=QH2-TGUlwu4[/youtube][/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter/tree/master/src/ title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as http://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][YOUTUBE][/C], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=http://softwaremaniacs.org/soft/highlight/en/]Highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]Generic[/b] --- the Generic plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

The parser/renderer used on this page page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 20.5 KB (8.5 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="Generic" checked="checked" onchange="toggle(this)"><label for="Generic">&nbsp;Generic</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">function aa(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function l(a,b){return b.test(a)?a:!1}
function ba(a){var b=ca.urlConfig,c=p,d=a.replace(/^\s+/,"").replace(/\s+$/,""),e=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(d),d=""<e[1]?e[1]:"",h=""<e[2]?e[2]:"",k=""<e[3]?e[3]:"",g=""<e[4]?e[4]:"",f=""<e[5]?e[5]:"",m=""<e[6]?e[6]:"",E=""<e[7]?e[7]:"",e=""<e[8]?e[8]:"",d=d.toLowerCase(),g=g.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(g)&&punycode&&
(g=punycode.toASCII(g));var n="";if(""!==d){if(!b.Y.test(d))return c&&q(c,"err","URL scheme is not allowed",{attrValue:a,scheme:d}),!1;n+=d+":"}if(""===g)if("file"===d)n+="//";else{if(""!==d)return!1}else{var n=n+"//",u;if(u=!/^(?=[a-z])[-a-z0-9]{0,62}[a-z0-9](?:\.(?=[a-z])[-a-z0-9]{0,62}[a-z0-9])*$/i.test(g)){a:{var y=g;if(/^\d+\.\d+\.\d+\.\d+$/.test(y)){u=4;for(y=y.split(".");0<=--u;)if("0"===y[u].charAt(0)||255<y[u]){u=!1;break a}u=!0}else u=!1}if(u=!u)u=g.replace(/^\[(.*)\]$/,"$1",g),u=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(u)&&
u)}if(u)return c&&q(c,"err","URL host is invalid",{attrValue:a,host:g}),!1;if(b.Z&&b.Z.test(g)||b.da&&!b.da.test(g))return c&&q(c,"err","URL host is not allowed",{attrValue:a,host:g}),!1;""!==h&&(n+=rawurlencode(decodeURIComponent(h)),""!==k&&(n+=":"+rawurlencode(decodeURIComponent(k))),n+="@");n+=g;""!==f&&(n+=":"+f)}a=m;""!==E&&(a+="?"+E);""!==e&&(a+="#"+e);n+=a.replace(/["'()<>[\]\x00-\x20\x7F]+/g,escape).replace(/[^\u0020-\u007E]+/g,encodeURIComponent);d||(n=n.replace(/^([^\/]*):/,"$1%3A",n));
return n}function r(){}r.prototype.N={};r.prototype.P=[];function q(a,b,c,d){d=d||{};"attrName"in d||!a.z||(d.attrName=a.z);"tag"in d||!a.M||(d.tag=a.M);a.N[b]&&a.N[b].forEach(function(a){a(c,d)});a.P.push([b,c,d])}r.prototype.get=function(){return this.P};r.prototype.on=function(a,b){this.N[a].push(b)};r.prototype.n=function(a){this.z=a};function da(a){q(p,"debug","Skipping end tag with no start tag",a)}
function t(a,b,c,d){this.p=a;this.g=b;this.k=c;this.u=d;this.d={};this.R=[];isNaN(a+c+d)&&v(this)}t.prototype.F=!1;t.prototype.q=0;function v(a){a.F||(a.F=!0,a.R.forEach(function(a){v(a)}))}function w(a,b){a.g===b.g&&(1===a.p&&2===b.p&&b.k>=a.k?(a.D=b,b.L=a):2===a.p&&1===b.p&&b.k<=a.k&&(a.L=b,b.D=a))}function z(a){var b={},c;for(c in a.d)b[c]=a.d[c];return b}function ea(a,b){return a.F||a.g!==b.g||1!==b.p||2!==a.p||a.k<b.k||a.L&&a.L!==b||b.D&&b.D!==a?!1:!0}
function fa(a){return"br"===a.g||"i"===a.g||"pb"===a.g}t.prototype.n=function(a,b){this.d[a]=b};function A(a,b){a.d={};for(var c in b)a.d[c]=b[c]}
var p=new r,ca={urlConfig:{Y:/^https?$/i},mediasites:{"youtube.com":"youtube","youtu.be":"youtube"}},D={B:{c:[C],j:10,h:{b:2},l:1E3,m:0,e:[51],f:[63]},I:{c:[C],j:10,h:{b:2},l:1E3,m:0,e:[51],f:[63]},U:{c:[C],j:10,h:{b:2},l:1E3,m:0,e:[51],f:[63]},S:{c:[C],j:10,h:{b:2},l:1E3,m:0,e:[51],f:[63]},URL:{d:{url:{c:[ga],o:1},title:{o:0}},c:[C],j:10,h:{b:66},l:1E3,m:1,e:[53],f:[61]},QUOTE:{d:{author:{o:0}},c:[C],j:10,h:{b:512},l:1E3,m:2,e:[55],f:[63]},LIST:{d:{type:{c:[ha,ia],o:0}},c:[C],j:10,h:{b:672},l:1E3,
m:2,e:[40],f:[63]},LI:{c:[C],j:10,h:{T:{LI:1},b:512},l:1E3,m:3,e:[55],f:[63]},C:{c:[C],j:10,h:{b:18},l:1E3,m:0,e:[0],f:[0]},COLOR:{d:{color:{c:[ja],o:1}},c:[C],j:10,h:{b:2},l:1E3,m:0,e:[51],f:[63]},FLOAT:{d:{"float":{c:[ka],o:1}},c:[C],j:10,h:{b:512},l:1E3,m:2,e:[55],f:[63]},CODE:{d:{lang:{c:[la],o:0}},c:[C],j:10,h:{b:912},l:1E3,m:2,e:[0],f:[0]},CENSOR:{d:{"with":{o:0}},c:[C],j:10,h:{b:145},l:1E3,m:4,e:[0],f:[0]},E:{c:[C],j:10,h:{b:129},l:1E3,m:0,e:[48],f:[63]},G60D5AB76:{d:{tag:{c:[ma],o:1}},c:[C],
j:10,h:{b:66},l:1E3,m:1,e:[53],f:[61]},"html:a":{d:{href:{c:[ga],o:0},title:{o:0}},c:[C],j:10,h:{b:66},l:1E3,m:1,e:[53],f:[61]},"html:b":{c:[C],j:10,h:{b:2},l:1E3,m:0,e:[51],f:[63]},HE:{d:{"char":{o:1}},c:[C],j:10,h:{b:129},l:1E3,m:4,e:[48],f:[63]},FP:{d:{"char":{o:1}},c:[C],j:10,h:{b:129},l:1E3,m:4,e:[48],f:[63]},MEDIA:{c:[na],j:10,h:{b:81},l:1E3,m:5,e:[0],f:[0]},YOUTUBE:{d:{url:{c:[ga],o:0},id:{c:[oa],o:1},t:{c:[pa],o:0},list:{c:[oa],o:0}},Q:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,["",
"id"]],["url",/youtu\.be\/([-\w]+)/,["","id"]],["url",/[#&?]t=(\d+)/,["","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,["","id"]]],c:[qa,C],j:10,h:{b:145},l:1E3,m:1,e:[0],f:[0]}},F,H,ra=0;
function sa(a){a=a.replace(/\r\n?/g,"\n",a);a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"",a);var b=p;b.P=[];delete b.z;delete b.M;I=0;K=!1;ta={};L="";F=a;H=F.length;N=[];O=!0;P=0;++ra;a=ra;for(var c in Q)if(b=Q[c],!(b.O||b.x&&0>F.indexOf(b.x))){var d=[];if(b.v){var d=b.v,e=[],h=void 0;for(d.lastIndex=0;h=d.exec(F);){for(var k=+h.index,g=[[h[0],k]],f=0;++f<h.length;){var m=h[f];void 0===m?g.push(["",-1]):(g.push([m,F.indexOf(m,k)]),k+=m.length)}e.push(g)}d=e;e=d.length;if(!e)continue;e>b.s&&(d=d.slice(0,
b.s),e={pluginName:c,limit:b.s},"warn"===b.y&&q(p,"warn","Regexp limit exceeded. Only the allowed number of matches will be processed",e))}b.r(F,d)}ua();if(ra!==a)throw"The parser has been reset during execution";return L}function va(a,b){b.Q&&b.Q.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.d){var h;(h=e.exec(a.d[d]))&&b.forEach(function(b,c){if(""!==b&&"string"===typeof h[c]){var e=h[c];b!==d&&b in a.d||a.n(b,e)}})}});return!0}var K,ta,L,P;
function wa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function xa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function ya(){var a;R(H,0,!0);do a=L,L=L.replace(/<((?:\w+:)?\w+)[^>]*><\/\1>/g,"");while(L!==a);L=L.replace(/<\/i><i>/g,"",L);var b=K?"r":"t";a="<"+b;for(var c in ta)a+=" xmlns:"+c+'="urn:s9e:TextFormatter:'+c+'"';L=a+">"+L+"</"+b+">"}
function za(a){K=!0;var b=a.g,c=a.k,d=a.u,e=0,h=0;a.b&512&&(e=a.p&1?2:1,h=a.p&2?2:1);var k=!1;a.p&1||(k=!0);R(c,e,k);e=d?xa(F.substr(c,d)):"";if(a.p&1){k=b.indexOf(":");0<k&&(ta[b.substr(0,k)]=0);L+="<"+b;var g=z(a),k=[],f;for(f in g)k.push([f]);k.sort(function(a,b){return a>b?1:-1});k.forEach(function(a){L+=" "+a+'="'+wa(g[a].toString())+'"'});L=3===a.p?d?L+(">"+e+"</"+b+">"):L+"/>":d?L+("><s>"+e+"</s>"):L+">"}else d&&(L+="<e>"+e+"</e>"),L+="</"+b+">";for(P=S=c+d;h&&P<H&&"\n"===F.charAt(P);)--h,
++P}function R(a,b,c){c&&(T.b&8?b=-1:c=!1);S>=a&&c&&U();if(P>S){var d=Math.min(a,P);L+=F.substr(S,d-S);S=d;S>=a&&c&&U()}if(T.b&32)b=a-S,b=F.substr(S,b),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),L+=b,S=a,c&&U();else{for(var e=a,d=0;b&&--e>=S;){var h=F.charAt(e);if(" "!==h&&"\n"!==h&&"\t"!==h)break;"\n"===h&&--b;++d}a-=d;a>S&&(b=xa(F.substr(S,a-S)),T.b&128||(b=b.replace(/\n/g,"<br/>\n")),L+=b);c&&U();d&&(L+=F.substr(a,d));S=a+d}}
function Aa(a){var b=a.k;a=a.u;var c=F.substr(b,a);R(b,0,!1);L+="<i>"+xa(c)+"</i>";K=!0;S=b+a}function U(){T.V&&(L+="</p>",T.V=!1)}
var Q={BBCodes:{x:"[",v:/\[\/?([*BIS]|C(?:O(?:DE|LOR))?|FLOAT|LIST|MEDIA|QUOTE|U(?:RL)?|YOUTUBE)(?=[\] =:\/])/ig,s:1E4,y:"warn",r:function(a,b){var c={B:{},I:{},U:{},S:{},URL:{H:["url"]},QUOTE:{J:"author"},LIST:{J:"type"},"*":{G:"LI"},C:{},COLOR:{},FLOAT:{},CODE:{J:"lang"},MEDIA:{H:["url"]},YOUTUBE:{H:["url"],J:"url"}};b.forEach(function(b){var e=b[1][0].toUpperCase(),h=c[e]||{},k=h.G||e,g=b[0][1],f=g+b[0][0].length;":"===a.charAt(f)?(b=/^:\d*/.exec(a.substr(f))[0],f+=b.length):b="";if("/"===a.charAt(g+
1))"]"===a.charAt(f)&&""===b&&V(2,k,g,1+f-g);else{var m=1,E={},n=!1,u=f,y,s;if(h.W)for(y in h.W)E[y]=h.W[y];for(;f<H;)if(s=a.charAt(f)," "===s)++f;else{if("]"===s||"/"===s){if("/"===s&&(m=3,++f,f===H||"]"!==a.charAt(f)))return;n=!0;++f;break}var M=/^[-\w]*/.exec(a.substr(f))[0].length;if(M){if(f+M>=H)return;y=a.substr(f,M).toLowerCase();f+=M;if("="!==a.charAt(f))continue}else if("="===s&&f===u)y=h.J||e.toLowerCase();else return;if(++f>=H)return;s=a.charAt(f);if('"'===s||"'"===s){for(M=f+1;;){++f;
f=a.indexOf(s,f);if(0>f)return;for(var J=0;"\\"===a.charAt(f-++J););if(J%2)break}s=a.substr(M,f-M).replace(/\\([\\'"])/g,"$1");++f}else{s=/[^\]]*?(?=\s*(?: \/)?\]|\s+[-\w]+=)/.exec(a.substr(f));if(!s)continue;s=s[0];f+=s.length}E[y]=s}if(n){if(1===m){var x=[];h.H&&h.H.forEach(function(a){a in E||x.push(a)});var G;if(x.length||b||h.$){s="[/"+e+b+"]";var B=a.toUpperCase().indexOf(s,f);if(0>B){if(b||h.$)return}else x.forEach(function(b){E[b]=a.substr(f,B-f)}),G=V(2,k,B,s.length)}e=V(1,k,g,f-g);G&&w(e,
G)}else e=V(3,k,g,f-g);A(e,E)}}})}},Censor:{v:/(?:^|\W)apple(?!\w)/gi,s:1E4,y:"warn",r:function(a,b){var c={z:"with",G:"CENSOR",K:[[/^apple$/i,"banana"]]},d=c.G,e=c.z;b.forEach(function(a){if(!c.X||!c.X.test(a[0][0])){var b=/^\W/.test(a[0][0])?1:0,g=a[0][0].substr(b);a=V(3,d,a[0][1]+b,g.length);if(c.K)for(b=0;b<c.K.length;++b){var f=c.K[b][1];if(c.K[b][0].test(g)){a.n(e,f);break}}}})}},Emoticons:{x:":)",v:/:\)/g,s:1E4,y:"warn",r:function(a,b){var c={G:"E"};b.forEach(function(b){c.aa&&b[0][1]&&c.aa.test(a.charAt(b[0][1]-
1))||V(3,c.G,b[0][1],b[0][0].length)})}},Generic:{r:function(a){[["G60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1],e=b[2];b=b[3];var h;for(d.lastIndex=0;h=d.exec(a);){var k=h.index,g=h[0].length,f;if(e&&""!==h[e]){var m=a.indexOf(h[e],k),E=h[e].length,n=m-k;f=Ba(c,k,n,m+E,g-(n+E))}else f=V(3,c,k,g);b.forEach(function(a,b){a&&f.n(a,h[b])})}})}},HTMLElements:{x:"<",v:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,
s:1E4,y:"warn",r:function(a,b){var c={ca:"html"};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),h=b[0][1],k=b[0][0].length,g=b[2-e][0].toLowerCase(),f=c.w&&c.w[g]&&c.w[g][""]?c.w[g][""]:c.ca+":"+g;if(e)V(2,f,h,k);else for(var e="/>"===b[0][0].substr(k-2)?Ba(f,h,k,h+k,0):V(1,f,h,k),k=/[a-z][-a-z]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,m;m=k.exec(b[3][0]);)h=m[0].indexOf("="),0>h&&(h=m[0].length,m[0]+="="+m[0].toLowerCase()),f=m[0].substr(0,h).toLowerCase().replace(/^\s+/,"").replace("/s+$/",
""),h=m[0].substr(1+h).replace(/^\s+/,"").replace("/s+$/",""),c.w&&c.w[g]&&c.w[g][f]&&(f=c.w[g][f]),/^["']/.test(h)&&(h=h.substr(1,h.length-2)),e.n(f,aa(h))})}},Autolink:{x:"://",v:/https?:\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,s:1E4,y:"warn",r:function(a,b){b.forEach(function(a){for(var b=a[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,"").length<b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;var e=V(1,"URL",a[0][1],0);e.n("url",b);a=V(2,"URL",
a[0][1]+b.length,0);w(e,a)})}},HTMLEntities:{x:"&",v:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,s:1E4,y:"warn",r:function(a,b){b.forEach(function(a){var b=a[0][0],e=aa(b);e!==b&&V(3,"HE",a[0][1],b.length).n("char",e)})}},FancyPants:{r:function(a){function b(b,e,f,h){for(;g=e.exec(a);){var k=V(3,d,g.index+g[0].indexOf(b),1),m=V(3,d,g.index+g[0].length-1,1);k.n(c,f);m.n(c,h);k.R.push(m);k.F&&v(m)}}var c="char",d="FP",e=0<=a.indexOf("'"),h=0<=a.indexOf('"'),k,g,f,m;if(e)for(k=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;g=
k.exec(a);)tag=V(3,d,g.index+g[0].indexOf("'"),1),tag.n(c,"\u2019"),tag.q=10;if(e||h||0<=a.indexOf("x"))for(k=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;g=k.exec(a);)if(f=g.index+g[0].length-1,"x"===g[0].charAt(f)&&V(3,d,f,1).n(c,"\u00d7"),m=g[0].charAt(1),"'"===m||'"'===m)f=1+g.index,m="'s"===g[0].substr(1,2)?"\u2019":"'"===m?"\u2032":"\u2033",V(3,d,f,1).n(c,m);e&&b("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");h&&b('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");if(0<=a.indexOf("...")||0<=a.indexOf("--"))for(k=
/---?|\.\.\./g;g=k.exec(a);)f=g.index,e=g[0].length,m={"--":"\u2013","---":"\u2014","...":"\u2026"}[g[0]],V(3,d,f,e).n(c,m);if(0<=a.indexOf("("))for(k=/\((?:c|r|tm)\)/gi;g=k.exec(a);)f=g.index,e=g[0].length,m={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"}[g[0].toLowerCase()],V(3,d,f,e).n(c,m)}},MediaEmbed:{x:"://",v:/\bhttps?:\/\/(?:[-.\w]+\.)?youtu(?:\.be|be\.com)\/[^["'\s]+(?!\S)/g,s:1E4,y:"warn",r:function(a,b){b.forEach(function(a){var b=a[0][0];a=V(3,"MEDIA",a[0][1],b.length);a.n("url",b);a.q=
-10})}}},W,X,T,I,Y,Z=1E3,$,S,Ca={e:[55],f:[63],b:0};function Da(a,b){var c=a.g;a.b&512&&(b=Ea(b));w(V(2,c,b,0),a)}function Ea(a){for(;a>S&&-1<" \n\t".indexOf(F.charAt(a-1));)--a;return a}function ua(){S=0;W={};X={};$=[];Y=null;T=Ca;T.V=!1;for(var a in D)W[a]=0,X[a]=0;do{for(;N.length;)O||(N.sort(Fa),O=!0),Y=N.pop(),T.b&16&&!ea(Y,$[$.length-1])&&!fa(Y)||Ga();$.forEach(function(a){Da(a,H)})}while(N.length);ya()}
function Ga(){if(!Y.F){var a=Y.k,b=Y.u;if(a+b>H)v(Y);else if(S>a){var c;if((c=Y.L)&&0<=$.indexOf(c))a=Math.max(0,a+b-S),a=V(2,c.g,S,a),w(a,c);else{if("i"===Y.g&&(c=a+b-S,0<c)){V(3,"i",S,c);return}v(Y)}}else if("i"===Y.g)Aa(Y);else if("br"===Y.g)T.b&128||(R(Y.k,0,!1),L+="<br/>");else if("pb"===Y.g)R(Y.k,0,!0);else if(Y.p&1)if(c=Y,a=c.g,b=D[a],X[a]>=b.l)q(p,"err","Tag limit exceeded",{tag:c,tagName:a,tagLimit:b.l}),v(c);else{var d=c,e=D[d.g],h=!0;if(e.c){p.M=d;for(var k=0;k<e.c.length;++k)if(!e.c[k](d,
e)){h=!1;break}delete p.M}if(h){a:{d=c;if($.length&&(e=D[d.g],e.h.T&&(h=$[$.length-1],e.h.T[h.g]))){N.push(d);Da(h,d.k);d=!0;break a}d=!1}d||(W[a]>=b.j?(q(p,"err","Nesting limit exceeded",{tag:c,tagName:a,nestingLimit:b.j}),v(c)):(b=D[a].m,T.e[b>>5]&1<<(b&31)?(c.b&1&&!c.D&&(a=new t(3,a,c.k,c.u),A(a,z(c)),a.b=c.b,c=a),za(c),Ha(c)):(q(p,"warn","Tag is not allowed in this context",{tag:c,tagName:a}),v(c))))}else v(c)}else Ia()}}
function Ia(){var a=Y;if(W[a.g]){for(var b=[],c=$.length;0<=--c;){var d=$[c];if(ea(a,d))break;if(++I>Z)throw"Fixing cost exceeded";b.push(d)}if(0>c)da({tag:a});else{var e=I<Z,h=[];b.forEach(function(b){var c=b.g;e&&(b.b&2?h.push(b):e=!1);var d=a.k;b.b&512&&(d=Ea(d));c=new t(2,c,d,0);c.b=b.b;za(c);Ja()});za(a);Ja();if(b.length&&I<Z){d=S;for(c=N.length;0<=--c&&++I<Z;){var k=N[c];if(k.k>d||k.p&1)break;for(var g=b.length;0<=--g&&++I<Z;)if(ea(k,b[g])){b.splice(g,1);h[g]&&h.splice(g,1);d=Math.max(d,k.k+
k.u);break}}d>S&&Aa(new t(3,"i",S,d-S))}h.forEach(function(a){var b=V(a.p,a.g,S,0);A(b,z(a));b.q=a.q;(a=a.D)&&w(b,a)})}}}function Ja(){var a=$.pop();--W[a.g];T=T.ba}function Ha(a){function b(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=a[c]&b[c];return e}var c=a.g,d=a.b,e=D[c];++X[c];3!==a.p&&(++W[c],$.push(a),a=b(e.e,e.e),d&64&&(a=b(a,T.e)),e=b(T.f,e.f),a=b(a,e),T.b&256&&(d|=256),d&256&&(d|=128),T={e:a,f:e,b:d,ba:T})}var N,O;
function V(a,b,c,d){a=new t(a,b,c,d);D[b]&&(a.b=D[b].h.b);D[b]||fa(a)?D[b]&&D[b].O?(q(p,"warn","Tag is disabled",{tag:a,tagName:b}),v(a)):0>d||0>c?v(a):(O&&N.length&&a.k>=N[N.length-1].k&&(O=!1),N.push(a)):v(a);return a}function Ba(a,b,c,d,e){b=V(1,a,b,c);w(b,V(2,a,d,e));return b}function Fa(a,b){var c=a.k,d=b.k;if(c!==d)return d-c;if(a.q!==b.q)return b.q-a.q;c=a.u;d=b.u;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.p]-c[a.p])}
function Ka(a){return(new DOMParser).parseFromString(a,"text/xml")}var La=new XSLTProcessor;La.importStylesheet(Ka('<?xml version="1.0" encoding="utf-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:template match="B|html:b"><b><xsl:apply-templates/></b></xsl:template><xsl:template match="C"><code class="inline"><xsl:apply-templates/></code></xsl:template><xsl:template match="CENSOR"><xsl:choose><xsl:when test="@with"><xsl:value-of select="@with"/></xsl:when><xsl:otherwise>****</xsl:otherwise></xsl:choose></xsl:template><xsl:template match="CODE"><pre data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs){{var a=this.innerHTML;a in hljs._?this.innerHTML=hljs._[a]:(Object.keys&amp;&amp;7&lt;Object.keys(hljs._).length&amp;&amp;(hljs._={{}}),hljs.highlightBlock(this.firstChild),hljs._[a]=this.innerHTML)}};"><code class="{@lang}"><xsl:apply-templates/></code></pre><xsl:if test="not(following::CODE)"><script>if("undefined"===typeof hljs){var a=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/github.min.css";a.appendChild(b);b=document.createElement("script");b.type="text/javascript";b.onload=function(){hljs._={};hljs.initHighlighting()};b.async=!0;b.src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js";a.appendChild(b)};\x3c/script></xsl:if></xsl:template><xsl:template match="COLOR"><span style="color:{@color}"><xsl:apply-templates/></span></xsl:template><xsl:template match="E"><xsl:choose><xsl:when test=".=\':)\'"><img src="s.png" alt=":)"/></xsl:when><xsl:otherwise><xsl:value-of select="."/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="FLOAT"><div style="float:{@float}"><xsl:apply-templates/></div></xsl:template><xsl:template match="FP|HE"><xsl:value-of select="@char"/></xsl:template><xsl:template match="G60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a></xsl:template><xsl:template match="I"><i><xsl:apply-templates/></i></xsl:template><xsl:template match="LI"><li><xsl:apply-templates/></li></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:when test="contains(\'upperlowerdecim\',substring(@type,1,5))"><ol style="list-style-type:{@type}"><xsl:apply-templates/></ol></xsl:when><xsl:otherwise><ul style="list-style-type:{@type}"><xsl:apply-templates/></ul></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:if test="not(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if test="@author"><cite><xsl:value-of select="@author"/> wrote:</cite></xsl:if><xsl:apply-templates/></div></blockquote></xsl:template><xsl:template match="S"><s><xsl:apply-templates/></s></xsl:template><xsl:template match="U"><u><xsl:apply-templates/></u></xsl:template><xsl:template match="URL"><a href="{@url}"><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="YOUTUBE"><iframe width="240" height="180" src="http://www.youtube.com/embed/{@id}" allowfullscreen=""/></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/><xsl:template match="html:a"><a><xsl:copy-of select="@href"/><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="p"><p><xsl:apply-templates/></p></xsl:template></xsl:stylesheet>'));
var Ma={};function C(a,b){var c;a:{c=p;if(b.d){var d,e,h=z(a);for(d in h){var k=h[d];if(b.d[d]){if(e=b.d[d],e.c){c.n(d);for(var g=0;g<e.c.length;++g)if(k=e.c[g](k,d),!1===k){delete a.d[d];break}!1!==k&&a.n(d,k);delete c.z}}else delete a.d[d]}for(d in b.d)if(e=b.d[d],!(d in a.d)&&e.o){c=!1;break a}}else A(a,{});c=!0}return c}function ga(a){return ba(a)}function ha(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a}
function ia(a){return/^[-\w+., ]+$/.test(a)?a:!1}function ja(a){return/^(?:#[0-9a-f]{3,6}|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|[a-z]+)$/i.test(a)?a:!1}function ka(a){return l(a,/^(?:left|none|right)$/i)}function la(a){return/^[-\w]+$/.test(a)?a:!1}function ma(a){return l(a,/^([a-z0-9]+)$/i)}
function na(a){var b=ca.mediasites,c;if("media"in a.d)c=a.d.media,!("id"in a.d)&&"url"in a.d&&-1===a.d.url.indexOf("://")&&a.n("id",a.d.url);else if("url"in a.d){var d=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.d.url);if(d[1]&&b[d[1]+":"])c=b[d[1]+":"];else if(d[2]){d=d[2];do{if(b[d]){c=b[d];break}var e=d.indexOf(".");if(-1==e)break;d=d.substr(1+e)}while(""<d)}}c&&(b=a.D||a,d=a.k,c=V(3,c.toUpperCase(),d,b.k+b.u-d),A(c,z(a)),c.q=a.q);return!1}function qa(a,b){return va(a,b)}
function oa(a){return l(a,/^(?:[-\w]+)$/)}function pa(a){return l(a,/^(?:\d+)$/)}
window.s9e={TextFormatter:{disablePlugin:function(a){Q[a]&&(Q[a].O=!0)},enablePlugin:function(a){Q[a]&&(Q[a].O=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,e=b.childNodes,g=c.length,f=e.length,k,J,x=0,G=0;x<g&&x<f;){k=c[x];J=e[x];if(!d(k,J))break;++x}for(var B=Math.min(g-x,f-x);G<B;){k=c[g-(G+1)];J=e[f-(G+1)];if(!d(k,J))break;++G}k=h.createDocumentFragment();for(B=x;B<f-G;)J=e[B].cloneNode(!0),k.appendChild(J),++B;for(B=g-G;--B>=x;)a.removeChild(c[B]);G?a.insertBefore(k,a.childNodes[x]):
a.appendChild(k)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,g=e.length,f=d.length;0<=--f;){var h=d[f],k=h.namespaceURI,h=h.name;b.hasAttributeNS(k,h)||a.removeAttributeNS(k,h)}for(f=g;0<=--f;)d=e[f],k=d.namespaceURI,h=d.name,d=d.value,d!==a.getAttributeNS(k,h)&&a.setAttributeNS(k,h,d);c(a,
b);return!0}for(var e=sa(a),e=Ka(e),h=b.ownerDocument,e=h.importNode(La.transformToFragment(e,h),!0),k=e.querySelectorAll("[data-s9e-livepreview-postprocess]"),g=k.length;0<=--g;){var f=k[g].getAttribute("data-s9e-livepreview-postprocess");Ma[f]||(Ma[f]=new Function(f));Ma[f].call(k[g])}c(b,e)}}};
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		window.setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.0.0/punycode.min.js"></script>
</body>
</html>