<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="http://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right][youtube]http://www.youtube.com/watch?v=QH2-TGUlwu4[/youtube][/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter/tree/master/src/ title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as http://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][YOUTUBE][/C], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=http://softwaremaniacs.org/soft/highlight/en/]Highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

[hr]

The parser/renderer used on this page page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 20.9 KB (9.2 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked="checked" onchange="toggle(this)"><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var aa=[0],ba=[5910],m=[16186],n=[16190],ca={b:2},da=["","id"],ea={b:514},fa={b:3089},p={p:!1},t={B:1,C:1,COLOR:1,I:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},ga={b:256,F:t};function ha(a,b){var c;a:{c=ia;if(b.d){var d,e,h=u(a);for(d in h){var f=h[d];if(b.d[d]){if(e=b.d[d],e.c){c.r(d);for(var g=0;g<e.c.length;++g)if(f=e.c[g](f,d),!1===f){delete a.d[d];break}!1!==f&&a.r(d,f)}}else delete a.d[d]}for(d in b.d)if(e=b.d[d],!(d in a.d)&&e.p){c=!1;break a}}else v(a,{});c=!0}return c}
var w=[ha],ja=[function(a){return x(a,/^[-\w]+$/)}],qa=[function(a){var b=ka.urlConfig,c=ia,d=na(a.replace(/^\s+/,"").replace(/\s+$/,""));oa(b,d)?(c&&(d.attrValue=a),a=!1):a=pa(d);return a}],y={c:[function(a){return x(a,/^\d+$/)}],p:!1},ra={c:qa,p:!1},z={g:m,k:1,c:w,l:10,j:ca,n:1E3},sa={g:m,d:{"char":{p:!0}},k:1,c:w,l:10,j:fa,n:1E3},ta='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aB|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}">$b</xsl:element>$c$aC"><code class="inline">$b</code>$c$aCENSOR"><xsl:choose><$i$f@with">$d@with"/></$i><$g>****</$g></xsl:choose>$c$aCODE"><pre data-hljs="" data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs)hljs._hb(this)"><code><xsl:if$f@lang"><xsl:attribute name="class">language-$d@lang"/></xsl:attribute></xsl:if>$b</code></pre><script>if("undefined"!==typeof hljs)hljs._ha();else if("undefined"===typeof hljsLoading){hljsLoading=1;var a=document.getElementsByTagName("head")[0],e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css";a.appendChild(e);e=document.createElement("script");e.type="text/javascript";e.onload=function(){var d={},f=0;hljs._hb=function(b){b.removeAttribute("data-hljs");var c=b.innerHTML;c in d?b.innerHTML=d[c]:(7&lt;++f&amp;&amp;(d={},f=0),hljs.highlightBlock(b.firstChild),d[c]=b.innerHTML)};hljs._ha=function(){for(var b=document.querySelectorAll("pre[data-hljs]"),c=b.length;0&lt;c;)hljs._hb(b.item(--c))};hljs._ha()};e.async=!0;e.src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js";a.appendChild(e)}\x3c/script>$c$aCOLOR"><span$jcolor:{@color}">$b</span>$c$aE"><xsl:choose><$i$f.=\':)\'"><img src="s.png" alt=":)"/></$i><$g>$d."/></$g></xsl:choose>$c$aFLOAT"><div$jfloat:{@float}">$b</div>$c$aFP|HE">$d@char"/>$c$aHR"><hr/>$c$aLIST"><xsl:choose><$i$fnot(@type)"><ul>$b</ul></$i><$i$fstarts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol$j$h>$estart"/>$b</ol></$i><$g><ul$j$h>$b</ul></$g></xsl:choose>$c$aPREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}">$b</a>$c$aQUOTE"><blockquote><xsl:if$fnot(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if$f@author"><cite>$d@author"/> wrote:</cite></xsl:if>$b</div></blockquote>$c$aURL"><a href="{@url}">$etitle"/>$b</a>$c$aYOUTUBE"><iframe width="240" height="180" src="http://www.youtube.com/embed/{@id}" allowfullscreen=""/>$c$abr"><br/>$c$ae|i|s"/>$ahtml:a"><a>$ehref|@title"/>$b</a>$c</xsl:stylesheet>'.replace(/\$[a-j]/g,
function(a){return{$a:'<xsl:template match="',$b:"<xsl:apply-templates/>",$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:'<xsl:copy-of select="@',$f:' test="',$g:"xsl:otherwise",$h:'list-style-type:{@type}"',$i:"xsl:when",$j:' style="'}[a]});function A(a){var b=document.createElement("b");A=function(a){b.innerHTML=a.replace(/</g,"&lt;");return b.textContent};return A(a)}
function ua(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function va(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function wa(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function x(a,b){return b.test(a)?a:!1}
function na(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function pa(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=wa(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+wa(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path+a.query+a.fragment,c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c),b=b+c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,escape);a.scheme||(b=b.replace(/^([^\/]*):/,
"$1%3A",b));return b}
function oa(a,b){if(""!==b.scheme&&!a.V.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&c)}if(c)return"URL host is invalid";
if(a.W&&a.W.test(b.host)||a.Z&&!a.Z.test(b.host))return"URL host is not allowed"}}function xa(){}xa.prototype={r:function(){}};function D(a,b,c,d,e){this.o=+a;this.e=b;this.f=+c;this.q=+d;"undefined"!==typeof e&&(this.z=+e);this.d={};this.O=[];isNaN(a+c+d)&&F(this)}D.prototype.G=!1;function H(a,b){a.O.push(b);a.G&&F(b)}function F(a){a.G||(a.G=!0,a.O.forEach(function(a){F(a)}))}function I(a,b){a.e===b.e&&(1===a.o&&2===b.o&&b.f>=a.f?(a.w=b,b.J=a,H(a,b)):2===a.o&&1===b.o&&b.f<=a.f&&(a.J=b,b.w=a))}
function u(a){var b={},c;for(c in a.d)b[c]=a.d[c];return b}function J(a,b){return a.G||a.e!==b.e||1!==b.o||2!==a.o||a.f<b.f||a.J&&a.J!==b||b.w&&b.w!==a?!1:!0}D.prototype.r=function(a,b){this.d[a]=b};function v(a,b){a.d={};for(var c in b)a.d[c]=b[c]}
var K,ya,L,M,N,za,ia=new xa,Aa,O,P,R={Autolink:{u:function(a,b){b.forEach(function(a){var b=a[0][1];for(a=a[0][0];;)if(a=a.replace(/(?![-=\/)])[\s!-.:-@[-`{-~]+$/,""),")"===a.substr(-1)&&a.replace(/[^(]+/g,"").length<a.replace(/[^)]+/g,"").length)a=a.substr(0,a.length-1);else break;if(/^www\.|^[^:]+:/i.test(a)){var c=Q(2,"URL",b+a.length,0,0);"."===a.charAt(3)&&(a="http://"+a);b=Q(1,"URL",b,0,1);b.r("url",a);I(b,c)}})},x:"://",v:/\bhttps?:\/\/\S(?:[^\s\[\]\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65]|\[\w*\])+/ig,
y:1E4},BBCodes:{u:function(a,b){function c(){var a=Q(3,q.K||r,C,l-C,0);v(a,k)}function d(){var a=Q(1,q.K||r,C,l-C,0);v(a,k);return a}function e(){la||(la=a.toUpperCase());var b="[/"+r+B+"]",c=la.indexOf(b,l);return 0>c?null:Q(2,q.K||r,c,b.length,0)}function h(){var b=l,c;for(k={};l<ma;)if(c=a.charAt(l),-1<" \n\t".indexOf(c))++l;else{if(-1<"/]".indexOf(c))break;var d=/^[-\w]*/.exec(a.substr(l,100))[0].length;if(d){c=a.substr(l,d).toLowerCase();l+=d;if(l>=ma)throw"";if("="!==a.charAt(l))continue}else if("="===
c&&l===b)c=q.D||r.toLowerCase();else throw"";if(++l>=ma)throw"";var d=k,e;if('"'===a.charAt(l)||"'"===a.charAt(l)){e=a.charAt(l);for(var f=l+1;;){l=a.indexOf(e,l+1);if(0>l)throw"";var h=0;do++h;while("\\"===a.charAt(l-h));if(h%2)break}e=a.substr(f,l-f).replace(/\\([\\'"])/g,"$1");++l}else{e=/[^\]\n]*?(?=\s*(?:\s\/)?\]|\s+[-\w]+=)/.exec(a.substr(l));if(!e)throw"";e=e[0];l+=e.length}d[c]=e}}function f(){B="";":"===a[l]&&(B=/^:\d*/.exec(a.substr(l))[0],l+=B.length);if("/"===a.charAt(C+1))"]"===a.charAt(l)&&
""===B&&(++l,Q(2,q.K||r,C,l-C,0));else{h();if(q.T)for(var b in q.T)b in k||(k[b]=q.T[b]);if("]"===a.charAt(l)){++l;var f=[];q.H&&q.H.forEach(function(a){a in k||f.push(a)});var g=(b=B||q.$)||f.length?e():null;if(g)f.forEach(function(b){k[b]=a.substr(l,g.f-l)});else if(b)return;b=d();g&&I(b,g)}else"/]"===a.substr(l,2)&&(l+=2,c())}}var g={"*":{K:"LI"},B:[],C:[],CODE:{D:"lang"},COLOR:[],FLOAT:[],HR:[],I:[],LIST:{D:"type"},MEDIA:{H:["url"],D:"site"},QUOTE:{D:"author"},S:[],U:[],URL:{H:["url"]},YOUTUBE:{H:["url"],
D:"url"}},k,q,r,B,l,C,ma=a.length,la="";b.forEach(function(a){r=a[1][0].toUpperCase();if(r in g){q=g[r];C=a[0][1];l=C+a[0][0].length;try{f()}catch(bb){}}})},x:"[",v:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,y:1E4},Censor:{u:function(a,b){var c=[[/^apple$/i,"banana"]];b.forEach(function(a){var b=/^\W/.test(a[0][0])?1:0,d=a[0][0].substr(b);a=Q(3,"CENSOR",a[0][1]+b,d.length,0);if(c)for(b=0;b<c.length;++b){var f=c[b][1];if(c[b][0].test(d)){a.r("with",f);break}}})},v:/(?:^|\W)apple(?!\w)/gi,y:1E4},Emoticons:{u:function(a,
b){b.forEach(function(a){Q(3,"E",a[0][1],a[0][0].length,0)})},x:":)",v:/:\)/g,y:1E4},FancyPants:{u:function(a){function b(a,b,c,d){a=Q(3,"FP",a,b,d||0||0);a.r("char",c);return a}function c(c,d,e,k){for(var f;f=d.exec(a);){var h=b(+f.index+f[0].indexOf(c),1,e);f=b(+f.index+f[0].length-1,1,k);H(h,f)}}var d=0<=a.indexOf("'"),e=0<=a.indexOf('"');(function(){if(d)for(var c,e=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=e.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019",10)})();(function(){if(d||e||!(0>a.indexOf("x")))for(var c=
{"'s":"\u2019","'":"\u2032","' ":"\u2032","'x":"\u2032",'"':"\u2033",'" ':"\u2033",'"x':"\u2033"},f,g=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;f=g.exec(a);){"x"===f[0].charAt(f[0].length-1)&&b(+f.index+f[0].length-1,1,"\u00d7");var k=f[0].substr(1,2);c[k]&&b(+f.index+1,1,c[k])}})();d&&c("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019");e&&c('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(function(){if(!(0>a.indexOf("...")&&0>a.indexOf("--")))for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,
e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])})();(function(){if(!(0>a.indexOf("(")))for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])})();(function(){if(!(0>a.indexOf("!=")))for(var c,d=/\b !=(?= \b)/g;c=d.exec(a);)b(+c.index+1,2,"\u2260")})();(function(){if(!(0>a.indexOf("<<")))for(var c,d=/<<( ?)(?! )[^\n<>]*?[^\n <>]\1>>(?!>)/g;c=d.exec(a);){var e=b(+c.index,2,"\u00ab");c=b(+c.index+c[0].length-2,2,"\u00bb");
H(e,c)}})()}},HTMLElements:{u:function(a,b){var c={Y:"html"};b.forEach(function(b){var d="/"===a.charAt(b[0][1]+1),h=b[0][1],f=b[0][0].length,g=b[2-d][0].toLowerCase(),g=c.L&&c.L[g]&&c.L[g][""]?c.L[g][""]:c.Y+":"+g;if(d)Q(2,g,h,f,0);else{d=/(<\S+|['"\s])\/>$/.test(b[0][0])?Ba(g,h,f,h+f):Q(1,g,h,f,0);b=b[3][0];for(var h=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,k;g=h.exec(b);)k=g[0].indexOf("="),0>k&&(k=g[0].length,g[0]+="="+g[0].toLowerCase()),f=g[0].substr(0,k).toLowerCase().replace(/^\s+/,
"").replace("/s+$/",""),g=g[0].substr(1+k).replace(/^\s+/,"").replace("/s+$/",""),/^["']/.test(g)&&(g=g.substr(1,g.length-2)),d.r(f,A(g))}})},x:"<",v:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,y:1E4},HTMLEntities:{u:function(a,b){b.forEach(function(a){var b=a[0][0],c=A(b);c===b||32>c.charCodeAt(0)||Q(3,"HE",a[0][1],b.length,0).r("char",c)})},x:"&",v:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,y:1E4},MediaEmbed:{u:function(a,b){b.forEach(function(a){var b=
a[0][0];Q(3,"MEDIA",a[0][1],b.length,-10).r("url",b)})},x:"://",v:/\bhttps?:\/\/[^["'\s]+/ig,y:1E4},Preg:{u:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1];b=b[3];var e;for(d.lastIndex=0;e=d.exec(a);){var h;h=Q(3,c,e.index,e[0].length,-100);b.forEach(function(a,b){a&&"undefined"!==typeof e[b]&&h.r(a,e[b])})}})}}},S,ka={mediasites:{"youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{V:/^https?$/i}},Ca={g:n,b:32},T={B:z,C:{g:aa,k:1,c:w,l:10,j:{b:66},
n:1E3},CENSOR:{g:aa,d:{"with":p},k:1,c:w,l:10,j:{b:3153},n:1E3},CODE:{g:aa,d:{lang:{c:[function(a){return/^[-\w]+$/.test(a)?a:!1}],p:!1}},k:2,c:w,l:10,j:{b:4432,F:t},n:1E3},COLOR:{g:m,d:{color:{c:[function(a){return/^(?:#[0-9a-f]{3,6}|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|[a-z]+)$/i.test(a)?a:!1}],p:!0}},k:1,c:w,l:10,j:ca,n:1E3},E:{g:m,k:1,c:w,l:10,j:fa,n:1E3},FLOAT:{g:n,d:{"float":{c:[function(a){return x(a,/^(?:left|none|right)$/i)}],p:!0}},k:2,c:w,l:10,j:ga,n:1E3},FP:sa,HE:sa,HR:{g:m,k:2,c:w,l:10,
j:{b:3345},n:1E3},I:z,LI:{g:n,k:0,c:w,l:10,j:{P:{LI:1},b:256,F:t},n:1E3},LIST:{g:[16145],d:{start:{c:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],p:!1},type:{c:[function(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a},function(a){return/^[-\w+., ]+$/.test(a)?a:!1}],p:!1}},k:2,c:w,l:10,j:{Q:["LI"],b:3456,F:t},n:1E3},MEDIA:{g:[16174],k:4,c:[function(a){return function(a,c){function b(a,b){var c=a.w||a;v(Ba(b.toUpperCase(),a.f,0,c.f+
c.q,a.z),u(a))}return function(a,c){if("site"in a.d){var d=a.d.site.toLowerCase(),e;a:{for(e in c)if(c[e]===d){e=!0;break a}e=!1}e&&b(a,d)}else if("url"in a.d){e=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.d.url);if(e[1]&&c[e[1]+":"])d=c[e[1]+":"];else if(e[2])a:{d=e[2];do{if(c[d]){d=c[d];break a}e=d.indexOf(".");if(0>e)break;d=d.substr(1+e)}while(""<d);d=!1}d&&b(a,d)}return!1}(a,c)}(a,ka.mediasites)}],l:10,j:{b:513},n:1E3},PREG_60D5AB76:{g:ba,d:{tag:{c:[function(a){return x(a,/^[a-z0-9]+$/i)}],p:!0}},
k:3,c:w,l:10,j:ea,n:1E3},QUOTE:{g:n,d:{author:p},k:2,c:w,l:10,j:ga,n:1E3},S:z,U:z,URL:{g:ba,d:{title:p,url:{c:qa,p:!0}},k:3,c:w,l:10,j:ea,n:1E3},YOUTUBE:{g:[16138],N:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,da],["url",/youtu\.be\/([-\w]+)/,da],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,da]],d:{h:y,id:{c:ja,p:!0},list:{c:ja,p:!1},m:y,s:y,t:y,url:ra},k:5,c:[function(a,b){return Da(a,b)},ha],l:10,j:fa,n:1E3},
"html:a":{g:ba,d:{href:ra,title:p},k:3,c:w,l:10,j:ea,n:1E3},"html:b":z},U,Ea,V,W,Fa=0,X;
function Ga(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");K={};ya={};M=0;N=null;za=!1;Aa={};O=[];P="";S=0;U=[];Ea=!1;V=a;W=V.length;X=0;L=Ca;L.R=!1;++Fa;a=Fa;for(var b in R)if(!R[b].M)a:{var c=b,d=R[c];if(!(d.x&&0>V.indexOf(d.x))){var e=[];if(d.v){e=d.v;d=d.y;e.lastIndex=0;for(var h=[],f=0,g=void 0;++f<=d&&(g=e.exec(V));){for(var k=+g.index,q=[[g[0],k]],r=0;++r<g.length;){var B=g[r];void 0===B?q.push(["",-1]):(q.push([B,V.indexOf(B,k)]),k+=B.length)}h.push(q)}e=h;
if(!e.length)break a}(0,R[c].u)(V,e)}}Ha();Y(W,0,!0);do b=P,P=P.replace(/<([^ />]+)><\/\1>/g,"");while(P!==b);P=P.replace(/<\/i><i>/g,"",P);P=P.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ia);c=za?"r":"t";b="<"+c;for(var l in Aa)b+=" xmlns:"+l+'="urn:s9e:TextFormatter:'+l+'"';P=b+">"+P+"</"+c+">";if(Fa!==a)throw"The parser has been reset during execution";return P}
function Da(a,b){b.N&&b.N.forEach(function(b){var c=b[0];if(c in a.d){b=Ja(a.d[c],b[1],b[2]);for(var e in b)e!==c&&e in a.d||a.r(e,b[e])}});return!0}function Ja(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Ia(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Ka(a){za=!0;var b=a.e,c=a.f,d=a.q,e=0,h=0;a.b&256&&(e=1,h=a.o&2?2:1);var f=!1;a.o&1||(f=!0);Y(c,e,f);e=d?va(V.substr(c,d)):"";if(a.o&1){f=b.indexOf(":");0<f&&(Aa[b.substr(0,f)]=0);P+="<"+b;var g=u(a),f=[],k;for(k in g)f.push(k);f.sort(function(a,b){return a>b?1:-1});f.forEach(function(a){P+=" "+a+'="'+ua(g[a].toString()).replace(/\n/g,"&#10;")+'"'});P=3===a.o?d?P+(">"+e+"</"+b+">"):P+"/>":d?P+("><s>"+e+"</s>"):P+">"}else d&&(P+="<e>"+e+"</e>"),P+="</"+b+">";for(X=S=c+d;h&&X<W&&"\n"===V.charAt(X);)--h,
++X}function Y(a,b,c){c&&(L.b&8?b=-1:c=!1);S>=a&&c&&La();if(X>S){var d=Math.min(a,X);P+=V.substr(S,d-S);S=d;S>=a&&c&&La()}if(L.b&128)b=a-S,b=V.substr(S,b),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),P+=b,S=a,c&&La();else{for(var e=a,d=0;b&&--e>=S;){var h=V.charAt(e);if(" "!==h&&"\n"!==h&&"\t"!==h)break;"\n"===h&&--b;++d}a-=d;a>S&&(b=va(V.substr(S,a-S)),32===(L.b&2096)&&(b=b.replace(/\n/g,"<br/>\n")),P+=b);c&&La();d&&(P+=V.substr(a,d));S=a+d}}
function Ma(a){var b=a.f;a=a.q;var c=V.substr(b,a);Y(b,0,!1);P+="<i>"+va(c)+"</i>";za=!0;S=b+a}function La(){L.R&&(P+="</p>",L.R=!1)}function Na(a){a=T[a.e];if(a.j.Q){var b=-1E3,c=V.substr(S),d=S+c.length-c.replace(/^[ \n\r\t]+/,"").length;a.j.Q.forEach(function(a){var c=++b;Q(1,a,d,0,c||0)})}}function Oa(a,b){var c=a.e;a.b&256&&(b=Pa(b));c=Q(2,c,b,0,0);I(c,a)}function Pa(a){for(;a>S&&-1<" \n\t".indexOf(V.charAt(a-1));)--a;return a}
function Ha(){if(U.length){for(var a in T)K[a]=0,ya[a]=0;do{for(;U.length;)Ea||(U.sort(Qa),Ea=!0),N=U.pop(),L.b&64&&!(J(N,O[O.length-1])||-1<"br i pb v".indexOf(N.e))||Ra();O.forEach(function(a){Oa(a,W)})}while(U.length)}}
function Ra(){if(!N.G){var a=N.f,b=N.q;if(S>a){var c;if((c=N.J)&&0<=O.indexOf(c))I(Q(2,c.e,S,Math.max(0,a+b-S),0),c);else{if("i"===N.e&&(a=a+b-S,0<a)){Q(3,"i",S,Math.min(a,W-S),0);return}F(N)}}else if("i"===N.e)Ma(N);else if("br"===N.e)L.b&1024||(Y(N.f,0,!1),P+="<br/>");else if("pb"===N.e)Y(N.f,0,!0);else if("v"===N.e)a=L.b,L.b=N.b,Y(N.f+N.q,0,!1),L.b=a;else if(N.o&1)if(a=N,b=a.e,c=T[b],ya[b]>=c.n)F(a);else{var d=a,e=T[d.e],h=!0;if(e.c)for(var f=0;f<e.c.length;++f)if(!e.c[f](d,e)){h=!1;break}if(h){a:{d=
a;if(O.length&&(h=d.e,f=T[h],f.j.F)){var e=O[O.length-1],g=e.e;if(f.j.F[g]){g!==h&&1E3>M&&(h=Sa(e,d.f+d.q),H(d,h));U.push(d);Oa(e,d.f);M+=4;d=!0;break a}}d=!1}if(!d)a:{d=a;if(O.length&&(e=T[d.e],e.j.P&&(h=O[O.length-1],e.j.P[h.e]))){U.push(d);Oa(h,d.f);d=!0;break a}d=!1}d||(K[b]>=c.l?F(a):(c=T[b].k,L.g[c>>3]&1<<(c&7)?(!(a.b&1)||a.w||U.length&&J(U[U.length-1],a)||(b=new D(3,b,a.f,a.q),v(b,u(a)),b.b=a.b,a=b),a.b&4096&&!a.w&&"\n"===V.charAt(a.f+a.q)&&(b=a.f+a.q,Q(3,"i",b,Math.min(1,W-b),0)),Ka(a),Ta(a),
Na(a)):F(a)))}else F(a)}else Ua()}}
function Ua(){var a=N;if(K[a.e]){for(var b=[],c=O.length;0<=--c;){var d=O[c];if(J(a,d))break;b.push(d);++M}if(!(0>c)){var e=1E3>M,h=[];b.forEach(function(b){var c=b.e;e&&(b.b&2?h.push(b):e=!1);var d=a.f;b.b&256&&(d=Pa(d));c=new D(2,c,d,0);c.b=b.b;Ka(c);Va()});Ka(a);Va();if(b.length&&1E3>M){d=S;for(c=U.length;0<=--c&&1E3>++M;){var f=U[c];if(f.f>d||f.o&1)break;for(var g=b.length;0<=--g&&1E3>++M;)if(J(f,b[g])){b.splice(g,1);h[g]&&h.splice(g,1);d=Math.max(d,f.f+f.q);break}}d>S&&Ma(new D(3,"i",S,d-S))}h.forEach(function(a){var b=
Sa(a,S);(a=a.w)&&I(b,a)})}}}function Va(){var a=O.pop();--K[a.e];L=L.X}function Ta(a){var b=a.e,c=a.b,d=T[b];++ya[b];if(3!==a.o){var e=[];c&512?L.g.forEach(function(a,b){e.push(d.g[b]&a)}):L.g.forEach(function(a,b){e.push(d.g[b]&(a&65280|a>>8))});c|=L.b&32;c&16&&(c&=-33);++K[b];O.push(a);L={g:e,b:c,X:L}}}function Sa(a,b){var c=Q(a.o,a.e,b,0,a.z);v(c,u(a));return c}
function Q(a,b,c,d,e){a=new D(a,b,c,d,e||0);T[b]&&(a.b=T[b].j.b);if(T[b]||-1<"br i pb v".indexOf(a.e))if(T[b]&&T[b].M)F(a);else if(0>d||0>c||c+d>W)F(a);else if(Ea){for(b=U.length;0<b&&0<Qa(U[b-1],a);)U[b]=U[b-1],--b;U[b]=a}else U.push(a);else F(a);return a}function Ba(a,b,c,d,e){d=Q(2,a,d,0,0);a=Q(1,a,b,c,e||0||0);I(a,d);return a}function Qa(a,b){var c=a.f,d=b.f;if(c!==d)return d-c;if(a.z!==b.z)return b.z-a.z;c=a.q;d=b.q;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.o]-c[a.o])}
var Wa="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;function Xa(a,b){if(Wa){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}
function Ya(a,b){if(Wa){var c=b.createElement("div"),d=b.createDocumentFragment();Z.input=Xa(a,"MSXML2.DOMDocument.6.0");Z.transform();for(c.innerHTML=Z.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(Z.transformToFragment(Xa(a),b),!0)}var Z,Za=Xa(ta,"MSXML2.FreeThreadedDOMDocument.6.0");if(Wa){var $a=new ActiveXObject("MSXML2.XSLTemplate.6.0");$a.stylesheet=Za;Z=$a.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(Za);var ab={};
window.s9e={TextFormatter:{disablePlugin:function(a){R[a]&&(R[a].M=!0)},enablePlugin:function(a){R[a]&&(R[a].M=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,f=b.childNodes,g=c.length,h=f.length,k,q,r=0,G=0;r<g&&r<h;){k=c[r];q=f[r];if(!d(k,q))break;++r}for(var E=Math.min(g-r,h-r);G<E;){k=c[g-(G+1)];q=f[h-(G+1)];if(!d(k,q))break;++G}k=e.createDocumentFragment();for(E=r;E<h-G;)q=f[E].cloneNode(!0),k.appendChild(q),++E;for(E=g-G;--E>=r;)a.removeChild(c[E]);G?a.insertBefore(k,a.childNodes[r]):
a.appendChild(k)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,g=d.length;0<=--g;){var h=d[g],k=h.namespaceURI,h=h.name;b.hasAttributeNS(k,h)||a.removeAttributeNS(k,h)}for(g=f;0<=--g;)d=e[g],k=d.namespaceURI,h=d.name,d=d.value,d!==a.getAttributeNS(k,h)&&a.setAttributeNS(k,h,d);c(a,
b);return!0}for(var e=b.ownerDocument,h=Ya(Ga(a),e),f=h.querySelectorAll("[data-s9e-livepreview-postprocess]"),g=f.length;0<=--g;){var k=f[g].getAttribute("data-s9e-livepreview-postprocess");ab[k]||(ab[k]=new Function(k));ab[k].call(f[g])}c(b,h)}}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.4.1/punycode.min.js"></script>
</body>
</html>