<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="https://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right][youtube]https://www.youtube.com/watch?v=QH2-TGUlwu4[/youtube][/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter/tree/master/src/ title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as https://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][YOUTUBE][/C], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=https://softwaremaniacs.org/soft/highlight/en/]Highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

[hr]

The parser/renderer used on this page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 21.9 KB (9.8 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked="checked" onchange="toggle(this)"><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var aa=[0],ba=[22358],ca=[32634],da=[20560],u=[32638],ea=["","id"],fa={b:2},ha={b:514},ia={b:3089},v={c:[],o:!1},y={B:1,C:1,COLOR:1,I:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},C=[function(a,b){var c={},d;for(d in b.d){var e=b.d[d],f=!1;if(d in a.d){f=e.c;var h=d,m=a.d[d];ja.q(h);for(var q=0;q<f.length&&(m=f[q](m,h),!1!==m);++q);f=m}!1!==f?c[d]=f:e.o&&z(a)}A(a,c)}],oa=[function(a){var b=ka.urlConfig,c=ja,d=la(a.replace(/^\s+/,"").replace(/\s+$/,""));ma(b,d)?(c&&(d.attrValue=a),a=!1):a=
na(d);return a}],pa={c:[function(a){return D(a,/^[-0-9A-Za-z_]+$/)}],o:!1},qa={x:y,b:256,D:y},F={g:ca,d:{},j:1,c:C,k:10,h:fa,l:5E3},ra={g:da,d:{"char":{c:[],o:!0}},j:4,c:C,k:10,h:ia,l:5E3},ta='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aB|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}">$b</xsl:element>$c$aC"><code class="inline">$b</code>$c$aCENSOR"><xsl:choose><$i$f@with">$d@with"/></$i><$g>****</$g></xsl:choose>$c$aCODE"><pre data-hljs="" data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs)hljs._hb(this)"><code><xsl:if$f@lang"><xsl:attribute name="class">language-$d@lang"/></xsl:attribute></xsl:if>$b</code></pre><script>(function(d){var head=d.getElementsByTagName("head")[0],style="github-gist",url="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/";if(typeof hljs!=="undefined")hljs._ha();else if(typeof hljsLoading==="undefined"){hljsLoading=1;if(style!=="none"){var el=d.createElement("link");el.type="text/css";el.rel="stylesheet";el.href=url+"styles/"+style+".min.css";head.appendChild(el)}el=d.createElement("script");el.type="text/javascript";el.onload=function(){var cache={},cnt=0;hljs._hb=function(block){block.removeAttribute("data-hljs");var html=block.innerHTML;if(html in cache)block.innerHTML=cache[html];else{if(++cnt&gt;7){cache={};cnt=0}hljs.highlightBlock(block.firstChild);cache[html]=block.innerHTML}};hljs._ha=function(){var blocks=d.querySelectorAll("pre[data-hljs]"),i=blocks.length;while(i&gt;0)hljs._hb(blocks.item(--i))};hljs._ha()};el.async=true;el.src=url+"highlight.min.js";head.appendChild(el)}})(document)\x3c/script>$c$aCOLOR"><span$jcolor:{@color}">$b</span>$c$aE"><xsl:choose><$i$f.=\':)\'"><img src="s.png" alt=":)"/></$i><$g>$d."/></$g></xsl:choose>$c$aFLOAT"><div$jfloat:{@float}">$b</div>$c$aFP|HE">$d@char"/>$c$aHR"><hr/>$c$aLIST"><xsl:choose><$i$fnot(@type)"><ul>$b</ul></$i><$i$fstarts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol$j$h>$estart"/>$b</ol></$i><$g><ul$j$h>$b</ul></$g></xsl:choose>$c$aPREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}">$b</a>$c$aQUOTE"><blockquote><xsl:if$fnot(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if$f@author"><cite>$d@author"/> wrote:</cite></xsl:if>$b</div></blockquote>$c$aURL"><a href="{@url}">$etitle"/>$b</a>$c$aYOUTUBE"><iframe width="240" height="180" src="https://www.youtube.com/embed/{@id}" allowfullscreen=""/>$c$abr"><br/>$c$ae|i|s"/>$ahtml:a"><a>$ehref|@title"/>$b</a>$c</xsl:stylesheet>'.replace(/\$[a-j]/g,
function(a){return{$a:'<xsl:template match="',$b:"<xsl:apply-templates/>",$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:'<xsl:copy-of select="@',$f:' test="',$g:"xsl:otherwise",$h:'list-style-type:{@type}"',$i:"xsl:when",$j:' style="'}[a]});function D(a,b){return b.test(a)?a:!1}
function la(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(d,e){c[d]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function na(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""!==a.host?(b+="//",""!==a.user&&(b+=ua(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+ua(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port)):"file"===a.scheme&&(b+="//");var c=a.path+a.query+a.fragment;c=c.replace(/%.?[a-f]/g,function(d){return d.toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A"));
return b}
function ma(a,b){if(""!==b.scheme&&!a.P.test(b.scheme))return"URL scheme is not allowed";if(""!==b.host){var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d][0]||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^([\da-f]{0,4}:){2,7}(?:[\da-f]{0,4}|\d+\.\d+\.\d+\.\d+)$/.test(c)&&c)}if(c)return"URL host is invalid";if(a.R&&
a.R.test(b.host)||a.W&&!a.W.test(b.host))return"URL host is not allowed"}else if(/^(?:(?:f|ht)tps?)$/.test(b.scheme))return"Missing host"}function va(a){var b=document.createElement("b");va=function(c){b.innerHTML=c.replace(/</g,"&lt;");return b.textContent};return va(a)}function wa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(c){return b[c]})}
function xa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(c){return b[c]})}function ua(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})}function ya(){}ya.prototype={q:function(){}};function G(a,b,c,d,e){this.m=+a;this.f=b;this.e=+c;this.n=+d;this.y=+e||0;this.d={};this.L=[];isNaN(a+c+d)&&z(this)}G.prototype.r=!1;function H(a,b){a.L.push(b);a.r&&z(b)}
function z(a){a.r||(a.r=!0,a.L.forEach(function(b){z(b)}))}function I(a,b){a.f===b.f&&(1===a.m&&2===b.m&&b.e>=a.e?(a.u=b,b.H=a,H(a,b)):2===a.m&&1===b.m&&b.e<=a.e&&(a.H=b,b.u=a))}function za(a){var b={},c;for(c in a.d)b[c]=a.d[c];return b}function Aa(a,b){return a.r||a.f!==b.f||1!==b.m||2!==a.m||a.e<b.e||a.H&&a.H!==b||b.u&&b.u!==a?!1:!0}G.prototype.q=function(a,b){this.d[a]=b};function A(a,b){a.d={};for(var c in b)a.d[c]=b[c]}
var J,Ba,K,L,M,Ca,ja=new ya,Da,N,O,Q={Autolink:{p:function(a,b){b.forEach(function(c){var d=c[0][1],e=c[0][0].replace(/(?![-=\/)])[\s!-.:-@[-`{-~]+$/,"");if(/^www\.|^[^:]+:/i.test(e)){var f=d+e.length,h=P(2,"URL",f,0,0);"."===e[3]&&(e="http://"+e);c=P(1,"URL",d,0,1);c.q("url",e);I(c,h);d=P(3,"v",d,f-d,1E3);H(c,d)}})},v:"://",s:/\bhttps?:\/\/\S(?:[^\s()\[\]\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65]|\([^\s()]*\)|\[\w*\])+/ig,w:5E4},BBCodes:{p:function(a,b){function c(){var l=P(3,n.z||k,B,
g-B,0);A(l,q);return l}function d(){var l=P(1,n.z||k,B,g-B,0);A(l,q);return l}function e(){p||(p=a.toUpperCase());var l="[/"+k+t+"]",r=p.indexOf(l,g);return 0>r?null:P(2,n.z||k,r,l.length,0)}function f(){var l=g;for(q={};g<E;){var r=a[g];if(-1<" \n\t".indexOf(r))++g;else{if(-1<"/]".indexOf(r))break;var w=/^[-\w]*/.exec(a.substr(g,100))[0].length;if(w){r=a.substr(g,w).toLowerCase();g+=w;if(g>=E)throw"";if("="!==a[g])continue}else if("="===r&&g===l)r=n.G||k.toLowerCase();else throw"";if(++g>=E)throw"";
w=q;if('"'===a[g]||"'"===a[g]){var x=a[g];var T=g+1;do{g=a.indexOf(x,g+1);if(0>g)throw"";for(var sa=1;"\\"===a[g-sa];)++sa}while(0===sa%2);x=a.substr(T,g-T);-1<x.indexOf("\\")&&(x=x.replace(/\\([\\'"])/g,"$1"));++g}else x=/(?:[^\s\]]|[ \t](?!\s*(?:[-\w]+=|\/?\])))*/.exec(a.substr(g))[0],g+=x.length;w[r]=x}}}function h(){t="";":"===a[g]&&(t=/^:\d*/.exec(a.substr(g))[0],g+=t.length);if("/"===a[B+1])"]"===a[g]&&""===t&&(++g,P(2,n.z||k,B,g-B,0));else{f();if(n.O)for(var l in n.O)l in q||(q[l]=n.O[l]);
if("]"===a[g]){++g;var r=[];n.F&&n.F.forEach(function(x){x in q||r.push(x)});var w=(l=t||n.ca)||r.length?e():null;if(w)r.forEach(function(x){q[x]=a.substr(g,w.e-g)});else if(l)return;l=d();w&&I(l,w)}else"/]"===a.substr(g,2)&&(g+=2,c())}}var m={"*":{z:"LI"},B:[],C:[],CODE:{G:"lang"},COLOR:[],FLOAT:[],HR:[],I:[],LIST:{G:"type"},MEDIA:{F:["url"]},QUOTE:{G:"author"},S:[],U:[],URL:{F:["url"]},YOUTUBE:{F:["url"],G:"url"}},q,n,k,t,g,B,E=a.length,p="";b.forEach(function(l){k=l[1][0].toUpperCase();if(k in
m){n=m[k];B=l[0][1];g=B+l[0][0].length;try{h()}catch(r){}}})},v:"[",s:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,w:5E4},Censor:{p:function(a,b){var c=[[/^apple$/i,"banana"]];b.forEach(function(d){var e=/^\W/.test(d[0][0])?1:0,f=d[0][0].substr(e);d=P(3,"CENSOR",d[0][1]+e,f.length,0);if(c)for(e=0;e<c.length;++e){var h=c[e][1];if(c[e][0].test(f)){d.q("with",h);break}}})},s:/(?:^|\W)apple(?!\w)/gi,w:5E4},Emoticons:{p:function(a,b){b.forEach(function(c){P(3,"E",c[0][1],c[0][0].length,0)})},v:":)",s:/:\)/g,w:5E4},
FancyPants:{p:function(a){function b(p,l,r,w){p=P(3,E,p,l,w||0);p.q(t,r);return p}function c(){if(!(0>a.indexOf("...")&&0>a.indexOf("--")))for(var p={"--":"\u2013","---":"\u2014","...":"\u2026"},l=/---?|\.\.\./g,r;r=l.exec(a);)b(+r.index,r[0].length,p[r[0]])}function d(){if(!(0>a.indexOf("/")))for(var p={"0/3":"\u2189","1/10":"\u2152","1/2":"\u00bd","1/3":"\u2153","1/4":"\u00bc","1/5":"\u2155","1/6":"\u2159","1/7":"\u2150","1/8":"\u215b","1/9":"\u2151","2/3":"\u2154","2/5":"\u2156","3/4":"\u00be",
"3/5":"\u2157","3/8":"\u215c","4/5":"\u2158","5/6":"\u215a","5/8":"\u215d","7/8":"\u215e"},l,r=/\b(?:0\/3|1\/(?:[2-9]|10)|2\/[35]|3\/[458]|4\/5|5\/[68]|7\/8)\b/g;l=r.exec(a);)b(+l.index,l[0].length,p[l[0]])}function e(){if(!(0>a.indexOf("<<")))for(var p,l=/<<( ?)(?! )[^\n<>]*?[^\n <>]\1>>(?!>)/g;p=l.exec(a);){var r=b(+p.index,2,"\u00ab");p=b(+p.index+p[0].length-2,2,"\u00bb");H(r,p)}}function f(){if(!(0>a.indexOf("!=")&&0>a.indexOf("=/=")))for(var p,l=/\b (?:!|=\/)=(?= \b)/g;p=l.exec(a);)b(+p.index+
1,p[0].length-1,"\u2260")}function h(p,l,r,w){for(var x;x=l.exec(a);){var T=b(+x.index+x[0].indexOf(p),1,r);x=b(+x.index+x[0].length-1,1,w);H(T,x)}}function m(){if(g)for(var p,l=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;p=l.exec(a);)b(+p.index+p[0].indexOf("'"),1,"\u2019",10)}function q(){if(g||B||!(0>a.indexOf("x")))for(var p={"'s":"\u2019","'":"\u2032","' ":"\u2032","'x":"\u2032",'"':"\u2033",'" ':"\u2033",'"x':"\u2033"},l,r=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;l=r.exec(a);){"x"===l[0][l[0].length-
1]&&b(+l.index+l[0].length-1,1,"\u00d7");var w=l[0].substr(1,2);p[w]&&b(+l.index+1,1,p[w])}}function n(){if(!(0>a.indexOf("(")))for(var p={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},l=/\((?:c|r|tm)\)/gi,r;r=l.exec(a);)b(+r.index,r[0].length,p[r[0].toLowerCase()])}var k={Q:"char",z:"FP"},t=k.Q,g=0<=a.indexOf("'"),B=0<=a.indexOf('"'),E=k.z;k.$||(m(),g&&h("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019"),B&&h('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d"));k.X||e();k.Y||(f(),q(),d());k.Z||c();k.aa||n()}},
HTMLElements:{p:function(a,b){var c={V:"html"};b.forEach(function(d){var e="/"===a[d[0][1]+1],f=d[0][1],h=d[0][0].length,m=d[2-e][0].toLowerCase();m=c.J&&c.J[m]&&c.J[m][""]?c.J[m][""]:c.V+":"+m;if(e)P(2,m,f,h,0);else{e=/(<\S+|['"\s])\/>$/.test(d[0][0])?Ea(m,f,h,f+h,0):P(1,m,f,h,0);d=d[3][0];f=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi;for(var q;m=f.exec(d);)q=m[0].indexOf("="),0>q&&(q=m[0].length,m[0]+="="+m[0].toLowerCase()),h=m[0].substr(0,q).toLowerCase().replace(/^\s+/,"").replace("/s+$/",
""),m=m[0].substr(1+q).replace(/^\s+/,"").replace("/s+$/",""),/^["']/.test(m)&&(m=m.substr(1,m.length-2)),e.q(h,va(m))}})},v:"<",s:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,w:5E4},HTMLEntities:{p:function(a,b){b.forEach(function(c){var d=c[0][0],e=va(d);e===d||32>e.charCodeAt(0)||P(3,"HE",c[0][1],d.length,0).q("char",e)})},v:"&",s:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,w:5E4},MediaEmbed:{p:function(a,b){b.forEach(function(c){var d=c[0][0];
P(3,"MEDIA",c[0][1],d.length,-10).q("url",d)})},v:"://",s:/\bhttps?:\/\/[^["'\s]+/ig,w:5E4},Preg:{p:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1];b=b[3];var e;for(d.lastIndex=0;e=d.exec(a);){var f=P(3,c,e.index,e[0].length,-100);b.forEach(function(h,m){h&&"undefined"!==typeof e[m]&&f.q(h,e[m])})}})}}},R,ka={"MediaEmbed.hosts":{"youtu.be":"youtube","youtube.com":"youtube"},"MediaEmbed.sites":{youtube:[[[/youtube\.com\/(?:watch.*?v=|v\/|attribution_link.*?v%3D)([-\w]+)/,
ea],[/youtu\.be\/([-\w]+)/,ea],[/[#&?]t=(\d[\dhms]*)/,["","t"]],[/[&?]list=([-\w]+)/,["","list"]]],[{ba:[[/\/vi\/([-\w]+)/,ea]],da:[[/\/shared\?ci=/,[""]]]}]]},urlConfig:{P:/^https?$/i}},Fa={g:u,b:32},S={B:F,C:{g:aa,d:{},j:1,c:C,k:10,h:{b:66},l:5E3},CENSOR:{g:aa,d:{"with":v},j:4,c:C,k:10,h:{b:3153},l:5E3},CODE:{g:aa,d:{lang:pa},j:2,c:C,k:10,h:{x:y,b:4432,D:y},l:5E3},COLOR:{g:ca,d:{color:{c:[function(a){return D(a,/^(?:#(?:(?:[0-9a-f]{3}){1,2}|(?:[0-9a-f]{4}){1,2})|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|rgba\(\d{1,3}, *\d{1,3}, *\d{1,3}, *\d*(?:\.\d+)?\)|[a-z]+)$/i)}],
o:!0}},j:1,c:C,k:10,h:fa,l:5E3},E:{g:da,d:{},j:1,c:C,k:10,h:ia,l:5E3},FLOAT:{g:u,d:{"float":{c:[function(a){return D(a,/^(?:left|none|right)$/i)}],o:!0}},j:2,c:C,k:10,h:qa,l:5E3},FP:ra,HE:ra,HR:{g:da,d:{},j:2,c:C,k:10,h:{x:y,b:3345},l:5E3},I:F,LI:{g:u,d:{},j:0,c:C,k:10,h:{x:{B:1,C:1,COLOR:1,I:1,LI:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},b:256,D:y},l:5E3},LIST:{g:[32577],d:{start:{c:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],o:!1},type:{c:[function(a){var b={A:"upper-alpha",
I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a},function(a){return D(a,/^[- +,.0-9A-Za-z_]+$/)}],o:!1}},j:2,c:C,k:10,h:{x:y,M:["LI"],b:3456,D:y},l:5E3},MEDIA:{g:[32574],d:{},j:6,c:[function(a){return function(b,c,d){function e(f,h,m){var q=!1;m.forEach(function(n){var k=n[1],t=n[0].exec(h);t&&(q=!0,k.forEach(function(g,B){""<t[B]&&""<g&&(f[g]=t[B])}))});return q}(function(f,h,m){z(f);if("url"in f.d){var q=f.d.url,n;a:{for(n=/^https?:\/\/([^\/]+)/.exec(q.toLowerCase())[1]||
"";""<n;){if(h[n]){n=h[n];break a}n=n.replace(/^[^.]*./,"")}n=""}if(m[n]){h={};e(h,q,m[n][0]);a:{for(var k in h){m=!1;break a}m=!0}if(!m){m=f.e;var t=f.u;t?(q=f.n,k=t.e,t=t.n):(q=0,k=f.e+f.n,t=0);f=Ea(n.toUpperCase(),m,q,k,t,f.y);A(f,h)}}}})(b,c,d)}(a,ka["MediaEmbed.hosts"],ka["MediaEmbed.sites"],ka.cacheDir)}],k:10,h:{b:513},l:5E3},PREG_60D5AB76:{g:ba,d:{tag:{c:[function(a){return D(a,/^[a-z0-9]+$/i)}],o:!0}},j:5,c:C,k:10,h:ha,l:5E3},QUOTE:{g:u,d:{author:v},j:2,c:C,k:10,h:qa,l:5E3},S:F,U:F,URL:{g:ba,
d:{title:v,url:{c:oa,o:!0}},j:3,c:C,k:10,h:ha,l:5E3},YOUTUBE:{g:[20504],d:{id:pa,list:v,t:{c:[function(a){var b=/^(?=\d)(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/.exec(a);return b?3600*(b[1]||0)+60*(b[2]||0)+(+b[3]||0):/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],o:!1}},j:5,c:C,k:10,h:ia,l:5E3},"html:a":{g:ba,d:{href:{c:oa,o:!1},title:v},j:5,c:C,k:10,h:ha,l:5E3},"html:b":F},U,Ga,V,W,Ha=0,X;
function Ia(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");J={};Ba={};L=0;M=null;Ca=!1;Da={};N=[];O="";R=0;U=[];Ga=!1;V=a;W=V.length;X=0;K=Fa;K.N=!1;++Ha;a=Ha;for(var b in Q)if(!Q[b].K)a:{var c=b,d=Q[c];if(!(d.v&&0>V.indexOf(d.v))){var e=[];if(d.s){e=void 0;var f=d.s;d=d.w;f.lastIndex=0;for(var h=[],m=0;++m<=d&&(e=f.exec(V));){for(var q=+e.index,n=[[e[0],q]],k=0;++k<e.length;){var t=e[k];void 0===t?n.push(["",-1]):(n.push([t,V.indexOf(t,q)]),q+=t.length)}h.push(n)}e=
h;if(!e.length)break a}(0,Q[c].p)(V,e)}}Ja();Y(W,0,!0);do b=O,O=O.replace(/<([^ />]+)[^>]*><\/\1>/g,"");while(O!==b);O=O.replace(/<\/i><i>/g,"");O=O.replace(/[\x00-\x08\x0B-\x1F]/g,"");O=O.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ka);c=Ca?"r":"t";b="<"+c;for(var g in Da)b+=" xmlns:"+g+'="urn:s9e:TextFormatter:'+g+'"';O=b+">"+O+"</"+c+">";if(Ha!==a)throw"The parser has been reset during execution";return O}function Ka(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function La(a){Ca=!0;var b=a.f,c=a.e,d=a.n,e=0,f=0;a.b&256&&(e=1,f=a.m&2?2:1);var h=!1;a.m&1||(h=!0);Y(c,e,h);e=d?xa(V.substr(c,d)):"";if(a.m&1){h=b.indexOf(":");0<h&&(Da[b.substr(0,h)]=0);O+="<"+b;var m=za(a);h=[];for(var q in m)h.push(q);h.sort(function(n,k){return n>k?1:-1});h.forEach(function(n){O+=" "+n+'="'+wa(m[n].toString()).replace(/\n/g,"&#10;")+'"'});O=3===a.m?d?O+(">"+e+"</"+b+">"):O+"/>":d?O+("><s>"+e+"</s>"):O+">"}else d&&(O+="<e>"+e+"</e>"),O+="</"+b+">";for(X=R=c+d;f&&X<W&&"\n"===
V[X];)--f,++X}function Y(a,b,c){c&&(K.b&8?b=-1:c=!1);R>=a&&c&&Ma();if(X>R){var d=Math.min(a,X);O+=V.substr(R,d-R);R=d;R>=a&&c&&Ma()}if(K.b&128)b=a-R,b=V.substr(R,b),/^[ \n\t]*$/.test(b)||(b="<i>"+xa(b)+"</i>"),O+=b,R=a,c&&Ma();else{var e=a;for(d=0;b&&--e>=R;){var f=V[e];if(" "!==f&&"\n"!==f&&"\t"!==f)break;"\n"===f&&--b;++d}a-=d;a>R&&(b=xa(V.substr(R,a-R)),32===(K.b&2096)&&(b=b.replace(/\n/g,"<br/>\n")),O+=b);c&&Ma();d&&(O+=V.substr(a,d));R=a+d}}
function Na(a){var b=a.e;a=a.n;var c=V.substr(b,a);Y(b,0,!1);O+="<i>"+xa(c)+"</i>";Ca=!0;R=b+a}function Ma(){K.N&&(O+="</p>",K.N=!1)}function Oa(a){a=S[a.f];if(a.h.M){var b=-1E3,c=V.substr(R),d=R+c.length-c.replace(/^[ \n\r\t]+/,"").length;a.h.M.forEach(function(e){var f=++b;P(1,e,d,0,f||0)})}}function Pa(a,b,c){var d=a.f;(M.b|a.b)&256&&(b=Qa(b));b=P(2,d,b,0,c||0);I(b,a)}function Qa(a){for(;a>R&&-1<" \n\t".indexOf(V[a-1]);)--a;return a}
function Ja(){if(U.length){for(var a in S)J[a]=0,Ba[a]=0;do{for(;U.length;)Ga||Ra(),M=U.pop(),Sa();N.forEach(function(b){Pa(b,W)})}while(U.length)}}
function Sa(){K.b&64&&!Aa(M,N[N.length-1])&&!(-1<"br i pb v".indexOf(M.f))&&z(M);var a=M.e,b=M.n;if(R>a&&!M.r){var c;if((c=M.H)&&0<=N.indexOf(c)){I(P(2,c.f,R,Math.max(0,a+b-R),0),c);return}if("i"===M.f&&(a=a+b-R,0<a)){P(3,"i",R,Math.min(a,W-R),0);return}z(M)}if(!M.r)if("i"===M.f)Na(M);else if("br"===M.f)K.b&1024||(Y(M.e,0,!1),O+="<br/>");else if("pb"===M.f)Y(M.e,0,!0);else if("v"===M.f)a=K.b,K.b=M.b,Y(M.e+M.n,0,!1),K.b=a;else if(M.m&1)if(a=M,b=a.f,c=S[b],Ba[b]>=c.l)z(a);else{for(var d=a,e=S[d.f],
f=0;f<e.c.length&&!d.r;++f)e.c[f](d,e);if(!(d=a.r)&&(d=1E4>L)){a:{d=a;if(N.length){f=d.f;var h=S[f];if(h.h.D){e=N[N.length-1];var m=e.f;if(h.h.D[m]){if(m!==f&&1E4>L){f=d.e+d.n;U.length?(h=U[U.length-1],h=h.e):h=W+1;for(;f<h&&-1<" \n\t".indexOf(V[f]);)++f;f=Ta(e,f);H(d,f)}U.push(d);Pa(e,d.e,d.y-1);L+=4;d=!0;break a}}}d=!1}if(!d)a:{d=a;if(N.length&&(e=S[d.f],e.h.x&&(f=N[N.length-1],e.h.x[f.f]))){++L;U.push(d);Pa(f,d.e,d.y-1);d=!0;break a}d=!1}d=d||!1}d||(J[b]>=c.k?z(a):(c=S[b].j,K.g[c>>3]&1<<(c&7)?
(!(a.b&1&&3!==a.m)||a.u||U.length&&Aa(U[U.length-1],a)||(b=new G(3,b,a.e,a.n),A(b,za(a)),b.b=a.b,a=b),a.b&4096&&!a.u&&"\n"===V[a.e+a.n]&&(b=a.e+a.n,P(3,"i",b,Math.min(1,W-b),0)),La(a),Ua(a),Oa(a)):z(a)))}else Va()}
function Va(){var a=M;if(J[a.f]){for(var b=[],c=N.length;0<=--c;){var d=N[c];if(Aa(a,d))break;b.push(d);++L}if(!(0>c)){var e=a.b;b.forEach(function(k){e|=k.b});var f=e&256,h=1E4>L,m=[];b.forEach(function(k){var t=k.f;h&&(k.b&2?m.push(k):h=!1);var g=a.e;f&&(g=Qa(g));t=new G(2,t,g,0);t.b=k.b;La(t);Wa()});La(a);Wa();if(b.length&&1E4>L){d=R;for(c=U.length;0<=--c&&1E4>++L;){var q=U[c];if(q.e>d||q.m&1)break;for(var n=b.length;0<=--n&&1E4>++L;)if(Aa(q,b[n])){b.splice(n,1);m[n]&&m.splice(n,1);d=Math.max(d,
q.e+q.n);break}}d>R&&Na(new G(3,"i",R,d-R))}m.forEach(function(k){var t=Ta(k,R);(k=k.u)&&I(t,k)})}}}function Wa(){var a=N.pop();--J[a.f];K=K.T}function Ua(a){var b=a.f,c=a.b,d=S[b];++Ba[b];if(3!==a.m){var e=[];c&512?K.g.forEach(function(f,h){e.push(d.g[h]&f)}):K.g.forEach(function(f,h){e.push(d.g[h]&(f&65280|f>>8))});c|=K.b&32;c&16&&(c&=-33);++J[b];N.push(a);K={g:e,b:c,T:K}}}function Ta(a,b){var c=P(a.m,a.f,b,0,a.y);A(c,za(a));return c}
function P(a,b,c,d,e){a=new G(a,b,c,d,e||0);S[b]&&(a.b=S[b].h.b);if(!(S[b]||-1<"br i pb v".indexOf(a.f))||0>d||0>c||c+d>W||/[\uDC00-\uDFFF]/.test(V.substr(c,1)+V.substr(c+d,1)))z(a);else if(S[b]&&S[b].K)z(a);else if(Ga){b=U.length;for(c=Xa(a);0<b&&c>Xa(U[b-1]);)U[b]=U[b-1],--b;U[b]=a}else U.push(a);return a}function Ea(a,b,c,d,e,f){d=P(2,a,d,e,-f||0);a=P(1,a,b,c,f||0);I(a,d);return a}
function Ra(){for(var a={},b=[],c=U.length;0<=--c;){var d=U[c],e=Xa(d,c);b.push(e);a[e]=d}b.sort();c=b.length;for(U=[];0<=--c;)U.push(a[b[c]]);Ga=!0}function Xa(a,b){var c=0<=a.y,d=a.y;c||(d+=1073741824);var e=0<a.n;return Ya(a.e)+ +c+Ya(d)+ +e+Ya(e?W-a.n:{2:0,3:1,1:2}[a.m])+Ya(b||0)}function Ya(a){a=a.toString(16);return"        ".substr(a.length)+a}var Za="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function $a(a,b){if(Za){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function ab(a,b){if(Za){var c=b.createElement("div"),d=b.createDocumentFragment();Z.input=$a(a,"MSXML2.DOMDocument.6.0");Z.transform();for(c.innerHTML=Z.output;c.firstChild;)d.appendChild(c.firstChild);return d}return b.importNode(Z.transformToFragment($a(a),b),!0)}var Z,bb=$a(ta,"MSXML2.FreeThreadedDOMDocument.6.0");
if(Za){var cb=new ActiveXObject("MSXML2.XSLTemplate.6.0");cb.stylesheet=bb;Z=cb.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(bb);var db={};window.s9e||(window.s9e={});
window.s9e.TextFormatter={disablePlugin:function(a){Q[a]&&(Q[a].K=!0)},enablePlugin:function(a){Q[a]&&(Q[a].K=!1)},preview:function(a,b){function c(k,t){for(var g=k.childNodes,B=t.childNodes,E=g.length,p=B.length,l,r,w=0,x=0;w<E&&w<p;){l=g[w];r=B[w];if(!d(l,r))break;++w}for(var T=Math.min(E-w,p-w);x<T;){l=g[E-(x+1)];r=B[p-(x+1)];if(!d(l,r))break;++x}for(E-=x;--E>=w;)k.removeChild(g[E]),h=k;g=p-x;if(!(w>=g)){p=e.createDocumentFragment();E=w;do h=p.appendChild(B[E]);while(E<--g);x?k.insertBefore(p,
k.childNodes[w]):k.appendChild(p)}}function d(k,t){if(k.nodeName!==t.nodeName||k.nodeType!==t.nodeType)return!1;if(3===k.nodeType||8===k.nodeType)return k.nodeValue!==t.nodeValue&&(k.nodeValue=t.nodeValue,h=k),!0;if(!k.isEqualNode||!k.isEqualNode(t)){var g=k.attributes,B=t.attributes,E=B.length,p=g.length;for(k.getAttribute("data-s9e-livepreview-ignore-attrs");0<=--p;){var l=g[p],r=l.namespaceURI;l=l.name;t.hasAttributeNS(r,l)||(k.removeAttributeNS(r,l),h=k)}for(p=E;0<=--p;)g=B[p],r=g.namespaceURI,
l=g.name,g=g.value,g!==k.getAttributeNS(r,l)&&(k.setAttributeNS(r,l,g),h=k);c(k,t)}return!0}for(var e=b.ownerDocument,f=ab(Ia(a).replace(/<[eis]>.*?<\/[eis]>/g,""),e),h=b,m=f.querySelectorAll("[data-s9e-livepreview-postprocess]"),q=m.length;0<=--q;){var n=m[q].getAttribute("data-s9e-livepreview-postprocess");db[n]||(db[n]=new Function(n));db[n].call(m[q])}c(b,f);return h}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/punycode/1.4.1/punycode.min.js"></script>
</body>
</html>