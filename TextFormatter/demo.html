<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="Content-Security-Policy" content="script-src 'sha384-SGyFAYFDzNTUQVUcqSP8+7RSdOdw+8T0h184G4rz0BdNX/6nuhxsMxpxNQl/+q5R' cdn.jsdelivr.net">
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="https://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right]https://www.youtube.com/watch?v=QH2-TGUlwu4[/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as https://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=https://highlightjs.org/]highlight.js[/url]
	[code=php]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]MediaEmbed[/b] --- links to YouTube are transformed into playable videos
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

[hr]

The parser/renderer used on this page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 22.1 KB (9.8 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left">
		<form><input type="checkbox" id="Autolink" checked><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script>(function(){const aa=[0],u=[32638],ba=[32634],ca=[20560],da=[22358],ea=["","id"],fa={flags:2},ha={flags:514},ia={flags:3089},w={c:[],m:!1},x={B:1,C:1,COLOR:1,I:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},B=[function(a,b){let c={},d;for(d in b.b){let p=b.b[d];var f=!1;if(d in a.b){f=p.c;var g=d,m=a.b[d];for(let n=0;n<f.length&&(m=f[n](m,g),!1!==m);++n);f=m}!1!==f?c[d]=f:p.m&&y(a)}A(a,c)}],na=[function(a){{var b=C.urlConfig,c=ja;let d=ka(a.replace(/^\s+/,"").replace(/\s+$/,""));la(b,d)?(c&&(d.attrValue=
a),a=!1):a=ma(d)}return a}],oa={c:[function(a){return E(a,/^[-0-9A-Za-z_]+$/)}],m:!1},pa={s:x,flags:260,x},G={f:ba,b:{},g:1,c:B,h:10,e:fa,j:5E3},qa={f:ca,b:{"char":{c:[],m:!0}},g:4,c:B,h:10,e:ia,j:5E3},sa='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:decimal-format decimal-separator="."/>$aB|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}">$b</xsl:element>$c$aC"><code class="inline">$b</code>$c$aCENSOR"><xsl:choose><$i$f@with">$d@with"/></$i><$g>****</$g></xsl:choose>$c$aCODE"><pre data-s9e-livepreview-hash="" data-s9e-livepreview-onupdate="if(window[\'hljsLoader\'])window[\'hljsLoader\'][\'highlightBlocks\'](this)"><code><xsl:if$f@lang"><xsl:attribute name="class">language-$d@lang"/></xsl:attribute></xsl:if>$b</code><script async="" crossorigin="anonymous" data-hljs-style="github" data-s9e-livepreview-onrender="if(window[\'hljsLoader\'])this.parentNode.removeChild(this)" integrity="sha384-vbylffRV+sn4FL7ftwAw6eJ1uNcsQT3ETMpPJQZaOtzW+0d+jnlf1LJj9Jgf8Scp" src="https://cdn.jsdelivr.net/gh/s9e/hljs-loader@1.0.31/loader.min.js"/></pre>$c$aCOLOR"><span$jcolor:{@color}">$b</span>$c$aE"><xsl:choose><$i$f.=\':)\'"><img src="s.png" alt=":)"/></$i><$g>$d."/></$g></xsl:choose>$c$aFLOAT"><div$jfloat:{@float}">$b</div>$c$aFP|HE">$d@char"/>$c$aHR"><hr/>$c$aLIST"><xsl:choose><$i$fnot(@type)"><ul>$b</ul></$i><$i$fstarts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol$j$h>$estart"/>$b</ol></$i><$g><ul$j$h>$b</ul></$g></xsl:choose>$c$aPREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}">$b</a>$c$aQUOTE"><blockquote><xsl:if$fnot(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if$f@author"><cite>$d@author"/> wrote:</cite></xsl:if>$b</div></blockquote>$c$aURL"><a href="{@url}">$etitle"/>$b</a>$c$aYOUTUBE"><iframe width="240" height="180" src="https://www.youtube.com/embed/{@id}" allowfullscreen=""/>$c$abr"><br/>$c$ae|i|s"/>$ahtml:a"><a>$ehref|@title"/>$b</a>$c</xsl:stylesheet>'.replace(/\$[a-j]/g,
function(a){return{$a:'<xsl:template match="',$b:"<xsl:apply-templates/>",$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:'<xsl:copy-of select="@',$f:' test="',$g:"xsl:otherwise",$h:'list-style-type:{@type}"',$i:"xsl:when",$j:' style="'}[a]});let ta={1983388049:function(){window.hljsLoader&&window.hljsLoader.highlightBlocks(this)},1788024165:function(){window.hljsLoader&&this.parentNode.removeChild(this)}};function E(a,b){return b.test(a)?a:!1}
function ka(a){let b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(d,f){c[d]=""<b[f+1]?b[f+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function ma(a){let b="";""!==a.scheme&&(b+=a.scheme+":");""!==a.host?(b+="//",""!==a.user&&(b+=ua(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+ua(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port)):"file"===a.scheme&&(b+="//");let c=a.path+a.query+a.fragment;c=c.replace(/%.?[a-f]/g,function(d){return d.toUpperCase()},c);b+=va(c);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A"));return b}
function va(a){return a.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,function(b){return"%"+b[0].charCodeAt(0).toString(16).toUpperCase()})}
function la(a,b){if(""!==b.scheme&&!a.M.test(b.scheme))return"URL scheme is not allowed";if(""!==b.host){var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,f=c.split(".");0<=--d;){if("0"===f[d][0]||255<f[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^([\da-f]{0,4}:){2,7}(?:[\da-f]{0,4}|\d+\.\d+\.\d+\.\d+)$/.test(c)&&c)}if(c)return"URL host is invalid";if(a.O&&
a.O.test(b.host)||a.R&&!a.R.test(b.host))return"URL host is not allowed"}else if(/^(?:(?:f|ht)tps?)$/.test(b.scheme))return"Missing host"}function H(a){let b=document.createElement("b");H=function(c){b.innerHTML=c.replace(/</g,"&lt;");return b.textContent};return H(a)}function wa(a){return a.replace(/[<>&"]/g,b=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"})[b])}function xa(a){return a.replace(/[<>&]/g,b=>({"<":"&lt;",">":"&gt;","&":"&amp;"})[b])}
function ua(a){return encodeURIComponent(a).replace(/[!'()*]/g,b=>"%"+b.charCodeAt(0).toString(16).toUpperCase())}function ya(){}ya.prototype={add:function(){}};function I(a,b,c,d,f){this.l=+a;this.name=b;this.d=+c;this.k=+d;this.v=+f||0;this.b={};this.J=[];isNaN(a+c+d)&&y(this)}I.prototype.o=!1;function J(a,b){a.J.push(b);a.o&&y(b)}function y(a){a.o||(a.o=!0,a.J.forEach(function(b){y(b)}))}function K(a,b){za(a,b)?(a.u=b,b.y=a,J(a,b)):za(b,a)&&(a.y=b,b.u=a)}
function za(a,b){return a.name===b.name&&1===a.l&&2===b.l&&a.d<=a.d}function Aa(a){let b={};for(let c in a.b)b[c]=a.b[c];return b}function Ba(a,b){return a.o||!za(b,a)||a.y&&a.y!==b||b.u&&b.u!==a?!1:!0}function A(a,b){a.b={};for(let c in b)a.b[c]=b[c]}let L,Ca,M,N,O,Da,ja=new ya,Ea,P,Q;
const S={Autolink:{n:function(a,b){b.forEach(c=>{var d=c[0][1],f=c[0][0].replace(/(?:(?![-=+)\/_])[\s!-.:-@[-`{-~])+$/,"");let g=d+f.length,m=R(2,"URL",g,0,0);"."===f[3]&&(f="http://"+f);c=R(1,"URL",d,0,1);c.b.url=f;K(c,m);d=R(3,"v",d,g-d,1E3);J(c,d)})},r:":",p:/\bhttps?:(?:[^\s()\[\]\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65]|\([^\s()]*\)|\[\w*\])+/ig,q:5E4},BBCodes:{n:function(a,b){function c(){var l=R(3,e.w||h,v,k-v,0);A(l,n);return l}function d(){var l=R(1,e.w||h,v,k-v,(""!==q?-10:0)||
0);A(l,n);return l}function f(){r||=a.toUpperCase();let l="[/"+h+q+"]",t=r.indexOf(l,k);return 0>t?null:R(2,e.w||h,t,l.length,0)}function g(){let l=k;for(n={};k<F;){var t=a[k];if(-1<" \n\t".indexOf(t))++k;else{if(-1<"/]".indexOf(t))break;var D=/^[-\w]*/.exec(a.substring(k,k+100))[0].length;if(D){t=a.substring(k,k+D).toLowerCase();k+=D;if(k>=F)throw"";if("="!==a[k])continue}else if("="===t&&k===l)t=e.F||h.toLowerCase();else throw"";if(++k>=F)throw"";D=n;var z;if('"'===a[k]||"'"===a[k]){let ra=a[k],
Ta=k+1;do{k=a.indexOf(ra,k+1);if(0>k)throw"";for(z=1;"\\"===a[k-z];)++z}while(0===z%2);z=a.substring(Ta,k);-1<z.indexOf("\\")&&(z=z.replace(/\\([\\'"])/g,"$1"));++k}else z=/(?:[^\s\]]|[ \t](?!\s*(?:[-\w]+=|\/?\])))*/.exec(a.substring(k))[0],k+=z.length;D[t]=z}}}function m(){q="";":"===a[k]&&(q=/^:\d*/.exec(a.substring(k))[0],k+=q.length);if("/"===a[v+1])"]"===a[k]&&""===q&&(++k,R(2,e.w||h,v,k-v,0));else{g();if(e.L)for(var l in e.L)l in n||(n[l]=e.L[l]);if("]"===a[k]){++k;var t=[];e.D&&e.D.forEach(z=>
{z in n||t.push(z)});var D=(l=q||e.Z)||t.length?f():null;if(D)t.forEach(z=>{n[z]=a.substring(k,D.d)});else if(l)return;l=d();D&&K(l,D)}else"/]"===a.substring(k,k+2)&&(k+=2,c())}}var p={"*":{w:"LI"},B:[],C:[],CODE:{F:"lang"},COLOR:[],FLOAT:[],HR:[],I:[],LIST:{F:"type"},MEDIA:{D:["url"]},QUOTE:{F:"author"},S:[],U:[],URL:{D:["url"]}};let n,e,h,q,k,v,F=a.length,r="";b.forEach(l=>{h=l[1][0].toUpperCase();if(h in p){e=p[h];v=l[0][1];k=v+l[0][0].length;try{m()}catch(t){}}})},r:"[",p:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,
q:5E4},Censor:{n:function(a,b){var c=[[/^apple$/i,"banana"]];b.forEach(d=>{var f=/^\W/.test(d[0][0])?1:0,g=d[0][0].substring(f);d=R(3,"CENSOR",d[0][1]+f,g.length,0);if(c)for(f=0;f<c.length;++f){let m=c[f][1];if(c[f][0].test(g)){d.b["with"]=m;break}}})},p:/(?:^|\W)apple(?!\w)/gi,q:5E4},Emoticons:{n:function(a,b){b.forEach(c=>{R(3,"E",c[0][1],c[0][0].length,0)})},r:":)",p:/:\)/g,q:5E4},FancyPants:{n:function(a){function b(r,l,t,D){r=R(3,F,r,l,D||0);r.b[q]=t;return r}function c(){if(!(0>a.indexOf("...")&&
0>a.indexOf("--")))for(var r={"--":"\u2013","---":"\u2014","...":"\u2026"},l=/---?|\.\.\./g,t;t=l.exec(a);)b(t.index,t[0].length,r[t[0]])}function d(){if(!(0>a.indexOf("/")))for(var r={"0/3":"\u2189","1/10":"\u2152","1/2":"\u00bd","1/3":"\u2153","1/4":"\u00bc","1/5":"\u2155","1/6":"\u2159","1/7":"\u2150","1/8":"\u215b","1/9":"\u2151","2/3":"\u2154","2/5":"\u2156","3/4":"\u00be","3/5":"\u2157","3/8":"\u215c","4/5":"\u2158","5/6":"\u215a","5/8":"\u215d","7/8":"\u215e"},l,t=/\b(?:0\/3|1\/(?:[2-9]|10)|2\/[35]|3\/[458]|4\/5|5\/[68]|7\/8)\b/g;l=
t.exec(a);)b(l.index,l[0].length,r[l[0]])}function f(){if(!(0>a.indexOf("<<")))for(var r,l=/<<( ?)(?! )[^\n<>]*?[^\n <>]\1>>(?!>)/g;r=l.exec(a);){let t=b(r.index,2,"\u00ab");r=b(r.index+r[0].length-2,2,"\u00bb");J(t,r)}}function g(){if(!(0>a.indexOf("!=")&&0>a.indexOf("=/=")))for(var r,l=/\b (?:!|=\/)=(?= \b)/g;r=l.exec(a);)b(r.index+1,r[0].length-1,"\u2260")}function m(r,l,t,D){for(var z;z=l.exec(a);){let ra=b(z.index+z[0].indexOf(r),1,t);z=b(z.index+z[0].length-1,1,D);J(ra,z)}}function p(){if(k)for(var r,
l=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;r=l.exec(a);)b(r.index+r[0].indexOf("'"),1,"\u2019",10)}function n(){if(k||v||!(0>a.indexOf("x")))for(var r={"'s":"\u2019","'":"\u2032","' ":"\u2032","'x":"\u2032",'"':"\u2033",'" ':"\u2033",'"x':"\u2033"},l,t=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;l=t.exec(a);){"x"===l[0][l[0].length-1]&&b(l.index+l[0].length-1,1,"\u00d7");let D=l[0].substring(1,3);r[D]&&b(l.index+1,1,r[D])}}function e(){if(!(0>a.indexOf("(")))for(var r={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},
l=/\((?:c|r|tm)\)/gi,t;t=l.exec(a);)b(t.index,t[0].length,r[t[0].toLowerCase()])}const h={N:"char",w:"FP"};let q=h.N,k=0<=a.indexOf("'"),v=0<=a.indexOf('"'),F=h.w;"undefined"===typeof h.X&&(p(),k&&m("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019"),v&&m('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d"));"undefined"===typeof h.T&&f();"undefined"===typeof h.V&&(g(),n(),d());"undefined"===typeof h.W&&c();"undefined"===typeof h.Y&&e()}},HTMLElements:{n:function(a,b){const c={Q:"html"};b.forEach(d=>{var f="/"===
a[d[0][1]+1],g=d[0][1],m=d[0][0].length,p=d[2-f][0].toLowerCase();p=c.z&&c.z[p]&&c.z[p][""]?c.z[p][""]:c.Q+":"+p;if(f)R(2,p,g,m,0);else for(f=/(<\S+|['"\s])\/>$/.test(d[0][0])?Fa(p,g,m,g+m,0):R(1,p,g,m,0),d=d[3][0],g=/([a-z][-a-z0-9]*)(?:\s*=\s*("[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi;p=g.exec(d);)m=p[1].toLowerCase(),p="undefined"!==typeof p[2]?p[2]:m,/^["']/.test(p)&&(p=p.substring(1,p.length-1)),p=H(p),f.b[m]=p})},r:"<",p:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,
q:5E4},HTMLEntities:{n:function(a,b){b.forEach(c=>{let d=c[0][0],f=H(d);f===d||32>f.charCodeAt(0)||(R(3,"HE",c[0][1],d.length,0).b["char"]=f)})},r:"&",p:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,q:5E4},MediaEmbed:{n:function(a,b){b.forEach(c=>{let d=c[0][0];R(3,"MEDIA",c[0][1],d.length,-10).b.url=d})},r:"://",p:/\bhttps?:\/\/[^["'\s]+/ig,q:5E4},Preg:{n:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(b=>{let c=b[0],d=b[1];b=b[3];let f;for(d.lastIndex=0;f=d.exec(a);){let g;g=R(3,
c,f.index,f[0].length,-100);b.forEach((m,p)=>{m&&"undefined"!==typeof f[p]&&(g.b[m]=f[p])})}})}}};let T;
const C={"MediaEmbed.hosts":{"youtu.be":"youtube","youtube.com":"youtube"},"MediaEmbed.sites":{youtube:[[[/youtube\.com\/(?:watch.*?v=|shorts\/|v\/|attribution_link.*?v%3D)([-\w]+)/,ea],[/youtu\.be\/([-\w]+)/,ea],[/[#&?]t=(\d[\dhms]*)/,["","t"]],[/[&?]list=([-\w]+)/,["","list"]]],[]]},urlConfig:{M:/^https?$/i}},Ga={f:u,flags:32},U={B:G,C:{f:aa,b:{},g:1,c:B,h:10,e:{flags:66},j:5E3},CENSOR:{f:aa,b:{"with":w},g:4,c:B,h:10,e:{flags:3153},j:5E3},CODE:{f:aa,b:{lang:oa},g:2,c:B,h:10,e:{s:x,flags:4436,x},
j:5E3},COLOR:{f:ba,b:{color:{c:[function(a){return E(a,/^(?:#(?:(?:[0-9a-f]{3}){1,2}|(?:[0-9a-f]{4}){1,2})|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|rgba\(\d{1,3}, *\d{1,3}, *\d{1,3}, *\d*(?:\.\d+)?\)|[a-z]+)$/i)}],m:!0}},g:1,c:B,h:10,e:fa,j:5E3},E:{f:ca,b:{},g:1,c:B,h:10,e:ia,j:5E3},FLOAT:{f:u,b:{"float":{c:[function(a){return E(a,/^(?:left|none|right)$/i)}],m:!0}},g:2,c:B,h:10,e:pa,j:5E3},FP:qa,HE:qa,HR:{f:ca,b:{},g:2,c:B,h:10,e:{s:x,flags:3349},j:5E3},I:G,LI:{f:u,b:{},g:0,c:B,h:10,e:{s:{B:1,C:1,COLOR:1,
I:1,LI:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},flags:256,x},j:5E3},LIST:{f:[32577],b:{start:{c:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],m:!1},type:{c:[function(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a},function(a){return E(a,/^[- +,.0-9A-Za-z_]+$/)}],m:!1}},g:2,c:B,h:10,e:{s:x,H:["LI"],flags:3460,x},j:5E3},MEDIA:{f:[32574],b:{},g:6,c:[function(a){return function(b,c,d){function f(g,m,p){let n=!1;p.forEach(e=>
{let h=e[1],q=e[0].exec(m);q&&(n=!0,h.forEach((k,v)=>{""<q[v]&&""<k&&(g[k]=q[v])}))});return n}(function(g,m,p){y(g);if("url"in g.b){var n=g.b.url;a:{for(var e=/^https?:\/\/([^\/]+)/.exec(n.toLowerCase())[1]||"";""<e;){if(m[e]){m=m[e];break a}e=e.replace(/^[^.]*./,"")}m=""}if(p[m]){e={};f(e,n,p[m][0]);p=e;a:{for(h in p){var h=!1;break a}h=!0}if(!h){h=g.d;var q=g.u;q?(n=g.k,e=q.d,q=q.k):(n=0,e=g.d+g.k,q=0);g=Fa(m.toUpperCase(),h,n,e,q,g.v);A(g,p)}}}})(b,c,d)}(a,C["MediaEmbed.hosts"],C["MediaEmbed.sites"],
C.cacheDir)}],h:10,e:{flags:513},j:5E3},PREG_60D5AB76:{f:da,b:{tag:{c:[function(a){return E(a,/^[a-z0-9]+$/i)}],m:!0}},g:5,c:B,h:10,e:ha,j:5E3},QUOTE:{f:u,b:{author:w},g:2,c:B,h:10,e:pa,j:5E3},S:G,U:G,URL:{f:da,b:{title:w,url:{c:na,m:!0}},g:3,c:B,h:10,e:ha,j:5E3},YOUTUBE:{f:[20504],b:{id:oa,list:w,t:{c:[function(a){let b=/^(?=\d)(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/.exec(a);return b?3600*(b[1]||0)+60*(b[2]||0)+(+b[3]||0):/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],m:!1}},g:5,c:B,h:10,e:ia,j:5E3},"html:a":{f:da,
b:{href:{c:na,m:!1},title:w},g:5,c:B,h:10,e:ha,j:5E3},"html:b":G};let V,Ha,W,X,Ia=0,Y;
function Ja(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");L={};Ca={};N=0;O=null;Da=!1;Ea={};P=[];Q="";T=0;V=[];Ha=!1;W=a;X=W.length;Y=0;M=Ga;M.K=!1;++Ia;a=Ia;for(var b in S)if(!S[b].G)a:{var c=b,d=S[c];if(!(d.r&&0>W.indexOf(d.r))){var f=[];if("undefined"!==typeof d.p&&"undefined"!==typeof d.q){let g=void 0;f=d.p;d=d.q;f.lastIndex=0;let m=[],p=0;for(;++p<=d&&(g=f.exec(W));){let n=g.index,e=[[g[0],n]],h=0;for(;++h<g.length;){let q=g[h];void 0===q?e.push(["",-1]):(e.push([q,
W.indexOf(q,n)]),n+=q.length)}m.push(e)}f=m;if(!f.length)break a}(0,S[c].n)(W,f)}}Ka();Z(X,0,!0);do b=Q,Q=Q.replace(/<([^ />]+)[^>]*><\/\1>/g,"");while(Q!==b);Q=Q.replace(/<\/i><i>/g,"");Q=Q.replace(/[\x00-\x08\x0B-\x1F]/g,"");Q=Q.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,La);c=Da?"r":"t";b="<"+c;for(let g in Ea)b+=" xmlns:"+g+'="urn:s9e:TextFormatter:'+g+'"';Q=b+">"+Q+"</"+c+">";if(Ia!==a)throw"The parser has been reset during execution";return Q}
function La(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Ma(a){Da=!0;let b=a.name,c=a.d,d=a.k;var f=a.flags,g=0;let m=0;f&256&&(g=1,m=a.l&2?2:1);Z(c,g,!(a.l&1&&!(f&4)));f=d?xa(W.substring(c,c+d)):"";if(a.l&1){g=b.indexOf(":");0<g&&(Ea[b.substring(0,g)]=0);Q+="<"+b;let p=Aa(a);g=[];for(let n in p)g.push(n);g.sort((n,e)=>n>e?1:-1);g.forEach(n=>{Q+=" "+n+'="'+wa(p[n].toString()).replace(/\n/g,"&#10;")+'"'});Q=3===a.l?d?Q+(">"+f+"</"+b+">"):Q+"/>":d?Q+("><s>"+f+"</s>"):Q+">"}else d&&(Q+="<e>"+f+"</e>"),Q+="</"+b+">";for(Y=T=c+d;m&&Y<X&&"\n"===W[Y];)--m,
++Y}function Z(a,b,c){c&&(M.flags&8?b=-1:c=!1);T>=a&&c&&Na();if(Y>T){var d=Math.min(a,Y);Q+=W.substring(T,d);T=d;T>=a&&c&&Na()}if(M.flags&128)b=W.substring(T,a),/^[ \n\t]*$/.test(b)||(b="<i>"+xa(b)+"</i>"),Q+=b,T=a,c&&Na();else{var f=a;for(d=0;b&&--f>=T;){let g=W[f];if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;a>T&&(b=xa(W.substring(T,a)),32===(M.flags&2096)&&(b=b.replace(/\n/g,"<br/>\n")),Q+=b);c&&Na();d&&(Q+=W.substring(a,a+d));T=a+d}}
function Oa(a){let b=a.d;a=a.k;let c=W.substring(b,b+a);Z(b,0,!1);Q+="<i>"+xa(c)+"</i>";Da=!0;T=b+a}function Na(){M.K&&(Q+="</p>",M.K=!1)}function Pa(a){a=U[a.name];if(a.e.H){let b=-1E3,c=W.substring(T),d=T+c.length-c.replace(/^[ \n\r\t]+/,"").length;a.e.H.forEach(f=>{var g=++b;R(1,f,d,0,g||0)})}}function Qa(a,b,c){let d=a.name;(O.flags|a.flags)&256&&(b=Ra(b));b=R(2,d,b,0,c||0);K(b,a)}function Ra(a){for(;a>T&&-1<" \n\t".indexOf(W[a-1]);)--a;return a}
function Ka(){if(V.length){for(let a in U)L[a]=0,Ca[a]=0;do{for(;V.length;)Ha||Sa(),O=V.pop(),Ua();P.forEach(a=>{Qa(a,X)})}while(V.length)}}
function Ua(){M.flags&64&&!Ba(O,P[P.length-1])&&!(-1<"br i pb v".indexOf(O.name))&&y(O);var a=O.d,b=O.k;if(T>a&&!O.o){var c;if((c=O.y)&&0<=P.indexOf(c)){K(R(2,c.name,T,Math.max(0,a+b-T),0),c);return}if("i"===O.name&&(a=a+b-T,0<a)){R(3,"i",T,Math.min(a,X-T),0);return}y(O)}if(!O.o)if("i"===O.name)Oa(O);else if("br"===O.name)M.flags&1024||(Z(O.d,0,!1),Q+="<br/>");else if("pb"===O.name)Z(O.d,0,!0);else if("v"===O.name)a=M.flags,M.flags=O.flags,Z(O.d+O.k,0,!1),M.flags=a;else if(O.l&1)if(a=O,b=a.name,c=
U[b],Ca[b]>=c.j)y(a);else{var d=a,f=U[d.name];for(var g=0;g<f.c.length&&!d.o;++g)f.c[g](d,f);if(!(d=a.o)&&(d=1E4>N)){a:{d=a;if(P.length){g=d.name;var m=U[g];if(m.e.x){f=P[P.length-1];let p=f.name;if(m.e.x[p]){if(p!==g&&1E4>N){g=d.d+d.k;V.length?(m=V[V.length-1],m=m.d):m=X+1;for(;g<m&&-1<" \n\t".indexOf(W[g]);)++g;g=Va(f,g);J(d,g)}V.push(d);Qa(f,d.d,d.v-1);N+=4;d=!0;break a}}}d=!1}if(!d)a:{d=a;if(P.length&&(f=U[d.name],f.e.s&&(g=P[P.length-1],f.e.s[g.name]))){++N;V.push(d);Qa(g,d.d,d.v-1);d=!0;break a}d=
!1}d=d||!1}d||(L[b]>=c.h?y(a):(c=U[b].g,M.f[c>>3]&1<<(c&7)?(!(a.flags&1&&3!==a.l)||a.u||V.length&&Ba(V[V.length-1],a)||(b=new I(3,b,a.d,a.k),A(b,Aa(a)),b.flags=a.flags,a=b),a.flags&4096&&"\n"===W[a.d+a.k]&&(b=a.d+a.k,R(3,"i",b,Math.min(1,X-b),0)),Ma(a),Wa(a),Pa(a)):y(a)))}else Xa()}
function Xa(){var a=O;if(L[a.name]){for(var b=[],c=P.length;0<=--c;){var d=P[c];if(Ba(a,d))break;b.push(d);++N}if(!(0>c)){var f=a.flags;b.forEach(n=>{f|=n.flags});var g=f&256,m=1E4>N,p=[];b.forEach(n=>{var e=n.name;m&&(n.flags&2?p.push(n):m=!1);let h=a.d;g&&(h=Ra(h));e=new I(2,e,h,0);e.flags=n.flags;Ma(e);Ya()});Ma(a);Ya();if(b.length&&1E4>N){d=T;for(c=V.length;0<=--c&&1E4>++N;){let n=V[c];if(n.d>d||n.l&1)break;let e=b.length;for(;0<=--e&&1E4>++N;)if(Ba(n,b[e])){b.splice(e,1);p[e]&&p.splice(e,1);
d=Math.max(d,n.d+n.k);break}}d>T&&Oa(new I(3,"i",T,d-T))}p.forEach(n=>{let e=Va(n,T);(n=n.u)&&K(e,n)})}}}function Ya(){let a=P.pop();--L[a.name];M=M.P}function Wa(a){let b=a.name,c=a.flags,d=U[b];++Ca[b];if(3!==a.l){var f=[];M.f.forEach((m,p)=>{c&512||(m=m&65280|m>>8);f.push(d.f[p]&m)});var g=c|M.flags&32;g&16&&(g&=-33);++L[b];P.push(a);M={P:M};M.f=f;M.flags=g}}function Va(a,b){b=R(a.l,a.name,b,0,a.v);A(b,Aa(a));return b}
function R(a,b,c,d,f){a=new I(a,b,c,d,f||0);U[b]&&(a.flags=U[b].e.flags);if(!(U[b]||-1<"br i pb v".indexOf(a.name))||0>d||0>c||c+d>X||/[\uDC00-\uDFFF]/.test(W.substring(c,c+1)+W.substring(c+d,c+d+1)))y(a);else if(U[b]&&U[b].G)y(a);else if(Ha){b=V.length;for(c=Za(a);0<b&&c>Za(V[b-1]);)V[b]=V[b-1],--b;V[b]=a}else V.push(a);return a}function Fa(a,b,c,d,f,g){d=R(2,a,d,f,-g||0);a=R(1,a,b,c,g||0);K(a,d);return a}
function Sa(){let a={},b=[],c=V.length;for(;0<=--c;){let d=V[c],f=Za(d,c);b.push(f);a[f]=d}b.sort();c=b.length;for(V=[];0<=--c;)V.push(a[b[c]]);Ha=!0}function Za(a,b){let c=0<=a.v,d=a.v;c||(d+=1073741824);let f=0<a.k,g;f?g=X-a.k:g={2:0,3:1,1:2}[a.l];return $a(a.d)+ +c+$a(d)+ +f+$a(g)+$a(b||0)}function $a(a){a=a.toString(16);return"        ".substring(a.length)+a}function ab(a){const b=(new DOMParser).parseFromString(a,"text/xml");if(!b)throw"Cannot parse "+a;return b}
function bb(a,b){return cb.transformToFragment(ab(a),b)}var cb;cb=new XSLTProcessor;cb.importStylesheet(ab(sa));window.s9e||(window.s9e={});
window.s9e.TextFormatter={disablePlugin:function(a){S[a]&&(S[a].G=!0)},enablePlugin:function(a){S[a]&&(S[a].G=!1)},preview:function(a,b){function c(e,h){h=e.getAttribute("data-s9e-livepreview-on"+h);let q=m(h);ta[q]||(ta[q]=new Function(h));ta[q].call(e)}function d(e,h){e instanceof Element&&e.hasAttribute("data-s9e-livepreview-on"+h)&&c(e,h);e=e.querySelectorAll("[data-s9e-livepreview-on"+h+"]");let q=e.length;for(;0<=--q;)c(e[q],h)}function f(e,h){var q=e.childNodes;h=h.childNodes;var k=q.length,
v=h.length;let F,r,l=0,t=0;for(;l<k&&l<v;){F=q[l];r=h[l];if(!g(F,r))break;++l}let D=Math.min(k-l,v-l);for(;t<D;){F=q[k-(t+1)];r=h[v-(t+1)];if(!g(F,r))break;++t}for(k-=t;--k>=l;)e.removeChild(q[k]),n=e;q=v-t;if(!(l>=q)){v=p.createDocumentFragment();k=l;do r=h[k],r instanceof Element&&d(r,"update"),n=v.appendChild(r);while(k<--q);t?e.insertBefore(v,e.childNodes[l]):e.appendChild(v)}}function g(e,h){if(e.nodeName!==h.nodeName||e.nodeType!==h.nodeType)return!1;if(e instanceof HTMLElement&&h instanceof
HTMLElement){var q;if(q=!e.isEqualNode(h))q=!(e.hasAttribute("data-s9e-livepreview-hash")&&h.hasAttribute("data-s9e-livepreview-hash")&&e.getAttribute("data-s9e-livepreview-hash")===h.getAttribute("data-s9e-livepreview-hash"));if(q){h.hasAttribute("data-s9e-livepreview-onupdate")&&c(h,"update");var k=e.attributes;q=h.attributes;var v=q.length;let l=k.length;for(;0<=--l;){var F=k[l],r=F.namespaceURI;F=F.name;h.hasAttributeNS(r,F)||(e.removeAttributeNS(r,F),n=e)}for(l=v;0<=--l;)r=q[l],k=r.namespaceURI,
v=r.name,r=r.value,r!==e.getAttributeNS(k,v)&&(e.setAttributeNS(k,v,r),n=e);f(e,h)}}else 3!==e.nodeType&&8!==e.nodeType||e.nodeValue===h.nodeValue||(e.nodeValue=h.nodeValue,n=e);return!0}function m(e){let h=e.length,q=0,k=0;for(;0<=--h;)q=(q+e.charCodeAt(h))%65535,k=(q+k)%65535;return k<<16|q}let p=b.ownerDocument;if(!p)throw"Target does not have a ownerDocument";a=bb(Ja(a).replace(/<[eis]>[^<]*<\/[eis]>/g,""),p);let n=b;"undefined"!==typeof window&&"chrome"in window&&a.querySelectorAll("script").forEach(function(e){let h=
document.createElement("script");for(let q of e.attributes)h.setAttribute(q.name,q.value);h.textContent=e.textContent;e.parentNode.replaceChild(h,e)});(function(e){e=e.querySelectorAll("[data-s9e-livepreview-hash]");let h=e.length;for(;0<=--h;)e[h].setAttribute("data-s9e-livepreview-hash",m(e[h].outerHTML))})(a);d(a,"render");f(b,a);return n}};})();
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		document.querySelectorAll('input[type="checkbox"]').forEach(
			(el) => el.addEventListener(
				'change',
				function ()
				{
					(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
								 : s9e.TextFormatter.disablePlugin(el.id);

					text = '';
				}
			)
		);

	</script>
</body>
</html>