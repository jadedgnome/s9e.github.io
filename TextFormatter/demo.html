<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="http://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right][youtube]http://www.youtube.com/watch?v=QH2-TGUlwu4[/youtube][/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter/tree/master/src/ title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as http://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][YOUTUBE][/C], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=http://softwaremaniacs.org/soft/highlight/en/]Highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

[hr]

The parser/renderer used on this page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 21.8 KB (9.6 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked="checked" onchange="toggle(this)"><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">(function(){var aa=[0],ba=[20560],ca=[22358],n=[32638],da=[32634],ea=["","id"],fa={b:2},ha={b:514},ia={b:3089},p={o:!1},r={B:1,C:1,COLOR:1,I:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},ja=[function(a){return u(a,/^[-\w]+$/)}];
function ka(a,b){a:{var c=ma;if(b.d){var d,e=v(a);for(d in e){var f=e[d];if(b.d[d]){var h=b.d[d];if(h.c){c.p(d);for(var g=0;g<h.c.length;++g)if(f=h.c[g](f,d),!1===f){delete a.d[d];break}!1!==f&&a.p(d,f)}}else delete a.d[d]}for(d in b.d)if(h=b.d[d],!(d in a.d)&&h.o){c=!1;break a}}else w(a,{});c=!0}return c}
var x=[ka],ra=[function(a){var b=na.urlConfig,c=ma,d=oa(a.replace(/^\s+/,"").replace(/\s+$/,""));pa(b,d)?(c&&(d.attrValue=a),a=!1):a=qa(d);return a}],sa={c:ra,o:!1},ta={w:r,b:256,F:r},y={g:da,j:1,c:x,k:10,h:fa,l:5E3},ua={g:ba,d:{"char":{o:!0}},j:4,c:x,k:10,h:ia,l:5E3},va='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/>$aB|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}">$b</xsl:element>$c$aC"><code class="inline">$b</code>$c$aCENSOR"><xsl:choose><$i$f@with">$d@with"/></$i><$g>****</$g></xsl:choose>$c$aCODE"><pre data-hljs="" data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs)hljs._hb(this)"><code><xsl:if$f@lang"><xsl:attribute name="class">language-$d@lang"/></xsl:attribute></xsl:if>$b</code></pre><script>if("undefined"!==typeof hljs)hljs._ha();else if("undefined"===typeof hljsLoading){hljsLoading=1;var a=document.getElementsByTagName("head")[0],e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css";a.appendChild(e);e=document.createElement("script");e.type="text/javascript";e.onload=function(){var d={},f=0;hljs._hb=function(b){b.removeAttribute("data-hljs");var c=b.innerHTML;c in d?b.innerHTML=d[c]:(7&lt;++f&amp;&amp;(d={},f=0),hljs.highlightBlock(b.firstChild),d[c]=b.innerHTML)};hljs._ha=function(){for(var b=document.querySelectorAll("pre[data-hljs]"),c=b.length;0&lt;c;)hljs._hb(b.item(--c))};hljs._ha()};e.async=!0;e.src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js";a.appendChild(e)}\x3c/script>$c$aCOLOR"><span$jcolor:{@color}">$b</span>$c$aE"><xsl:choose><$i$f.=\':)\'"><img src="s.png" alt=":)"/></$i><$g>$d."/></$g></xsl:choose>$c$aFLOAT"><div$jfloat:{@float}">$b</div>$c$aFP|HE">$d@char"/>$c$aHR"><hr/>$c$aLIST"><xsl:choose><$i$fnot(@type)"><ul>$b</ul></$i><$i$fstarts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol$j$h>$estart"/>$b</ol></$i><$g><ul$j$h>$b</ul></$g></xsl:choose>$c$aPREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}">$b</a>$c$aQUOTE"><blockquote><xsl:if$fnot(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if$f@author"><cite>$d@author"/> wrote:</cite></xsl:if>$b</div></blockquote>$c$aURL"><a href="{@url}">$etitle"/>$b</a>$c$aYOUTUBE"><iframe width="240" height="180" src="http://www.youtube.com/embed/{@id}" allowfullscreen=""/>$c$abr"><br/>$c$ae|i|s"/>$ahtml:a"><a>$ehref|@title"/>$b</a>$c</xsl:stylesheet>'.replace(/\$[a-j]/g,
function(a){return{$a:'<xsl:template match="',$b:"<xsl:apply-templates/>",$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:'<xsl:copy-of select="@',$f:' test="',$g:"xsl:otherwise",$h:'list-style-type:{@type}"',$i:"xsl:when",$j:' style="'}[a]});function wa(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}function u(a,b){return b.test(a)?a:!1}
function oa(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function qa(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=xa(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+xa(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path+a.query+a.fragment;c=c.replace(/%.?[a-f]/g,function(a){return a.toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",
b));return b}
function pa(a,b){if(""!==b.scheme&&!a.Q.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d][0]||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^([\da-f]{0,4}:){2,7}(?:[\da-f]{0,4}|\d+\.\d+\.\d+\.\d+)$/.test(c)&&c)}if(c)return"URL host is invalid";
if(a.T&&a.T.test(b.host)||a.X&&!a.X.test(b.host))return"URL host is not allowed"}}function z(a){var b=document.createElement("b");z=function(a){b.innerHTML=a.replace(/</g,"&lt;");return b.textContent};return z(a)}function ya(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function za(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}
function xa(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function Aa(){}Aa.prototype={p:function(){}};function A(a,b,c,d,e){this.m=+a;this.f=b;this.e=+c;this.n=+d;"undefined"!==typeof e&&(this.y=+e);this.d={};this.M=[];isNaN(a+c+d)&&B(this)}A.prototype.x=!1;function D(a,b){a.M.push(b);a.x&&B(b)}function B(a){a.x||(a.x=!0,a.M.forEach(function(a){B(a)}))}
function E(a,b){a.f===b.f&&(1===a.m&&2===b.m&&b.e>=a.e?(a.s=b,b.H=a,D(a,b)):2===a.m&&1===b.m&&b.e<=a.e&&(a.H=b,b.s=a))}function v(a){var b={},c;for(c in a.d)b[c]=a.d[c];return b}function F(a,b){return a.x||a.f!==b.f||1!==b.m||2!==a.m||a.e<b.e||a.H&&a.H!==b||b.s&&b.s!==a?!1:!0}A.prototype.p=function(a,b){this.d[a]=b};function w(a,b){a.d={};for(var c in b)a.d[c]=b[c]}
var G,I,J,K,L,M,ma=new Aa,Ba,N,O,Q={Autolink:{q:function(a,b){b.forEach(function(a){var b=a[0][1];a=a[0][0].replace(/(?![-=\/)])[\s!-.:-@[-`{-~]+$/,"");if(/^www\.|^[^:]+:/i.test(a)){var c=P(2,"URL",b+a.length,0,0);"."===a[3]&&(a="http://"+a);b=P(1,"URL",b,0,1);b.p("url",a);E(b,c)}})},u:"://",r:/\bhttps?:\/\/\S(?:[^\s()\[\]\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65]|\([^\s()]*\)|\[\w*\])+/ig,v:5E4},BBCodes:{q:function(a,b){function c(){var a=P(3,m.z||q,C,k-C,0);w(a,l);return a}function d(){var a=
P(1,m.z||q,C,k-C,0);w(a,l);return a}function e(){la||(la=a.toUpperCase());var b="[/"+q+t+"]",c=la.indexOf(b,k);return 0>c?null:P(2,m.z||q,c,b.length,0)}function f(){var b=k;for(l={};k<S;){var c=a[k];if(-1<" \n\t".indexOf(c))++k;else{if(-1<"/]".indexOf(c))break;var d=/^[-\w]*/.exec(a.substr(k,100))[0].length;if(d){c=a.substr(k,d).toLowerCase();k+=d;if(k>=S)throw"";if("="!==a[k])continue}else if("="===c&&k===b)c=m.D||q.toLowerCase();else throw"";if(++k>=S)throw"";d=l;if('"'===a[k]||"'"===a[k]){var e=
a[k];for(var h=k+1;;){k=a.indexOf(e,k+1);if(0>k)throw"";var f=0;do++f;while("\\"===a[k-f]);if(f%2)break}e=a.substr(h,k-h).replace(/\\([\\'"])/g,"$1");++k}else{e=/[^\]\n]*?(?=\s*(?:\s\/)?\]|\s+[-\w]+=)/.exec(a.substr(k));if(!e)throw"";e=e[0];k+=e.length}d[c]=e}}}function h(){t="";":"===a[k]&&(t=/^:\d*/.exec(a.substr(k))[0],k+=t.length);if("/"===a[C+1])"]"===a[k]&&""===t&&(++k,P(2,m.z||q,C,k-C,0));else{f();if(m.P)for(var b in m.P)b in l||(l[b]=m.P[b]);if("]"===a[k]){++k;var h=[];m.G&&m.G.forEach(function(a){a in
l||h.push(a)});var g=(b=t||m.ca)||h.length?e():null;if(g)h.forEach(function(b){l[b]=a.substr(k,g.e-k)});else if(b)return;b=d();g&&E(b,g)}else"/]"===a.substr(k,2)&&(k+=2,c())}}var g={"*":{z:"LI"},B:[],C:[],CODE:{D:"lang"},COLOR:[],FLOAT:[],HR:[],I:[],LIST:{D:"type"},MEDIA:{G:["url"],D:"site"},QUOTE:{D:"author"},S:[],U:[],URL:{G:["url"]},YOUTUBE:{G:["url"],D:"url"}},l,m,q,t,k,C,S=a.length,la="";b.forEach(function(a){q=a[1][0].toUpperCase();if(q in g){m=g[q];C=a[0][1];k=C+a[0][0].length;try{h()}catch(db){}}})},
u:"[",r:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,v:5E4},Censor:{q:function(a,b){var c=[[/^apple$/i,"banana"]];b.forEach(function(a){var b=/^\W/.test(a[0][0])?1:0,d=a[0][0].substr(b);a=P(3,"CENSOR",a[0][1]+b,d.length,0);if(c)for(b=0;b<c.length;++b){var h=c[b][1];if(c[b][0].test(d)){a.p("with",h);break}}})},r:/(?:^|\W)apple(?!\w)/gi,v:5E4},Emoticons:{q:function(a,b){b.forEach(function(a){P(3,"E",a[0][1],a[0][0].length,0)})},u:":)",r:/:\)/g,v:5E4},FancyPants:{q:function(a){function b(a,b,c,d){a=P(3,S,a,b,d||
0);a.p(t,c);return a}function c(){if(!(0>a.indexOf("...")&&0>a.indexOf("--")))for(var c={"--":"\u2013","---":"\u2014","...":"\u2026"},d=/---?|\.\.\./g,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0]])}function d(){if(!(0>a.indexOf("/")))for(var c={"0/3":"\u2189","1/10":"\u2152","1/2":"\u00bd","1/3":"\u2153","1/4":"\u00bc","1/5":"\u2155","1/6":"\u2159","1/7":"\u2150","1/8":"\u215b","1/9":"\u2151","2/3":"\u2154","2/5":"\u2156","3/4":"\u00be","3/5":"\u2157","3/8":"\u215c","4/5":"\u2158","5/6":"\u215a",
"5/8":"\u215d","7/8":"\u215e"},d,e=/\b(?:0\/3|1\/(?:[2-9]|10)|2\/[35]|3\/[458]|4\/5|5\/[68]|7\/8)\b/g;d=e.exec(a);)b(+d.index,d[0].length,c[d[0]])}function e(){if(!(0>a.indexOf("<<")))for(var c,d=/<<( ?)(?! )[^\n<>]*?[^\n <>]\1>>(?!>)/g;c=d.exec(a);){var e=b(+c.index,2,"\u00ab");c=b(+c.index+c[0].length-2,2,"\u00bb");D(e,c)}}function f(){if(!(0>a.indexOf("!=")&&0>a.indexOf("=/=")))for(var c,d=/\b (?:!|=\/)=(?= \b)/g;c=d.exec(a);)b(+c.index+1,c[0].length-1,"\u2260")}function h(c,d,e,h){for(var f;f=
d.exec(a);){var g=b(+f.index+f[0].indexOf(c),1,e);f=b(+f.index+f[0].length-1,1,h);D(g,f)}}function g(){if(k)for(var c,d=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;c=d.exec(a);)b(+c.index+c[0].indexOf("'"),1,"\u2019",10)}function l(){if(k||C||!(0>a.indexOf("x")))for(var c={"'s":"\u2019","'":"\u2032","' ":"\u2032","'x":"\u2032",'"':"\u2033",'" ':"\u2033",'"x':"\u2033"},d,e=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;d=e.exec(a);){"x"===d[0][d[0].length-1]&&b(+d.index+d[0].length-1,1,"\u00d7");var h=d[0].substr(1,
2);c[h]&&b(+d.index+1,1,c[h])}}function m(){if(!(0>a.indexOf("(")))for(var c={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},d=/\((?:c|r|tm)\)/gi,e;e=d.exec(a);)b(+e.index,e[0].length,c[e[0].toLowerCase()])}var q={R:"char",z:"FP"},t=q.R,k=0<=a.indexOf("'"),C=0<=a.indexOf('"'),S=q.z;q.aa||(g(),k&&h("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019"),C&&h('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d"));q.Y||e();q.Z||(f(),l(),d());q.$||c();q.ba||m()}},HTMLElements:{q:function(a,b){var c={W:"html"};b.forEach(function(b){var d=
"/"===a[b[0][1]+1],f=b[0][1],h=b[0][0].length,g=b[2-d][0].toLowerCase();g=c.J&&c.J[g]&&c.J[g][""]?c.J[g][""]:c.W+":"+g;if(d)P(2,g,f,h,0);else{d=/(<\S+|['"\s])\/>$/.test(b[0][0])?Ca(g,f,h,f+h,0):P(1,g,f,h,0);b=b[3][0];f=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi;for(var l;g=f.exec(b);)l=g[0].indexOf("="),0>l&&(l=g[0].length,g[0]+="="+g[0].toLowerCase()),h=g[0].substr(0,l).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),g=g[0].substr(1+l).replace(/^\s+/,"").replace("/s+$/",
""),/^["']/.test(g)&&(g=g.substr(1,g.length-2)),d.p(h,z(g))}})},u:"<",r:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,v:5E4},HTMLEntities:{q:function(a,b){b.forEach(function(a){var b=a[0][0],c=z(b);c===b||32>c.charCodeAt(0)||P(3,"HE",a[0][1],b.length,0).p("char",c)})},u:"&",r:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,v:5E4},MediaEmbed:{q:function(a,b){b.forEach(function(a){var b=a[0][0];P(3,"MEDIA",a[0][1],b.length,-10).p("url",b)})},u:"://",
r:/\bhttps?:\/\/[^["'\s]+/ig,v:5E4},Preg:{q:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1];b=b[3];var e;for(d.lastIndex=0;e=d.exec(a);){var f=P(3,c,e.index,e[0].length,-100);b.forEach(function(a,b){a&&"undefined"!==typeof e[b]&&f.p(a,e[b])})}})}}},R,na={mediasites:{"youtu.be":"youtube","youtube.com":"youtube"},urlConfig:{Q:/^https?$/i}},Da={g:n,b:32},T={B:y,C:{g:aa,j:1,c:x,k:10,h:{b:66},l:5E3},CENSOR:{g:aa,d:{"with":p},j:4,c:x,k:10,h:{b:3153},l:5E3},
CODE:{g:aa,d:{lang:{c:[function(a){return u(a,/^[-0-9A-Za-z_]+$/)}],o:!1}},j:2,c:x,k:10,h:{w:r,b:4432,F:r},l:5E3},COLOR:{g:da,d:{color:{c:[function(a){return u(a,/^(?:#[0-9a-f]{3,6}|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|[a-z]+)$/i)}],o:!0}},j:1,c:x,k:10,h:fa,l:5E3},E:{g:ba,j:1,c:x,k:10,h:ia,l:5E3},FLOAT:{g:n,d:{"float":{c:[function(a){return u(a,/^(?:left|none|right)$/i)}],o:!0}},j:2,c:x,k:10,h:ta,l:5E3},FP:ua,HE:ua,HR:{g:ba,j:2,c:x,k:10,h:{w:r,b:3345},l:5E3},I:y,LI:{g:n,j:0,c:x,k:10,h:{w:{B:1,C:1,COLOR:1,
I:1,LI:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},b:256,F:r},l:5E3},LIST:{g:[32577],d:{start:{c:[function(a){return wa(a)}],o:!1},type:{c:[function(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a},function(a){return u(a,/^[- +,.0-9A-Za-z_]+$/)}],o:!1}},j:2,c:x,k:10,h:{w:r,N:["LI"],b:3456,F:r},l:5E3},MEDIA:{g:[32574],j:6,c:[function(a){return function(a,c){function b(a,b){var c=a.s;if(c){var d=a.e,e=a.n,f=c.e;c=c.n}else d=a.e,
e=0,f=a.e+a.n,c=0;w(Ca(b.toUpperCase(),d,e,f,c,a.y),v(a))}return function(a,c){if("site"in a.d){var d=a.d.site.toLowerCase();a:{for(e in c)if(c[e]===d){var e=!0;break a}e=!1}e&&b(a,d)}else if("url"in a.d){e=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.d.url);if(e[1]&&c[e[1]+":"])d=c[e[1]+":"];else if(e[2])a:{d=e[2];do{if(c[d]){d=c[d];break a}e=d.indexOf(".");if(0>e)break;d=d.substr(1+e)}while(""<d);d=!1}d&&b(a,d)}return!1}(a,c)}(a,na.mediasites)}],k:10,h:{b:513},l:5E3},PREG_60D5AB76:{g:ca,d:{tag:{c:[function(a){return u(a,
/^[a-z0-9]+$/i)}],o:!0}},j:5,c:x,k:10,h:ha,l:5E3},QUOTE:{g:n,d:{author:p},j:2,c:x,k:10,h:ta,l:5E3},S:y,U:y,URL:{g:ca,d:{title:p,url:{c:ra,o:!0}},j:3,c:x,k:10,h:ha,l:5E3},YOUTUBE:{g:[20504],L:[["url",/youtube\.com\/(?:watch.*?v=|v\/|attribution_link.*?v%3D)([-\w]+)/,ea],["url",/youtu\.be\/([-\w]+)/,ea],["url",/[#&?]t=(\d[\dhms]*)/,["","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,ea]],d:{id:{c:ja,o:!0},list:{c:ja,o:!1},t:{c:[function(a){var b=/^(?=\d)(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/.exec(a);
return b?3600*(b[1]||0)+60*(b[2]||0)+(+b[3]||0):wa(a)}],o:!1},url:sa},j:5,c:[function(a,b){return Ea(a,b)},function(){return!0},ka],k:10,h:ia,l:5E3},"html:a":{g:ca,d:{href:sa,title:p},j:5,c:x,k:10,h:ha,l:5E3},"html:b":y},U,Fa,V,W,Ga=0,X;
function Ha(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");G={};I={};K=0;L=null;M=!1;Ba={};N=[];O="";R=0;U=[];Fa=!1;V=a;W=V.length;X=0;J=Da;J.O=!1;++Ga;a=Ga;for(var b in Q)if(!Q[b].K)a:{var c=b,d=Q[c];if(!(d.u&&0>V.indexOf(d.u))){var e=[];if(d.r){e=void 0;var f=d.r;d=d.v;f.lastIndex=0;for(var h=[],g=0;++g<=d&&(e=f.exec(V));){for(var l=+e.index,m=[[e[0],l]],q=0;++q<e.length;){var t=e[q];void 0===t?m.push(["",-1]):(m.push([t,V.indexOf(t,l)]),l+=t.length)}h.push(m)}e=
h;if(!e.length)break a}(0,Q[c].q)(V,e)}}Ia();Y(W,0,!0);do b=O,O=O.replace(/<([^ />]+)[^>]*><\/\1>/g,"");while(O!==b);O=O.replace(/<\/i><i>/g,"",O);O=O.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ja);c=M?"r":"t";b="<"+c;for(var k in Ba)b+=" xmlns:"+k+'="urn:s9e:TextFormatter:'+k+'"';O=b+">"+O+"</"+c+">";if(Ga!==a)throw"The parser has been reset during execution";return O}
function Ea(a,b){b.L&&b.L.forEach(function(b){var c=b[0];if(c in a.d){b=Ka(a.d[c],b[1],b[2]);for(var e in b)e!==c&&e in a.d||a.p(e,b[e])}});return!0}function Ka(a,b,c){var d=b.exec(a);if(!d)return[];var e={};c.forEach(function(a,b){"string"===typeof d[b]&&""!==d[b]&&(e[a]=d[b])});return e}function Ja(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function La(a){M=!0;var b=a.f,c=a.e,d=a.n,e=0,f=0;a.b&256&&(e=1,f=a.m&2?2:1);var h=!1;a.m&1||(h=!0);Y(c,e,h);e=d?za(V.substr(c,d)):"";if(a.m&1){h=b.indexOf(":");0<h&&(Ba[b.substr(0,h)]=0);O+="<"+b;var g=v(a);h=[];for(var l in g)h.push(l);h.sort(function(a,b){return a>b?1:-1});h.forEach(function(a){O+=" "+a+'="'+ya(g[a].toString()).replace(/\n/g,"&#10;")+'"'});O=3===a.m?d?O+(">"+e+"</"+b+">"):O+"/>":d?O+("><s>"+e+"</s>"):O+">"}else d&&(O+="<e>"+e+"</e>"),O+="</"+b+">";for(X=R=c+d;f&&X<W&&"\n"===V[X];)--f,
++X}function Y(a,b,c){c&&(J.b&8?b=-1:c=!1);R>=a&&c&&Ma();if(X>R){var d=Math.min(a,X);O+=V.substr(R,d-R);R=d;R>=a&&c&&Ma()}if(J.b&128)b=a-R,b=V.substr(R,b),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),O+=b,R=a,c&&Ma();else{var e=a;for(d=0;b&&--e>=R;){var f=V[e];if(" "!==f&&"\n"!==f&&"\t"!==f)break;"\n"===f&&--b;++d}a-=d;a>R&&(b=za(V.substr(R,a-R)),32===(J.b&2096)&&(b=b.replace(/\n/g,"<br/>\n")),O+=b);c&&Ma();d&&(O+=V.substr(a,d));R=a+d}}
function Na(a){var b=a.e;a=a.n;var c=V.substr(b,a);Y(b,0,!1);O+="<i>"+za(c)+"</i>";M=!0;R=b+a}function Ma(){J.O&&(O+="</p>",J.O=!1)}function Oa(a){a=T[a.f];if(a.h.N){var b=-1E3,c=V.substr(R),d=R+c.length-c.replace(/^[ \n\r\t]+/,"").length;a.h.N.forEach(function(a){var c=++b;P(1,a,d,0,c||0)})}}function Pa(a,b){var c=a.f;(L.b|a.b)&256&&(b=Qa(b));c=P(2,c,b,0,0);E(c,a)}function Qa(a){for(;a>R&&-1<" \n\t".indexOf(V[a-1]);)--a;return a}
function Ia(){if(U.length){for(var a in T)G[a]=0,I[a]=0;do{for(;U.length;)Fa||(U.sort(Ra),Fa=!0),L=U.pop(),Ta();N.forEach(function(a){Pa(a,W)})}while(U.length)}}
function Ta(){J.b&64&&!F(L,N[N.length-1])&&!(-1<"br i pb v".indexOf(L.f))&&B(L);var a=L.e,b=L.n;if(R>a&&!L.x){var c;if((c=L.H)&&0<=N.indexOf(c)){E(P(2,c.f,R,Math.max(0,a+b-R),0),c);return}if("i"===L.f&&(a=a+b-R,0<a)){P(3,"i",R,Math.min(a,W-R),0);return}B(L)}if(!L.x)if("i"===L.f)Na(L);else if("br"===L.f)J.b&1024||(Y(L.e,0,!1),O+="<br/>");else if("pb"===L.f)Y(L.e,0,!0);else if("v"===L.f)a=J.b,J.b=L.b,Y(L.e+L.n,0,!1),J.b=a;else if(L.m&1)if(a=L,b=a.f,c=T[b],I[b]>=c.l)B(a);else{var d=a,e=T[d.f],f=!0;if(e.c)for(var h=
0;h<e.c.length;++h)if(!e.c[h](d,e)){f=!1;break}if(f){if(d=1E4>K){a:{d=a;if(N.length&&(f=d.f,h=T[f],h.h.F)){e=N[N.length-1];var g=e.f;if(h.h.F[g]){if(g!==f&&1E4>K){f=d.e+d.n;U.length?(h=U[U.length-1],h=h.e):h=W+1;for(;f<h&&-1<" \n\t".indexOf(V[f]);)++f;f=Ua(e,f);D(d,f)}U.push(d);Pa(e,d.e);K+=4;d=!0;break a}}d=!1}if(!d)a:{d=a;if(N.length&&(e=T[d.f],e.h.w&&(f=N[N.length-1],e.h.w[f.f]))){++K;U.push(d);Pa(f,d.e);d=!0;break a}d=!1}d=d||!1}d||(G[b]>=c.k?B(a):(c=T[b].j,J.g[c>>3]&1<<(c&7)?(!(a.b&1)||a.s||
U.length&&F(U[U.length-1],a)||(b=new A(3,b,a.e,a.n),w(b,v(a)),b.b=a.b,a=b),a.b&4096&&!a.s&&"\n"===V[a.e+a.n]&&(b=a.e+a.n,P(3,"i",b,Math.min(1,W-b),0)),La(a),Va(a),Oa(a)):B(a)))}else B(a)}else Wa()}
function Wa(){var a=L;if(G[a.f]){for(var b=[],c=N.length;0<=--c;){var d=N[c];if(F(a,d))break;b.push(d);++K}if(!(0>c)){var e=a.b;b.forEach(function(a){e|=a.b});var f=e&256,h=1E4>K,g=[];b.forEach(function(b){var c=b.f;h&&(b.b&2?g.push(b):h=!1);var d=a.e;f&&(d=Qa(d));c=new A(2,c,d,0);c.b=b.b;La(c);Xa()});La(a);Xa();if(b.length&&1E4>K){d=R;for(c=U.length;0<=--c&&1E4>++K;){var l=U[c];if(l.e>d||l.m&1)break;for(var m=b.length;0<=--m&&1E4>++K;)if(F(l,b[m])){b.splice(m,1);g[m]&&g.splice(m,1);d=Math.max(d,
l.e+l.n);break}}d>R&&Na(new A(3,"i",R,d-R))}g.forEach(function(a){var b=Ua(a,R);(a=a.s)&&E(b,a)})}}}function Xa(){var a=N.pop();--G[a.f];J=J.V}function Va(a){var b=a.f,c=a.b,d=T[b];++I[b];if(3!==a.m){var e=[];c&512?J.g.forEach(function(a,b){e.push(d.g[b]&a)}):J.g.forEach(function(a,b){e.push(d.g[b]&(a&65280|a>>8))});c|=J.b&32;c&16&&(c&=-33);++G[b];N.push(a);J={g:e,b:c,V:J}}}function Ua(a,b){var c=P(a.m,a.f,b,0,a.y);w(c,v(a));return c}
function P(a,b,c,d,e){a=new A(a,b,c,d,e||0);T[b]&&(a.b=T[b].h.b);if(T[b]||-1<"br i pb v".indexOf(a.f))if(T[b]&&T[b].K)B(a);else if(0>d||0>c||c+d>W)B(a);else if(Fa){for(b=U.length;0<b&&0<Ra(U[b-1],a);)U[b]=U[b-1],--b;U[b]=a}else U.push(a);else B(a);return a}function Ca(a,b,c,d,e,f){d=P(2,a,d,e,-f||0);a=P(1,a,b,c,f||0);E(a,d);return a}function Ra(a,b){var c=a.e,d=b.e;if(c!==d)return d-c;if(a.y!==b.y)return b.y-a.y;c=a.n;d=b.n;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.m]-c[a.m])}
var Ya="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;function Za(a,b){if(Ya){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}
function $a(a,b){if(Ya){var c=b.createElement("div"),d=b.createDocumentFragment();Z.input=Za(a,"MSXML2.DOMDocument.6.0");Z.transform();for(c.innerHTML=Z.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(Z.transformToFragment(Za(a),b),!0)}var Z,ab=Za(va,"MSXML2.FreeThreadedDOMDocument.6.0");if(Ya){var bb=new ActiveXObject("MSXML2.XSLTemplate.6.0");bb.stylesheet=ab;Z=bb.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(ab);var cb={};
window.s9e||(window.s9e={});
window.s9e.TextFormatter={disablePlugin:function(a){Q[a]&&(Q[a].K=!0)},enablePlugin:function(a){Q[a]&&(Q[a].K=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,f=b.childNodes,g=c.length,q=f.length,l,m,t=0,H=0;t<g&&t<q;){l=c[t];m=f[t];if(!d(l,m))break;++t}for(var Sa=Math.min(g-t,q-t);H<Sa;){l=c[g-(H+1)];m=f[q-(H+1)];if(!d(l,m))break;++H}for(g-=H;--g>=t;)a.removeChild(c[g]),h=a;q-=H;if(!(t>=q)){c=e.createDocumentFragment();g=t;do c.appendChild(f[g].cloneNode(!0));while(++g<q);H?(f=a.childNodes[t],
a.insertBefore(c,f),h=f.ea):(a.appendChild(c),h=a.da)}}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue,h=a),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,g=d.length;0<=--g;){var l=d[g],m=l.namespaceURI;l=l.name;b.hasAttributeNS(m,l)||(a.removeAttributeNS(m,l),h=a)}for(g=f;0<=--g;)d=e[g],m=d.namespaceURI,l=d.name,d=d.value,d!==a.getAttributeNS(m,
l)&&(a.setAttributeNS(m,l,d),h=a);c(a,b);return!0}for(var e=b.ownerDocument,f=$a(Ha(a),e),h=b,g=f.querySelectorAll("[data-s9e-livepreview-postprocess]"),l=g.length;0<=--l;){var m=g[l].getAttribute("data-s9e-livepreview-postprocess");cb[m]||(cb[m]=new Function(m));cb[m].call(g[l])}c(b,f);return h}};})();

		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.4.1/punycode.min.js"></script>
</body>
</html>