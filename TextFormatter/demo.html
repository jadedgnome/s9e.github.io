<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="http://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right][youtube]http://www.youtube.com/watch?v=QH2-TGUlwu4[/youtube][/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter/tree/master/src/ title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as http://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][YOUTUBE][/C], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=http://softwaremaniacs.org/soft/highlight/en/]Highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

The parser/renderer used on this page page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 21.6 KB (8.9 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left;">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked="checked" onchange="toggle(this)"><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script type="text/javascript">function aa(a){var b=document.createElement("b");b.innerHTML=a.replace(/</g,"&lt;");return b.textContent}function ba(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}function m(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function da(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}
function n(a,b){return b.test(a)?a:!1}
function ea(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,e){c[a]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function fa(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=da(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+da(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function ga(a,b){if(""!==b.scheme&&!a.Y.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d].charAt(0)||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.Z&&a.Z.test(b.host)||a.ca&&!a.ca.test(b.host))return"URL host is not allowed"}}function ha(){}ha.prototype={q:function(){}};function p(a,b,c,d){this.u=a;this.g=b;this.e=c;this.v=d;this.d={};this.R=[];isNaN(a+c+d)&&r(this)}p.prototype.L=!1;p.prototype.w=0;function ia(a,b){a.R.push(b);a.L&&r(b)}function r(a){a.L||(a.L=!0,a.R.forEach(function(a){r(a)}))}
function t(a,b){a.g===b.g&&(1===a.u&&2===b.u&&b.e>=a.e?(a.F=b,b.O=a,ia(a,b)):2===a.u&&1===b.u&&b.e<=a.e&&(a.O=b,b.F=a))}function u(a){var b={},c;for(c in a.d)b[c]=a.d[c];return b}function v(a,b){return a.L||a.g!==b.g||1!==b.u||2!==a.u||a.e<b.e||a.O&&a.O!==b||b.F&&b.F!==a?!1:!0}function ja(a){return"br"===a.g||"i"===a.g||"pb"===a.g}p.prototype.q=function(a,b){this.d[a]=b};function w(a,b){a.d={};for(var c in b)a.d[c]=b[c]}
var x,A,B,E,G,H,ka=new ha,la,J,K,M={BBCodes:{G:"[",z:/\[\/?(\*|[-\w]+)(?=[\] =:\/])/g,H:1E4,y:function(a,b){function c(){var a=L(3,q.r||y,D,l-D);w(a,h)}function d(){var a=L(1,q.r||y,D,l-D);w(a,h);return a}function e(){var c="[/"+y+z+"]",b=a.toUpperCase().indexOf(c,l);return 0>b?null:L(2,q.r||y,b,c.length)}function g(){var c=l,b;for(h={};l<ca;)if(b=a.charAt(l)," "===b)++l;else{if("]"===b||"/"===b)break;var d=/^[-\w]*/.exec(a.substr(l,100))[0].length;if(d){b=a.substr(l,d).toLowerCase();l+=d;if(l>=ca)throw"";
if("="!==a.charAt(l))continue}else if("="===b&&l===c)b=q.M||y.toLowerCase();else throw"";if(++l>=ca)throw"";var d=h,e;if('"'===a.charAt(l)||"'"===a.charAt(l)){e=a.charAt(l);for(var f=l+1;;){l=a.indexOf(e,l+1);if(0>l)throw"";var g=0;do++g;while("\\"===a.charAt(l-g));if(g%2)break}e=a.substr(f,l-f).replace(/\\([\\'"])/g,"$1");++l}else{e=/[^\]]*?(?= *(?: \/)?\]| +[-\w]+=)/.exec(a.substr(l));if(!e)throw"";e=e[0];l+=e.length}d[b]=e}}function f(){z="";":"===a[l]&&(z=/^:\d*/.exec(a.substr(l))[0],l+=z.length);
if("/"===a.charAt(D+1))"]"===a.charAt(l)&&""===z&&(++l,L(2,q.r||y,D,l-D));else{g();if(q.W)for(var b in q.W)b in h||(h[b]=q.W[b]);if("]"===a.charAt(l)){++l;var f=[];q.K&&q.K&&q.K.forEach(function(a){a in h||f.push(a)});var k=(b=z||q.da)||f.length?e():null;if(k)f.forEach(function(b){h[b]=a.substr(l,k.e-l)});else if(b)return;b=d();k&&t(b,k)}else"/]"===a.substr(l,2)&&(l+=2,c())}}var k={B:{},I:{},U:{},S:{},URL:{K:["url"]},QUOTE:{M:"author"},LIST:{M:"type"},"*":{r:"LI"},C:{},COLOR:{},FLOAT:{},CODE:{M:"lang"},
MEDIA:{K:["url"]},YOUTUBE:{K:["url"],M:"url"}},h,q,y,z,l,D,ca=a.length;b.forEach(function(a){y=a[1][0].toUpperCase();if(y in k){q=k[y];D=a[0][1];l=D+a[0][0].length;try{f()}catch(b){}}})}},Censor:{z:/(?:^|\W)apple(?!\w)/gi,H:1E4,y:function(a,b){var c={x:"with",r:"CENSOR",N:[[/^apple$/i,"banana"]]},d=c.r,e=c.x;b.forEach(function(a){if(!c.X||!c.X.test(a[0][0])){var b=/^\W/.test(a[0][0])?1:0,k=a[0][0].substr(b);a=L(3,d,a[0][1]+b,k.length);if(c.N)for(b=0;b<c.N.length;++b){var h=c.N[b][1];if(c.N[b][0].test(k)){a.q(e,
h);break}}}})}},Emoticons:{G:":)",z:/:\)/g,H:1E4,y:function(a,b){var c={r:"E"};b.forEach(function(b){c.$&&b[0][1]&&c.$.test(a.charAt(b[0][1]-1))||L(3,c.r,b[0][1],b[0][0].length)})}},Preg:{y:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1],e=b[2];b=b[3];var g;for(d.lastIndex=0;g=d.exec(a);){var f=g.index,k=g[0].length,h;if(e&&""!==g[e]){var q=a.indexOf(g[e],f),y=g[e].length,z=q-f;h=ma(c,f,z,q+y,k-(z+y))}else h=L(3,c,f,k);b.forEach(function(a,b){a&&
"undefined"!==typeof g[b]&&h.q(a,g[b])})}})}},HTMLElements:{G:"<",z:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,H:1E4,y:function(a,b){var c={ba:"html"};b.forEach(function(b){var e="/"===a.charAt(b[0][1]+1),g=b[0][1],f=b[0][0].length,k=b[2-e][0].toLowerCase(),h=c.D&&c.D[k]&&c.D[k][""]?c.D[k][""]:c.ba+":"+k;if(e)L(2,h,g,f);else{e="/>"===b[0][0].substr(f-2)?ma(h,g,f,g+f,0):L(1,h,g,f);b=b[3][0];for(var g=/[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi,
q;h=g.exec(b);)q=h[0].indexOf("="),0>q&&(q=h[0].length,h[0]+="="+h[0].toLowerCase()),f=h[0].substr(0,q).toLowerCase().replace(/^\s+/,"").replace("/s+$/",""),h=h[0].substr(1+q).replace(/^\s+/,"").replace("/s+$/",""),c.D&&c.D[k]&&c.D[k][f]&&(f=c.D[k][f]),/^["']/.test(h)&&(h=h.substr(1,h.length-2)),e.q(f,aa(h))}})}},Autolink:{z:/https?:\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,G:"://",H:1E4,y:function(a,b){b.forEach(function(b){var d=b[0][0],e=b[0][1];if(!(0<e&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(e-
1)))){for(;;)if(d=d.replace(/[\s!"',.<>?]+$/,""),")"===d.substr(-1)&&d.replace(/[^(]+/g,"").length<d.replace(/[^)]+/g,"").length)d=d.substr(0,d.length-1);else break;b=L(2,"URL",e+d.length,0);"."===d.charAt(3)&&(d="http://"+d);e=L(1,"URL",e,0);e.q("url",d);t(e,b)}})}},HTMLEntities:{G:"&",z:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,H:1E4,y:function(a,b){b.forEach(function(a){var b=a[0][0],e=aa(b);e!==b&&L(3,"HE",a[0][1],b.length).q("char",e)})}},FancyPants:{y:function(a){function b(){for(var b={"--":"\u2013",
"---":"\u2014","...":"\u2026"},c,d=/---?|\.\.\./g;c=d.exec(a);){var e=b[c[0]];L(3,f.r,+c.index,c[0].length).q(f.x,e)}}function c(b,c,d,e){for(var g;g=c.exec(a);){var h=L(3,f.r,+g.index+g[0].indexOf(b),1);g=L(3,f.r,+g.index+g[0].length-1,1);h.q(f.x,d);g.q(f.x,e);ia(h,g)}}function d(a){for(var b,c=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;b=c.exec(a);)b=L(3,f.r,+b.index+b[0].indexOf("'"),1),b.q(f.x,"\u2019"),b.w=10}function e(a){for(var b,c=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;b=c.exec(a);){var d=+b.index+
b[0].length-1;"x"===b[0].charAt(d)&&L(3,f.r,d,1).q(f.x,"\u00d7");var e=b[0].charAt(1);if("'"===e||'"'===e)d=+b.index+1,b="'s"===b[0].substr(1,2)?"\u2019":"'"===e?"\u2032":"\u2033",L(3,f.r,d,1).q(f.x,b)}}function g(){for(var b={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},c,d=/\((?:c|r|tm)\)/gi;c=d.exec(a);){var e=b[c[0].toLowerCase()];L(3,f.r,+c.index,c[0].length).q(f.x,e)}}var f={x:"char",r:"FP"},k=0<=a.indexOf("'"),h=0<=a.indexOf('"');k&&d(a);(k||h||0<=a.indexOf("x"))&&e(a);k&&c("'",/(?:^|\W)'.+?'(?!\w)/g,
"\u2018","\u2019");h&&c('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d");(0<=a.indexOf("...")||0<=a.indexOf("--"))&&b();0<=a.indexOf("(")&&g()}},MediaEmbed:{G:"://",z:/\bhttps?:\/\/(?:[-.\w]+\.)?youtu(?:\.be|be\.com)\/[^["'\s]+(?!\S)/g,H:1E4,y:function(a,b){b.forEach(function(a){var b=a[0][0];a=L(3,"MEDIA",a[0][1],b.length);a.q("url",b);a.w=-10})}}},N,na={urlConfig:{Y:/^https?$/i},mediasites:{"youtube.com":"youtube","youtu.be":"youtube"}},oa={f:[55],k:[63],b:32},R={B:{c:[P],n:10,j:{b:2},o:1E3,l:0,f:[51],
k:[63]},I:{c:[P],n:10,j:{b:2},o:1E3,l:0,f:[51],k:[63]},U:{c:[P],n:10,j:{b:2},o:1E3,l:0,f:[51],k:[63]},S:{c:[P],n:10,j:{b:2},o:1E3,l:0,f:[51],k:[63]},URL:{d:{url:{c:[pa],p:!0},title:{p:!1}},c:[P],n:10,j:{b:514},o:1E3,l:1,f:[53],k:[61]},QUOTE:{d:{author:{p:!1}},c:[P],n:10,j:{J:{B:1,I:1,U:1,S:1,URL:1,C:1,COLOR:1,PREG_60D5AB76:1,"html:a":1,"html:b":1},b:256},o:1E3,l:2,f:[55],k:[63]},LIST:{d:{type:{c:[qa,ra],p:!1}},c:[P],n:10,j:{J:{B:1,I:1,U:1,S:1,URL:1,C:1,COLOR:1,PREG_60D5AB76:1,"html:a":1,"html:b":1},
b:3456},o:1E3,l:2,f:[40],k:[63]},LI:{c:[P],n:10,j:{J:{B:1,I:1,U:1,S:1,URL:1,C:1,COLOR:1,PREG_60D5AB76:1,"html:a":1,"html:b":1},T:{LI:1},b:256},o:1E3,l:3,f:[55],k:[63]},C:{c:[P],n:10,j:{b:66},o:1E3,l:0,f:[0],k:[0]},COLOR:{d:{color:{c:[sa],p:!0}},c:[P],n:10,j:{b:2},o:1E3,l:0,f:[51],k:[63]},FLOAT:{d:{"float":{c:[ta],p:!0}},c:[P],n:10,j:{J:{B:1,I:1,U:1,S:1,URL:1,C:1,COLOR:1,PREG_60D5AB76:1,"html:a":1,"html:b":1},b:256},o:1E3,l:2,f:[55],k:[63]},CODE:{d:{lang:{c:[ua],p:!1}},c:[P],n:10,j:{J:{B:1,I:1,U:1,
S:1,URL:1,C:1,COLOR:1,PREG_60D5AB76:1,"html:a":1,"html:b":1},b:4432},o:1E3,l:2,f:[0],k:[0]},CENSOR:{d:{"with":{p:!1}},c:[P],n:10,j:{b:3137},o:1E3,l:4,f:[0],k:[0]},E:{c:[P],n:10,j:{b:3073},o:1E3,l:0,f:[48],k:[63]},PREG_60D5AB76:{d:{tag:{c:[va],p:!0}},c:[P],n:10,j:{b:514},o:1E3,l:1,f:[53],k:[61]},"html:a":{d:{href:{c:[pa],p:!1},title:{p:!1}},c:[P],n:10,j:{b:514},o:1E3,l:1,f:[53],k:[61]},"html:b":{c:[P],n:10,j:{b:2},o:1E3,l:0,f:[51],k:[63]},HE:{d:{"char":{p:!0}},c:[P],n:10,j:{b:3073},o:1E3,l:4,f:[48],
k:[63]},FP:{d:{"char":{p:!0}},c:[P],n:10,j:{b:3073},o:1E3,l:4,f:[48],k:[63]},MEDIA:{c:[wa],n:10,j:{b:577},o:1E3,l:5,f:[0],k:[0]},YOUTUBE:{d:{url:{c:[pa],p:!1},id:{c:[xa],p:!0},h:{c:[Q],p:!1},m:{c:[Q],p:!1},s:{c:[Q],p:!1},t:{c:[Q],p:!1},list:{c:[xa],p:!1}},Q:[["url",/youtube\.com\/(?:watch.*?v=|v\/)([-\w]+)/,["","id"]],["url",/youtu\.be\/([-\w]+)/,["","id"]],["url",/[#&?]t=(?:(?:(\d+)h)?(\d+)m(\d+)|(\d+))/,["","h","m","s","t"]],["url",/&list=([-\w]+)/,["","list"]],["url",/^([-\w]+)$/,["","id"]]],c:[ya,
P],n:10,j:{b:3137},o:1E3,l:1,f:[0],k:[0]}},S,T,U,V,za=0,W;
function Aa(a){a=a.replace(/\r\n?/g,"\n",a);a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"",a);x={};A={};E=0;G=null;H=!1;la={};J=[];K="";N=0;S=[];T=!0;U=a;V=U.length;W=0;B=oa;B.V=!1;++za;a=za;for(var b in M)if(!M[b].P)a:{var c=b,d=M[c];if(!(d.G&&0>U.indexOf(d.G))){var e=[];if(d.z){e=d.z;d=d.H;e.lastIndex=0;for(var g=[],f=0,k=void 0;++f<=d&&(k=e.exec(U));){for(var h=+k.index,q=[[k[0],h]],y=0;++y<k.length;){var z=k[y];void 0===z?q.push(["",-1]):(q.push([z,U.indexOf(z,h)]),h+=z.length)}g.push(q)}e=g;
if(!e.length)break a}(0,M[c].y)(U,e)}}Ba();X(V,0,!0);do b=K,K=K.replace(/<(?!\/)[^>]+><\/[\w:]+>/g,"");while(K!==b);K=K.replace(/<\/i><i>/g,"",K);K=K.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ca);c=H?"r":"t";b="<"+c;for(var l in la)b+=" xmlns:"+l+'="urn:s9e:TextFormatter:'+l+'"';K=b+">"+K+"</"+c+">";if(za!==a)throw"The parser has been reset during execution";return K}
function Da(a,b){b.Q&&b.Q.forEach(function(b){var d=b[0],e=b[1];b=b[2];if(d in a.d){var g;(g=e.exec(a.d[d]))&&b.forEach(function(b,c){if(""!==b&&"string"===typeof g[c]){var e=g[c];b!==d&&b in a.d||a.q(b,e)}})}});return!0}function Ca(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Ea(a){H=!0;var b=a.g,c=a.e,d=a.v,e=0,g=0;a.b&256&&(e=1,g=a.u&2?2:1);var f=!1;a.u&1||(f=!0);X(c,e,f);e=d?m(U.substr(c,d)):"";if(a.u&1){f=b.indexOf(":");0<f&&(la[b.substr(0,f)]=0);K+="<"+b;var k=u(a),f=[],h;for(h in k)f.push(h);f.sort(function(a,b){return a>b?1:-1});f.forEach(function(a){K+=" "+a+'="'+ba(k[a].toString())+'"'});K=3===a.u?d?K+(">"+e+"</"+b+">"):K+"/>":d?K+("><s>"+e+"</s>"):K+">"}else d&&(K+="<e>"+e+"</e>"),K+="</"+b+">";for(W=N=c+d;g&&W<V&&"\n"===U.charAt(W);)--g,++W}
function X(a,b,c){c&&(B.b&8?b=-1:c=!1);N>=a&&c&&Y();if(W>N){var d=Math.min(a,W);K+=U.substr(N,d-N);N=d;N>=a&&c&&Y()}if(B.b&128)b=a-N,b=U.substr(N,b),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),K+=b,N=a,c&&Y();else{for(var e=a,d=0;b&&--e>=N;){var g=U.charAt(e);if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;a>N&&(b=m(U.substr(N,a-N)),32===(B.b&2096)&&(b=b.replace(/\n/g,"<br/>\n")),K+=b);c&&Y();d&&(K+=U.substr(a,d));N=a+d}}
function Fa(a){var b=a.e;a=a.v;var c=U.substr(b,a);X(b,0,!1);K+="<i>"+m(c)+"</i>";H=!0;N=b+a}function Y(){B.V&&(K+="</p>",B.V=!1)}function Ga(a,b){var c=a.g;a.b&256&&(b=Ha(b));t(L(2,c,b,0),a)}function Ha(a){for(;a>N&&-1<" \n\t".indexOf(U.charAt(a-1));)--a;return a}function Ba(){if(S.length){for(var a in R)x[a]=0,A[a]=0;do{for(;S.length;)T||(S.sort(Ia),T=!0),G=S.pop(),B.b&64&&!v(G,J[J.length-1])&&!ja(G)||Ja();J.forEach(function(a){Ga(a,V)})}while(S.length)}}
function Ja(){if(!G.L){var a=G.e,b=G.v;if(N>a){var c;if((c=G.O)&&0<=J.indexOf(c))a=Math.max(0,a+b-N),a=L(2,c.g,N,a),t(a,c);else{if("i"===G.g&&(c=a+b-N,0<c)){L(3,"i",N,c);return}r(G)}}else if("i"===G.g)Fa(G);else if("br"===G.g)B.b&1024||(X(G.e,0,!1),K+="<br/>");else if("pb"===G.g)X(G.e,0,!0);else if(G.u&1)if(c=G,a=c.g,b=R[a],A[a]>=b.o)r(c);else{var d=c,e=R[d.g],g=!0;if(e.c)for(var f=0;f<e.c.length;++f)if(!e.c[f](d,e)){g=!1;break}if(g){a:{d=c;if(J.length&&(g=d.g,f=R[g],f.j.J)){var e=J[J.length-1],k=
e.g;if(f.j.J[k]){k!==g&&1E3>E&&(g=Ka(e,d.e+d.v),ia(d,g));++E;S.push(d);Ga(e,d.e);d=!0;break a}}d=!1}if(!d)a:{d=c;if(J.length&&(e=R[d.g],e.j.T&&(g=J[J.length-1],e.j.T[g.g]))){S.push(d);Ga(g,d.e);d=!0;break a}d=!1}d||(x[a]>=b.n?r(c):(b=R[a].l,B.f[b>>5]&1<<(b&31)?(!(c.b&1)||c.F||S.length&&v(S[S.length-1],c)||(a=new p(3,a,c.e,c.v),w(a,u(c)),a.b=c.b,c=a),c.b&4096&&!c.F&&"\n"===U.charAt(c.e+c.v)&&L(3,"i",c.e+c.v,1),Ea(c),La(c)):r(c)))}else r(c)}else Ma()}}
function Ma(){var a=G;if(x[a.g]){for(var b=[],c=J.length;0<=--c;){var d=J[c];if(v(a,d))break;b.push(d);++E}if(!(0>c)){var e=1E3>E,g=[];b.forEach(function(b){var c=b.g;e&&(b.b&2?g.push(b):e=!1);var d=a.e;b.b&256&&(d=Ha(d));c=new p(2,c,d,0);c.b=b.b;Ea(c);Na()});Ea(a);Na();if(b.length&&1E3>E){d=N;for(c=S.length;0<=--c&&1E3>++E;){var f=S[c];if(f.e>d||f.u&1)break;for(var k=b.length;0<=--k&&1E3>++E;)if(v(f,b[k])){b.splice(k,1);g[k]&&g.splice(k,1);d=Math.max(d,f.e+f.v);break}}d>N&&Fa(new p(3,"i",N,d-N))}g.forEach(function(a){var b=
Ka(a,N);(a=a.F)&&t(b,a)})}}}function Na(){var a=J.pop();--x[a.g];B=B.aa}function La(a){function b(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=a[c]&b[c];return e}var c=a.g,d=a.b,e=R[c];++A[c];3!==a.u&&(++x[c],J.push(a),a=b(e.f,e.f),d&512&&(a=b(a,B.f)),e=b(B.k,e.k),a=b(a,e),d|=B.b&32,d&16&&(d&=-33),B={f:a,k:e,b:d,aa:B})}function Ka(a,b){var c=L(a.u,a.g,b,0);w(c,u(a));c.w=a.w;return c}
function L(a,b,c,d){a=new p(a,b,c,d);R[b]&&(a.b=R[b].j.b);R[b]||ja(a)?R[b]&&R[b].P?r(a):0>d||0>c||c+d>V?r(a):(T&&S.length&&a.e>=S[S.length-1].e&&(T=!1),S.push(a)):r(a);return a}function ma(a,b,c,d,e){b=L(1,a,b,c);t(b,L(2,a,d,e));return b}function Ia(a,b){var c=a.e,d=b.e;if(c!==d)return d-c;if(a.w!==b.w)return b.w-a.w;c=a.v;d=b.v;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.u]-c[a.u])}var Oa="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function Pa(a,b){if(Oa){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function Qa(a,b){if(Oa){var c=b.createElement("div"),d=b.createDocumentFragment();Z.input=Pa(a,"MSXML2.DOMDocument.6.0");Z.transform();for(c.innerHTML=Z.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(Z.transformToFragment(Pa(a),b),!0)}
var Z,Ra=Pa('<?xml version="1.0" encoding="utf-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:template match="B|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}"><xsl:apply-templates/></xsl:element></xsl:template><xsl:template match="C"><code class="inline"><xsl:apply-templates/></code></xsl:template><xsl:template match="CENSOR"><xsl:choose><xsl:when test="@with"><xsl:value-of select="@with"/></xsl:when><xsl:otherwise>****</xsl:otherwise></xsl:choose></xsl:template><xsl:template match="CODE"><pre data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs){{var a=this.innerHTML;a in hljs._?this.innerHTML=hljs._[a]:(Object.keys&amp;&amp;7&lt;Object.keys(hljs._).length&amp;&amp;(hljs._={{}}),hljs.highlightBlock(this.firstChild),hljs._[a]=this.innerHTML)}}"><code class="{@lang}"><xsl:apply-templates/></code></pre><script>if("undefined"===typeof hljs){var a=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=\'//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css\';a.appendChild(b);b=document.createElement("script");b.type="text/javascript";b.onload=function(){hljs._={};hljs.initHighlighting()};b.async=!0;b.src=\'//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js\';a.appendChild(b)}\x3c/script></xsl:template><xsl:template match="COLOR"><span style="color:{@color}"><xsl:apply-templates/></span></xsl:template><xsl:template match="E"><xsl:choose><xsl:when test=".=\':)\'"><img src="s.png" alt=":)"/></xsl:when><xsl:otherwise><xsl:value-of select="."/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="FLOAT"><div style="float:{@float}"><xsl:apply-templates/></div></xsl:template><xsl:template match="FP|HE"><xsl:value-of select="@char"/></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:when test="starts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol style="list-style-type:{@type}"><xsl:apply-templates/></ol></xsl:when><xsl:otherwise><ul style="list-style-type:{@type}"><xsl:apply-templates/></ul></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="PREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:if test="not(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if test="@author"><cite><xsl:value-of select="@author"/> wrote:</cite></xsl:if><xsl:apply-templates/></div></blockquote></xsl:template><xsl:template match="URL"><a href="{@url}"><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="YOUTUBE"><iframe width="240" height="180" src="http://www.youtube.com/embed/{@id}" allowfullscreen=""/></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/><xsl:template match="html:a"><a><xsl:copy-of select="@href"/><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template></xsl:stylesheet>',"MSXML2.FreeThreadedDOMDocument.6.0");
if(Oa){var Sa=new ActiveXObject("MSXML2.XSLTemplate.6.0");Sa.stylesheet=Ra;Z=Sa.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(Ra);var Ta={};function P(a,b){var c;a:{if(b.d){var d,e=u(a);for(c in e){var g=e[c];if(b.d[c]){if(d=b.d[c],d.c){ka.q(c);for(var f=0;f<d.c.length;++f)if(g=d.c[f](g,c),!1===g){delete a.d[c];break}!1!==g&&a.q(c,g)}}else delete a.d[c]}for(c in b.d)if(d=b.d[c],!(c in a.d)&&d.p){c=!1;break a}}else w(a,{});c=!0}return c}
function pa(a){var b=na.urlConfig,c=ea(a.replace(/^\s+/,"").replace(/\s+$/,""));ga(b,c)?(ka&&(c.attrValue=a),a=!1):a=fa(c);return a}function qa(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a}function ra(a){return/^[-\w+., ]+$/.test(a)?a:!1}function sa(a){return/^(?:#[0-9a-f]{3,6}|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|[a-z]+)$/i.test(a)?a:!1}function ta(a){return n(a,/^(?:left|none|right)$/i)}function ua(a){return/^[-\w]+$/.test(a)?a:!1}
function va(a){return n(a,/^[a-z0-9]+$/i)}function wa(a){var b=na.mediasites,c;if("media"in a.d)c=a.d.media,!("id"in a.d)&&"url"in a.d&&-1===a.d.url.indexOf("://")&&a.q("id",a.d.url);else if("url"in a.d){var d=/^(?:([^:]+):)?(?:\/\/([^\/]+))?/.exec(a.d.url);if(d[1]&&b[d[1]+":"])c=b[d[1]+":"];else if(d[2]){d=d[2];do{if(b[d]){c=b[d];break}var e=d.indexOf(".");if(-1==e)break;d=d.substr(1+e)}while(""<d)}}c&&(b=a.F||a,d=a.e,c=L(3,c.toUpperCase(),d,b.e+b.v-d),w(c,u(a)),c.w=a.w);return!1}
function ya(a,b){return Da(a,b)}function xa(a){return n(a,/^(?:[-\w]+)$/)}function Q(a){return n(a,/^(?:\d+)$/)}
window.s9e={TextFormatter:{disablePlugin:function(a){M[a]&&(M[a].P=!0)},enablePlugin:function(a){M[a]&&(M[a].P=!1)},preview:function(a,b){function c(a,b){for(var c=a.childNodes,g=b.childNodes,f=c.length,h=g.length,k,O,C=0,I=0;C<f&&C<h;){k=c[C];O=g[C];if(!d(k,O))break;++C}for(var F=Math.min(f-C,h-C);I<F;){k=c[f-(I+1)];O=g[h-(I+1)];if(!d(k,O))break;++I}k=e.createDocumentFragment();for(F=C;F<h-I;)O=g[F].cloneNode(!0),k.appendChild(O),++F;for(F=f-I;--F>=C;)a.removeChild(c[F]);I?a.insertBefore(k,a.childNodes[C]):
a.appendChild(k)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,g=e.length,f=d.length;0<=--f;){var h=d[f],k=h.namespaceURI,h=h.name;b.hasAttributeNS(k,h)||a.removeAttributeNS(k,h)}for(f=g;0<=--f;)d=e[f],k=d.namespaceURI,h=d.name,d=d.value,d!==a.getAttributeNS(k,h)&&a.setAttributeNS(k,h,d);c(a,
b);return!0}for(var e=b.ownerDocument,g=Qa(Aa(a),e),f=g.querySelectorAll("[data-s9e-livepreview-postprocess]"),k=f.length;0<=--k;){var h=f[k].getAttribute("data-s9e-livepreview-postprocess");Ta[h]||(Ta[h]=new Function(h));Ta[h].call(f[k])}c(b,g)}}};
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		window.setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/punycode/1.0.0/punycode.min.js"></script>
</body>
</html>