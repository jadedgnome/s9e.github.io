<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>s9e\TextFormatter &bull; Demo</title>
	<base href="https://s9e.github.io/TextFormatter/demo.html" />
	<style type="text/css">
		#preview
		{
			font-family: sans;
			padding: 5px;
			background-color: #f8f8f8;
			border: dashed 1px #ddd;
			border-radius: 5px;
		}

		code
		{
			padding: 2px;
			background-color: #fff;
			border-radius: 3px;
			border: solid 1px #ddd;
		}
	</style>

</head>
<body>
	<div style="float:left;width:80%;max-width:800px">
		<form>
			<textarea style="width:99%" rows="15">[float=right]https://www.youtube.com/watch?v=QH2-TGUlwu4[/float]

This is a demo of the JavaScript port of [url=https://github.com/s9e/TextFormatter title="s9e\TextFormatter at GitHub.com"]s9e\TextFormatter[/url].

The following plugins have been enabled:

[list]
  [*][b]Autolink[/b] --- loose URLs such as https://github.com are automatically turned into links
  [*][b]BBCodes[/b]
  [list=circle]
    [*][b]bold[/b], [i]italic[/i], [u]underline[/u], [s]strikethrough[/s],
    [*][color=#f05]co[/color][color=#2f2]lo[/color][color=#02f]r,[/color]
    [*][C][URL][/C], [C:123][C][/C:123], [C][FLOAT][/C], and [C][LIST][/C]
    [*][C][CODE][/C] with real-time syntax highlighting via [url=https://highlightjs.org/]highlight.js[/url]
	[code]$who = "world";
printf("Hello %s\n", $who);[/code]
  [/list]
  [*][b]Censor[/b] --- the word "apple" is censored and automatically replaced with "banana"
  [*][b]Emoticons[/b] --- one emoticon :) has been added
  [*][b]FancyPants[/b] --- some typography is enhanced, e.g. (c) (tm) and "quotes"
  [*][b]MediaEmbed[/b] --- links to YouTube are transformed into playable videos
  [*][b]Preg[/b] --- the Preg plugin provides a way to perform generic regexp-based replacements that are HTML-safe. Here, text that matches [C]/#(?<tag>[a-z0-9]+)/i[/C] is replaced with the template [C]<a href="https://twitter.com/#!/search/%23{@tag}"><xsl:apply-templates/></a>[/C] -- For example: #PHP, #fml
  [*][b]HTMLElements[/b] --- [C]<a>[/C] and [C]<b>[/C] tags are allowed, with two whitelisted attributes for [C]<a>[/C]: [C]href[/C] and [C]title[/C]. Example: <a href="https://github.com" title="GitHub - Social Coding"><b>GitHub</b></a>
  [*][b]HTMLEntities[/b] --- HTML entities such as &amp;hearts; are decoded
[/list]

[hr]

The parser/renderer used on this page has been generated by [url=https://github.com/s9e/TextFormatter/blob/master/scripts/generateLiveDemo.php]this script[/url]. It's been minified with Google Closure Compiler to 23.0 KB (10.0 KB compressed)</textarea>
		</form>
	</div>

	<div style="float:left">
		<form><input type="checkbox" id="Autolink" checked="checked" onchange="toggle(this)"><label for="Autolink">&nbsp;Autolink</label><br><input type="checkbox" id="BBCodes" checked="checked" onchange="toggle(this)"><label for="BBCodes">&nbsp;BBCodes</label><br><input type="checkbox" id="Censor" checked="checked" onchange="toggle(this)"><label for="Censor">&nbsp;Censor</label><br><input type="checkbox" id="Emoticons" checked="checked" onchange="toggle(this)"><label for="Emoticons">&nbsp;Emoticons</label><br><input type="checkbox" id="FancyPants" checked="checked" onchange="toggle(this)"><label for="FancyPants">&nbsp;FancyPants</label><br><input type="checkbox" id="HTMLElements" checked="checked" onchange="toggle(this)"><label for="HTMLElements">&nbsp;HTMLElements</label><br><input type="checkbox" id="HTMLEntities" checked="checked" onchange="toggle(this)"><label for="HTMLEntities">&nbsp;HTMLEntities</label><br><input type="checkbox" id="MediaEmbed" checked="checked" onchange="toggle(this)"><label for="MediaEmbed">&nbsp;MediaEmbed</label><br><input type="checkbox" id="Preg" checked="checked" onchange="toggle(this)"><label for="Preg">&nbsp;Preg</label></form>
	</div>

	<div style="clear:both"></div>

	<div id="preview"></div>

	<script>(function(){function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
var ba=[0],u=[32638],ca=[32634],da=[20560],ea=[22358],fa=["","id"],ha={flags:2},ia={flags:514},ja={flags:3089},v={c:[],m:!1},w={B:1,C:1,COLOR:1,I:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},A=[function(a,b){var c={},d;for(d in b.b){var e=b.b[d],g=!1;if(d in a.b){g=e.c;for(var p=d,m=a.b[d],r=0;r<g.length&&(m=g[r](m,p),!1!==m);++r);g=m}!1!==g?c[d]=g:e.m&&y(a)}z(a,c)}],oa=[function(a){var b=C.urlConfig,c=ka,d=la(a.replace(/^\s+/,"").replace(/\s+$/,""));ma(b,d)?(c&&(d.attrValue=a),a=!1):a=
na(d);return a}],pa={c:[function(a){return E(a,/^[-0-9A-Za-z_]+$/)}],m:!1},qa={s:w,flags:260,x:w},G={f:ca,b:{},g:1,c:A,h:10,e:ha,j:5E3},ra={f:da,b:{"char":{c:[],m:!0}},g:4,c:A,h:10,e:ja,j:5E3},ua='<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:html="urn:s9e:TextFormatter:html" exclude-result-prefixes="html"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:decimal-format decimal-separator="."/>$aB|I|LI|S|U|html:b|p"><xsl:element name="{translate(local-name(),\'BILSU\',\'bilsu\')}">$b</xsl:element>$c$aC"><code class="inline">$b</code>$c$aCENSOR"><xsl:choose><$i$f@with">$d@with"/></$i><$g>****</$g></xsl:choose>$c$aCODE"><pre data-s9e-livepreview-hash="" data-s9e-livepreview-onupdate="if(window[\'hljsLoader\'])window[\'hljsLoader\'][\'highlightBlocks\'](this)"><code><xsl:if$f@lang"><xsl:attribute name="class">language-$d@lang"/></xsl:attribute></xsl:if>$b</code><script async="" crossorigin="anonymous" data-hljs-style="github" data-s9e-livepreview-onrender="if(window[\'hljsLoader\'])this.parentNode.removeChild(this)" integrity="sha384-rZ0ejZvSNKZ+8zPSIZ+HNyQ342JWo975f3niYoUApz9n/1/kQRwO8zS/BooFCO41" onload="hljsLoader.highlightBlocks(this.parentNode)" src="https://cdn.jsdelivr.net/gh/s9e/hljs-loader@1.0.30/loader.min.js"/></pre>$c$aCOLOR"><span$jcolor:{@color}">$b</span>$c$aE"><xsl:choose><$i$f.=\':)\'"><img src="s.png" alt=":)"/></$i><$g>$d."/></$g></xsl:choose>$c$aFLOAT"><div$jfloat:{@float}">$b</div>$c$aFP|HE">$d@char"/>$c$aHR"><hr/>$c$aLIST"><xsl:choose><$i$fnot(@type)"><ul>$b</ul></$i><$i$fstarts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol$j$h>$estart"/>$b</ol></$i><$g><ul$j$h>$b</ul></$g></xsl:choose>$c$aPREG_60D5AB76"><a href="https://twitter.com/#!/search/%23{@tag}">$b</a>$c$aQUOTE"><blockquote><xsl:if$fnot(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if$f@author"><cite>$d@author"/> wrote:</cite></xsl:if>$b</div></blockquote>$c$aURL"><a href="{@url}">$etitle"/>$b</a>$c$aYOUTUBE"><iframe width="240" height="180" src="https://www.youtube.com/embed/{@id}" allowfullscreen=""/>$c$abr"><br/>$c$ae|i|s"/>$ahtml:a"><a>$ehref|@title"/>$b</a>$c</xsl:stylesheet>'.replace(/\$[a-j]/g,
function(a){return{$a:'<xsl:template match="',$b:"<xsl:apply-templates/>",$c:"</xsl:template>",$d:'<xsl:value-of select="',$e:'<xsl:copy-of select="@',$f:' test="',$g:"xsl:otherwise",$h:'list-style-type:{@type}"',$i:"xsl:when",$j:' style="'}[a]}),va={"if(window['hljsLoader'])window['hljsLoader']['highlightBlocks'](this)":function(){window.hljsLoader&&window.hljsLoader.highlightBlocks(this)},"if(window['hljsLoader'])this.parentNode.removeChild(this)":function(){window.hljsLoader&&this.parentNode.removeChild(this)}};
function E(a,b){return b.test(a)?a:!1}
function la(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(\?[^#]*)?(#.*)?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(d,e){c[d]=""<b[e+1]?b[e+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&"undefined"!==typeof punycode&&(c.host=punycode.toASCII(c.host));return c}
function na(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""!==a.host?(b+="//",""!==a.user&&(b+=wa(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+wa(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port)):"file"===a.scheme&&(b+="//");var c=a.path+a.query+a.fragment;c=c.replace(/%.?[a-f]/g,function(d){return d.toUpperCase()},c);b+=xa(c);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A"));return b}
function xa(a){return a.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z~]/g,function(b){return"%"+b[0].charCodeAt(0).toString(16).toUpperCase()})}
function ma(a,b){if(""!==b.scheme&&!a.M.test(b.scheme))return"URL scheme is not allowed";if(""!==b.host){var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,e=c.split(".");0<=--d;){if("0"===e[d][0]||255<e[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^([\da-f]{0,4}:){2,7}(?:[\da-f]{0,4}|\d+\.\d+\.\d+\.\d+)$/.test(c)&&c)}if(c)return"URL host is invalid";if(a.O&&
a.O.test(b.host)||a.R&&!a.R.test(b.host))return"URL host is not allowed"}else if(/^(?:(?:f|ht)tps?)$/.test(b.scheme))return"Missing host"}function ya(a){var b=document.createElement("b");ya=function(c){b.innerHTML=c.replace(/</g,"&lt;");return b.textContent};return ya(a)}function za(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(c){return b[c]})}
function Aa(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(c){return b[c]})}function wa(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})}function Ba(){}Ba.prototype={add:function(){}};function H(a,b,c,d,e){this.l=+a;this.name=b;this.d=+c;this.k=+d;this.v=+e||0;this.b={};this.J=[];isNaN(a+c+d)&&y(this)}H.prototype.o=!1;function I(a,b){a.J.push(b);a.o&&y(b)}
function y(a){a.o||(a.o=!0,a.J.forEach(function(b){y(b)}))}function J(a,b){Ca(a,b)?(a.u=b,b.y=a,I(a,b)):Ca(b,a)&&(a.y=b,b.u=a)}function Ca(a,b){return a.name===b.name&&1===a.l&&2===b.l&&a.d<=a.d}function Da(a){var b={},c;for(c in a.b)b[c]=a.b[c];return b}function Ea(a,b){return a.o||!Ca(b,a)||a.y&&a.y!==b||b.u&&b.u!==a?!1:!0}function z(a,b){a.b={};for(var c in b)a.b[c]=b[c]}
var K,Fa,L,M,N,Ga,ka=new Ba,Ha,O,P,R={Autolink:{n:function(a,b){b.forEach(function(c){var d=c[0][1],e=c[0][0].replace(/(?:(?![-=+)\/_])[\s!-.:-@[-`{-~])+$/,""),g=d+e.length,p=Q(2,"URL",g,0,0);"."===e[3]&&(e="http://"+e);c=Q(1,"URL",d,0,1);c.b.url=e;J(c,p);d=Q(3,"v",d,g-d,1E3);I(c,d)})},r:":",p:/\bhttps?:(?:[^\s()\[\]\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65]|\([^\s()]*\)|\[\w*\])+/ig,q:5E4},BBCodes:{n:function(a,b){function c(){var l=Q(3,f.w||k,x,h-x,0);z(l,r);return l}function d(){var l=
Q(1,f.w||k,x,h-x,(""!==n?-10:0)||0);z(l,r);return l}function e(){q||(q=a.toUpperCase());var l="[/"+k+n+"]",t=q.indexOf(l,h);return 0>t?null:Q(2,f.w||k,t,l.length,0)}function g(){var l=h;for(r={};h<F;){var t=a[h];if(-1<" \n\t".indexOf(t))++h;else{if(-1<"/]".indexOf(t))break;var D=/^[-\w]*/.exec(a.substring(h,h+100))[0].length;if(D){t=a.substring(h,h+D).toLowerCase();h+=D;if(h>=F)throw"";if("="!==a[h])continue}else if("="===t&&h===l)t=f.F||k.toLowerCase();else throw"";if(++h>=F)throw"";D=r;if('"'===
a[h]||"'"===a[h]){var B=a[h];var sa=h+1;do{h=a.indexOf(B,h+1);if(0>h)throw"";for(var ta=1;"\\"===a[h-ta];)++ta}while(0===ta%2);B=a.substring(sa,h);-1<B.indexOf("\\")&&(B=B.replace(/\\([\\'"])/g,"$1"));++h}else B=/(?:[^\s\]]|[ \t](?!\s*(?:[-\w]+=|\/?\])))*/.exec(a.substring(h))[0],h+=B.length;D[t]=B}}}function p(){n="";":"===a[h]&&(n=/^:\d*/.exec(a.substring(h))[0],h+=n.length);if("/"===a[x+1])"]"===a[h]&&""===n&&(++h,Q(2,f.w||k,x,h-x,0));else{g();if(f.L)for(var l in f.L)l in r||(r[l]=f.L[l]);if("]"===
a[h]){++h;var t=[];f.D&&f.D.forEach(function(B){B in r||t.push(B)});var D=(l=n||f.Z)||t.length?e():null;if(D)t.forEach(function(B){r[B]=a.substring(h,D.d)});else if(l)return;l=d();D&&J(l,D)}else"/]"===a.substring(h,h+2)&&(h+=2,c())}}var m={"*":{w:"LI"},B:[],C:[],CODE:{F:"lang"},COLOR:[],FLOAT:[],HR:[],I:[],LIST:{F:"type"},MEDIA:{D:["url"]},QUOTE:{F:"author"},S:[],U:[],URL:{D:["url"]}},r,f,k,n,h,x,F=a.length,q="";b.forEach(function(l){k=l[1][0].toUpperCase();if(k in m){f=m[k];x=l[0][1];h=x+l[0][0].length;
try{p()}catch(t){}}})},r:"[",p:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,q:5E4},Censor:{n:function(a,b){var c=[[/^apple$/i,"banana"]];b.forEach(function(d){var e=/^\W/.test(d[0][0])?1:0,g=d[0][0].substring(e);d=Q(3,"CENSOR",d[0][1]+e,g.length,0);if(c)for(e=0;e<c.length;++e){var p=c[e][1];if(c[e][0].test(g)){d.b["with"]=p;break}}})},p:/(?:^|\W)apple(?!\w)/gi,q:5E4},Emoticons:{n:function(a,b){b.forEach(function(c){Q(3,"E",c[0][1],c[0][0].length,0)})},r:":)",p:/:\)/g,q:5E4},FancyPants:{n:function(a){function b(q,
l,t,D){q=Q(3,F,q,l,D||0);q.b[n]=t;return q}function c(){if(!(0>a.indexOf("...")&&0>a.indexOf("--")))for(var q={"--":"\u2013","---":"\u2014","...":"\u2026"},l=/---?|\.\.\./g,t;t=l.exec(a);)b(t.index,t[0].length,q[t[0]])}function d(){if(!(0>a.indexOf("/")))for(var q={"0/3":"\u2189","1/10":"\u2152","1/2":"\u00bd","1/3":"\u2153","1/4":"\u00bc","1/5":"\u2155","1/6":"\u2159","1/7":"\u2150","1/8":"\u215b","1/9":"\u2151","2/3":"\u2154","2/5":"\u2156","3/4":"\u00be","3/5":"\u2157","3/8":"\u215c","4/5":"\u2158",
"5/6":"\u215a","5/8":"\u215d","7/8":"\u215e"},l,t=/\b(?:0\/3|1\/(?:[2-9]|10)|2\/[35]|3\/[458]|4\/5|5\/[68]|7\/8)\b/g;l=t.exec(a);)b(l.index,l[0].length,q[l[0]])}function e(){if(!(0>a.indexOf("<<")))for(var q,l=/<<( ?)(?! )[^\n<>]*?[^\n <>]\1>>(?!>)/g;q=l.exec(a);){var t=b(q.index,2,"\u00ab");q=b(q.index+q[0].length-2,2,"\u00bb");I(t,q)}}function g(){if(!(0>a.indexOf("!=")&&0>a.indexOf("=/=")))for(var q,l=/\b (?:!|=\/)=(?= \b)/g;q=l.exec(a);)b(q.index+1,q[0].length-1,"\u2260")}function p(q,l,t,D){for(var B;B=
l.exec(a);){var sa=b(B.index+B[0].indexOf(q),1,t);B=b(B.index+B[0].length-1,1,D);I(sa,B)}}function m(){if(h)for(var q,l=/[a-z]'|(?:^|\s)'(?=[a-z]|[0-9]{2})/gi;q=l.exec(a);)b(q.index+q[0].indexOf("'"),1,"\u2019",10)}function r(){if(h||x||!(0>a.indexOf("x")))for(var q={"'s":"\u2019","'":"\u2032","' ":"\u2032","'x":"\u2032",'"':"\u2033",'" ':"\u2033",'"x':"\u2033"},l,t=/[0-9](?:'s|["']? ?x(?= ?[0-9])|["'])/g;l=t.exec(a);){"x"===l[0][l[0].length-1]&&b(l.index+l[0].length-1,1,"\u00d7");var D=l[0].substring(1,
3);q[D]&&b(l.index+1,1,q[D])}}function f(){if(!(0>a.indexOf("(")))for(var q={"(c)":"\u00a9","(r)":"\u00ae","(tm)":"\u2122"},l=/\((?:c|r|tm)\)/gi,t;t=l.exec(a);)b(t.index,t[0].length,q[t[0].toLowerCase()])}var k={N:"char",w:"FP"},n=k.N,h=0<=a.indexOf("'"),x=0<=a.indexOf('"'),F=k.w;"undefined"===typeof k.X&&(m(),h&&p("'",/(?:^|\W)'.+?'(?!\w)/g,"\u2018","\u2019"),x&&p('"',/(?:^|\W)".+?"(?!\w)/g,"\u201c","\u201d"));"undefined"===typeof k.T&&e();"undefined"===typeof k.V&&(g(),r(),d());"undefined"===typeof k.W&&
c();"undefined"===typeof k.Y&&f()}},HTMLElements:{n:function(a,b){var c={Q:"html"};b.forEach(function(d){var e="/"===a[d[0][1]+1],g=d[0][1],p=d[0][0].length,m=d[2-e][0].toLowerCase();m=c.z&&c.z[m]&&c.z[m][""]?c.z[m][""]:c.Q+":"+m;if(e)Q(2,m,g,p,0);else for(e=/(<\S+|['"\s])\/>$/.test(d[0][0])?Ia(m,g,p,g+p,0):Q(1,m,g,p,0),d=d[3][0],g=/([a-z][-a-z0-9]*)(?:\s*=\s*("[^"]*"|'[^']*'|[^\s"'=<>`]+))?/gi;m=g.exec(d);)p=m[1].toLowerCase(),m="undefined"!==typeof m[2]?m[2]:p,/^["']/.test(m)&&(m=m.substring(1,
m.length-1)),m=ya(m),e.b[p]=m})},r:"<",p:/<(?:\/([ab])|([ab])((?:\s+[a-z][-a-z0-9]*(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'=<>`]+))?)*)\s*\/?)\s*>/ig,q:5E4},HTMLEntities:{n:function(a,b){b.forEach(function(c){var d=c[0][0],e=ya(d);e===d||32>e.charCodeAt(0)||(Q(3,"HE",c[0][1],d.length,0).b["char"]=e)})},r:"&",p:/&(?:[a-z]+|#(?:[0-9]+|x[0-9a-f]+));/ig,q:5E4},MediaEmbed:{n:function(a,b){b.forEach(function(c){var d=c[0][0];Q(3,"MEDIA",c[0][1],d.length,-10).b.url=d})},r:"://",p:/\bhttps?:\/\/[^["'\s]+/ig,q:5E4},
Preg:{n:function(a){[["PREG_60D5AB76",/#([a-z0-9]+)/ig,0,["","tag"]]].forEach(function(b){var c=b[0],d=b[1];b=b[3];var e;for(d.lastIndex=0;e=d.exec(a);){var g=Q(3,c,e.index,e[0].length,-100);b.forEach(function(p,m){p&&"undefined"!==typeof e[m]&&(g.b[p]=e[m])})}})}}},S,C={"MediaEmbed.hosts":{"youtu.be":"youtube","youtube.com":"youtube"},"MediaEmbed.sites":{youtube:[[[/youtube\.com\/(?:watch.*?v=|shorts\/|v\/|attribution_link.*?v%3D)([-\w]+)/,fa],[/youtu\.be\/([-\w]+)/,fa],[/[#&?]t=(\d[\dhms]*)/,["",
"t"]],[/[&?]list=([-\w]+)/,["","list"]]],[]]},urlConfig:{M:/^https?$/i}},Ja={f:u,flags:32},T={B:G,C:{f:ba,b:{},g:1,c:A,h:10,e:{flags:66},j:5E3},CENSOR:{f:ba,b:{"with":v},g:4,c:A,h:10,e:{flags:3153},j:5E3},CODE:{f:ba,b:{lang:pa},g:2,c:A,h:10,e:{s:w,flags:4436,x:w},j:5E3},COLOR:{f:ca,b:{color:{c:[function(a){return E(a,/^(?:#(?:(?:[0-9a-f]{3}){1,2}|(?:[0-9a-f]{4}){1,2})|rgb\(\d{1,3}, *\d{1,3}, *\d{1,3}\)|rgba\(\d{1,3}, *\d{1,3}, *\d{1,3}, *\d*(?:\.\d+)?\)|[a-z]+)$/i)}],m:!0}},g:1,c:A,h:10,e:ha,j:5E3},
E:{f:da,b:{},g:1,c:A,h:10,e:ja,j:5E3},FLOAT:{f:u,b:{"float":{c:[function(a){return E(a,/^(?:left|none|right)$/i)}],m:!0}},g:2,c:A,h:10,e:qa,j:5E3},FP:ra,HE:ra,HR:{f:da,b:{},g:2,c:A,h:10,e:{s:w,flags:3349},j:5E3},I:G,LI:{f:u,b:{},g:0,c:A,h:10,e:{s:{B:1,C:1,COLOR:1,I:1,LI:1,PREG_60D5AB76:1,S:1,U:1,URL:1,"html:a":1,"html:b":1},flags:256,x:w},j:5E3},LIST:{f:[32577],b:{start:{c:[function(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],m:!1},type:{c:[function(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",
i:"lower-roman",1:"decimal"};return a in b?b[a]:a},function(a){return E(a,/^[- +,.0-9A-Za-z_]+$/)}],m:!1}},g:2,c:A,h:10,e:{s:w,H:["LI"],flags:3460,x:w},j:5E3},MEDIA:{f:[32574],b:{},g:6,c:[function(a){return function(b,c,d){function e(g,p,m){var r=!1;m.forEach(function(f){var k=f[1],n=f[0].exec(p);n&&(r=!0,k.forEach(function(h,x){""<n[x]&&""<h&&(g[h]=n[x])}))});return r}(function(g,p,m){y(g);if("url"in g.b){var r=g.b.url,f;a:{for(f=/^https?:\/\/([^\/]+)/.exec(r.toLowerCase())[1]||"";""<f;){if(p[f]){f=
p[f];break a}f=f.replace(/^[^.]*./,"")}f=""}if(m[f]){p={};e(p,r,m[f][0]);a:{for(var k in p){m=!1;break a}m=!0}if(!m){m=g.d;var n=g.u;n?(r=g.k,k=n.d,n=n.k):(r=0,k=g.d+g.k,n=0);g=Ia(f.toUpperCase(),m,r,k,n,g.v);z(g,p)}}}})(b,c,d)}(a,C["MediaEmbed.hosts"],C["MediaEmbed.sites"],C.cacheDir)}],h:10,e:{flags:513},j:5E3},PREG_60D5AB76:{f:ea,b:{tag:{c:[function(a){return E(a,/^[a-z0-9]+$/i)}],m:!0}},g:5,c:A,h:10,e:ia,j:5E3},QUOTE:{f:u,b:{author:v},g:2,c:A,h:10,e:qa,j:5E3},S:G,U:G,URL:{f:ea,b:{title:v,url:{c:oa,
m:!0}},g:3,c:A,h:10,e:ia,j:5E3},YOUTUBE:{f:[20504],b:{id:pa,list:v,t:{c:[function(a){var b=/^(?=\d)(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/.exec(a);return b?3600*(b[1]||0)+60*(b[2]||0)+(+b[3]||0):/^(?:0|[1-9]\d*)$/.test(a)?a:!1}],m:!1}},g:5,c:A,h:10,e:ja,j:5E3},"html:a":{f:ea,b:{href:{c:oa,m:!1},title:v},g:5,c:A,h:10,e:ia,j:5E3},"html:b":G},U,Ka,V,W,La=0,X;
function Ma(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");K={};Fa={};M=0;N=null;Ga=!1;Ha={};O=[];P="";S=0;U=[];Ka=!1;V=a;W=V.length;X=0;L=Ja;L.K=!1;++La;a=La;for(var b in R)if(!R[b].G)a:{var c=b,d=R[c];if(!(d.r&&0>V.indexOf(d.r))){var e=[];if("undefined"!==typeof d.p&&"undefined"!==typeof d.q){e=void 0;var g=d.p;d=d.q;g.lastIndex=0;for(var p=[],m=0;++m<=d&&(e=g.exec(V));){for(var r=e.index,f=[[e[0],r]],k=0;++k<e.length;){var n=e[k];void 0===n?f.push(["",-1]):(f.push([n,
V.indexOf(n,r)]),r+=n.length)}p.push(f)}e=p;if(!e.length)break a}(0,R[c].n)(V,e)}}Na();Y(W,0,!0);do b=P,P=P.replace(/<([^ />]+)[^>]*><\/\1>/g,"");while(P!==b);P=P.replace(/<\/i><i>/g,"");P=P.replace(/[\x00-\x08\x0B-\x1F]/g,"");P=P.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oa);c=Ga?"r":"t";b="<"+c;for(var h in Ha)b+=" xmlns:"+h+'="urn:s9e:TextFormatter:'+h+'"';P=b+">"+P+"</"+c+">";if(La!==a)throw"The parser has been reset during execution";return P}
function Oa(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function Pa(a){Ga=!0;var b=a.name,c=a.d,d=a.k,e=a.flags,g=0,p=0;e&256&&(g=1,p=a.l&2?2:1);Y(c,g,!(a.l&1&&!(e&4)));e=d?Aa(V.substring(c,c+d)):"";if(a.l&1){g=b.indexOf(":");0<g&&(Ha[b.substring(0,g)]=0);P+="<"+b;var m=Da(a);g=[];for(var r in m)g.push(r);g.sort(function(f,k){return f>k?1:-1});g.forEach(function(f){P+=" "+f+'="'+za(m[f].toString()).replace(/\n/g,"&#10;")+'"'});P=3===a.l?d?P+(">"+e+"</"+b+">"):P+"/>":d?P+("><s>"+e+"</s>"):P+">"}else d&&(P+="<e>"+e+"</e>"),P+="</"+b+">";for(X=S=c+d;p&&X<
W&&"\n"===V[X];)--p,++X}function Y(a,b,c){c&&(L.flags&8?b=-1:c=!1);S>=a&&c&&Qa();if(X>S){var d=Math.min(a,X);P+=V.substring(S,d);S=d;S>=a&&c&&Qa()}if(L.flags&128)b=V.substring(S,a),/^[ \n\t]*$/.test(b)||(b="<i>"+Aa(b)+"</i>"),P+=b,S=a,c&&Qa();else{var e=a;for(d=0;b&&--e>=S;){var g=V[e];if(" "!==g&&"\n"!==g&&"\t"!==g)break;"\n"===g&&--b;++d}a-=d;a>S&&(b=Aa(V.substring(S,a)),32===(L.flags&2096)&&(b=b.replace(/\n/g,"<br/>\n")),P+=b);c&&Qa();d&&(P+=V.substring(a,a+d));S=a+d}}
function Ra(a){var b=a.d;a=a.k;var c=V.substring(b,b+a);Y(b,0,!1);P+="<i>"+Aa(c)+"</i>";Ga=!0;S=b+a}function Qa(){L.K&&(P+="</p>",L.K=!1)}function Sa(a){a=T[a.name];if(a.e.H){var b=-1E3,c=V.substring(S),d=S+c.length-c.replace(/^[ \n\r\t]+/,"").length;a.e.H.forEach(function(e){var g=++b;Q(1,e,d,0,g||0)})}}function Ta(a,b,c){var d=a.name;(N.flags|a.flags)&256&&(b=Ua(b));b=Q(2,d,b,0,c||0);J(b,a)}function Ua(a){for(;a>S&&-1<" \n\t".indexOf(V[a-1]);)--a;return a}
function Na(){if(U.length){for(var a in T)K[a]=0,Fa[a]=0;do{for(;U.length;)Ka||Va(),N=U.pop(),Wa();O.forEach(function(b){Ta(b,W)})}while(U.length)}}
function Wa(){L.flags&64&&!Ea(N,O[O.length-1])&&!(-1<"br i pb v".indexOf(N.name))&&y(N);var a=N.d,b=N.k;if(S>a&&!N.o){var c;if((c=N.y)&&0<=O.indexOf(c)){J(Q(2,c.name,S,Math.max(0,a+b-S),0),c);return}if("i"===N.name&&(a=a+b-S,0<a)){Q(3,"i",S,Math.min(a,W-S),0);return}y(N)}if(!N.o)if("i"===N.name)Ra(N);else if("br"===N.name)L.flags&1024||(Y(N.d,0,!1),P+="<br/>");else if("pb"===N.name)Y(N.d,0,!0);else if("v"===N.name)a=L.flags,L.flags=N.flags,Y(N.d+N.k,0,!1),L.flags=a;else if(N.l&1)if(a=N,b=a.name,c=
T[b],Fa[b]>=c.j)y(a);else{for(var d=a,e=T[d.name],g=0;g<e.c.length&&!d.o;++g)e.c[g](d,e);if(!(d=a.o)&&(d=1E4>M)){a:{d=a;if(O.length){g=d.name;var p=T[g];if(p.e.x){e=O[O.length-1];var m=e.name;if(p.e.x[m]){if(m!==g&&1E4>M){g=d.d+d.k;U.length?(p=U[U.length-1],p=p.d):p=W+1;for(;g<p&&-1<" \n\t".indexOf(V[g]);)++g;g=Xa(e,g);I(d,g)}U.push(d);Ta(e,d.d,d.v-1);M+=4;d=!0;break a}}}d=!1}if(!d)a:{d=a;if(O.length&&(e=T[d.name],e.e.s&&(g=O[O.length-1],e.e.s[g.name]))){++M;U.push(d);Ta(g,d.d,d.v-1);d=!0;break a}d=
!1}d=d||!1}d||(K[b]>=c.h?y(a):(c=T[b].g,L.f[c>>3]&1<<(c&7)?(!(a.flags&1&&3!==a.l)||a.u||U.length&&Ea(U[U.length-1],a)||(b=new H(3,b,a.d,a.k),z(b,Da(a)),b.flags=a.flags,a=b),a.flags&4096&&"\n"===V[a.d+a.k]&&(b=a.d+a.k,Q(3,"i",b,Math.min(1,W-b),0)),Pa(a),Ya(a),Sa(a)):y(a)))}else Za()}
function Za(){var a=N;if(K[a.name]){for(var b=[],c=O.length;0<=--c;){var d=O[c];if(Ea(a,d))break;b.push(d);++M}if(!(0>c)){var e=a.flags;b.forEach(function(k){e|=k.flags});var g=e&256,p=1E4>M,m=[];b.forEach(function(k){var n=k.name;p&&(k.flags&2?m.push(k):p=!1);var h=a.d;g&&(h=Ua(h));n=new H(2,n,h,0);n.flags=k.flags;Pa(n);$a()});Pa(a);$a();if(b.length&&1E4>M){d=S;for(c=U.length;0<=--c&&1E4>++M;){var r=U[c];if(r.d>d||r.l&1)break;for(var f=b.length;0<=--f&&1E4>++M;)if(Ea(r,b[f])){b.splice(f,1);m[f]&&
m.splice(f,1);d=Math.max(d,r.d+r.k);break}}d>S&&Ra(new H(3,"i",S,d-S))}m.forEach(function(k){var n=Xa(k,S);(k=k.u)&&J(n,k)})}}}function $a(){var a=O.pop();--K[a.name];L=L.P}function Ya(a){var b=a.name,c=a.flags,d=T[b];++Fa[b];if(3!==a.l){var e=[];L.f.forEach(function(p,m){c&512||(p=p&65280|p>>8);e.push(d.f[m]&p)});var g=c|L.flags&32;g&16&&(g&=-33);++K[b];O.push(a);L={P:L};L.f=e;L.flags=g}}function Xa(a,b){b=Q(a.l,a.name,b,0,a.v);z(b,Da(a));return b}
function Q(a,b,c,d,e){a=new H(a,b,c,d,e||0);T[b]&&(a.flags=T[b].e.flags);if(!(T[b]||-1<"br i pb v".indexOf(a.name))||0>d||0>c||c+d>W||/[\uDC00-\uDFFF]/.test(V.substring(c,c+1)+V.substring(c+d,c+d+1)))y(a);else if(T[b]&&T[b].G)y(a);else if(Ka){b=U.length;for(c=ab(a);0<b&&c>ab(U[b-1]);)U[b]=U[b-1],--b;U[b]=a}else U.push(a);return a}function Ia(a,b,c,d,e,g){d=Q(2,a,d,e,-g||0);a=Q(1,a,b,c,g||0);J(a,d);return a}
function Va(){for(var a={},b=[],c=U.length;0<=--c;){var d=U[c],e=ab(d,c);b.push(e);a[e]=d}b.sort();c=b.length;for(U=[];0<=--c;)U.push(a[b[c]]);Ka=!0}function ab(a,b){var c=0<=a.v,d=a.v;c||(d+=1073741824);var e=0<a.k,g;e?g=W-a.k:g={2:0,3:1,1:2}[a.l];return bb(a.d)+ +c+bb(d)+ +e+bb(g)+bb(b||0)}function bb(a){a=a.toString(16);return"        ".substring(a.length)+a}var cb="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function db(a){if(cb){var b=new ActiveXObject("MSXML2.FreeThreadedDOMDocument.6.0");b.async=!1;b.validateOnParse=!1;b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");if(!b)throw"Cannot parse "+a;return b}function eb(a,b){if(cb){var c=b.createElement("div");b=b.createDocumentFragment();Z.input=db(a);Z.transform();for(c.innerHTML=Z.output;c.firstChild;)b.appendChild(c.firstChild);return b}return Z.transformToFragment(db(a),b)}var Z,fb=db(ua);
if(cb){var gb=new ActiveXObject("MSXML2.XSLTemplate.6.0");gb.stylesheet=fb;Z=gb.createProcessor()}else Z=new XSLTProcessor,Z.importStylesheet(fb);window.s9e||(window.s9e={});
window.s9e.TextFormatter={disablePlugin:function(a){R[a]&&(R[a].G=!0)},enablePlugin:function(a){R[a]&&(R[a].G=!1)},preview:function(a,b){function c(f,k){k=f.getAttribute("data-s9e-livepreview-on"+k);va[k]||(va[k]=new Function(k));va[k].call(f)}function d(f,k){f instanceof Element&&f.hasAttribute("data-s9e-livepreview-on"+k)&&c(f,k);f=f.querySelectorAll("[data-s9e-livepreview-on"+k+"]");for(var n=f.length;0<=--n;)c(f[n],k)}function e(f,k){var n=f.childNodes;k=k.childNodes;for(var h=n.length,x=k.length,
F,q,l=0,t=0;l<h&&l<x;){F=n[l];q=k[l];if(!g(F,q))break;++l}for(var D=Math.min(h-l,x-l);t<D;){F=n[h-(t+1)];q=k[x-(t+1)];if(!g(F,q))break;++t}for(h-=t;--h>=l;)f.removeChild(n[h]),r=f;n=x-t;if(!(l>=n)){x=m.createDocumentFragment();h=l;do q=k[h],q instanceof Element&&d(q,"update"),r=x.appendChild(q);while(h<--n);t?f.insertBefore(x,f.childNodes[l]):f.appendChild(x)}}function g(f,k){if(f.nodeName!==k.nodeName||f.nodeType!==k.nodeType)return!1;if(f instanceof HTMLElement&&k instanceof HTMLElement){var n;
if(n=!f.isEqualNode(k))n=!(f.hasAttribute("data-s9e-livepreview-hash")&&k.hasAttribute("data-s9e-livepreview-hash")&&f.getAttribute("data-s9e-livepreview-hash")===k.getAttribute("data-s9e-livepreview-hash"));if(n){k.hasAttribute("data-s9e-livepreview-onupdate")&&c(k,"update");var h=f.attributes;n=k.attributes;for(var x=n.length,F=h.length;0<=--F;){var q=h[F],l=q.namespaceURI;q=q.name;k.hasAttributeNS(l,q)||(f.removeAttributeNS(l,q),r=f)}for(F=x;0<=--F;)h=n[F],l=h.namespaceURI,q=h.name,h=h.value,h!==
f.getAttributeNS(l,q)&&(f.setAttributeNS(l,q,h),r=f);e(f,k)}}else 3!==f.nodeType&&8!==f.nodeType||f.nodeValue===k.nodeValue||(f.nodeValue=k.nodeValue,r=f);return!0}function p(f){for(var k=f.length,n=0,h=0;0<=--k;)n=(n+f.charCodeAt(k))%65535,h=(n+h)%65535;return h<<16|n}var m=b.ownerDocument;if(!m)throw"Target does not have a ownerDocument";a=eb(Ma(a).replace(/<[eis]>[^<]*<\/[eis]>/g,""),m);var r=b;"undefined"!==typeof window&&"chrome"in window&&a.querySelectorAll("script").forEach(function(f){var k=
document.createElement("script");var n=f.attributes;var h="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];n=h?h.call(n):{next:aa(n)};for(h=n.next();!h.done;h=n.next())h=h.value,k.setAttribute(h.name,h.value);k.textContent=f.textContent;f.parentNode.replaceChild(k,f)});(function(f){f=f.querySelectorAll("[data-s9e-livepreview-hash]");for(var k=f.length;0<=--k;)f[k].setAttribute("data-s9e-livepreview-hash",p(f[k].outerHTML))})(a);d(a,"render");e(b,a);return r}};})();
		var text,
			textareaEl = document.getElementsByTagName('textarea')[0],
			previewEl = document.getElementById('preview');

		setInterval(function()
		{
			if (textareaEl.value === text)
			{
				return;
			}

			text = textareaEl.value;
			s9e.TextFormatter.preview(text, previewEl);
		}, 20);

		function toggle(el)
		{
			(el.checked) ? s9e.TextFormatter.enablePlugin(el.id)
			             : s9e.TextFormatter.disablePlugin(el.id);

			text = '';
		}
	</script>
	<script async src="https://cdnjs.cloudflare.com/ajax/libs/punycode/1.4.1/punycode.min.js"></script>
</body>
</html>