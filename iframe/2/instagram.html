<!DOCTYPE html>
<title>Content from Instagram</title>
<!-- Limit the width to 99vw because Mobile Safari seems to miscalculate a 100% layout -->
<!-- Set iframes' min-height because Instagram sets it to 0px if the post was removed -->
<style>body,iframe{min-height:150px;margin:auto;width:99vw}</style>
<blockquote class="instagram-media" data-instgrm-captioned><a>Loading Instagram...</a></blockquote>
<script>
document.querySelector('a').href = '//instagram.com/p/' + location.hash.replace(/\W/g, '');

onmessage = function (e)
{
	if (e.data !== 's9e:init')
	{
		return;
	}
	e.stopImmediatePropagation();

	let delay     = 48,
		height    = 90,
		port      = e.ports[0],
		timeoutId = 0;
	function checkHeight()
	{
		if (height >= (height = document.documentElement.getBoundingClientRect().height))
		{
			delay += 12;
		}
		else
		{
			port.postMessage(height);
		}
		if (delay < 1000)
		{
			schedule();
		}
	}
	function schedule()
	{
		clearTimeout(timeoutId);
		timeoutId = setTimeout(checkHeight, delay);
	}
	onclick = onresize = function ()
	{
		delay = 48;
		schedule();
	};
	schedule();
};
</script>
<script src="//platform.instagram.com/en_US/embeds.js" onerror="document.querySelector('a').innerHTML='Cannot load Instagram. Disable any adblocker or tracking protection and try again.'"></script>