<!DOCTYPE html>
<title>Content from Twitter</title>
<link rel="preconnect" crossorigin="" href="//cdn.syndication.twimg.com">
<link rel="preconnect" crossorigin="" href="//syndication.twitter.com">
<style>a,body,iframe{border:0;height:100vh;margin:0;width:100%}</style>
<body>
<script>
(function (body, hash)
{
	let height,
		id = hash.replace(/\D/g, ''),
		port,
		storage = {},
		storageKey = 'tweet-' + id,
		theme = /d/.test(hash) ? 'dark' : 'light';

	try
	{
		storage = window.localStorage;
		height  = +storage[storageKey];
	}
	catch (e)
	{
	}

	function postHeight()
	{
		if (height && port)
		{
			port.postMessage(height);
		}
	}

	function setHeight(newHeight)
	{
		height = newHeight;
		try
		{
			storage[storageKey] = height;
		}
		catch (e)
		{
		}
		postHeight();
	}

	setTimeout(function()
	{
		body.innerHTML = '<iframe allowfullscreen="" src="//platform.twitter.com/embed/Tweet.html?dnt=true&embedId=x&frame=false&hideCard=false&hideThread=false&id=' + id + '&lang=' + navigator.language.substr(0, 2) + '&theme=' + theme + '&widgetsVersion=82e1070%3A1619632193066&width=550px" scrolling=no></iframe><a href="//twitter.com/user/status/' + id + '" target="_blank" style="background:url(//pbs.twimg.com/favicon.ico) 97.5% 10px / 30px no-repeat;border:solid 1px #cdd;border-radius:12px;box-sizing:border-box;display:block;line-height:99vh;position:absolute;text-align:center;top:0">Loading tweet...</a>';
	}, 0);

	onmessage = function(e)
	{
		e.stopImmediatePropagation();

		const data = e.data['twttr.embed'];
		if (data)
		{
			const method = data.method.substr(14),
			      a      = body.lastChild;
			if (method === 'resize')
			{
				setHeight(data.params[0].height);
				a.style.display = 'none';
			}
			else if (method === 'no_results')
			{
				a.innerHTML = 'This tweet is unavailable.';
				setHeight(50);
			}
		}
		else if (e.data === 's9e:init' && !port)
		{
			port = e.ports[0];
			postHeight();
		}
	};
})(document.body, location.hash);
</script>