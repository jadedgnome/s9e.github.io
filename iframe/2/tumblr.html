<!DOCTYPE html>
<title>Content from Tumblr</title>
<body style="margin:0"><div class="tumblr-post"></div>
<script>
document.body.firstChild.setAttribute('data-href', 'https://embed.tumblr.com/embed/post/' + location.hash.substr(1));

onmessage = function (e)
{
	if (e.data !== 's9e:init')
	{
		return;
	}
	e.stopImmediatePropagation();

	let delay     = 50,
		height    = innerHeight,
		port      = e.ports[0],
		timeoutId = 0;
	function checkHeight()
	{
		if (height >= (height = document.documentElement.getBoundingClientRect().height))
		{
			delay += 10;
		}
		else
		{
			port.postMessage(height);
			delay = 50;
		}
		if (delay < 1000)
		{
			timeoutId = setTimeout(checkHeight, delay);
		}
	}
	checkHeight();
	onfocus = onclick = function ()
	{
		delay = 50;
		clearTimeout(timeoutId);
		checkHeight();
	};
};
</script>
<script src="//assets.tumblr.com/post.js"></script>