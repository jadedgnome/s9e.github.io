<!DOCTYPE html>
<title>Content from Bluesky</title>
<style>body{margin:0}iframe{border:0;height:100vh;width:100%}</style>
<script>
((window) =>
{
	window.onload = () =>
	{
		let iframe = /** @type {!HTMLIFrameElement} */ (document.createElement('iframe')),
			port;
		window.onmessage = (e) =>
		{
			e.stopImmediatePropagation();
			if (e.data === 's9e:init' && !port)
			{
				port = e.ports[0];

				const m = /^#at:\/\/[\w.:]+\/[\w.:]+\/[\w.:]+$/.exec(window.location);
				if (m)
				{
					iframe.scrolling = 'no';
					iframe.src       = '//embed.bsky.app/embed/' + m[0];
					document.body.append(iframe);
				}
			}
			else if (e.source === iframe.contentWindow)
			{
				const m = /"height":(\d+)/.exec(e.data);
				if (m)
				{
					port.postMessage(+m[1]);
				}
			}
		};
	};
})(window);
</script>