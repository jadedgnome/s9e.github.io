<!DOCTYPE html>
<title>Content from Reddit</title>
<link rel="preconnect" crossorigin="" href="//www.redditstatic.com">
<body style="margin:0">
<script>
(function (hash)
{
	let m, regexp = /#((?:depth|show\w+|theme)=\w+)/g,
		html = '<iframe scrolling="no" src="//www.redditmedia.com/r/' + hash.replace(/#.*/, '').replace(/[^\w/]/g, '') + '?embed=true&depth=1';

	while (m = regexp.exec(hash))
	{
		html += '&' + m[1];
	}
	html += '" style="border:0;height:100vh;width:100%"></iframe>';

	document.body.innerHTML = html;

	let height, port;
	onmessage = function (e)
	{
		let m = /resize.embed","data":(\d+)/.exec(e.data);
		if (m)
		{
			height = m[1];
		}
		else if (e.data === 's9e:init')
		{
			port = e.ports[0];
		}

		if (height && port)
		{
			port.postMessage(height);
		}
	};
})(location.hash.substring(1));
</script>